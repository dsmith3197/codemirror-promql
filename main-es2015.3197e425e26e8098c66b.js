(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+9gL":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("ZQd5");e.HybridLint=class{promQL(){return t=>{const e=new r.Parser(t.state);return e.analyze(),e.getDiagnostics()}}}},0:function(t,e,n){t.exports=n("zUnb")},"02xK":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.completeAssociation=new Map,this.labelValues=new Map,this.labelNames=[]}setAssociation(t,e){let n=this.completeAssociation.get(t);n||(n=new Map,this.completeAssociation.set(t,n));for(const[r,i]of Object.entries(e)){if("__name__"===r)continue;let t=n.get(r);t&&0!==t.length?t.includes(i)||t.push(i):t=[i],n.set(r,t)}}setLabelNames(t){this.labelNames=t}getLabelNames(t){if(!t||0===t.length)return this.labelNames;const e=this.completeAssociation.get(t);return e?Array.from(e.keys()):[]}setLabelValues(t,e){this.labelValues.set(t,e)}getLabelValues(t,e){if(!e||0===e.length)return this.labelValues.get(t)||[];const n=this.completeAssociation.get(e);return n&&n.get(t)||[]}}const i=400,s=422,o=503;e.HTTPPrometheusClient=class{constructor(t,e,n,i){this.lookbackInterval=432e5,this.fetchFn=(t,e)=>fetch(t,e),this.cache=new r,this.url=t,this.errorHandler=e,n&&(this.lookbackInterval=n),i&&(this.fetchFn=i)}fetchAPI(t){return this.fetchFn(this.url+t).then(t=>{if(!t.ok&&![i,s,o].includes(t.status))throw new Error(t.statusText);return t}).then(t=>t.json()).then(t=>{if("error"===t.status)throw new Error(void 0!==t.error?t.error:'missing "error" field in response JSON');if(void 0===t.data)throw new Error('missing "data" field in response JSON');return t.data})}labelNames(t){if(this.cache.getLabelNames(t)&&this.cache.getLabelNames(t).length>0)return Promise.resolve(this.cache.getLabelNames(t));const e=new Date,n=new Date(e.getTime()-this.lookbackInterval);if(!t||0===t.length){const t=new URLSearchParams({start:n.toISOString(),end:e.toISOString()});return this.fetchAPI(`/api/v1/labels?${t}`).then(t=>(this.cache.setLabelNames(t),t)).catch(t=>(this.errorHandler&&this.errorHandler(t),[]))}return this.series(t,n,e).then(e=>this.cache.getLabelNames(t))}labelValues(t,e){if(this.cache.getLabelValues(t,e)&&this.cache.getLabelValues(t,e).length>0)return Promise.resolve(this.cache.getLabelValues(t,e));const n=new Date,r=new Date(n.getTime()-this.lookbackInterval);if(!e||0===e.length){const e=new URLSearchParams({start:r.toISOString(),end:n.toISOString()});return this.fetchAPI(`${"/api/v1/label/:name/values".replace(/:name/gi,t)}?${e}`).then(e=>(this.cache.setLabelValues(t,e),e)).catch(t=>(this.errorHandler&&this.errorHandler(t),[]))}return this.series(e,r,n).then(n=>this.cache.getLabelValues(t,e))}series(t,e,n){const r=new URLSearchParams({start:e.toISOString(),end:n.toISOString(),"match[]":t});return this.fetchAPI(`/api/v1/series?${r}`).then(e=>(e.forEach(e=>{this.cache.setAssociation(t,e)}),e)).catch(t=>(this.errorHandler&&this.errorHandler(t),[]))}}},"3Yt4":function(t,e,n){"use strict";n.r(e),n.d(e,"Range",(function(){return s.a})),n.d(e,"BidiSpan",(function(){return At})),n.d(e,"BlockInfo",(function(){return $t})),n.d(e,"BlockType",(function(){return et})),n.d(e,"Decoration",(function(){return nt})),n.d(e,"Direction",(function(){return xt})),n.d(e,"EditorView",(function(){return an})),n.d(e,"PluginField",(function(){return re})),n.d(e,"ViewPlugin",(function(){return oe})),n.d(e,"ViewUpdate",(function(){return ge})),n.d(e,"WidgetType",(function(){return tt})),n.d(e,"__test",(function(){return Hn})),n.d(e,"highlightSpecialChars",(function(){return Rn})),n.d(e,"indentOnInput",(function(){return Fn})),n.d(e,"keymap",(function(){return wn})),n.d(e,"logException",(function(){return ee})),n.d(e,"multipleSelections",(function(){return Cn})),n.d(e,"runScopeHandlers",(function(){return bn})),n.d(e,"themeClass",(function(){return pt}));for(var r=n("dC2d"),i=n("rknV"),s=n("jvbj"),o=n("euHR"),l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},a={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},c="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),h="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),u="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),d="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),f="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=c&&(d||+c[1]<57)||u&&d,g=0;g<10;g++)l[48+g]=l[96+g]=String(g);for(g=1;g<=24;g++)l[g+111]="F"+g;for(g=65;g<=90;g++)l[g]=String.fromCharCode(g+32),a[g]=String.fromCharCode(g);for(var m in l)a.hasOwnProperty(m)||(a[m]=l[m]);let[v,y]="undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}];const w=/Edge\/(\d+)/.exec(v.userAgent),b=/MSIE \d/.test(v.userAgent),O=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(v.userAgent),x=!!(b||O||w),S=!x&&/gecko\/(\d+)/i.test(v.userAgent),k=!x&&/Chrome\/(\d+)/.exec(v.userAgent),C="webkitFontSmoothing"in y.documentElement.style;var _={mac:/Mac/.test(v.platform),ie:x,ie_version:b?y.documentMode||6:O?+O[1]:w?+w[1]:0,gecko:S,gecko_version:S?+(/Firefox\/(\d+)/.exec(v.userAgent)||[0,0])[1]:0,chrome:!!k,chrome_version:k?+k[1]:0,ios:!x&&/AppleWebKit/.test(v.userAgent)&&/Mobile\/\w+/.test(v.userAgent),android:/Android\b/.test(v.userAgent),webkit:C,safari:/Apple Computer/.test(v.vendor),webkit_version:C?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=y.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function T(t){return t.getSelection?t.getSelection():document.getSelection()}function P(t,e){if(!e.anchorNode)return!1;try{return t.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)}catch(n){return!1}}function A(t){if(3==t.nodeType){let e=document.createRange();return e.setEnd(t,t.nodeValue.length),e.setStart(t,0),e.getClientRects()}return 1==t.nodeType?t.getClientRects():[]}function E(t,e,n,r){return!!n&&(D(t,e,n,r,-1)||D(t,e,n,r,1))}function M(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function D(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:I(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=M(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;t=t.childNodes[e+(i<0?-1:0)],e=i<0?I(t):0}}}function I(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Q(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function R(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}class L{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}}let N=null;function $(t){if(t.setActive)return t.setActive();if(N)return t.focus(N);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==N?{get preventScroll(){return N={preventScroll:!0},!0}}:void 0),!N){N=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],i=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}class V{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new V(t.parentNode,M(t),e)}static after(t,e){return new V(t.parentNode,M(t)+1,e)}}const j=[];class F{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(2&this.dirty){let e=this.dom,n=null;for(let i of this.children){if(i.dirty){let r=n?n.nextSibling:e.firstChild;!r||i.dom||F.get(r)||i.reuseDOM(r),i.sync(t),i.dirty=0}t&&t.node==e&&n!=i.dom&&(t.written=!0),B(e,n,i.dom),n=i.dom}let r=n?n.nextSibling:e.firstChild;for(r&&t&&t.node==e&&(t.written=!0);r;)r=H(r)}else if(1&this.dirty)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){return!1}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let r=0==I(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==r&&e.firstChild!=e.lastChild&&(r=t==e.firstChild?-1:1),t=e}n=r<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!F.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,i=0;;r++){let t=this.children[r];if(t.dom==n)return i;i+=t.length+t.breakAfter}}domBoundsAround(t,e,n=0){let r=-1,i=-1,s=-1,o=-1;for(let l=0,a=n;l<this.children.length;l++){let n=this.children[l],c=a+n.length;if(a<t&&c>e)return n.domBoundsAround(t,e,a);if(c>=t&&-1==r&&(r=l,i=a),c>=e&&-1==s){s=l,o=c;break}a=c+n.breakAfter}return{from:i,to:o,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length-1?this.children[s+1].dom:null}}markDirty(t=!1){2&this.dirty||(this.dirty|=2,this.markParentsDirty(t))}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=j){this.markDirty();for(let r=t;r<e;r++)this.children[r].parent=null;this.children.splice(t,e-t,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new z(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}}function H(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}function B(t,e,n){let r=e?e.nextSibling:t.firstChild;if(n.parentNode==t)for(;r!=n;)r=H(r);else t.insertBefore(n,r)}F.prototype.breakAfter=0;class z{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function q(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function U(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||t[i]!==e[i])return!1;return!0}function W(t,e,n){if(e)for(let r in e)n&&r in n||t.removeAttribute(r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(r,n[r])}const X=[];class G extends F{match(t){return!1}get children(){return X}getSide(){return 0}}class Z extends G{constructor(t,e,n,r){super(),this.text=t,this.tagName=e,this.attrs=r,this.textDOM=null,this.class=n}get length(){return this.text.length}createDOM(t){let e=this.tagName||(this.attrs||this.class?"span":null);if(this.textDOM=t||document.createTextNode(this.text),e){let t=document.createElement(e);if(t.appendChild(this.textDOM),this.class&&(t.className=this.class),this.attrs)for(let e in this.attrs)t.setAttribute(e,this.attrs[e]);this.setDOM(t)}else this.setDOM(this.textDOM)}sync(t){if(this.dom||this.createDOM(),this.textDOM.nodeValue!=this.text){t&&t.node==this.textDOM&&(t.written=!0),this.textDOM.nodeValue=this.text;let e=this.dom;if(this.textDOM!=e&&(this.dom.firstChild!=this.textDOM||e.lastChild!=this.textDOM)){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(this.textDOM)}}}reuseDOM(t){return 3==t.nodeType&&(this.createDOM(t),!0)}merge(t,e=this.length,n=null){return!(n&&(!(n instanceof Z&&n.tagName==this.tagName&&n.class==this.class&&U(n.attrs,this.attrs))||this.length-(e-t)+n.length>256)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}slice(t,e=this.length){return new Z(this.text.slice(t,e),this.tagName,this.class,this.attrs)}localPosFromDOM(t,e){return t==this.textDOM?e:e?this.text.length:0}domAtPos(t){return new V(this.textDOM,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return Y(this.textDOM,t,e,this.length)}}function Y(t,e,n,r){let i=e,s=e,o=0;0==e&&n<0||e==r&&n>=0?_.chrome||_.gecko||(e?(i--,o=1):(s++,o=-1)):n<0?i--:s++;let l=document.createRange();l.setEnd(t,s),l.setStart(t,i);let a=l.getBoundingClientRect();return o?Q(a,o<0):a}class K extends G{constructor(t,e,n,r){super(),this.widget=t,this.length=e,this.side=n,this.open=r}static create(t,e,n,r=0){return new(t.customView||K)(t,e,n,r)}slice(t,e=this.length){return K.create(this.widget,e-t,this.side)}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e=this.length,n=null){if(n){if(!(n instanceof K)||!n.open||t>0&&!(1&n.open)||e<this.length&&!(2&n.open))return!1;if(!this.widget.compare(n.widget))throw new Error("Trying to merge incompatible widgets")}return this.length=t+(n?n.length:0)+(this.length-e),!0}match(t){return t.length==this.length&&t instanceof K&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget.value)||this.markDirty(!0),this.widget=t.widget,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return o.a.empty;let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):o.a.empty}domAtPos(t){return 0==t?V.before(this.dom):V.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.dom.getClientRects(),r=null;for(let i=t>0?n.length-1:0;r=n[i],!(t>0?0==i:i==n.length-1||r.top<r.bottom);i+=t>0?-1:1);return r}}class J extends K{domAtPos(t){return new V(this.widget.value.text,t)}sync(){this.dom||this.setDOM(this.widget.toDOM(this.editorView))}localPosFromDOM(t,e){return e?3==t.nodeType?Math.min(e,this.length):this.length:0}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){return Y(this.widget.value.text,t,e,this.length)}}class tt{constructor(t){this.value=t}eq(t){return this.value===t}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t.value)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}}var et;!function(t){t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange"}(et||(et={}));class nt extends s.d{constructor(t,e,n,r){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=r}get point(){return!1}get heightRelevant(){return!1}static mark(t){return new rt(t)}static widget(t){let e=t.side||0;return t.block&&(e+=200000001*(e>0?1:-1)),new st(t,e,e,!!t.block,t.widget||null,!1)}static replace(t){let e=!!t.block,{start:n,end:r}=ot(t);return new st(t,e?-2e8*(n?2:1):1e8*(n?-1:1),e?2e8*(r?2:1):1e8*(r?1:-1),e,t.widget||null,!0)}static line(t){return new it(t)}static set(t,e=!1){return s.b.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}nt.none=s.b.empty;class rt extends nt{constructor(t){let{start:e,end:n}=ot(t);super(1e8*(e?-1:1),1e8*(n?1:-1),null,t)}eq(t){return this==t||t instanceof rt&&this.spec.tagName==t.spec.tagName&&this.spec.class==t.spec.class&&U(this.spec.attributes||null,t.spec.attributes||null)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}class it extends nt{constructor(t){super(-1e8,-1e8,null,t)}get point(){return!0}eq(t){return t instanceof it&&U(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}it.prototype.mapMode=r.MapMode.TrackBefore;class st extends nt{constructor(t,e,n,i,s,o){super(e,n,s,t),this.block=i,this.isReplace=o,this.mapMode=i?e<0?r.MapMode.TrackBefore:r.MapMode.TrackAfter:r.MapMode.TrackDel}get point(){return!0}get type(){return this.startSide<this.endSide?et.WidgetRange:this.startSide<0?et.WidgetBefore:et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof st&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function ot(t){let{inclusiveStart:e,inclusiveEnd:n}=t;return null==e&&(e=t.inclusive),null==n&&(n=t.inclusive),{start:e||!1,end:n||!1}}function lt(t,e,n){let r=n.length-1;r>=0&&n[r]+4>t?n[r]=Math.max(n[r],e):n.push(t,e)}const at=r.Facet.define({combine:t=>t.join(" ")}),ct=r.Facet.define({combine:t=>t.indexOf(!0)>-1}),ht=i.a.newName(),ut=i.a.newName(),dt=i.a.newName();function ft(t,e){let n=Object.create(null);for(let r in e)n[r.split(/\s*,\s*/).map(e=>{let n,r=t;r==ht&&(n=/^(.*?)@(light|dark)$/.exec(e))&&(r="dark"==n[2]?dt:ut,e=n[1]);let i=e.split("."),s="."+r+("wrap"==i[0]?"":" ");for(let t=1;t<=i.length;t++)s+=".cm-"+i.slice(0,t).join("-");return s}).join(", ")]=e[r];return new i.a(n,{generateClasses:!1})}function pt(t){let e=t.split("."),n="";for(let r=1;r<=e.length;r++)n+=(n?" ":"")+"cm-"+e.slice(0,r).join("-");return n}const gt=ft(ht,{wrap:{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto"},content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"content@light":{caretColor:"black"},"content@dark":{caretColor:"white"},line:{display:"block",padding:"0 2px 0 4px"},button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"button@light":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"button@dark":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"textfield@light":{backgroundColor:"white"},"textfield@dark":{border:"1px solid #555",backgroundColor:"inherit"},secondarySelection:{backgroundColor_fallback:"#3297FD",color_fallback:"white !important",backgroundColor:"Highlight",color:"HighlightText !important"},secondaryCursor:{display:"inline-block",verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em"},"secondaryCursor@light":{borderLeft:"1.4px solid #555"},"secondaryCursor@dark":{borderLeft:"1.4px solid #ddd"}}),mt=pt("line");class vt extends F{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,r){if(n){if(!(n instanceof vt))return!1;this.dom||n.transferDOM(this)}r&&this.setDeco(n?n.attrs:null);let i=n?n.children:[],s=this.childCursor(),{i:o,off:l}=s.findPos(e,1),{i:a,off:c}=s.findPos(t,-1),h=t-e;for(let u of i)h+=u.length;if(this.length+=h,a==o&&c){let t=this.children[a];if(1==i.length&&t.merge(c,l,i[0]))return!0;if(0==i.length)return t.merge(c,l,null),!0;let e=t.slice(l);e.merge(0,0,i[i.length-1])?i[i.length-1]=e:i.push(e),o++,l=0}if(l){let t=this.children[o];i.length&&t.merge(0,l,i[i.length-1])?i.pop():t.merge(0,l,null)}else o<this.children.length&&i.length&&this.children[o].merge(0,0,i[i.length-1])&&i.pop();if(c){let t=this.children[a];i.length&&t.merge(c,void 0,i[0])?i.shift():t.merge(c,void 0,null),a++}else a&&i.length&&this.children[a-1].merge(this.children[a-1].length,void 0,i[0])&&i.shift();for(;a<o&&i.length&&this.children[o-1].match(i[i.length-1]);)i.pop(),o--;for(;a<o&&i.length&&this.children[a].match(i[0]);)i.shift(),a++;return(i.length||a!=o)&&this.replaceChildren(a,o,i),!0}split(t){let e=new vt;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:r}=this.childPos(t);r&&(e.append(this.children[n].slice(r)),this.children[n].merge(r,void 0,null),n++);for(let i=n;i<this.children.length;i++)e.append(this.children[i]);for(;n>0&&0==this.children[n-1].length;)this.children[n-1].parent=null,n--;return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){U(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t){this.children.push(t),t.setParent(this),this.length+=t.length}addLineDeco(t){let e=t.spec.attributes;e&&(this.attrs=q(e,this.attrs||{}))}domAtPos(t){let e=0;for(let n=0;e<this.children.length;e++){let r=this.children[e],i=n+r.length;if(!(i==n&&r.getSide()<=0)){if(t>n&&t<i&&r.dom.parentNode==this.dom)return r.domAtPos(t-n);if(t<=n)break;n=i}}for(;e>0;e--){let t=this.children[e-1].dom;if(t.parentNode==this.dom)return V.after(t)}return new V(this.dom,0)}sync(t){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=mt,this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(W(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(mt),this.prevAttrs=void 0),super.sync(t);let e=this.dom.lastChild;if(!e||"BR"!=e.nodeName&&!(F.get(e)instanceof Z)){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof Z))return null;let n=A(e.dom);if(1!=n.length)return null;t+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}}coordsAt(t,e){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],s=n+i.length;if(s!=n&&(e<=0||s==this.length?s>=t:s>t))return i.coordsAt(t-n,e);n=s}return this.dom.lastChild.getBoundingClientRect()}match(t){return!1}get type(){return et.Text}static find(t,e){for(let n=0,r=0;;n++){let i=t.children[n],s=r+i.length;if(s>=e){if(i instanceof vt)return i;if(i.length)return null}r=s+i.breakAfter}}}const yt=[];class wt extends F{constructor(t,e,n,r=0){super(),this.widget=t,this.length=e,this.type=n,this.open=r,this.breakAfter=0}merge(t,e,n){if(!(n instanceof wt)||!n.open||t>0&&!(1&n.open)||e<this.length&&!(2&n.open))return!1;if(!this.widget.compare(n.widget))throw new Error("Trying to merge an open widget with an incompatible node");return this.length=t+n.length+(this.length-e),!0}domAtPos(t){return 0==t?V.before(this.dom):V.after(this.dom,t==this.length)}split(t){let e=this.length-t;return this.length=t,new wt(this.widget,e,this.type)}get children(){return yt}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.Text.empty}domBoundsAround(){return null}match(t){return t instanceof wt&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget.value)||this.markDirty(!0),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}}class bt{constructor(t,e,n){this.doc=t,this.pos=e,this.end=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof wt&&t.type==et.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new vt),this.curLine}addWidget(t){this.curLine=null,this.content.push(t)}finish(){this.posCovered()||this.getLine()}buildText(t,e,n,r,i){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t);this.getLine().append(new Z(this.text.slice(this.textOff,this.textOff+i),e,n,r)),t-=i,this.textOff+=i}}span(t,e,n){let r=null,i=null,s=null;for(let{spec:o}of n)if(o.tagName&&(r=o.tagName),o.class&&(i=i?i+" "+o.class:o.class),o.attributes)for(let t in o.attributes){let e=o.attributes[t];null!=e&&("class"==t?i=i?i+" "+e:e:(s||(s={}),"style"==t&&s.style&&(e=s.style+";"+e),s[t]=e))}this.buildText(e-t,r,i,s,n),this.pos=e}point(t,e,n,r,i){let s=(r?1:0)|(i?2:0),o=e-t;if(n instanceof st)if(n.block){let{type:t}=n;t!=et.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new wt(n.widget||new Ot("div"),o,t,s))}else this.getLine().append(K.create(n.widget||new Ot("span"),o,n.startSide,s));else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e)}static build(t,e,n,r){let i=new bt(t,e,n);return s.b.spans(r,e,n,i),i.finish(),i}}class Ot extends tt{toDOM(){return document.createElement(this.value)}updateDOM(t){return t.nodeName.toLowerCase()==this.value}}var xt;!function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(xt||(xt={}));const St=xt.LTR,kt=xt.RTL;function Ct(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const _t=Ct("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Tt=Ct("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Pt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class At{constructor(t,e,n){this.from=t,this.to=e,this.level=n}get dir(){return this.level%2?kt:St}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,r){let i=-1;for(let s=0;s<t.length;s++){let o=t[s];if(o.from<=e&&o.to>=e){if(o.level==n)return s;(i<0||(0!=r?r<0?o.from<e:o.to>e:t[i].level>o.level))&&(i=s)}}if(i<0)throw new RangeError("Index out of range");return i}}const Et=[];function Mt(t,e){let n=t.length,r=e==St?1:2;if(!t||1==r&&!Pt.test(t))return Dt(n);for(let o=0,l=r,a=r;o<n;o++){let e=(i=t.charCodeAt(o))<=247?_t[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?Tt[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203||8204==i?256:1;512==e?e=l:8==e&&4==a&&(e=16),Et[o]=4==e?2:e,7&e&&(a=e),l=e}var i;for(let o=0,l=r,a=r;o<n;o++){let t=Et[o];if(128==t)o<n-1&&l==Et[o+1]&&24&l?t=Et[o]=l:Et[o]=256;else if(64==t){let t=o+1;for(;t<n&&64==Et[t];)t++;let e=o&&8==l||t<n&&8==Et[t]?1==a?1:8:256;for(let n=o;n<t;n++)Et[n]=e;o=t-1}else 8==t&&1==a&&(Et[o]=1);l=t,7&t&&(a=t)}for(let o=0;o<n;o++)if(256==Et[o]){let t=o+1;for(;t<n&&256==Et[t];)t++;let e=1==(o?Et[o-1]:r),i=e==(1==(t<n?Et[t]:r))?e?1:2:r;for(let n=o;n<t;n++)Et[n]=i;o=t-1}let s=[];if(1==r)for(let o=0;o<n;){let t=o,e=1!=Et[o++];for(;o<n&&e==(1!=Et[o]);)o++;if(e)for(let n=o;n>t;){let e=n,r=2!=Et[--n];for(;n>t&&r==(2!=Et[n-1]);)n--;s.push(new At(n,e,r?2:1))}else s.push(new At(t,o,0))}else for(let o=0;o<n;){let t=o,e=2==Et[o++];for(;o<n&&e==(2==Et[o]);)o++;s.push(new At(t,o,e?1:2))}return s}function Dt(t){return[new At(0,t,0)]}let It="";function Qt(t,e,n,i,s){var o;let l=i.head-t.from,a=-1;if(0==l){if(!s||!t.length)return null;e[0].level!=n&&(l=e[0].side(!1,n),a=0)}else if(l==t.length){if(s)return null;let t=e[e.length-1];t.level!=n&&(l=t.side(!0,n),a=e.length-1)}a<0&&(a=At.find(e,l,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));let c=e[a];l==c.side(s,n)&&(c=e[a+=s?1:-1],l=c.side(!s,n));let h=s==(c.dir==n),u=t.findClusterBreak(l,h);if(It=t.slice(Math.min(l,u),Math.max(l,u)),u!=c.side(s,n))return r.EditorSelection.cursor(u+t.from,h?-1:1,c.level);let d=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return d||c.level==n?d&&d.level<c.level?r.EditorSelection.cursor(d.side(!s,n)+t.from,0,d.level):r.EditorSelection.cursor(u+t.from,0,c.level):r.EditorSelection.cursor(s?t.to:t.from,s?-1:1,n)}const Rt=["pre-wrap","normal","pre-line"];class Lt{constructor(){this.doc=o.a.empty,this.lineWrapping=!1,this.direction=xt.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefresh(t,e,n){let r=!1;for(let i=0;i<t.length;i++){let e=t[i];e<0?i++:this.heightSamples[Math.floor(10*e)]||(r=!0,this.heightSamples[Math.floor(10*e)]=!0)}return r||Rt.indexOf(e)>-1!=this.lineWrapping||this.direction!=n}refresh(t,e,n,r,i,s){let o=Rt.indexOf(t)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o||this.direction!=e;if(this.lineWrapping=o,this.direction=e,this.lineHeight=n,this.charWidth=r,this.lineLength=i,l){this.heightSamples={};for(let t=0;t<s.length;t++){let e=s[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return l}}class Nt{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class $t{constructor(t,e,n,r,i){this.from=t,this.length=e,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new $t(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Vt;!function(t){t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight"}(Vt||(Vt={}));class jt{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>1e-4&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return jt.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,r){let i=this;for(let s=r.length-1;s>=0;s--){let{fromA:o,toA:l,fromB:a,toB:c}=r[s],h=i.lineAt(o,Vt.ByPosNoHeight,e,0,0),u=h.to>=l?h:i.lineAt(l,Vt.ByPosNoHeight,e,0,0);for(c+=u.to-l,l=u.to;s>0&&h.from<=r[s-1].toA;)o=r[s-1].fromA,a=r[s-1].fromB,s--,o<h.from&&(h=i.lineAt(o,Vt.ByPosNoHeight,e,0,0));a+=h.from-o,o=h.from;let d=Ut.build(n,t,a,c);i=i.replace(o,l,d)}return i.updateHeight(n,0)}static empty(){return new Ht(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,r=0,i=0;for(;;)if(e==n)if(r>2*i){let i=t[e-1];i.break?t.splice(--e,1,i.left,null,i.right):t.splice(--e,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,i-=e.size}}else if(r<i){let n=t[e++];n&&(r+=n.size)}else{let e=t[--n];e&&(i+=e.size)}let s=0;return null==t[e-1]?(s=1,e--):null==t[e]&&(s=1,n++),new zt(jt.of(t.slice(0,e)),s,jt.of(t.slice(n)))}}jt.prototype.size=1;class Ft extends jt{constructor(t,e,n){super(t,e),this.type=n}blockAt(t,e,n,r){return new $t(r,this.length,n,this.height,this.type)}lineAt(t,e,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(t,e,n,r,i,s){s(this.blockAt(0,n,r,i))}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ht extends Ft{constructor(t,e){super(t,e,et.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,n){let r=n[0];return 1==n.length&&(r instanceof Ht||r instanceof Bt&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Bt?r=new Ht(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):jt.of(n)}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Bt extends jt{constructor(t){super(t,0)}lines(t,e){let n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(t,e,n,r){let{firstLine:i,lastLine:s,lineHeight:o}=this.lines(e,r),l=Math.max(0,Math.min(s-i,Math.floor((t-n)/o))),{from:a,length:c}=e.line(i+l);return new $t(a,c,n+o*l,o,et.Text)}lineAt(t,e,n,r,i){if(e==Vt.ByHeight)return this.blockAt(t,n,r,i);if(e==Vt.ByPosNoHeight){let{from:e,to:r}=n.lineAt(t);return new $t(e,r-e,0,0,et.Text)}let{firstLine:s,lineHeight:o}=this.lines(n,i),{from:l,length:a,number:c}=n.lineAt(t);return new $t(l,a,r+o*(c-s),o,et.Text)}forEachLine(t,e,n,r,i,s){let{firstLine:o,lastLine:l,lineHeight:a}=this.lines(n,i);for(let c=o;c<=l;c++){let{from:t,to:e}=n.line(c);if(t>e)break;e>=t&&s(new $t(t,e-t,r,r+=a,et.Text))}}replace(t,e,n){let r=this.length-e;if(r>0){let t=n[n.length-1];t instanceof Bt?n[n.length-1]=new Bt(t.length+r):n.push(null,new Bt(r-1))}if(t>0){let e=n[0];e instanceof Bt?n[0]=new Bt(t+e.length):n.unshift(new Bt(t-1),null)}return jt.of(n)}decomposeLeft(t,e){e.push(new Bt(t-1),null)}decomposeRight(t,e){e.push(null,new Bt(this.length-t-1))}updateHeight(t,e=0,n=!1,r){let i=e+this.length;if(r&&r.from<=e+this.length&&r.more){let n=[],s=Math.max(e,r.from);for(r.from>e&&n.push(new Bt(r.from-e-1).updateHeight(t,e));s<=i&&r.more;){let e=t.doc.lineAt(s).length;n.length&&n.push(null);let i=new Ht(e,r.heights[r.index++]);i.outdated=!1,n.push(i),s+=e+1}return s<=i&&n.push(null,new Bt(i-s).updateHeight(t,s)),t.heightChanged=!0,jt.of(n)}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class zt extends jt{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,r){let i=n+this.left.height;return t<i||0==this.right.height?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,i,r+this.left.length+this.break)}lineAt(t,e,n,r,i){let s=r+this.left.height,o=i+this.left.length+this.break,l=e==Vt.ByHeight?t<s||0==this.right.height:t<o,a=l?this.left.lineAt(t,e,n,r,i):this.right.lineAt(t,e,n,s,o);if(this.break||(l?a.to<o:a.from>o))return a;let c=e==Vt.ByPosNoHeight?Vt.ByPosNoHeight:Vt.ByPos;return l?a.join(this.right.lineAt(o,c,n,s,o)):this.left.lineAt(o,c,n,r,i).join(a)}forEachLine(t,e,n,r,i,s){let o=r+this.left.height,l=i+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,n,r,i,s),e>=l&&this.right.forEachLine(t,e,n,o,l,s);else{let a=this.lineAt(l,Vt.ByPos,n,r,i);t<a.from&&this.left.forEachLine(t,a.from-1,n,r,i,s),a.to>=t&&a.from<=e&&s(a),e>a.to&&this.right.forEachLine(a.to+1,e,n,o,l,s)}}replace(t,e,n){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));let i=[];t>0&&this.decomposeLeft(t,i);let s=i.length;for(let o of n)i.push(o);if(t>0&&qt(i,s-1),e<this.length){let t=i.length;this.decomposeRight(e,i),qt(i,t)}return jt.of(i)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?jt.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,r){let{left:i,right:s}=this,o=e+i.length+this.break,l=null;return r&&r.from<=e+i.length&&r.more?l=i=i.updateHeight(t,e,n,r):i.updateHeight(t,e,n),r&&r.from<=o+s.length&&r.more?l=s=s.updateHeight(t,o,n,r):s.updateHeight(t,o,n),l?this.balanced(i,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function qt(t,e){let n,r;null==t[e]&&(n=t[e-1])instanceof Bt&&(r=t[e+1])instanceof Bt&&t.splice(e-1,3,new Bt(n.length+1+r.length))}class Ut{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ht?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Ht(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let r=n.widget?Math.max(0,n.widget.estimatedHeight):0,i=e-t;n.block?this.addBlock(new Ft(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Ht(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Bt(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Ht)return t;let e=new Ht(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type!=et.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=et.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Ht||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ht(0,-1));let n=t;for(let r of this.nodes)r instanceof Ht&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(t,e,n,r){let i=new Ut(n,t);return s.b.spans(e,n,r,i),i.finish(n)}get minPointSize(){return 0}}class Wt{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&lt(t,e,this.changes)}get minPointSize(){return 0}}const Xt=[],Gt=r.Facet.define(),Zt=r.Facet.define(),Yt=r.Facet.define(),Kt=r.Facet.define(),Jt=r.Facet.define(),te=r.Facet.define();function ee(t,e,n){let r=t.facet(Kt);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ne=r.Facet.define({combine:t=>!t.length||t[0]});class re{static define(){return new re}}re.scrollMargins=re.define();let ie=0;const se=r.Facet.define();class oe{constructor(t,e,n){this.id=t,this.create=e,this.fields=n,this.extension=se.of(this)}static define(t){return new oe(ie++,t,[])}static fromClass(t){return oe.define(e=>new t(e))}provide(t,e){return new oe(this.id,this.create,this.fields.concat({field:t,get:e}))}decorations(t){return this.provide(le,t||(t=>t.decorations))}eventHandlers(t){return this.provide(ae,e=>({plugin:e,handlers:t}))}}const le=re.define(),ae=re.define();class ce{constructor(t,e){this.value=t,this.spec=e,this.updateFunc=this.value.update?this.value.update.bind(this.value):()=>{}}static create(t,e){let n;try{n=t.create(e)}catch(r){return ee(e.state,r,"CodeMirror plugin crashed"),ce.dummy}return new ce(n,t)}takeField(t,e){for(let{field:n,get:r}of this.spec.fields)n==t&&e.push(r(this.value))}update(t){try{return this.updateFunc(t),this}catch(e){if(ee(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(n){}return ce.dummy}}destroy(t){try{this.value.destroy&&this.value.destroy()}catch(e){ee(t.state,e,"CodeMirror plugin crashed")}}}ce.dummy=new ce({},oe.define(()=>({})));const he=r.Facet.define({combine:t=>t.reduce((t,e)=>q(e,t),{})}),ue=r.Facet.define({combine:t=>t.reduce((t,e)=>q(e,t),{})}),de=r.Facet.define(),fe=r.Facet.define();class pe{constructor(t,e,n,r){this.fromA=t,this.toA=e,this.fromB=n,this.toB=r}join(t){return new pe(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let r=0,i=0,s=0,o=0;;r++){let l=r==t.length?null:t[r],a=s-o,c=l?l.fromB:1e9;for(;i<e.length&&e[i]<c;){let t=e[i+1],r=Math.max(o,e[i]),s=Math.min(c,t);if(r<=s&&new pe(r+a,s+a,r,s).addToSet(n),t>c)break;i+=2}if(!l)return n;new pe(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),s=l.toA,o=l.toB}}}class ge{constructor(t,e,n=Xt){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.prevState=t.state,this.changes=r.ChangeSet.empty(this.prevState.doc.length);for(let r of n)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges((t,e,n,r)=>i.push(new pe(t,e,n,r))),this.changedRanges=i;let s=t.hasFocus;s!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=s),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return this.transactions.some(t=>t.docChanged)}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class me{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(t){return nt.replace({widget:new ve({size:this.size,vertical:t})}).range(this.from,this.to)}}class ve extends tt{toDOM(){let t=document.createElement("div");return this.value.vertical?t.style.height=this.value.size+"px":(t.style.width=this.value.size+"px",t.style.height="2px",t.style.display="inline-block"),t}eq(t){return this.value.size==t.size&&this.value.vertical==t.vertical}get estimatedHeight(){return this.value.vertical?this.value.size:-1}}class ye{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.paddingTop=0,this.paddingBottom=0,this.heightOracle=new Lt,this.heightMap=jt.empty(),this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=this.heightMap.applyChanges(t.facet(de),o.a.empty,this.heightOracle.setDoc(t.doc),[new pe(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}update(t,e=null){let n=this.state;this.state=t.state;let i=this.state.facet(de),o=pe.extendWithRanges(t.changedRanges,function(t,e,n){let r=new Wt;return s.b.compare(t,e,n,r),r.changes}(t.prevState.facet(de),i,t?t.changes:r.ChangeSet.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(i,n.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=l&&(t.flags|=2);let a=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.head<a.from||e.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e)),a.eq(this.viewport)||(this.viewport=a,t.flags|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(t.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes)))),this.computeVisibleRanges(),e&&(this.scrollTo=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.primary.empty&&t.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(t,e){let n=t.dom,r="",i=xt.LTR;if(!e){let t=window.getComputedStyle(n);r=t.whiteSpace,i="rtl"==t.direction?xt.RTL:xt.LTR,this.paddingTop=parseInt(t.paddingTop)||0,this.paddingBottom=parseInt(t.paddingBottom)||0}let s=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(t,e){let n=t.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),s=Math.max(0,n.top),o=Math.min(innerHeight,n.bottom);for(let l=t.parentNode;l;)if(1==l.nodeType){if((l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)&&"visible"!=window.getComputedStyle(l).overflow){let t=l.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),s=Math.max(s,t.top),o=Math.min(o,t.bottom)}l=l.parentNode}else{if(11!=l.nodeType)break;l=l.host}return{left:r-n.left,right:i-n.left,top:s-(n.top+e),bottom:o-(n.top+e)}}(n,this.paddingTop),o=s.top-this.pixelViewport.top,l=s.bottom-this.pixelViewport.bottom;if(this.pixelViewport=s,this.pixelViewport.bottom<=this.pixelViewport.top||this.pixelViewport.right<=this.pixelViewport.left)return 0;let a=t.measureVisibleLineHeights(),c=!1,h=0;if(!e){if(this.heightOracle.mustRefresh(a,r,i)){let{lineHeight:e,charWidth:n}=t.measureTextSize();c=this.heightOracle.refresh(r,i,e,n,t.dom.clientWidth/n,a),c&&(t.minWidth=0)}o>0&&l>0?h=Math.max(o,l):o<0&&l<0&&(h=Math.min(o,l))}this.heightOracle.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(this.heightOracle,0,c,new Nt(this.viewport.from,a));let u=this.heightOracle.heightChanged?2:0;return(!this.viewportIsAppropriate(this.viewport,h)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))&&(this.viewport=this.getViewport(h,this.scrollTo),u|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(u|=this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.enforceCursorAssoc()),u}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,i=this.state.doc,{top:s,bottom:o}=this.pixelViewport,l=new we(r.lineAt(s-1e3*n,Vt.ByHeight,i,0,0).from,r.lineAt(o+1e3*(1-n),Vt.ByHeight,i,0,0).to);if(e)if(e.head<l.from){let{top:t}=r.lineAt(e.head,Vt.ByPos,i,0,0);l=new we(r.lineAt(t-500,Vt.ByHeight,i,0,0).from,r.lineAt(t+(o-s)+500,Vt.ByHeight,i,0,0).to)}else if(e.head>l.to){let{bottom:t}=r.lineAt(e.head,Vt.ByPos,i,0,0);l=new we(r.lineAt(t-(o-s)-500,Vt.ByHeight,i,0,0).from,r.lineAt(t+500,Vt.ByHeight,i,0,0).to)}return l}mapViewport(t,e){let n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new we(this.heightMap.lineAt(n,Vt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Vt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){let{top:r}=this.heightMap.lineAt(t,Vt.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(e,Vt.ByPos,this.state.doc,0,0);return(0==t||r<=this.pixelViewport.top-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||i>=this.pixelViewport.bottom+Math.max(10,Math.min(n,250)))&&r>this.pixelViewport.top-2e3&&i<this.pixelViewport.bottom+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let r of t)e.touchesRange(r.from,r.to)||n.push(new me(e.mapPos(r.from),e.mapPos(r.to),r.size));return n}ensureLineGaps(t){let e=[];return this.heightOracle.direction!=xt.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,n=>{if(n.length<1e4)return;let r,i,o=function(t,e,n){let r=[],i=t,o=0;return s.b.spans(n.facet(de),t,e,{span(){},point(t,e){t>i&&(r.push({from:i,to:t}),o+=t-i),i=e},minPointSize:20}),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}(n.from,n.to,this.state);if(o.total<1e4)return;if(this.heightOracle.lineWrapping)r=n.from!=this.viewport.from?n.from:be(o,(this.pixelViewport.top-n.top)/n.height),i=n.to!=this.viewport.to?n.to:be(o,(this.pixelViewport.bottom-n.top)/n.height);else{let t=o.total*this.heightOracle.charWidth;r=be(o,this.pixelViewport.left/t),i=be(o,this.pixelViewport.right/t)}let l=this.state.selection.primary;l.from<=r&&l.to>=n.from&&(r=l.from),l.from<=n.to&&l.to>=i&&(i=l.to);let a=r-1e4,c=i+1e4;a>n.from+5e3&&e.push(xe(t,t=>t.from==n.from&&t.to>a-5e3&&t.to<a+5e3)||new me(n.from,a,this.gapSize(n,a,!0,o))),c<n.to-5e3&&e.push(xe(t,t=>t.to==n.to&&t.from>c-5e3&&t.from<c+5e3)||new me(c,n.to,this.gapSize(n,c,!1,o)))}),e}gapSize(t,e,n,r){if(this.heightOracle.lineWrapping){let i=t.height*Oe(r,e);return n?i:t.height-i}{let t=Oe(r,e);return r.total*this.heightOracle.charWidth*(n?t:1-t)}}updateLineGaps(t){return me.same(t,this.lineGaps)?0:(this.lineGaps=t,this.lineGapDeco=nt.set(t.map(t=>t.draw(this.heightOracle.lineWrapping))),16)}computeVisibleRanges(){let t=this.state.facet(de);this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];s.b.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){},minPointSize:20}),this.visibleRanges=e}lineAt(t,e){return this.heightMap.lineAt(t,Vt.ByPos,this.state.doc,e+this.paddingTop,0)}lineAtHeight(t,e){return this.heightMap.lineAt(t,Vt.ByHeight,this.state.doc,e+this.paddingTop,0)}blockAtHeight(t,e){return this.heightMap.blockAt(t,this.state.doc,e+this.paddingTop,0)}forEachLine(t,e,n,r){return this.heightMap.forEachLine(t,e,this.state.doc,r+this.paddingTop,0,n)}}class we{constructor(t,e){this.from=t,this.to=e}eq(t){return this.from==t.from&&this.to==t.to}}function be({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:t,to:n}=e[i],s=n-t;if(r<=s)return t+r;r-=s}}function Oe(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function xe(t,e){for(let n of t)if(e(n))return n}const Se=[];class ke extends F{constructor(t){super(),this.view=t,this.viewports=Se,this.compositionDeco=nt.none,this.decorations=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(t.contentDOM),this.children=[new vt],this.children[0].setParent(this),this.updateInner([new pe(0,0,0,t.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),(null===(e=this.view.inputState)||void 0===e?void 0:e.composing)?t.transactions.length&&(this.compositionDeco=function(t,e){let n=T(t.root),r=n.focusNode&&Te(n.focusNode,n.focusOffset,0);if(!r)return nt.none;let i,s,o=t.docView.nearest(r),l=r;if(o instanceof G)i=o.posAtStart,s=i+o.length,l=o.dom;else{if(!(o instanceof vt))return nt.none;{for(;l.parentNode!=o.dom;)l=l.parentNode;let t=l.previousSibling;for(;t&&!F.get(t);)t=t.previousSibling;i=s=t?F.get(t).posAtEnd:o.posAtStart}}let a=e.mapPos(i,1),c=Math.max(a,e.mapPos(s,-1)),h=r.nodeValue,{state:u}=t;if(c-a<h.length)if(u.sliceDoc(a,Math.min(u.doc.length,a+h.length))==h)c=a+h.length;else{if(u.sliceDoc(Math.max(0,c-h.length),c)!=h)return nt.none;a=c-h.length}else if(u.sliceDoc(a,c)!=h)return nt.none;return nt.set(nt.replace({widget:new _e({top:l,text:r})}).range(a,c))}(this.view,t.changes)):this.compositionDeco=nt.none;let i=(_.ie||_.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.prevState.doc.lines,o=this.decorations,l=this.updateDeco(),a=function(t,e,n){let r=new Ae;return s.b.compare(t,e,n,r),r.changes}(o,l,t.changes);n=pe.extendWithRanges(n,a);let c=t.transactions.some(t=>"pointerselection"==t.annotation(r.Transaction.userEvent));return 0==this.dirty&&0==n.length&&!(20&t.flags)&&t.state.selection.primary.from>=this.view.viewport.from&&t.state.selection.primary.to<=this.view.viewport.to?(this.updateSelection(i,c),!1):(this.updateInner(n,l,t.prevState.doc.length,i,c),!0)}updateInner(t,e,n,r=!1,i=!1){this.updateChildren(t,e,n),this.view.observer.ignore(()=>{this.dom.style.height=this.view.viewState.heightMap.height+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let t=_.chrome?{node:T(this.view.root).focusNode,written:!1}:void 0;this.sync(t),this.dirty=0,(null==t?void 0:t.written)&&(r=!0),this.updateSelection(r,i),this.dom.style.height=""})}updateChildren(t,e,n){let r=this.childCursor(n);for(let i=t.length-1;;i--){let n=i>=0?t[i]:null;if(!n)break;let{fromA:s,toA:o,fromB:l,toB:a}=n,{content:c,breakAtStart:h}=bt.build(this.view.state.doc,l,a,e),{i:u,off:d}=r.findPos(o,1),{i:f,off:p}=r.findPos(s,-1);this.replaceRange(f,p,u,d,c,h)}}replaceRange(t,e,n,r,i,s){let o=this.children[t],l=i.length?i[i.length-1]:null,a=l?l.breakAfter:s;if(t==n&&!s&&!a&&i.length<2&&o.merge(e,r,i.length?l:null,0==e))return;let c=this.children[n];for(r<c.length||c.children.length&&0==c.children[c.children.length-1].length?(t==n&&(c=c.split(r),r=0),!a&&l&&c.merge(0,r,l,!0)?i[i.length-1]=c:((r||c.children.length&&0==c.children[0].length)&&c.merge(0,r,null,!1),i.push(c))):c.breakAfter&&(l?l.breakAfter=1:s=1),n++,o.breakAfter=s,e>0&&(!s&&i.length&&o.merge(e,o.length,i[0],!1)?o.breakAfter=i.shift().breakAfter:(e<o.length||o.children.length&&0==o.children[o.children.length-1].length)&&o.merge(e,o.length,null,!1),t++);t<n&&i.length;)if(this.children[n-1].match(i[i.length-1]))n--,i.pop();else{if(!this.children[t].match(i[0]))break;t++,i.shift()}(t<n||i.length)&&this.replaceChildren(t,n,i)}updateSelection(t=!1,e=!1){if(!e&&!this.mayControlSelection())return;let n=this.view.state.selection.primary,r=this.domAtPos(n.anchor),i=this.domAtPos(n.head),s=T(this.root);(t||!s.focusNode||_.gecko&&n.empty&&Pe(s.focusNode,s.focusOffset)||!E(r.node,r.offset,s.anchorNode,s.anchorOffset)||!E(i.node,i.offset,s.focusNode,s.focusOffset))&&this.view.observer.ignore(()=>{if(n.empty){if(_.gecko){let t=Pe(r.node,r.offset);if(t&&3!=t){let e=Te(r.node,r.offset,1==t?1:-1);e&&(r=new V(e,1==t?0:e.nodeValue.length))}}s.collapse(r.node,r.offset),null!=n.bidiLevel&&null!=s.cursorBidiLevel&&(s.cursorBidiLevel=n.bidiLevel)}else if(s.extend)s.collapse(r.node,r.offset),s.extend(i.node,i.offset);else{let t=document.createRange();n.anchor>n.head&&([r,i]=[i,r]),t.setEnd(i.node,i.offset),t.setStart(r.node,r.offset),s.removeAllRanges(),s.addRange(t)}}),this.impreciseAnchor=r.precise?null:new V(s.anchorNode,s.anchorOffset),this.impreciseHead=i.precise?null:new V(s.focusNode,s.focusOffset)}enforceCursorAssoc(){let t=this.view.state.selection.primary,e=T(this.root);if(!t.empty||!t.assoc||!e.modify)return;let n=vt.find(this,t.head);if(!n)return;let r=n.posAtStart;if(t.head==r||t.head==r+n.length)return;let i=this.coordsAt(t.head,-1),s=this.coordsAt(t.head,1);if(!i||!s||i.bottom>s.top)return;let o=this.domAtPos(t.head+t.assoc);e.collapse(o.node,o.offset),e.modify("move",t.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(ne)?this.root.activeElement==this.dom:P(this.dom,T(this.root))}nearest(t){for(let e=t;e;){let t=F.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof vt)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],s=n-i.breakAfter-i.length;if(t>=s&&i.type!=et.WidgetAfter)return i.coordsAt(t-s,e);n=s}}measureVisibleLineHeights(){let t=[],{from:e,to:n}=this.view.viewState.viewport,r=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let i=0,s=0;s<this.children.length;s++){let o=this.children[s],l=i+o.length;if(l>n)break;if(i>=e){t.push(o.dom.getBoundingClientRect().height);let e=o.dom.scrollWidth;e>r&&(this.minWidth=r=e,this.minWidthFrom=i,this.minWidthTo=l)}i=l+o.breakAfter}return t}measureTextSize(){for(let r of this.children)if(r instanceof vt){let t=r.measureTextSize();if(t)return t}let t,e,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(n);let r=A(n.firstChild)[0];t=n.getBoundingClientRect().height,e=r?r.width/27:7,n.remove()}),{lineHeight:t,charWidth:e}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new z(this.children,t,e)}computeBlockGapDeco(){let t=this.view.viewState.viewport,e=[t],{head:n,anchor:r}=this.view.state.selection.primary;if(n<t.from||n>t.to){let{from:t,to:r}=this.view.viewState.lineAt(n,0);e.push(new we(t,r))}if(!e.some(({from:t,to:e})=>r>=t&&r<=e)){let{from:t,to:n}=this.view.viewState.lineAt(r,0);e.push(new we(t,n))}this.viewports=e.sort((t,e)=>t.from-e.from);let i=[];for(let s=0,o=0;;o++){let t=o==e.length?null:e[o],n=t?t.from-1:this.length;if(n>s){let t=this.view.viewState.lineAt(n,0).bottom-this.view.viewState.lineAt(s,0).top;i.push(nt.replace({widget:new Ce(t),block:!0,inclusive:!0}).range(s,n))}if(!t)break;s=t.to+1}return nt.set(i)}updateDeco(){return this.decorations=[...this.view.state.facet(de),this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco,...this.view.pluginField(le)]}scrollPosIntoView(t,e){let n=this.coordsAt(t,e);if(!n)return;let r=0,i=0,s=0,o=0;for(let l of this.view.pluginField(re.scrollMargins))if(l){let{left:t,right:e,top:n,bottom:a}=l;null!=t&&(r=Math.max(r,t)),null!=e&&(i=Math.max(i,e)),null!=n&&(s=Math.max(s,n)),null!=a&&(o=Math.max(o,a))}!function(t,e){let n=t.ownerDocument.defaultView;for(let r=t.parentNode;r;)if(1==r.nodeType){let t,i=r==document.body;if(i)t=R(n);else{if(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth){r=r.parentNode;continue}let e=r.getBoundingClientRect();t={left:e.left,right:e.left+r.clientWidth,top:e.top,bottom:e.top+r.clientHeight}}let s=0,o=0;if(e.top<t.top?o=-(t.top-e.top+5):e.bottom>t.bottom&&(o=e.bottom-t.bottom+5),e.left<t.left?s=-(t.left-e.left+5):e.right>t.right&&(s=e.right-t.right+5),s||o)if(i)n.scrollBy(s,o);else{if(o){let t=r.scrollTop;r.scrollTop+=o,o=r.scrollTop-t}if(s){let t=r.scrollLeft;r.scrollLeft+=s,s=r.scrollLeft-t}e={left:e.left-s,top:e.top-o,right:e.right-s,bottom:e.bottom-o}}if(i)break;r=r.parentNode}else{if(11!=r.nodeType)break;r=r.host}}(this.dom,{left:n.left-r,top:n.top-s,right:n.right+i,bottom:n.bottom+o})}}class Ce extends tt{toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}updateDOM(t){if(this.value<1e7){for(;t.lastChild;)t.lastChild.remove();t.style.height=this.value+"px"}else{t.style.height="";for(let e=this.value;e>0;e-=1e7)t.appendChild(document.createElement("div")).style.height=Math.min(e,1e7)+"px"}return!0}get estimatedHeight(){return this.value}}class _e extends tt{eq(t){return this.value.top==t.top&&this.value.text==t.text}toDOM(){return this.value.top}ignoreEvent(){return!1}get customView(){return J}}function Te(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)e=I(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}function Pe(t,e){return 1!=t.nodeType?0:(e&&"false"==t.childNodes[e-1].contentEditable?1:0)|(e<t.childNodes.length&&"false"==t.childNodes[e].contentEditable?2:0)}class Ae{constructor(){this.changes=[]}compareRange(t,e){lt(t,e,this.changes)}comparePoint(t,e){lt(t,e,this.changes)}}function Ee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Me(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function De(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Ie(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Qe(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Re(t,e,n){let r=t.nodeValue.length,i=document.createRange();for(let s=0;s<r;s++){i.setEnd(t,s+1),i.setStart(t,s);let r=i.getClientRects();for(let o=0;o<r.length;o++){let l=r[o];if(l.top!=l.bottom&&l.left-1<=e&&l.right+1>=e&&l.top-1<=n&&l.bottom+1>=n){let n=e>=(l.left+l.right)/2,r=n;return(_.chrome||_.gecko)&&(i.setEnd(t,s),i.getBoundingClientRect().left==l.right&&(r=!n)),{node:t,offset:s+(r?1:0)}}}}return{node:t,offset:0}}function Le(t,{x:e,y:n},r=-1){let i,s=t.contentDOM.getBoundingClientRect(),o=t.defaultLineHeight/2;for(let d=!1;;){if(i=t.blockAtHeight(n,s.top),i.top>n||i.bottom<n){if(r=i.top>n?-1:1,n=Math.min(i.bottom-o,Math.max(i.top+o,n)),d)return-1;d=!0}if(i.type==et.Text)break;n=r>0?i.bottom+o:i.top-o}let l=i.from;if(l<t.viewport.from)return 0==t.viewport.from?0:-1;if(l>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:-1;e=Math.max(s.left+1,Math.min(s.right-1,e));let a,c=t.root,h=c.elementFromPoint(e,n),u=-1;if(h&&t.contentDOM.contains(h)&&!(t.docView.nearest(h)instanceof K))if(c.caretPositionFromPoint){let t=c.caretPositionFromPoint(e,n);t&&({offsetNode:a,offset:u}=t)}else if(c.caretRangeFromPoint){let t=c.caretRangeFromPoint(e,n);t&&({startContainer:a,startOffset:u}=t)}if(!a){let r=vt.find(t.docView,l);({node:a,offset:u}=function t(e,n,r){let i,s,o,l,a,c,h,u;for(let f=e.firstChild;f;f=f.nextSibling){let e=A(f);for(let d=0;d<e.length;d++){let p=e[d];s&&De(s,p)&&(p=Ie(Qe(p,s.bottom),s.top));let g=Ee(n,p),m=Me(r,p);if(0==g&&0==m)return 3==f.nodeType?Re(f,n,r):t(f,n,r);(!i||l>m||l==m&&o>g)&&(i=f,s=p,o=g,l=m),0==g?r>p.bottom&&(!h||h.bottom<p.bottom)?(a=f,h=p):r<p.top&&(!u||u.top>p.top)&&(c=f,u=p):h&&De(h,p)?h=Qe(h,p.bottom):u&&De(u,p)&&(u=Ie(u,p.top))}}if(h&&h.bottom>=r?(i=a,s=h):u&&u.top<=r&&(i=c,s=u),!i)return{node:e,offset:0};let d=Math.max(s.left,Math.min(s.right,n));return 3==i.nodeType?Re(i,d,r):o||"true"!=i.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(n>=(s.left+s.right)/2?1:0)}:t(i,d,r)}(r.dom,e,n))}return t.docView.posFromDOM(a,u)}function Ne(t,e,n,i){let s=t.state.doc.lineAt(e.head),o=t.bidiSpans(s);for(let l=e,a=null;;){let e=Qt(s,o,t.textDirection,l,n),c=It;if(!e){if(s.number==(n?t.state.doc.lines:1))return l;c="\n",s=t.state.doc.line(s.number+(n?1:-1)),o=t.bidiSpans(s),e=r.EditorSelection.cursor(n?s.from:s.to)}if(a){if(!a(c))return l}else{if(!i)return e;a=i(c)}l=e}}class $e{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.registeredEvents=[],this.customHandlers=[],this.composing=!1,this.compositionEndedAt=0,this.mouseSelection=null;for(let e in Fe){let n=Fe[e];t.contentDOM.addEventListener(e,r=>{je(t,r)&&!this.ignoreDuringComposition(r)&&(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(e,t,r)?r.preventDefault():n(t,r))}),this.registeredEvents.push(e)}t.contentDOM.addEventListener("keydown",e=>{t.inputState.lastKeyCode=e.keyCode,t.inputState.lastKeyTime=Date.now()}),t.root.activeElement==t.contentDOM&&t.dom.classList.add("cm-focused"),this.notifiedFocused=t.hasFocus,this.ensureHandlers(t)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t){let e=this.customHandlers=t.pluginField(ae);for(let n of e)for(let e in n.handlers)this.registeredEvents.indexOf(e)<0&&(this.registeredEvents.push(e),("scroll"!=e?t.contentDOM:t.scrollDOM).addEventListener(e,n=>{je(t,n)&&this.runCustomHandlers(e,t,n)&&n.preventDefault()}))}runCustomHandlers(t,e,n){for(let i of this.customHandlers){let s=i.handlers[t];if(s)try{if(s.call(i.plugin,n,e)||n.defaultPrevented)return!0}catch(r){ee(e.state,r)}}return!1}ignoreDuringComposition(t){return!(!/^key/.test(t.type)||!this.composing&&(!(_.safari&&t.timeStamp-this.compositionEndedAt<500)||(this.compositionEndedAt=0,0)))}mustFlushObserver(t){return"keydown"==t.type||"compositionend"==t.type}startMouseSelection(t,e,n){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new Ve(this,t,e,n)}update(t){this.mouseSelection&&this.mouseSelection.update(t),this.lastKeyCode=this.lastSelectionTime=0}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}class Ve{constructor(t,e,n,i){this.inputState=t,this.view=e,this.startEvent=n,this.style=i;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(r.EditorState.allowMultipleSelections)&&function(t,e){let n=t.state.facet(Gt);return n.length?n[0](e):_.mac?e.metaKey:e.ctrlKey}(e,n),this.dragMove=function(t,e){let n=t.state.facet(Zt);return n.length?n[0](e):_.mac?!e.altKey:!e.ctrlKey}(e,n),this.dragging=!!function(t,e){let{primary:n}=t.state.selection;if(n.empty)return!1;let r=T(t.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let t=i[s];if(t.left<=e.clientX&&t.right>=e.clientX&&t.top<=e.clientY&&t.bottom>=e.clientY)return!0}return!1}(e,n)&&null,!1===this.dragging&&(n.preventDefault(),this.select(n))}move(t){if(0==t.buttons)return this.destroy();!1===this.dragging&&this.select(t)}up(t){null==this.dragging&&this.select(this.startEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(t){let e=this.style.get(t,this.extend,this.multiple);e.eq(this.view.state.selection)&&e.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:e,annotations:r.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)}}function je(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,r=e.target;r!=t.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=F.get(r))&&n.ignoreEvent(e))return!1;return!0}const Fe=Object.create(null),He=_.ie&&_.ie_version<15||_.ios&&_.webkit_version<604;function Be(t,e){let n=t.state.toText(e),i=1,s=n.lines==t.state.selection.ranges.length?t.state.changeByRange(t=>{let e=n.line(i++);return{changes:{from:t.from,to:t.to,insert:e.slice()},range:r.EditorSelection.cursor(t.from+e.length)}}):t.state.replaceSelection(n);t.dispatch(s,{annotations:r.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function ze(t,e,n,i){if(1==i)return r.EditorSelection.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),s=t.doc.lineAt(e),o=e-s.from;if(0==s.length)return r.EditorSelection.cursor(e);0==o?n=1:o==s.length&&(n=-1);let l=o,a=o;n<0?l=s.findClusterBreak(o,!1):a=s.findClusterBreak(o,!0);let c=i(s.slice(l,a));for(;l>0;){let t=s.findClusterBreak(l,!1);if(i(s.slice(t,l))!=c)break;l=t}for(;a<s.length;){let t=s.findClusterBreak(a,!0);if(i(s.slice(a,t))!=c)break;a=t}return r.EditorSelection.range(l+s.from,a+s.from)}(t.state,e,n);{let n=vt.find(t.docView,e);if(n)return r.EditorSelection.range(n.posAtStart,n.posAtEnd);let{from:i,to:s}=t.state.doc.lineAt(e);return r.EditorSelection.range(i,s)}}Fe.keydown=(t,e)=>{(function(t){let e=(t.ctrlKey?1:0)|(t.metaKey?8:0)|(t.altKey?2:0)|(t.shiftKey?4:0),n=t.keyCode,r=_.mac&&1==e;return 8==n||r&&72==n||46==n||r&&68==n||27==n||e==(_.mac?8:1)&&(66==n||73==n||89==n||90==n)})(e)&&e.preventDefault(),t.inputState.setSelectionOrigin("keyboardselection")},Fe.touchdown=Fe.touchmove=t=>{t.inputState.setSelectionOrigin("pointerselection")},Fe.mousedown=(t,e)=>{let n=null;for(let r of t.state.facet(Yt))if(n=r(t,e),n)break;n||0!=e.button||(n=function(t,e){let n=Xe(t,e),i=function(t){if(!Ge)return t.detail;let e=Ze;return Ze=t,Ye=!e||e.timeStamp>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Ye+1)%3:1}(e),s=t.state.selection,o=n,l=e;return{update(t){t.changes&&(n&&(n.pos=t.changes.mapPos(n.pos)),s=s.map(t.changes))},get(e,a,c){let h;if(e.clientX==l.clientX&&e.clientY==l.clientY?h=o:(h=o=Xe(t,e),l=e),!h||!n)return s;let u=ze(t,h.pos,h.bias,i);if(n.pos!=h.pos&&!a){let e=ze(t,n.pos,n.bias,i),s=Math.min(e.from,u.from),o=Math.max(e.to,u.to);u=s<u.from?r.EditorSelection.range(s,o):r.EditorSelection.range(o,s)}return a?s.replaceRange(s.primary.extend(u.from,u.to)):c?s.addRange(u):r.EditorSelection.create([u])}}}(t,e)),n&&(t.root.activeElement!=t.contentDOM&&t.observer.ignore(()=>$(t.contentDOM)),t.inputState.startMouseSelection(t,e,n))};let qe=(t,e)=>t>=e.top&&t<=e.bottom,Ue=(t,e,n)=>qe(e,n)&&t>=n.left&&t<=n.right;function We(t,e,n,r){let i=vt.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(0==s)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Ue(n,r,o))return-1;let l=i.coordsAt(s,1);return l&&Ue(n,r,l)?1:o&&qe(r,o)?-1:1}function Xe(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY});return n<0?null:{pos:n,bias:We(t,n,e.clientX,e.clientY)}}const Ge=_.ie&&_.ie_version<=11;let Ze=null,Ye=0;function Ke(t){t.docView.compositionDeco.size&&t.update([])}Fe.dragstart=(t,e)=>{let{selection:{primary:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},Fe.drop=(t,e)=>{if(!e.dataTransfer)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY}),i=e.dataTransfer.getData("Text");if(n<0||!i)return;e.preventDefault();let{mouseSelection:s}=t.inputState,o=s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:i},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},annotations:r.Transaction.userEvent.of("drop")})},Fe.paste=(t,e)=>{t.observer.flush();let n=He?null:e.clipboardData,r=n&&n.getData("text/plain");r?(Be(t,r),e.preventDefault()):function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Be(t,n.value)},50)}(t)},Fe.copy=Fe.cut=(t,e)=>{let{text:n,ranges:i}=function(t){let e=[],n=[];for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let s=t.doc.lineAt(i);s.number>r&&(e.push(s.slice()),n.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),r=s.number}}return{text:e.join(t.lineBreak),ranges:n}}(t.state);if(!n)return;let s=He?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):function(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}(t,n),"cut"==e.type&&t.dispatch({changes:i,scrollIntoView:!0,annotations:r.Transaction.userEvent.of("cut")})},Fe.focus=Fe.blur=t=>{setTimeout(()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])},10)},Fe.beforeprint=t=>{t.viewState.printing=!0,t.requestMeasure(),setTimeout(()=>{t.viewState.printing=!1,t.requestMeasure()},2e3)},Fe.compositionstart=Fe.compositionupdate=t=>{t.inputState.composing||(t.docView.compositionDeco.size&&(t.observer.flush(),Ke(t)),t.inputState.composing=!0)},Fe.compositionend=t=>{t.inputState.composing=!1,t.inputState.compositionEndedAt=Date.now(),setTimeout(()=>{t.inputState.composing||Ke(t)},50)};const Je={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},tn=_.ie&&_.ie_version<=11;class en{constructor(t,e,n){this.view=t,this.onChange=e,this.onScrollChanged=n,this.active=!1,this.ignoreSelection=new L,this.delayedFlush=-1,this.queue=[],this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);_.ie&&_.ie_version<=11&&t.some(t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),tn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=()=>{if(this.view.root.activeElement==this.dom){if(_.ie&&_.ie_version<=11&&!this.view.state.selection.primary.empty){let t=T(this.view.root);if(t.focusNode&&E(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.onScroll())},{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(){this.intersecting&&(this.flush(),this.onScrollChanged())}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Je),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),tn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),tn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clearSelection(){this.ignoreSelection.set(T(this.view.root))}clear(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}flush(){if(this.delayedFlush>=0)return;let t=this.queue;for(let l of this.observer.takeRecords())t.push(l);t.length&&(this.queue=[]);let e=T(this.view.root),n=!this.ignoreSelection.eq(e)&&P(this.dom,e);if(0==t.length&&!n)return;let r=-1,i=-1,s=!1;for(let l of t){let t=this.readMutation(l);t&&(t.typeOver&&(s=!0),-1==r?({from:r,to:i}=t):(r=Math.min(t.from,r),i=Math.max(t.to,i)))}let o=this.view.state;(r>-1||n)&&this.onChange(r,i,s),this.view.state==o&&(this.view.docView.dirty&&(this.ignore(()=>this.view.docView.sync()),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(),"childList"==t.type){let n=nn(e,t.previousSibling||t.target.previousSibling,-1),r=nn(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}return{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}}function nn(t,e,n){for(;e;){let r=F.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}class rn{constructor(t){this.points=t,this.text=""}readRange(t,e){if(!t)return;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r),this.readNode(r);let t=r.nextSibling;if(t==e)break;let i=F.get(r),s=F.get(t);((i?i.breakAfter:sn(r))||(s?s.breakAfter:sn(t))&&("BR"!=r.nodeName||r.cmIgnore))&&(this.text+="\ufdda"),r=t}this.findPointBefore(n,e)}readNode(t){if(t.cmIgnore)return;let e,n=F.get(t),r=n&&n.overrideDOMText;null!=r?e=r.sliceString(0,void 0,"\ufdda"):3==t.nodeType?e=t.nodeValue:"BR"==t.nodeName?e=t.nextSibling?"\ufdda":"":1==t.nodeType&&this.readRange(t.firstChild,null),null!=e&&(this.findPointIn(t,e.length),this.text+=e)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointIn(t,e){for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e))}}function sn(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class on{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}function ln(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);t.contentDOM.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return t.contentDOM.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}class an{constructor(t={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.className=pt("scroller"),this.scrollDOM.appendChild(this.contentDOM),this.dom=document.createElement("div"),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=t.root||document,this.viewState=new ye(t.state||r.EditorState.create()),this.plugins=this.state.facet(se).map(t=>ce.create(t,this)),this.observer=new en(this,(t,e,n)=>function(t,e,n,i){let s,o,l,a=t.state.selection.primary;if(e>-1&&(l=t.docView.domBoundsAround(e,n,0))){let{from:e,to:n}=l,i=t.docView.impreciseHead||t.docView.impreciseAnchor?[]:function(t,e){let n=[];if(e.activeElement!=t)return n;let{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=T(e);return r&&(n.push(new on(r,i)),s==r&&o==i||n.push(new on(s,o))),n}(t.contentDOM,t.root),c=new rn(i);c.readRange(l.startDOM,l.endDOM),o=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?r.EditorSelection.single(n+e,i+e):null}(i,e);let h=a.from,u=null;8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100&&(h=a.to,u="end");let d=function(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;return"end"==r&&(n-=o+Math.max(0,s-Math.min(o,l))-s),o<s&&t.length<e.length?(s-=n<=s&&n>=o?s-n:0,l=s+(l-o),o=s):l<s&&(s-=n<=s&&n>=l?s-n:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}(t.state.doc.sliceString(e,n,"\ufdda"),c.text,h-e,u);d&&(s={from:e+d.from,to:e+d.toA,insert:r.Text.of(c.text.slice(d.from,d.toB).split("\ufdda"))})}else if(t.hasFocus){let e=T(t.root),{impreciseHead:n,impreciseAnchor:i}=t.docView,s=n&&n.node==e.focusNode&&n.offset==e.focusOffset?t.state.selection.primary.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),l=i&&i.node==e.anchorNode&&i.offset==e.anchorOffset?t.state.selection.primary.anchor:function(t){let e=t.isCollapsed;return e&&_.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e}(e)?s:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);s==a.head&&l==a.anchor||(o=r.EditorSelection.single(l,s))}if(s||o)if(!s&&i&&!a.empty&&o&&o.primary.empty&&(s={from:a.from,to:a.to,insert:t.state.doc.slice(a.from,a.to)}),s){let e=t.state;if(_.android&&(s.from==a.from&&s.to==a.to&&1==s.insert.length&&2==s.insert.lines&&ln(t,"Enter",10)||s.from==a.from-1&&s.to==a.to&&0==s.insert.length&&ln(t,"Backspace",8)||s.from==a.from&&s.to==a.to+1&&0==s.insert.length&&ln(t,"Delete",46)))return;let n,i=s.insert.toString();if(t.state.facet(te).some(e=>e(t,s.from,s.to,i)))return;if(s.from>=a.from&&s.to<=a.to&&s.to-s.from>=(a.to-a.from)/3){let t=a.from<s.from?e.doc.sliceString(a.from,s.from,"\ufdda"):"",i=a.to>s.to?e.doc.sliceString(s.to,a.to,"\ufdda"):"";n=e.replaceSelection(r.Text.of((t+s.insert.sliceString(0,void 0,"\ufdda")+i).split("\ufdda")))}else{let t=e.changes(s);n={changes:t,selection:o&&!e.selection.primary.eq(o.primary)&&o.primary.to<=t.newLength?e.selection.replaceRange(o.primary):void 0}}t.dispatch(n,{scrollIntoView:!0,annotations:r.Transaction.userEvent.of("input")})}else if(o&&!o.primary.eq(a)){let e,n=!1;t.inputState.lastSelectionTime>Date.now()-50&&("keyboardselection"==t.inputState.lastSelectionOrigin?n=!0:e=r.Transaction.userEvent.of(t.inputState.lastSelectionOrigin)),t.dispatch({selection:o,scrollIntoView:n,annotations:e})}}(this,t,e,n),()=>this.measure()),this.docView=new ke(this),this.inputState=new $e(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,window.addEventListener("resize",()=>{-1==un&&(un=setTimeout(dn,50))}),this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof r.Transaction?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;let e=this.state;for(let s of t){if(s.startState!=e)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");e=s.state}let n=new ge(this,e,t),r=t.some(t=>t.scrollIntoView)?e.selection.primary:null;this.viewState.update(n,r),this.bidiCache=pn.update(this.bidiCache,n.changes),n.empty||this.updatePlugins(n);let i=this.docView.update(n);this.state.facet(fe)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.updateState=0,(i||r||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();for(let s of this.state.facet(Jt))s(n)}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;for(let e of this.plugins)e.destroy(this);this.viewState=new ye(t),this.plugins=t.facet(se).map(t=>ce.create(t,this)),this.docView=new ke(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[],this.updateState=0,this.requestMeasure()}updatePlugins(t){let e=t.prevState.facet(se),n=t.state.facet(se);if(e!=n){let r=[],i=[];for(let s of n){let n=e.indexOf(s);if(n<0)r.push(ce.create(s,this));else{let e=this.plugins[n].update(t);i.push(e),r.push(e)}}for(let t of this.plugins)i.indexOf(t)<0&&t.destroy(this);this.plugins=r,this.inputState.ensureHandlers(this)}else for(let r=0;r<this.plugins.length;r++)this.plugins[r]=this.plugins[r].update(t)}measure(){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=1;let t=null;for(let n=0;;n++){this.updateState=1;let r=this.viewState.measure(this.docView,n>0),i=this.measureRequests;if(!r&&!i.length&&null==this.viewState.scrollTo)break;if(this.measureRequests=[],n>5){console.warn("Viewport failed to stabilize");break}let s=i.map(t=>{try{return t.read(this)}catch(e){return ee(this.state,e),fn}}),o=new ge(this,this.state);o.flags|=r,t?t.flags|=r:t=o,this.updateState=2,this.updatePlugins(o),r&&this.docView.update(o);for(let t=0;t<i.length;t++)if(s[t]!=fn)try{i[t].write(s[t],this)}catch(e){ee(this.state,e)}if(this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null),!(4&r)&&0==this.measureRequests.length)break}if(this.updateState=0,this.measureScheduled=-1,t)for(let n of this.state.facet(Jt))n(t)}get themeClasses(){return ht+" "+(this.state.facet(ct)?dt:ut)+" "+this.state.facet(at)}updateAttrs(){let t=q(this.state.facet(he),{class:pt("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});W(this.dom,this.editorAttrs,t),this.editorAttrs=t;let e=q(this.state.facet(ue),{spellcheck:"false",contenteditable:String(this.state.facet(ne)),class:pt("content"),style:`${_.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"});W(this.contentDOM,this.contentAttrs,e),this.contentAttrs=e}mountStyles(){this.styleModules=this.state.facet(fe),i.a.mount(this.root,this.styleModules.concat(gt).reverse())}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure()}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),t){if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}pluginField(t){let e=[];for(let n of this.plugins)n.takeField(t,e);return e}plugin(t){for(let e of this.plugins)if(e.spec==t)return e.value;return null}blockAtHeight(t,e){return this.readMeasured(),this.viewState.blockAtHeight(t,hn(e,this.contentDOM))}visualLineAtHeight(t,e){return this.readMeasured(),this.viewState.lineAtHeight(t,hn(e,this.contentDOM))}visualLineAt(t,e=0){return this.viewState.lineAt(t,e)}viewportLines(t,e){let{from:n,to:r}=this.viewport;this.viewState.forEachLine(n,r,t,hn(e,this.contentDOM))}get contentHeight(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}moveByChar(t,e,n){return Ne(this,t,e,n)}moveByGroup(t,e){return Ne(this,t,e,e=>function(t,e,n){let i=t.state.charCategorizer(e),s=i(n);return t=>{let e=i(t);return s==r.CharCategory.Space&&(s=e),s==e}}(this,t.head,e))}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let s=t.state.doc.lineAt(e.head),o=i&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.posAtCoords({x:n==(t.textDirection==xt.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(i>-1)return r.EditorSelection.cursor(i,n?-1:1)}let l=vt.find(t.docView,e.head);return r.EditorSelection.cursor(l?n?l.posAtEnd:l.posAtStart:n?s.to:s.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return function(t,e,n,i){var s;let l=e.head,a=n?1:-1;if(l==(n?t.state.doc.length:0))return r.EditorSelection.cursor(l);let c=t.coordsAtPos(l);if(c){let n=t.dom.getBoundingClientRect(),o=null!==(s=e.goalColumn)&&void 0!==s?s:c.left-n.left,h=n.left+o,u=null!=i?i:5;for(let e=a<0?c.top:c.bottom,i=0;i<50;i+=10){let n=Le(t,{x:h,y:e+(u+i)*a},a);if(n<0)break;if(n!=l)return r.EditorSelection.cursor(n,void 0,void 0,o)}}let{doc:h}=t.state,u=h.lineAt(l),d=t.state.tabSize,f=e.goalColumn,p=0;if(null==f){for(const t=h.iterRange(u.from,l);!t.next().done;)p=Object(o.d)(t.value,p,d);f=p*t.defaultCharacterWidth}else p=Math.round(f/t.defaultCharacterWidth);if(a<0&&0==u.from)return r.EditorSelection.cursor(0);if(a>0&&u.to==h.length)return r.EditorSelection.cursor(u.to);let g=h.line(u.number+a),m=g.from,v=0;for(const r=h.iterRange(g.from,g.to);v>=p&&!r.next().done;){const{offset:t,leftOver:e}=Object(o.e)(r.value,v,p,d);v=p-e,m+=t}return r.EditorSelection.cursor(m,void 0,void 0,f)}(this,t,e,n)}scrollPosIntoView(t){this.viewState.scrollTo=r.EditorSelection.cursor(t),this.requestMeasure()}posAtCoords(t){return this.readMeasured(),Le(this,t)}coordsAtPos(t,e=1){this.readMeasured();let n=this.state.doc.lineAt(t),r=this.bidiSpans(n),i=this.docView.coordsAt(t,e);return i&&i.left!=i.right?Q(i,r[At.find(r,t-n.from,-1,e)].dir==xt.LTR==e>0):i}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>cn)return Dt(t.length);let e=this.textDirection;for(let r of this.bidiCache)if(r.from==t.from&&r.dir==e)return r.order;let n=Mt(t.slice(),this.textDirection);return this.bidiCache.push(new pn(t.from,t.to,e,n)),n}get hasFocus(){return this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{$(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let t of this.plugins)t.destroy(this);this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static domEventHandlers(t){return oe.define(()=>({})).eventHandlers(t)}static theme(t,e){let n=i.a.newName(),r=[at.of(n),fe.of(ft(n,t))];return e&&e.dark&&r.push(ct.of(!0)),r}static baseTheme(t){return Object(r.precedence)(fe.of(ft(ht,t)),"fallback")}}an.styleModule=fe,an.inputHandler=te,an.exceptionSink=Kt,an.updateListener=Jt,an.editable=ne,an.dragMovesSelection=Zt,an.clickAddsSelectionRange=Gt,an.mouseSelectionStyle=Yt,an.decorations=de,an.lineWrapping=an.theme({content:{whiteSpace:"pre-wrap"}}),an.contentAttributes=ue,an.editorAttributes=he;const cn=4096;function hn(t,e){return null==t?e.getBoundingClientRect().top:t}let un=-1;function dn(){un=-1;let t=document.querySelectorAll(".cm-content");for(let e=0;e<t.length;e++){let n=F.get(t[e]);n&&n.editorView.requestMeasure()}}const fn={};class pn{constructor(t,e,n,r){this.from=t,this.to=e,this.dir=n,this.order=r}static update(t,e){if(e.empty)return t;let n=[],r=t.length?t[t.length-1].dir:xt.LTR;for(let i=Math.max(0,t.length-10);i<t.length;i++){let s=t[i];s.dir!=r||e.touchesRange(s.from,s.to)||n.push(new pn(e.mapPos(s.from,1),e.mapPos(s.to,-1),s.dir,s.order))}return n}}const gn="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function mn(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const vn=r.Facet.define(),yn=an.domEventHandlers({keydown:(t,e)=>Sn(e.state.facet(vn),t,e,"editor")});function wn(t,e){return[yn,vn.of(xn(t,e))]}function bn(t,e,n){return Sn(t.state.facet(vn),e,t,n)}let On=null;function xn(t,e=gn){let n=Object.create(null),r=Object.create(null),i=(t,e)=>{let n=r[t];if(null==n)r[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},s=(t,r,s,o)=>{let l=n[t]||(n[t]=Object.create(null)),a=r.split(/ (?!$)/).map(t=>function(t,e){const n=t.split(/-(?!$)/);let r,i,s,o,l=n[n.length-1];"Space"==l&&(l=" ");for(let a=0;a<n.length-1;++a){const t=n[a];if(/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))r=!0;else if(/^(c|ctrl|control)$/i.test(t))i=!0;else if(/^s(hift)?$/i.test(t))s=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);"mac"==e?o=!0:i=!0}}return r&&(l="Alt-"+l),i&&(l="Ctrl-"+l),o&&(l="Meta-"+l),s&&(l="Shift-"+l),l}(t,e));for(let e=1;e<a.length;e++){let n=a.slice(0,e).join(" ");i(n,!0),l[n]||(l[n]={preventDefault:!0,commands:[e=>{let r=On={view:e,prefix:n,scope:t};return setTimeout(()=>{On==r&&(On=null)},4e3),!0}]})}let c=a.join(" ");i(c,!1);let h=l[c]||(l[c]={preventDefault:!1,commands:[]});h.commands.push(s),o&&(h.preventDefault=!0)};for(let o of t){let t=o[e]||o.key;if(t)for(let e of o.scope?o.scope.split(" "):["editor"])s(e,t,o.run,o.preventDefault),o.shift&&s(e,"Shift-"+t,o.shift,o.preventDefault)}return n}function Sn(t,e,n,r){let i=function(t){var e=!(p&&(t.ctrlKey||t.altKey||t.metaKey)||(h||f)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?a:l)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),s=1==i.length&&" "!=i,o="";On&&On.view==n&&On.scope==r&&(o=On.prefix+" ",On=null);let c=!!o,u=t=>{if(t){for(let e of t.commands)if(e(n))return!0;t.preventDefault&&(c=!0)}return!1};for(let a of t){let t,n=a[r];if(n){if(u(n[o+mn(i,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey)&&(t=l[e.keyCode])&&t!=i){if(u(n[o+mn(t,e,!0)]))return!0}else if(s&&e.shiftKey&&u(n[o+mn(i,e,!0)]))return!0}}return c}const kn=r.StateField.define({create:t=>Pn(t.selection),update:(t,e)=>e.docChanged||e.selection?Pn(e.state.selection):t,provide:[an.decorations]});function Cn(){return[r.EditorState.allowMultipleSelections.of(!0),kn]}class _n extends tt{toDOM(){let t=document.createElement("span");return t.className=pt("secondaryCursor"),t}}_n.deco=nt.widget({widget:new _n(null)});const Tn=nt.mark({class:pt("secondarySelection")});function Pn(t){let{ranges:e,primaryIndex:n}=t;if(1==e.length)return nt.none;let r=[];for(let i=0;i<e.length;i++)if(i!=n){let t=e[i];r.push(t.empty?_n.deco.range(t.from):Tn.range(e[i].from,e[i].to))}return nt.set(r)}const An=/[\u0000-\u0008\u000a-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/gu,En={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mn=null;function Dn(){if(null==Mn&&"undefined"!=typeof document&&document.body){let t=document.body.style;Mn=null!=(t.tabSize||t.MozTabSize)}return Mn||!1}const In=null!=/x/.unicode?"gu":"g",Qn=r.Facet.define({combine(t){let e=Object(r.combineConfig)(t,{render:null,specialChars:An,addSpecialChars:null});return(e.replaceTabs=!Dn())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,In)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,In)),e}});function Rn(t={}){let e=[Qn.of(t),Ln];return Dn()||e.push(jn),e}const Ln=oe.fromClass(class{constructor(t){this.view=t,this.decorations=nt.none,this.decorationCache=Object.create(null),this.recompute()}update(t){let e=t.prevState.facet(Qn)!=t.state.facet(Qn);e&&(this.decorationCache=Object.create(null)),(e||t.changes.length||t.viewportChanged)&&this.recompute()}recompute(){let t=[];for(let{from:e,to:n}of this.view.visibleRanges)this.getDecorationsFor(e,n,t);this.decorations=nt.set(t)}getDecorationsFor(t,e,n){let r=this.view.state.facet(Qn),{doc:i}=this.view.state;for(let s,l=t,a=i.iterRange(t,e);!a.next().done;){if(!a.lineBreak)for(;s=r.specialChars.exec(a.value);){let t,e=Object(o.b)(s[0],0);if(null!=e){if(9==e){let e=i.lineAt(l+s.index),n=this.view.state.tabSize,r=Object(o.d)(i.sliceString(e.from,l+s.index),0,n);t=nt.replace({widget:new $n((n-r%n)*this.view.defaultCharacterWidth)})}else t=this.decorationCache[e]||(this.decorationCache[e]=nt.replace({widget:new Nn(r,e)}));n.push(t.range(l+s.index,l+s.index+s[0].length))}}l+=a.value.length}}}).decorations();class Nn extends tt{constructor(t,e){super(e),this.options=t}toDOM(){let t=((e=this.value)>=32?null:10==e?"\u2424":String.fromCharCode(9216+e))||"\u2022";var e;let n="Control character "+(En[this.value]||this.value),r=this.options.render&&this.options.render(this.value,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.style.color="red",i}ignoreEvent(){return!1}}class $n extends tt{toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className=Vn.tab,t.style.width=this.value+"px",t}ignoreEvent(){return!1}}const Vn=new i.a({tab:{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}}),jn=an.styleModule.of(Vn);function Fn(){return r.EditorState.transactionFilter.of(t=>{if(!t.docChanged||"input"!=t.annotation(r.Transaction.userEvent))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.primary.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.primary,s=n.lineAt(i);if(i>s.from+200)return t;let o=n.sliceString(s.from,i);if(!e.some(t=>t.test(o)))return t;let{state:l}=t,a=-1,c=[];for(let{head:h}of l.selection.ranges){let t=l.doc.lineAt(h);if(t.from==a)continue;a=t.from;let e=Math.max(...l.facet(r.EditorState.indentation).map(e=>e(new r.IndentContext(l),t.from)));if(e<0)continue;let n=/^\s*/.exec(t.slice(0,Math.min(t.length,200)))[0],i=l.indentString(e);n!=i&&c.push({from:t.from,to:t.from+n.length,insert:i})}return c.length?[t,{changes:c}]:t})}const Hn={HeightMap:jt,HeightOracle:Lt,MeasuredHeights:Nt,QueryType:Vt,ChangedRange:pe,computeOrder:Mt,moveVisually:Qt}},"71hz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("lf1/"),i=n("KoMb"),s=n("TauG"),o={matchOp:{labels:i.matchOpTerms,type:""},binOp:{labels:i.binOpTerms,type:""},binOpModifier:{labels:i.binOpModifierTerms,type:"keyword"},functionIdentifier:{labels:i.functionIdentifierTerms,type:"function"},aggregateOp:{labels:i.aggregateOpTerms,type:"keyword"},aggregateOpModifier:{labels:i.aggregateOpModifierTerms,type:"keyword"}},l=[{keyword:"sum(rate(<input vector>[5m]))",snippet:"sum(rate(${<input vector>}[5m]))"},{keyword:"histogram_quantile(<quantile>, sum by(le) (rate(<histogram metric>[5m])))",snippet:"histogram_quantile(${<quantile>}, sum by(le) (rate(${<histogram metric>}[5m])))"},{keyword:'label_replace(<input vector>, "<dst>", "<replacement>", "<src>", "<regex>")',snippet:'label_replace(${<input vector>}, "${<dst>}", "${<replacement>}", "${<src>}", "${<regex>}")'}].map(t=>({label:t.name||t.keyword,original:t.name||t.keyword,apply:r.snippet(t.snippet),score:0}));e.HybridComplete=class{constructor(t){this.prometheusClient=t}promQL(t){var e,n,r,s,l,a,c,h,u,d,f,p,g,m,v,y,w;const{state:b,pos:O}=t,x=b.tree.resolve(O,-1);if((null===(e=x.parent)||void 0===e?void 0:e.type.id)===i.MetricIdentifier&&x.type.id===i.Identifier){let e=[o.functionIdentifier,o.aggregateOp,o.binOp];return(null===(l=null===(s=null===(r=null===(n=x.parent)||void 0===n?void 0:n.parent)||void 0===r?void 0:r.parent)||void 0===s?void 0:s.parent)||void 0===l?void 0:l.type.id)===i.BinaryExpr&&(e=e.concat(o.binOpModifier)),this.prometheusClient?this.prometheusClient.labelValues("__name__").then(n=>this.arrayToCompletionResult([{labels:n,type:"constant"}].concat(e),x.start,O,t,b,!0)):this.arrayToCompletionResult(e,x.start,O,t,b,!0)}return x.type.id===i.GroupingLabels||(null===(a=x.parent)||void 0===a?void 0:a.type.id)===i.GroupingLabel&&x.type.id===i.LabelName?this.labelNames(x,O,t,b):x.type.id===i.LabelMatchers||(null===(c=x.parent)||void 0===c?void 0:c.type.id)===i.LabelMatcher&&x.type.id===i.LabelName?this.autocompleteLabelNamesByMetric(x,O,t,b):(null===(h=x.parent)||void 0===h?void 0:h.type.id)===i.LabelMatcher&&x.type.id===i.StringLiteral?this.autocompleteLabelValue(x.parent,x,O,t,b):x.type.id===i.LabelMatcher&&(null===(u=x.firstChild)||void 0===u?void 0:u.type.id)===i.LabelName&&0===(null===(d=x.lastChild)||void 0===d?void 0:d.type.id)&&null===(null===(f=x.lastChild)||void 0===f?void 0:f.firstChild)?this.arrayToCompletionResult([o.matchOp],x.lastChild.start,O,t,b):x.type.id===i.MatchOp||(null===(p=x.parent)||void 0===p?void 0:p.type.id)===i.MatchOp?this.arrayToCompletionResult([o.matchOp],x.start,O,t,b):(null===(g=x.parent)||void 0===g?void 0:g.type.id)===i.BinaryExpr?this.arrayToCompletionResult([o.binOp],x.start,O,t,b):(null===(m=x.parent)||void 0===m?void 0:m.type.id)===i.FunctionIdentifier?this.arrayToCompletionResult([o.functionIdentifier],x.start,O,t,b):(null===(v=x.parent)||void 0===v?void 0:v.type.id)===i.AggregateOp?this.arrayToCompletionResult([o.aggregateOp],x.start,O,t,b):x.type.id===i.Identifier&&0===(null===(y=x.parent)||void 0===y?void 0:y.type.id)||0===x.type.id&&(null===(w=x.parent)||void 0===w?void 0:w.type.id)!==i.LabelMatchers?this.arrayToCompletionResult([o.aggregateOpModifier].concat(o.binOp),x.start,O,t,b):null}autocompleteLabelValue(t,e,n,r,s){if(!this.prometheusClient)return null;let o="";this.prometheusClient&&t.firstChild&&t.firstChild.type.id===i.LabelName&&(o=s.sliceDoc(t.firstChild.start,t.firstChild.end));const l=this.getMetricNameInVectorSelector(e,s);return this.prometheusClient.labelValues(o,l).then(t=>this.arrayToCompletionResult([{labels:t,type:"text"}],e.start+1,n,r,s))}autocompleteLabelNamesByMetric(t,e,n,r){return this.labelNames(t,e,n,r,this.getMetricNameInVectorSelector(t,r))}getMetricNameInVectorSelector(t,e){let n=s.walkBackward(t,i.VectorSelector);return n?(n=s.walkThrough(n,i.MetricIdentifier,i.Identifier),n?e.sliceDoc(n.start,n.end):""):""}labelNames(t,e,n,r,s){return this.prometheusClient?this.prometheusClient.labelNames(s).then(s=>this.arrayToCompletionResult([{labels:s,type:"constant"}],t.type.id===i.GroupingLabels||t.type.id===i.LabelMatchers?t.start+1:t.start,e,n,r)):null}arrayToCompletionResult(t,e,n,r,i,s=!1){const o=i.sliceDoc(e,n),a=[];for(const l of t)for(const t of l.labels){const e=r.filter({label:t,original:t,apply:t,type:l.type,score:0},o);null!==e&&a.push(e)}if(s)for(const c of l){const t=r.filter(c,o);null!==t&&a.push(t)}return{from:e,to:n,options:a,filterDownOn:/^[a-zA-Z0-9_:]+$/}}}},BVGc:function(t,e,n){"use strict";n.r(e),n.d(e,"hoverTooltip",(function(){return u})),n.d(e,"showTooltip",(function(){return a})),n.d(e,"tooltips",(function(){return l}));var r=n("3Yt4"),i=n("dC2d");const s=r.ViewPlugin.fromClass(class{constructor(t){this.view=t,t.scrollDOM.addEventListener("scroll",this.onscroll=this.onscroll.bind(this)),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.tooltips=t.state.facet(a),this.tooltipViews=this.tooltips.map(t=>this.createTooltip(t))}update(t){let e=t.state.facet(a);if(e==this.tooltips)for(let n of this.tooltipViews)n.update&&n.update(t);else{let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=-1;for(let t=0;t<this.tooltips.length;t++)this.tooltips[t].create==i.create&&(s=t);if(s<0)n[r]=this.createTooltip(i);else{let e=n[r]=this.tooltipViews[s];e.update&&e.update(t)}}for(let t of this.tooltipViews)n.indexOf(t)<0&&t.dom.remove();this.tooltips=e,this.tooltipViews=n,this.tooltips.length&&this.view.requestMeasure(this.measureReq)}t.docChanged&&this.tooltips.length&&this.view.requestMeasure(this.measureReq)}createTooltip(t){let e=t.create(this.view);return e.dom.className=Object(r.themeClass)("tooltip"+(t.style?"."+t.style:"")),this.view.dom.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){this.view.scrollDOM.removeEventListener("scroll",this.onscroll);for(let{dom:t}of this.tooltipViews)t.remove()}readMeasure(){return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map(t=>this.view.coordsAtPos(t.pos)),size:this.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}writeMeasure(t){let{editor:e}=t;for(let n=0;n<this.tooltipViews.length;n++){let i=this.tooltips[n],{dom:s}=this.tooltipViews[n],o=t.pos[n],l=t.size[n];if(!o||o.bottom<=e.top||o.top>=e.bottom||o.right<=e.left||o.left>=e.right){s.style.top="-10000px";continue}let a=l.right-l.left,c=l.bottom-l.top,h=this.view.textDirection==r.Direction.LTR?Math.min(o.left,t.innerWidth-a):Math.max(0,o.left-a),u=!!i.above;!i.strictSide&&(u?o.top-(l.bottom-l.top)<0:o.bottom+(l.bottom-l.top)>t.innerHeight)&&(u=!u),s.style.top=(u?o.top-c:o.bottom)-e.top+"px",s.style.left=h-e.left+"px"}}onscroll(){this.tooltips.length&&this.view.requestMeasure(this.measureReq)}}),o=r.EditorView.baseTheme({tooltip:{position:"absolute",border:"1px solid silver",backgroundColor:"#f5f5f5",zIndex:100}});function l(){return[s,o]}const a=i.Facet.define();class c{constructor(t,e,n,r){this.view=t,this.source=e,this.field=n,this.setHover=r,this.lastMouseMove=null,this.hoverTimeout=-1,this.mouseInside=!1,this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseenter",this.mouseenter=this.mouseenter.bind(this)),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,!this.mouseInside||this.active)return;let t=Date.now(),e=this.lastMouseMove;if(t-e.timeStamp<750)return void(this.hoverTimeout=setTimeout(this.checkHover,750-(t-e.timeStamp)));let n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords({x:e.clientX,y:e.clientY}):-1,r=n<0?null:this.source(this.view,(t,r)=>t<=n&&r>=n&&(t==r||h(this.view,t,r,e.clientX,e.clientY)));r&&this.view.dispatch({effects:this.setHover.of(r)})}mousemove(t){var e;this.lastMouseMove=t,this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,750));let n=this.active;if(n&&!function(t){for(let e=t;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}(t.target)){let{pos:r}=n,i=null!==(e=n.end)&&void 0!==e?e:r;(r==i?this.view.posAtCoords({x:t.clientX,y:t.clientY})==r:h(this.view,r,i,t.clientX,t.clientY,10))||this.view.dispatch({effects:this.setHover.of(null)})}}mouseenter(){this.mouseInside=!0}mouseleave(){this.mouseInside=!1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){this.view.dom.removeEventListener("mouseenter",this.mouseenter),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function h(t,e,n,r,i,s=0){let o=document.createRange(),l=t.domAtPos(e),a=t.domAtPos(n);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let c=o.getClientRects();for(let h=0;h<c.length;h++){let t=c[h];if(Math.max(t.top-i,i-t.bottom,t.left-r,r-t.right)<=s)return!0}return!1}function u(t,e={}){const n=i.StateEffect.define(),s=i.StateField.define({create:()=>null,update(t,r){if(t&&e.hideOnChange&&(r.docChanged||r.selection))return null;for(let e of r.effects)if(e.is(n))return e.value;if(t&&r.docChanged){let e=r.changes.mapPos(t.pos,-1,i.MapMode.TrackDel);if(e<0)return null;let n=Object.assign(Object.create(null),t);return n.pos=e,null!=t.end&&(n.end=r.changes.mapPos(t.end)),n}return t},provide:[a.nFrom(t=>t?[t]:[])]});return[s,r.ViewPlugin.define(e=>new c(e,t,s,n)),l()]}},"K+00":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.completeSnippets=e.snippet=void 0;const r=n("3Yt4"),i=n("dC2d"),s=n("ggtp");class o{constructor(t,e,n,r){this.field=t,this.line=e,this.from=n,this.to=r}}class l{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){return new l(this.field,t.mapPos(this.from,-1),t.mapPos(this.to,1))}}class a{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],r=[e],s=t.doc.lineAt(e),o=/^\s*/.exec(s.slice(0,Math.min(100,s.length)))[0];for(let l of this.lines){if(n.length){let n=o,s=/^\t*/.exec(l)[0].length;for(let e=0;e<s;e++)n+=t.facet(i.EditorState.indentUnit);r.push(e+n.length-s),l=n+l.slice(s)}n.push(l),e+=l.length+1}return{text:n,ranges:this.fieldPositions.map(t=>new l(t.field,r[t.line]+t.from,r[t.line]+t.to))}}static parse(t){let e,n=[],r=[],i=[];for(let s of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let t=e[1]?+e[1]:null,l=e[2]||e[3],a=-1;for(let e=0;e<n.length;e++)(l?n[e].name==l:null!=t&&n[e].seq==t)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:l||null}),a=e}i.push(new o(a,r.length,e.index,e.index+l.length)),s=s.slice(0,e.index)+l+s.slice(e.index+e[0].length)}r.push(s)}return new a(r,i)}}let c=r.Decoration.widget({widget:new class extends r.WidgetType{toDOM(){let t=document.createElement("span");return t.className=r.themeClass("snippetFieldPosition"),t}}(null)}),h=r.Decoration.mark({class:r.themeClass("snippetField")});class u{constructor(t,e){this.ranges=t,this.active=e,this.deco=r.Decoration.set(t.map(t=>(t.from==t.to?c:h).range(t.from,t.to)))}map(t){return new u(this.ranges.map(e=>e.map(t)),this.active)}selectionInsideField(t){return t.ranges.every(t=>this.ranges.some(e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))}}const d=i.StateEffect.define({map:(t,e)=>t&&t.map(e)}),f=i.StateEffect.define(),p=i.StateField.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(d))return n.value;if(n.is(f)&&t)return new u(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:[r.EditorView.decorations.from(t=>t?t.deco:r.Decoration.none)]});function g(t,e){return i.EditorSelection.create(t.filter(t=>t.field==e).map(t=>i.EditorSelection.range(t.from,t.to)))}function m(t){let e=a.parse(t);return(t,n)=>{let{text:r,ranges:o}=e.instantiate(t.state,n.from),l={changes:{from:n.from,to:n.to,insert:i.Text.of(r)}};o.length&&(l.selection=g(o,0)),o.length>1&&(l.effects=d.of(new u(o,0)),void 0===t.state.field(p,!1)&&(l.reconfigure={append:[p,y,s.baseTheme]})),t.dispatch(t.state.update(l))}}function v(t){return({state:e,dispatch:n})=>{let r=e.field(p,!1);if(!r||t<0&&0==r.active)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(e=>e.field==i+t);return n(e.update({selection:g(r.ranges,i),effects:d.of(s?null:new u(r.ranges,i))})),!0}}e.snippet=m;const y=i.precedence(r.keymap([{key:"Tab",run:v(1),shift:v(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(p,!1)&&(e(t.update({effects:d.of(null)})),!0)}]),"override");e.completeSnippets=function(t){let e=t.map(t=>({label:t.name||t.keyword,original:t.name||t.keyword,apply:m(t.snippet),score:0}));return t=>{let n=t.tokenBefore();if(!/[\w\u00a1-\uffff]/.test(n.text)&&!t.explicit)return null;let r=[];for(let i of e){const e=t.filter(i,n.text);null!==e?r.push(e):n.text||r.push(i)}return{from:n.from,to:t.pos,options:r,filterDownOn:/^[\w\u00a1-\uffff]+$/}}}},KoMb:function(t,e,n){"use strict";n.r(e),n.d(e,"Abs",(function(){return Mt})),n.d(e,"Absent",(function(){return Et})),n.d(e,"AbsentOverTime",(function(){return Pt})),n.d(e,"Add",(function(){return yt})),n.d(e,"AggregateExpr",(function(){return J})),n.d(e,"AggregateModifier",(function(){return et})),n.d(e,"AggregateOp",(function(){return tt})),n.d(e,"And",(function(){return X})),n.d(e,"Avg",(function(){return Q})),n.d(e,"AvgOverTime",(function(){return Dt})),n.d(e,"BinModifier",(function(){return ht})),n.d(e,"BinaryExpr",(function(){return at})),n.d(e,"Bool",(function(){return P})),n.d(e,"BoolModifier",(function(){return dt})),n.d(e,"Bottomk",(function(){return R})),n.d(e,"By",(function(){return U})),n.d(e,"Ceil",(function(){return It})),n.d(e,"Changes",(function(){return Qt})),n.d(e,"ClampMax",(function(){return Rt})),n.d(e,"ClampMin",(function(){return Lt})),n.d(e,"Count",(function(){return L})),n.d(e,"CountOverTime",(function(){return Nt})),n.d(e,"CountValues",(function(){return N})),n.d(e,"DayOfMonth",(function(){return Vt})),n.d(e,"DayOfWeek",(function(){return jt})),n.d(e,"DaysOfMonth",(function(){return $t})),n.d(e,"Delta",(function(){return Ft})),n.d(e,"Deriv",(function(){return Ht})),n.d(e,"Div",(function(){return mt})),n.d(e,"Duration",(function(){return Se})),n.d(e,"Eql",(function(){return bt})),n.d(e,"EqlRegex",(function(){return $e})),n.d(e,"EqlSingle",(function(){return Ne})),n.d(e,"Exp",(function(){return Bt})),n.d(e,"Expr",(function(){return K})),n.d(e,"Floor",(function(){return zt})),n.d(e,"FunctionCall",(function(){return _t})),n.d(e,"FunctionCallArgs",(function(){return lt})),n.d(e,"FunctionCallBody",(function(){return ot})),n.d(e,"FunctionIdentifier",(function(){return Tt})),n.d(e,"Group",(function(){return $})),n.d(e,"GroupLeft",(function(){return M})),n.d(e,"GroupModifiers",(function(){return ut})),n.d(e,"GroupRight",(function(){return D})),n.d(e,"GroupingLabel",(function(){return it})),n.d(e,"GroupingLabelList",(function(){return rt})),n.d(e,"GroupingLabels",(function(){return nt})),n.d(e,"Gte",(function(){return Ot})),n.d(e,"Gtr",(function(){return xt})),n.d(e,"HistogramQuantile",(function(){return qt})),n.d(e,"HoltWinters",(function(){return Ut})),n.d(e,"Hour",(function(){return Wt})),n.d(e,"Idelta",(function(){return Xt})),n.d(e,"Identifier",(function(){return At})),n.d(e,"Ignoring",(function(){return A})),n.d(e,"Increase",(function(){return Gt})),n.d(e,"Irate",(function(){return Zt})),n.d(e,"LabelJoin",(function(){return Kt})),n.d(e,"LabelMatchList",(function(){return Qe})),n.d(e,"LabelMatcher",(function(){return Re})),n.d(e,"LabelMatchers",(function(){return Ie})),n.d(e,"LabelName",(function(){return st})),n.d(e,"LabelReplace",(function(){return Yt})),n.d(e,"LineComment",(function(){return Y})),n.d(e,"Ln",(function(){return Jt})),n.d(e,"Log10",(function(){return te})),n.d(e,"Log2",(function(){return ee})),n.d(e,"Lss",(function(){return kt})),n.d(e,"Lte",(function(){return St})),n.d(e,"MatchOp",(function(){return Le})),n.d(e,"MatrixSelector",(function(){return xe})),n.d(e,"Max",(function(){return V})),n.d(e,"MaxOverTime",(function(){return ne})),n.d(e,"MaybeGroupingLabels",(function(){return pt})),n.d(e,"MetricIdentifier",(function(){return De})),n.d(e,"Min",(function(){return j})),n.d(e,"MinOverTime",(function(){return re})),n.d(e,"Minute",(function(){return ie})),n.d(e,"Mod",(function(){return vt})),n.d(e,"Month",(function(){return se})),n.d(e,"Mul",(function(){return gt})),n.d(e,"Neq",(function(){return Ct})),n.d(e,"NeqRegex",(function(){return Ve})),n.d(e,"NumberLiteral",(function(){return ke})),n.d(e,"Offset",(function(){return I})),n.d(e,"OffsetExpr",(function(){return Ce})),n.d(e,"On",(function(){return E})),n.d(e,"OnOrIgnoring",(function(){return ft})),n.d(e,"Or",(function(){return G})),n.d(e,"ParenExpr",(function(){return _e})),n.d(e,"Pow",(function(){return ct})),n.d(e,"PredictLinear",(function(){return oe})),n.d(e,"Quantile",(function(){return F})),n.d(e,"QuantileOverTime",(function(){return le})),n.d(e,"Rate",(function(){return ae})),n.d(e,"Resets",(function(){return ce})),n.d(e,"Round",(function(){return he})),n.d(e,"Scalar",(function(){return ue})),n.d(e,"Sort",(function(){return de})),n.d(e,"SortDesc",(function(){return fe})),n.d(e,"Sqrt",(function(){return pe})),n.d(e,"Stddev",(function(){return H})),n.d(e,"StddevOverTime",(function(){return ge})),n.d(e,"Stdvar",(function(){return B})),n.d(e,"StdvarOverTime",(function(){return me})),n.d(e,"StringLiteral",(function(){return Te})),n.d(e,"Sub",(function(){return wt})),n.d(e,"SubqueryExpr",(function(){return Pe})),n.d(e,"Sum",(function(){return z})),n.d(e,"SumOverTime",(function(){return ve})),n.d(e,"Time",(function(){return we})),n.d(e,"Timestamp",(function(){return ye})),n.d(e,"Topk",(function(){return q})),n.d(e,"UnaryExpr",(function(){return Ae})),n.d(e,"UnaryOp",(function(){return Ee})),n.d(e,"Unless",(function(){return Z})),n.d(e,"Vector",(function(){return be})),n.d(e,"VectorSelector",(function(){return Me})),n.d(e,"Without",(function(){return W})),n.d(e,"Year",(function(){return Oe})),n.d(e,"aggregateOpModifierTerms",(function(){return qe})),n.d(e,"aggregateOpTerms",(function(){return ze})),n.d(e,"binOpModifierTerms",(function(){return He})),n.d(e,"binOpTerms",(function(){return Fe})),n.d(e,"functionIdentifierTerms",(function(){return Be})),n.d(e,"matchOpTerms",(function(){return je})),n.d(e,"parser",(function(){return T}));var r,i=n("WQMp"),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},o=function(){function t(t,e,n,r,i,s,o,l,a){this.cx=t,this.stack=e,this.state=n,this.reducePos=r,this.pos=i,this.recovered=s,this.buffer=o,this.bufferBase=l,this.parent=a}return t.prototype.toString=function(){return"["+this.stack.filter((function(t,e){return e%3==0})).concat(this.state)+"]@"+this.pos+(this.recovered?"!"+this.recovered:"")},t.start=function(e,n,r){return void 0===r&&(r=0),new t(e,[],n,r,r,0,[],0,null)},t.prototype.pushState=function(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t},t.prototype.reduce=function(t){var e=t>>19,n=65535&t,r=this.cx.parser;if(0==e)return n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.pushState(r.getGoto(this.state,n,!0),this.reducePos);var i=this.stack.length-3*(e-1)-(262144&t?6:0),s=this.stack[i-2],o=this.bufferBase+this.buffer.length-this.stack[i-1];if(n<r.minRepeatTerm||131072&t||n>r.maxNode&&n<=r.maxRepeatWrap){var l=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,l,o+4,!0)}for(this.state=262144&t?this.stack[i]:r.getGoto(this.stack[i-3],n,!0);this.stack.length>i;)this.stack.pop()},t.prototype.storeNode=function(t,e,n,r,i){if(void 0===r&&(r=4),void 0===i&&(i=!1),0==t){var s=this,o=this.buffer.length;if(0==o&&s.parent&&(o=s.bufferBase-s.parent.bufferBase,s=s.parent),o>0&&0==s.buffer[o-4]&&s.buffer[o-1]>-1){if(e==n)return;if(s.buffer[o-2]>=e)return void(s.buffer[o-2]=n)}}if(i&&this.pos!=n){var l=this.buffer.length;if(l>0&&0!=this.buffer[l-4])for(;l>0&&this.buffer[l-2]>n;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,r>4&&(r-=4);this.buffer[l]=t,this.buffer[l+1]=e,this.buffer[l+2]=n,this.buffer[l+3]=r}else this.buffer.push(t,e,n,r)},t.prototype.shift=function(t,e,n){if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){var r=this.pos,i=t,s=this.cx.parser;(n>this.pos||e<=s.maxNode)&&(this.pos=n,s.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),e<=s.maxNode&&this.buffer.push(e,r,n,4)}else e<=this.cx.parser.maxNode&&this.buffer.push(e,this.pos,n,4),this.pos=n},t.prototype.apply=function(t,e,n){65536&t?this.reduce(t):this.shift(t,e,n)},t.prototype.useNode=function(t,e){var n=this.cx.reused.length-1;(n<0||this.cx.reused[n]!=t)&&(this.cx.reused.push(t),n++);var r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(n,r,this.reducePos,-1)},t.prototype.split=function(){for(var e=this,n=e.buffer.length;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;for(var r=e.buffer.slice(n),i=e.bufferBase+n;e&&i==e.bufferBase;)e=e.parent;return new t(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.recovered,r,i,e)},t.prototype.recoverByDelete=function(t,e){var n=t<=this.cx.parser.maxNode;n&&this.storeNode(t,this.pos,e),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.recovered+=2},t.prototype.canShift=function(t){for(var e=new l(this);;){var n=this.cx.parser.stateSlot(e.top,4)||this.cx.parser.hasAction(e.top,t);if(0==(65536&n))return!0;if(0==n)return!1;e.reduce(n)}},Object.defineProperty(t.prototype,"ruleStart",{get:function(){var t=this.cx.parser.stateSlot(this.state,5);return 65536&t?this.stack[this.stack.length-3*(t>>19)+1]:0},enumerable:!0,configurable:!0}),t.prototype.startOf=function(t){for(var e=this.state,n=this.stack.length,r=this.cx.parser;;){var i=r.stateSlot(e,5),s=i>>19,o=65535&i;if(t.indexOf(o)>-1)return this.stack[n-3*(i>>19)+1];if(0==n)return-1;e=0==s?this.stack[n-=3]:r.getGoto(this.stack[(n-=3*(s-1))-3],o,!0)}},t.prototype.recoverByInsert=function(t){var e=this,n=this.cx.parser.nextStates(this.state);if(n.length>4){for(var r=n.filter((function(n){return n!=e.state&&e.cx.parser.hasAction(n,t)})),i=0;r.length<4&&i<n.length;i++)r.indexOf(n[i])<0&&r.push(n[i]);n=r}var s=[];for(i=0;i<n.length&&s.length<4;i++)if(n[i]!=this.state){var o=this.split();o.storeNode(0,o.pos,o.pos,4,!0),o.pushState(n[i],this.pos),o.recovered+=2,s.push(o)}return s},t.prototype.forceReduce=function(){var t=this.cx.parser.stateSlot(this.state,5);return 0!=(65536&t)&&(this.cx.parser.validAction(this.state,t)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.recovered+=1),this.reduce(t),!0)},t.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this},t.prototype.toTree=function(){return i.e.build({buffer:a.create(this),group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})},Object.defineProperty(t.prototype,"parser",{get:function(){return this.cx.parser},enumerable:!0,configurable:!0}),t.prototype.dialectEnabled=function(t){return this.cx.dialect.flags[t]},t}();!function(t){t[t.Token=2]="Token",t[t.Reduce=1]="Reduce",t[t.MaxNext=4]="MaxNext"}(r||(r={}));var l=function(){function t(t){this.stack=t,this.top=t.state,this.rest=t.stack,this.offset=this.rest.length}return t.prototype.reduce=function(t){var e=65535&t,n=t>>19;0==n?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(n-1);var r=this.stack.cx.parser.getGoto(this.rest[this.offset-3],e,!0);this.top=r},t}(),a=function(){function t(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}return t.create=function(e){return new t(e,e.bufferBase+e.buffer.length,e.buffer.length)},t.prototype.maybeNext=function(){var t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)},Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),t.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},t.prototype.fork=function(){return new t(this.stack,this.pos,this.index)},t}(),c=function(){function t(){this.start=-1,this.value=-1,this.end=-1}return t.prototype.accept=function(t,e){this.value=t,this.end=e},t}(),h=function(){function t(t,e){void 0===e&&(e=t.length),this.string=t,this.length=e}return t.prototype.get=function(t){return t<0||t>=this.length?-1:this.string.charCodeAt(t)},t.prototype.read=function(t,e){return this.string.slice(t,Math.min(this.length,e))},t.prototype.clip=function(e){return new t(this.string,e)},t}(),u=function(){function t(t,e){this.data=t,this.id=e}return t.prototype.token=function(t,e,n){!function(t,e,n,r,i){var s=0,o=1<<i,l=r.cx.dialect;t:for(var a=n.start;0!=(o&t[s]);){for(var c=t[s+1],h=s+3;h<c;h+=2)if((t[h+1]&o)>0){var u=t[h];if(l.allows(u)&&(-1==n.value||n.value==u||r.cx.parser.overrides(u,n.value))){n.accept(u,a);break}}for(var d=e.get(a++),f=0,p=t[s+2];f<p;){var g=f+p>>1,m=c+g+(g<<1);if(d<t[m])p=g;else{if(!(d>=t[m+1])){s=t[m+2];continue t}f=g+1}}break}}(this.data,t,e,n,this.id)},t}();function d(t,e){void 0===e&&(e=Uint16Array);for(var n=null,r=0,i=0;r<t.length;){for(var s=0;;){var o=t.charCodeAt(r++),l=!1;if(126==o){s=65535;break}o>=92&&o--,o>=34&&o--;var a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}n?n[i++]=s:n=new e(s)}return n}u.prototype.contextual=u.prototype.fallback=!1;var f="undefined"!=typeof process&&/\bparse\b/.test(process.env.LOG),p=function(){function t(t){this.start=[0],this.index=[0],this.nextStart=0,this.trees=[t]}return t.prototype.nodeAt=function(t){if(t<this.nextStart)return null;for(;;){var e=this.trees.length-1;if(e<0)return this.nextStart=1e9,null;var n=this.trees[e],r=this.index[e];if(r!=n.children.length){var s=n.children[r],o=this.start[e]+n.positions[r];if(o>=t)return o==t?s:null;s instanceof i.f?(this.index[e]++,this.nextStart=o+s.length):(this.index[e]++,o+s.length>=t&&(this.trees.push(s),this.start.push(o),this.index.push(0)))}else this.trees.pop(),this.start.pop(),this.index.pop()}},t}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.extended=-1,e.mask=0,e}return function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.clear=function(t){this.start=t,this.value=this.extended=-1},e}(c),m=new c,v=function(){function t(t){this.tokens=[],this.mainToken=m,this.actions=[],this.tokens=t.tokenizers.map((function(t){return new g}))}return t.prototype.getActions=function(t,e){for(var n=0,r=null,i=t.cx.parser,s=i.tokenizers,o=i.stateSlot(t.state,3),l=0;l<s.length;l++)if(0!=(1<<l&o)){var a=s[l],c=this.tokens[l];if((!r||a.fallback)&&((a.contextual||c.start!=t.pos||c.mask!=o)&&(this.updateCachedToken(c,a,t,e),c.mask=o),0!=c.value)){r=c;var h=n;if(c.extended>-1&&(n=this.addActions(t,c.extended,c.end,n)),(n=this.addActions(t,c.value,c.end,n))>h)break}}for(;this.actions.length>n;)this.actions.pop();return r||((r=m).start=t.pos,t.pos==e.length?r.accept(t.cx.parser.eofTerm,t.pos):r.accept(0,t.pos+1)),this.mainToken=r,this.actions},t.prototype.updateCachedToken=function(t,e,n,r){if(t.clear(n.pos),e.token(r,t,n),t.value>-1){for(var i=n.cx.parser,s=0;s<i.specialized.length;s++)if(i.specialized[s]==t.value){var o=i.specializers[s](r.read(t.start,t.end),n);if(o>=0&&n.cx.dialect.allows(o>>1)){0==(1&o)?t.value=o>>1:t.extended=o>>1;break}}}else n.pos==r.length?t.accept(n.cx.parser.eofTerm,n.pos):t.accept(0,n.pos+1)},t.prototype.putAction=function(t,e,n,r){for(var i=0;i<r;i+=3)if(this.actions[i]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=n,r},t.prototype.addActions=function(t,e,n,r){for(var i=t.state,s=t.cx.parser,o=s.data,l=0;l<2;l++)for(var a=s.stateSlot(i,l?2:1),c=void 0;65535!=(c=o[a]);a+=3)(c==e||0==c&&0==r)&&(r=this.putAction(o[a+1]|o[a+2]<<16,e,n,r));return r},t}(),y=function(t,e,n,r,i,s,o){void 0===s&&(s=null),void 0===o&&(o=-1),this.parser=t,this.maxBufferLength=e,this.input=n,this.topTerm=r,this.dialect=i,this.parent=s,this.wrapType=o,this.reused=[],this.tokens=new v(t)},w=function(){function t(t,e,n){void 0===n&&(n={}),this.pos=0,this.recovering=0,this.tokenCount=0;var r=n.cache,s=void 0===r?void 0:r,l=n.strict,a=void 0!==l&&l,c=n.bufferLength,h=void 0===c?i.a:c,u=n.top,d=void 0===u?void 0:u,f=n.dialect,g=d?t.topRules[d]:t.defaultTop;if(!g)throw new RangeError("Invalid top rule name "+d);this.stacks=[o.start(new y(t,h,e,g[1],t.parseDialect(f)),g[0])],this.strict=a,this.cache=s?new p(s):null}return t.prototype.putStack=function(t){this.stacks.push(t),(this.pos<0||t.pos<this.pos)&&(this.pos=t.pos)},t.prototype.advance=function(){var t=this.stacks,e=this.pos;this.stacks=[],this.pos=-1;for(var n=null,r=null,i=0;i<t.length;i++)for(var s=t[i];;){if(s.pos>e)this.putStack(s);else{var o=this.advanceStack(s,t);if(o){s=o;continue}n||(n=[],r=[]),n.push(s);var l=s.cx.tokens.mainToken;r.push(l.value,l.end)}break}if(!this.stacks.length){var a;if(a=n&&function(t){for(var e=null,n=0,r=t;n<r.length;n++){var i=r[n];i.pos==i.cx.input.length&&i.cx.parser.stateFlag(i.state,2)&&(!e||e.recovered>i.recovered)&&(e=i)}return e}(n))return a.toTree();if(this.strict)throw new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&n&&(a=this.runRecovery(n,r)))return a.forceAll().toTree();if(this.recovering){var c=1==this.recovering?1:3*this.recovering;this.stacks.length>c&&(this.stacks.sort((function(t,e){return t.recovered-e.recovered})),this.stacks.length=c),this.stacks.some((function(t){return t.reducePos>e}))&&this.recovering--}else if(this.stacks.length>1&&this.stacks[0].buffer.length>200){var h=1e9,u=-1;for(i=0;i<this.stacks.length;i++)(s=this.stacks[i]).buffer.length<h&&(h=s.buffer.length,u=i);h>200&&this.stacks.splice(u,1)}return this.tokenCount++,null},t.prototype.advanceStack=function(t,e){var n=t.pos,r=t.cx,s=r.input,l=r.parser,a=f?t+" -> ":"";if(this.cache)for(var c=this.cache.nodeAt(n);c;){var h=l.group.types[c.type.id]==c.type?l.getGoto(t.state,c.type.id):-1;if(h>-1)return t.useNode(c,h),f&&console.log(a+t+" (via reuse of "+l.getName(c.type.id)+")"),t;if(!(c instanceof i.e)||0==c.children.length||c.positions[0]>0)break;var u=c.children[0];if(!(u instanceof i.e))break;c=u}var d=l.startNested(t.state);t:if(d>-1){var p=l.nested[d],g=p.grammar,m=p.end,v=p.placeholder,w=void 0,b=null,O=void 0,x=void 0,S=void 0,k=void 0;if("function"==typeof g){var C=g(s,t);if(C.stay)break t;b=C.parseNode,O=C.parser,x=C.top,S=C.dialect,w=C.filterEnd,k=C.wrapType}else O=g;var _=this.scanForNestEnd(t,m,w),T=t.cx.input.clip(_);if(b||!O){var P=b?b(T,t.pos):i.e.empty;return P.length!=_-t.pos&&(P=new i.e(P.type,P.children,P.positions,_-t.pos)),null!=k&&(P=new i.e(l.group.types[k],[P],[0],P.length)),t.useNode(P,l.getGoto(t.state,v,!0)),t}var A=x?O.topRules[x]:O.defaultTop,E=o.start(new y(O,t.cx.maxBufferLength,T,A[1],O.parseDialect(S),t,k),A[0],t.pos);return f&&console.log(a+E+" (nested)"),E}var M=l.stateSlot(t.state,4);if(M>0)return t.reduce(M),f&&console.log(a+t+" (via always-reduce "+l.getName(65535&M)+")"),t;for(var D=t.cx.tokens.getActions(t,s),I=0;I<D.length;){var Q=D[I++],R=D[I++],L=(_=D[I++],I==D.length||!e),N=L?t:t.split();if(N.apply(Q,R,_),f&&console.log(a+N+" (via "+(0==(65536&Q)?"shift":"reduce of "+l.getName(65535&Q))+" for "+l.getName(R)+" @ "+n+(N==t?"":", split")+")"),L)return N;N.pos>n?this.putStack(N):e.push(N)}return t.cx.parent&&t.pos==s.length?function(t){if(-2==t.cx.wrapType)return null;var e=t.cx.parent,n=t.forceAll().toTree(),r=e.cx.parser,s=r.nested[r.startNested(e.state)];return n=new i.e(n.type,n.children,n.positions.map((function(t){return t-e.pos})),t.pos-e.pos),t.cx.wrapType>-1&&(n=new i.e(r.group.types[t.cx.wrapType],[n],[0],n.length)),t.cx.wrapType=-2,e.useNode(n,r.getGoto(e.state,s.placeholder,!0)),f&&console.log(e+" (via unnest "+(t.cx.wrapType>-1?r.getName(t.cx.wrapType):n.type.name)+")"),e}(t):null},t.prototype.advanceFully=function(t){for(var e=t.pos;;){var n=this.advanceStack(t,null);if(!n)return t;if(n.pos>e)return this.putStack(n),null;t=n}},t.prototype.runRecovery=function(t,e){for(var n=null,r=0;r<t.length;r++){for(var i=t[r],s=e[r<<1],o=e[1+(r<<1)],l=f?i+" -> ":"",a=i.split(),c=l,h=0;a.forceReduce()&&h<10;h++){f&&console.log(c+a+" (via force-reduce)");var u=this.advanceFully(a);if(!u)break;a=u,f&&(c=u+" -> ")}for(var d=0,p=i.recoverByInsert(s);d<p.length;d++){var g=p[d];f&&console.log(l+g+" (via recover-insert)"),this.advanceFully(g)}i.cx.input.length>i.pos?(o==i.pos&&(o++,s=0),i.recoverByDelete(s,o),f&&console.log(l+i+" (via recover-delete "+i.cx.parser.getName(s)+")"),this.putStack(i)):i.cx.parent||n&&!(n.recovered>i.recovered)||(n=i)}return n},t.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()},Object.defineProperty(t.prototype,"badness",{get:function(){return 2*this.stacks[0].recovered/this.tokenCount},enumerable:!0,configurable:!0}),t.prototype.scanForNestEnd=function(t,e,n){for(var r=t.cx.input,i=t.pos;i<r.length;i++)if(m.start=i,m.value=-1,e.token(r,m,t),m.value>-1&&(!n||n(r.read(i,m.end))))return i;return r.length},t}(),b=function(){function t(t,e,n){this.source=t,this.flags=e,this.disabled=n}return t.prototype.allows=function(t){return!this.disabled||0==this.disabled[t]},t}(),O=function(){function t(t,e,n,r,i,s,o,l,a,c,h,u,d,f){void 0===f&&(f=null),this.states=t,this.data=e,this.goto=n,this.group=r,this.maxTerm=i,this.minRepeatTerm=s,this.tokenizers=o,this.topRules=l,this.nested=a,this.dialects=c,this.specialized=h,this.specializers=u,this.tokenPrecTable=d,this.termNames=f,this.nextStateCache=[],this.cachedDialect=null,this.maxNode=this.group.types.length-1,this.maxRepeatWrap=this.group.types.length+(this.group.types.length-s)-1;for(var p=0,g=this.states.length/6;p<g;p++)this.nextStateCache[p]=null}return t.prototype.parse=function(t,e){"string"==typeof t&&(t=new h(t));for(var n=new w(this,t,e);;){var r=n.advance();if(r)return r}},t.prototype.startParse=function(t,e){return"string"==typeof t&&(t=new h(t)),new w(this,t,e)},t.prototype.getGoto=function(t,e,n){void 0===n&&(n=!1);var r=this.goto;if(e>=r[0])return-1;for(var i=r[e+1];;){var s=r[i++],o=1&s,l=r[i++];if(o&&n)return l;for(var a=i+(s>>1);i<a;i++)if(r[i]==t)return l;if(o)return-1}},t.prototype.hasAction=function(t,e){for(var n=this.data,r=0;r<2;r++)for(var i=this.stateSlot(t,r?2:1),s=void 0;65535!=(s=n[i]);i+=3)if(s==e||0==s)return n[i+1]|n[i+2]<<16;return 0},t.prototype.stateSlot=function(t,e){return this.states[6*t+e]},t.prototype.stateFlag=function(t,e){return(this.stateSlot(t,0)&e)>0},t.prototype.startNested=function(t){var e=this.stateSlot(t,0);return 4&e?e>>10:-1},t.prototype.validAction=function(t,e){if(e==this.stateSlot(t,4))return!0;for(var n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n])return!1;if(e==(this.data[n+1]|this.data[n+2]<<16))return!0}},t.prototype.nextStates=function(t){var e=this.nextStateCache[t];if(e)return e;for(var n=[],r=this.stateSlot(t,1);65535!=this.data[r];r+=3)0==(1&this.data[r+2])&&n.indexOf(this.data[r+1])<0&&n.push(this.data[r+1]);for(var i=this.goto,s=i[0],o=0;o<s;o++)for(var l=i[o+1];;){for(var a=i[l++],c=i[l++],h=l+(a>>1);l<h;l++)i[l]==t&&n.indexOf(c)<0&&n.push(c);if(1&a)break}return this.nextStateCache[t]=n},t.prototype.overrides=function(t,e){var n=S(this.data,this.tokenPrecTable,e);return n<0||S(this.data,this.tokenPrecTable,t)<n},t.prototype.withNested=function(e){return new t(this.states,this.data,this.goto,this.group,this.maxTerm,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested.map((function(t){return Object.prototype.hasOwnProperty.call(e,t.name)?{name:t.name,grammar:e[t.name],end:t.end,placeholder:t.placeholder}:t})),this.dialects,this.specialized,this.specializers,this.tokenPrecTable,this.termNames)},t.prototype.withProps=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new t(this.states,this.data,this.goto,(e=this.group).extend.apply(e,n),this.maxTerm,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested,this.dialects,this.specialized,this.specializers,this.tokenPrecTable,this.termNames)},t.prototype.getName=function(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.group.types[t].name||t)},Object.defineProperty(t.prototype,"eofTerm",{get:function(){return this.maxRepeatWrap+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNested",{get:function(){return this.nested.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0}),t.prototype.parseDialect=function(t){if(this.cachedDialect&&this.cachedDialect.source==t)return this.cachedDialect;var e=Object.keys(this.dialects),n=e.map((function(){return!1}));if(t)for(var r=0,i=t.split(" ");r<i.length;r++)(a=e.indexOf(i[r]))>=0&&(n[a]=!0);for(var s=null,o=0;o<e.length;o++)if(!n[o])for(var l=this.dialects[e[o]],a=void 0;65535!=(a=this.data[l++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[a]=1;return this.cachedDialect=new b(t,n,s)},t.deserialize=function(e){for(var n=d(e.tokenData),r=e.nodeNames.split(" "),s=r.length,o=0;o<e.repeatNodeCount;o++)r.push("");var l=[];for(o=0;o<r.length;o++)l.push(x);function a(t,e,n){l[t]==x&&(l[t]=Object.create(null)),e.set(l[t],e.deserialize(String(n)))}if(a(0,i.c.error,""),e.nodeProps)for(var c=0,h=e.nodeProps;c<h.length;c++){var f=h[c],p=f[0];for(o=1;o<f.length;o+=2)a(f[o],p,f[o+1])}var g=new i.b(r.map((function(t,e){return new i.d(t,l[e],e)}))),m=new Uint16Array(e.specialized?e.specialized.length:0),v=[];if(e.specialized)for(o=0;o<e.specialized.length;o++)m[o]=e.specialized[o].term,v[o]=e.specialized[o].get;return new t(d(e.states,Uint32Array),d(e.stateData),d(e.goto),g,e.maxTerm,s,e.tokenizers.map((function(t){return"number"==typeof t?new u(n,t):t})),e.topRules,(e.nested||[]).map((function(t){var e=t[3];return{name:t[0],grammar:t[1],end:new u(d(t[2]),0),placeholder:e}})),e.dialects||{},m,v,e.tokenPrec,e.termNames)},t}();O.TokenGroup=u;var x=Object.create(null);function S(t,e,n){for(var r=e,i=void 0;65535!=(i=t[r]);r++)if(i==n)return r-e;return-1}const k={bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6},C={avg:7,bottomk:8,count:9,count_values:10,group:11,max:12,min:13,quantile:14,stddev:15,stdvar:16,sum:17,topk:18,by:19,without:20,and:21,or:22,unless:23},_={__proto__:null,absent_over_time:257,absent:259,abs:261,avg_over_time:263,ceil:265,changes:267,clamp_max:269,clamp_min:271,count_over_time:273,days_in_month:275,day_of_month:277,day_of_week:279,delta:281,deriv:283,exp:285,floor:287,histogram_quantile:289,holt_winters:291,hour:293,idelta:295,increase:297,irate:299,label_replace:301,label_join:303,ln:305,log10:307,log2:309,max_over_time:311,min_over_time:313,minute:315,month:317,predict_linear:319,quantile_over_time:321,rate:323,resets:325,round:327,scalar:329,sort:331,sort_desc:333,sqrt:335,stddev_over_time:337,stdvar_over_time:339,sum_over_time:341,timestamp:343,time:345,vector:347,year:349},T=O.deserialize({states:"2SOVOPOOOUOO'#Cx'#CxO%fOPO'#CwQ%pOQOOOUOO'#De'#DeO%lOPO'#DdOVOPO'#ElOUOO'#Ep'#EpOVOPO'#EoOUOO'#Er'#ErO&vOSO'#EsO&}OQO'#EqOUOO'#Eq'#EqOUOO'#Cv'#CvOUOO'#Df'#DfOUOO'#Dh'#DhOUOO'#Di'#DiOUOO'#Dj'#DjOUOO'#Dk'#DkOUOO'#Dl'#DlOUOO'#Dm'#DmOUOO'#Dn'#DnOUOO'#Do'#DoOUOO'#Dp'#DpOUOO'#Dq'#DqOUOO'#Dr'#DrOUOO'#Ds'#DsOUOO'#Dt'#DtOUOO'#Du'#DuOUOO'#Dv'#DvOUOO'#Dw'#DwOUOO'#Dx'#DxOUOO'#Dy'#DyOUOO'#Dz'#DzOUOO'#D{'#D{OUOO'#D|'#D|OUOO'#D}'#D}OUOO'#EO'#EOOUOO'#EP'#EPOUOO'#EQ'#EQOUOO'#ER'#EROUOO'#ES'#ESOUOO'#ET'#ETOUOO'#EU'#EUOUOO'#EV'#EVOUOO'#EW'#EWOUOO'#EX'#EXOUOO'#EY'#EYOUOO'#EZ'#EZOUOO'#E['#E[OUOO'#E]'#E]OUOO'#E^'#E^OUOO'#E_'#E_OUOO'#E`'#E`OUOO'#Ea'#EaOUOO'#Eb'#EbOUOO'#Ec'#EcOUOO'#Ed'#EdOUOO'#Ee'#EeOUOO'#Ef'#EfOUOO'#Eg'#EgO(aOPO'#CyO(eOPO'#DOO%lOPO,59cO,wOQO,59cO.^OPO,59lO.^OPO,59lO.^OPO,59lO.^OPO,59lO.^OPO,59lO2vOQO,5;SO2zOQO,5;VOUOO,5:O,5:OO3OOQO,5;WO4XOQO,5;ZO5hOPO'#EuO5uOPO,5;_OUOO'#Et'#EtOUOO,5;_,5;_OUOO,5;],5;]O5|OSO'#CzOUOO,59e,59eO6TOPO,59jO6[OQO'#DPOUOO,59j,59jOUOO1G.}1G.}OUOO'#DU'#DUO7hOPO'#DTO;}OPO'#DTOUOO'#DS'#DSOVOPO1G/WOVOPO1G/WOVOPO1G/WOVOPO1G/WOVOPO1G/WO@dOSO1G0nOUOO1G0q1G0qOUOO1G0r1G0rOUOO'#Ev'#EvO@kOPO,5;aO@oOSO1G0yOUOO1G0y1G0yOUOO'#C|'#C|O@vOPO,59fOUOO'#C{'#C{OUOO,59f,59fO@}OPO,59kOUOO1G/U1G/UO(aOPO,59qOEdOPO,59oOIsOQO7+$rOKSOQO7+$rOLcOQO7+$rOMrOQO7+$rO! ROQO7+$rOUOO7+&Y7+&YO!!bOQO7+&`OUOO1G0{1G0{OUOO1G0z1G0zOUOO7+&e7+&eO!!iOSO1G/QOUOO1G/Q1G/QO!!pOQO1G/VOUOO1G/]1G/]OUOO'#DW'#DWOUOO1G/Z1G/ZOUOO<<Iz<<IzO!#|OPO<<IzOUOO1G/R1G/ROUOO7+$l7+$lOUOOAN?fAN?f",stateData:"!$QhOS#pOS~VPOWPOXPOYPOZPO[PO]PO^PO_PO`POaPObPO!ZXO#^]O#a]O#qUO#t^O#u_O#v`O#waO#xbO#ycO#zdO#{eO#|fO#}gO$OhO$PiO$QjO$RkO$SlO$TmO$UnO$VoO$WpO$XqO$YrO$ZsO$[tO$]uO$^vO$_wO$`xO$ayO$bzO$c{O$d|O$e}O$f!OO$g!PO$h!QO$i!RO$j!SO$k!TO$l!UO$m!VO$n!WO$o!XO$p!YO$q!ZO$r![O$s!]O$t!^O$xVO$yVO$zYO~c!_Od!_O#q!`O~U!iOe!fOf!gOg!fOu!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eO$u!hO~q!mO${!pO~$zYOU#eXe#eXf#eXg#eXu#eX{#eX|#eX}#eX!O#eX!P#eX!Q#eX!R#eX!S#eX!T#eX!U#eX!V#eX#n#eX$u#eX#s#eX#r#eX~#q!rO~VPOWPOXPOYPOZPO[PO]PO^PO_PO`POaPObPO!ZXO#^]O#a]O#qUO#s!vO#t^O#u_O#v`O#waO#xbO#ycO#zdO#{eO#|fO#}gO$OhO$PiO$QjO$RkO$SlO$TmO$UnO$VoO$WpO$XqO$YrO$ZsO$[tO$]uO$^vO$_wO$`xO$ayO$bzO$c{O$d|O$e}O$f!OO$g!PO$h!QO$i!RO$j!SO$k!TO$l!UO$m!VO$n!WO$o!XO$p!YO$q!ZO$r![O$s!]O$t!^O$xVO$yVO$zYO~c!_Od!_OUkaekafkagkauka{ka|ka}ka!Oka!Pka!Qka!Rka!Ska!Tka!Uka!Vka#nka$uka#ska#rka~P!xOQxPRxPVxPWxPXxPYxPZxP[xP]xP^xP_xP`xPaxPbxP!ZxP#^xP#axP#qxP#txP#uxP#vxP#wxP#xxP#yxP#zxP#{xP#|xP#}xP$OxP$PxP$QxP$RxP$SxP$TxP$UxP$VxP$WxP$XxP$YxP$ZxP$[xP$]xP$^xP$_xP$`xP$axP$bxP$cxP$dxP$exP$fxP$gxP$hxP$ixP$jxP$kxP$lxP$mxP$nxP$oxP$pxP$qxP$rxP$sxP$txP$xxP$yxP$zxP~#]#RO~#]#SO~U!iOe!fOf!gOg!fOu!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eO#s#TO$u!hO~u!cOU#cae#caf#cag#ca{#ca|#ca}#ca!O#ca!P#ca!Q#ca!R#ca!S#ca!T#ca!U#ca!V#ca#n#ca$u#ca#s#ca#r#ca~!V#UO#k#UO#l#UO#m#UO~#r#WO${#XO~q#YO#s#]O~#r#^O#s#_O~U!iOe!fOf!gOg!fOu!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eO$u!hO#rsX#ssX~Q#`OR#`OVwXWwXXwXYwXZwX[wX]wX^wX_wX`wXawXbwX!ZwX#^wX#awX#qwX#twX#uwX#vwX#wwX#xwX#ywX#zwX#{wX#|wX#}wX$OwX$PwX$QwX$RwX$SwX$TwX$UwX$VwX$WwX$XwX$YwX$ZwX$[wX$]wX$^wX$_wX$`wX$awX$bwX$cwX$dwX$ewX$fwX$gwX$hwX$iwX$jwX$kwX$lwX$mwX$nwX$owX$pwX$qwX$rwX$swX$twX$xwX$ywX$zwX~S#aOT#aOVwXWwXXwXYwXZwX[wX]wX^wX_wX`wXawXbwX!ZwX#^wX#awX#qwX#twX#uwX#vwX#wwX#xwX#ywX#zwX#{wX#|wX#}wX$OwX$PwX$QwX$RwX$SwX$TwX$UwX$VwX$WwX$XwX$YwX$ZwX$[wX$]wX$^wX$_wX$`wX$awX$bwX$cwX$dwX$ewX$fwX$gwX$hwX$iwX$jwX$kwX$lwX$mwX$nwX$owX$pwX$qwX$rwX$swX$twX$xwX$ywX$zwX~$v#gO$w#hO~#a#iO~q!mO${#kO~#r#lO#s#mO~VPOWPOXPOYPOZPO[PO]PO^PO_PO`POaPObPO!ZXO#^]O#a]O#qUO#t^O#u_O#v`O#waO#xbO#ycO#zdO#{eO#|fO#}gO$OhO$PiO$QjO$RkO$SlO$TmO$UnO$VoO$WpO$XqO$YrO$ZsO$[tO$]uO$^vO$_wO$`xO$ayO$bzO$c{O$d|O$e}O$f!OO$g!PO$h!QO$i!RO$j!SO$k!TO$l!UO$m!VO$n!WO$o!XO$p!YO$q!ZO$r![O$s!]O$t!^O$xVO$yVO$zYO#rsa#ssa~#q!rOVzPWzPXzPYzPZzP[zP]zP^zP_zP`zPazPbzP!ZzP#^zP#azP#tzP#uzP#vzP#wzP#xzP#yzP#zzP#{zP#|zP#}zP$OzP$PzP$QzP$RzP$SzP$TzP$UzP$VzP$WzP$XzP$YzP$ZzP$[zP$]zP$^zP$_zP$`zP$azP$bzP$czP$dzP$ezP$fzP$gzP$hzP$izP$jzP$kzP$lzP$mzP$nzP$ozP$pzP$qzP$rzP$szP$tzP$xzP$yzP$zzP~u!cOUtqetqftqgtq{tq|tq}tq!Otq!Ptq!Qtq!Rtq!Stq!Ttq!Utq!Vtq#ntq$utq#stq#rtq~u!cO{!cO|!cO}!cOUtqetqftqgtq!Otq!Ptq!Qtq!Rtq!Stq!Ttq!Utq!Vtq#ntq$utq#stq#rtq~u!cO{!cO|!cO}!cO!O!dO!P!dOUtqetqftqgtq!Qtq!Rtq!Stq!Ttq!Utq!Vtq#ntq$utq#stq#rtq~u!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eOUtqetqftqgtq#ntq$utq#stq#rtq~e!fOg!fOu!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eOUtqftq#ntq$utq#stq#rtq~#]#sO$v#rO~q#YO#s#uO~U!iOe!fOf!gOg!fOu!cO{!cO|!cO}!cO!O!dO!P!dO!Q!eO!R!eO!S!eO!T!eO!U!eO!V!eO$u!hO#rsi#ssi~$v#vO~",goto:"(Q#kPPPPPPPPPPPPPPPPPPPPPPPPPP#l$[$h$t$z%T%WP%^%g$[P%j%y&Q&X&`PPPPPPPPPPP$[&c&oP&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o$[PP$[$[P$[$[&{$['X'e't'w'}QROQ!kUQ!lWQ!u!`Q#b!|Q#c!}Q#d#OQ#e#PQ#f#QR#n#^e]OUW!`!|!}#O#P#Q#^eQOUW!`!|!}#O#P#Q#^Q!aQR!w!bQ!s!_Q#o#`R#p#aR#Z!rQ#[!rR#t#lQ!bQQ!jTR!w!aR!t!`Q!|!cQ!}!dQ#O!eQ#P!fR#Q!gZ!{!c!d!e!f!gZ!y!c!d!e!f!gZ!z!c!d!e!f!gR#q#aeTOUW!`!|!}#O#P#Q#^eSOUW!`!|!}#O#P#Q#^eWOUW!`!|!}#O#P#Q#^eZOUW!`!|!}#O#P#Q#^d[OUW!`!|!}#O#P#Q#^R!qZR!nYQ!oYR#j#WR#V!m",nodeNames:"\u26a0 Bool Ignoring On GroupLeft GroupRight Offset Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless LineComment  Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifier GroupModifiers BoolModifier OnOrIgnoring MaybeGroupingLabels Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs AvgOverTime Ceil Changes ClampMax ClampMin CountOverTime DaysOfMonth DayOfMonth DayOfWeek Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin Ln Log10 Log2 MaxOverTime MinOverTime Minute Month PredictLinear QuantileOverTime Rate Resets Round Scalar Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex",maxTerm:181,nodeProps:[[i.c.top,25,!0]],repeatNodeCount:0,tokenData:"! b~RvX^#ipq#iqr$^rs$qst%euv%pwx%uxy&dyz&iz{&n{|&s|}&z}!O'P!O!P'W!P!Q(W!Q!R(]!R![)c![!]LW!^!_MS!_!`Ma!`!aMv!c!}NT!}#ONk#P#QNp#Q#RNu#R#SNT#S#TNz#T#oNT#o#p! W#q#r! ]#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY#p~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aQ!_!`$g#r#s$l~$lO!V~~$qO#m~~$vU#a~OY$qZr$qrs%Ys#O$q#O#P%_#P~$q~%_O#a~~%bPO~$q~%jQh~OY%eZ~%e~%uO}~~%zU#a~OY%uZw%uwx%Yx#O%u#O#P&^#P~%u~&aPO~%u~&iO#q~~&nO#s~~&sO{~R&zO$yP!OQ~'PO#r~R'WO$xP!PQP'ZP!Q!['^P'cR#^P!Q!['^!g!h'l#X#Y'lP'oR{|'x}!O'x!Q![(OP'{P!Q![(OP(TP#^P!Q![(O~(]O|~R(bZ#^P!O!P)T!Q![)c!g!h'l#W#X*W#X#Y'l#[#].f#a#b0i#g#h1o#k#l2W#l#mKl#m#n:mP)YR#^P!Q![)T!g!h'l#X#Y'lR)hY#^P!O!P)T!Q![)c!g!h'l#W#X*W#X#Y'l#[#].f#a#b0i#g#h1o#k#l2W#m#n:mQ*]P#]Q!Q![*`Q*cS!Q![*`#[#]*o#a#b,w#g#h-}Q*tP#]Q!Q![*wQ*zR!Q![*w#a#b+T#g#h,`Q+YQ#]Q!Q![+`#g#h+rQ+cR!Q![+`#a#b+l#g#h+wQ+oP#g#h+rQ+wO#]QQ+|P#]Q!Q![,PQ,SQ!Q![,P#a#b,YQ,]P#g#h+rQ,eP#]Q!Q![,hQ,kQ!Q![,h#a#b,qQ,tP#g#h+rQ,|Q#]Q!Q![-S#g#h+rQ-VR!Q![-S#a#b-`#g#h-fQ-cP#g#h+rQ-kP#]Q!Q![-nQ-qQ!Q![-n#a#b-wQ-zP#g#h+rQ.SP#]Q!Q![.VQ.YQ!Q![.V#a#b.`Q.cP#g#h+rQ.kP#]Q!Q![.nQ.qR!Q![.n#a#b.z#g#h0QQ/PQ#]Q!Q![/V#g#h+rQ/YR!Q![/V#a#b/c#g#h/iQ/fP#g#h+rQ/nP#]Q!Q![/qQ/tQ!Q![/q#a#b/zQ/}P#g#h+rQ0VP#]Q!Q![0YQ0]Q!Q![0Y#a#b0cQ0fP#g#h+rQ0nQ#]Q!Q![0t#g#h+rQ0wR!Q![0t#a#b1Q#g#h1WQ1TP#g#h+rQ1]P#]Q!Q![1`Q1cQ!Q![1`#a#b1iQ1lP#g#h+rQ1tP#]Q!Q![1wQ1zQ!Q![1w#a#b2QQ2TP#g#h+rQ2]P#]Q!Q![2`Q2cT!Q![2`#W#X2r#[#]6{#a#b9O#g#h:UQ2wP#]Q!Q![2zQ2}S!Q![2z#[#]3Z#a#b5^#g#h6dQ3`P#]Q!Q![3cQ3fR!Q![3c#a#b3o#g#h4uQ3tQ#]Q!Q![3z#g#h+rQ3}R!Q![3z#a#b4W#g#h4^Q4ZP#g#h+rQ4cP#]Q!Q![4fQ4iQ!Q![4f#a#b4oQ4rP#g#h+rQ4zP#]Q!Q![4}Q5QQ!Q![4}#a#b5WQ5ZP#g#h+rQ5cQ#]Q!Q![5i#g#h+rQ5lR!Q![5i#a#b5u#g#h5{Q5xP#g#h+rQ6QP#]Q!Q![6TQ6WQ!Q![6T#a#b6^Q6aP#g#h+rQ6iP#]Q!Q![6lQ6oQ!Q![6l#a#b6uQ6xP#g#h+rQ7QP#]Q!Q![7TQ7WR!Q![7T#a#b7a#g#h8gQ7fQ#]Q!Q![7l#g#h+rQ7oR!Q![7l#a#b7x#g#h8OQ7{P#g#h+rQ8TP#]Q!Q![8WQ8ZQ!Q![8W#a#b8aQ8dP#g#h+rQ8lP#]Q!Q![8oQ8rQ!Q![8o#a#b8xQ8{P#g#h+rQ9TQ#]Q!Q![9Z#g#h+rQ9^R!Q![9Z#a#b9g#g#h9mQ9jP#g#h+rQ9rP#]Q!Q![9uQ9xQ!Q![9u#a#b:OQ:RP#g#h+rQ:ZP#]Q!Q![:^Q:aQ!Q![:^#a#b:gQ:jP#g#h+rQ:rP#]Q!Q![:uQ:xU!Q![:u#W#X;[#[#]?e#a#bAh#g#hBn#k#lCVQ;aP#]Q!Q![;dQ;gS!Q![;d#[#];s#a#b=v#g#h>|Q;xP#]Q!Q![;{Q<OR!Q![;{#a#b<X#g#h=_Q<^Q#]Q!Q![<d#g#h+rQ<gR!Q![<d#a#b<p#g#h<vQ<sP#g#h+rQ<{P#]Q!Q![=OQ=RQ!Q![=O#a#b=XQ=[P#g#h+rQ=dP#]Q!Q![=gQ=jQ!Q![=g#a#b=pQ=sP#g#h+rQ={Q#]Q!Q![>R#g#h+rQ>UR!Q![>R#a#b>_#g#h>eQ>bP#g#h+rQ>jP#]Q!Q![>mQ>pQ!Q![>m#a#b>vQ>yP#g#h+rQ?RP#]Q!Q![?UQ?XQ!Q![?U#a#b?_Q?bP#g#h+rQ?jP#]Q!Q![?mQ?pR!Q![?m#a#b?y#g#hAPQ@OQ#]Q!Q![@U#g#h+rQ@XR!Q![@U#a#b@b#g#h@hQ@eP#g#h+rQ@mP#]Q!Q![@pQ@sQ!Q![@p#a#b@yQ@|P#g#h+rQAUP#]Q!Q![AXQA[Q!Q![AX#a#bAbQAeP#g#h+rQAmQ#]Q!Q![As#g#h+rQAvR!Q![As#a#bBP#g#hBVQBSP#g#h+rQB[P#]Q!Q![B_QBbQ!Q![B_#a#bBhQBkP#g#h+rQBsP#]Q!Q![BvQByQ!Q![Bv#a#bCPQCSP#g#h+rQC[P#]Q!Q![C_QCbT!Q![C_#W#XCq#[#]Gz#a#bI}#g#hKTQCvP#]Q!Q![CyQC|S!Q![Cy#[#]DY#a#bF]#g#hGcQD_P#]Q!Q![DbQDeR!Q![Db#a#bDn#g#hEtQDsQ#]Q!Q![Dy#g#h+rQD|R!Q![Dy#a#bEV#g#hE]QEYP#g#h+rQEbP#]Q!Q![EeQEhQ!Q![Ee#a#bEnQEqP#g#h+rQEyP#]Q!Q![E|QFPQ!Q![E|#a#bFVQFYP#g#h+rQFbQ#]Q!Q![Fh#g#h+rQFkR!Q![Fh#a#bFt#g#hFzQFwP#g#h+rQGPP#]Q!Q![GSQGVQ!Q![GS#a#bG]QG`P#g#h+rQGhP#]Q!Q![GkQGnQ!Q![Gk#a#bGtQGwP#g#h+rQHPP#]Q!Q![HSQHVR!Q![HS#a#bH`#g#hIfQHeQ#]Q!Q![Hk#g#h+rQHnR!Q![Hk#a#bHw#g#hH}QHzP#g#h+rQISP#]Q!Q![IVQIYQ!Q![IV#a#bI`QIcP#g#h+rQIkP#]Q!Q![InQIqQ!Q![In#a#bIwQIzP#g#h+rQJSQ#]Q!Q![JY#g#h+rQJ]R!Q![JY#a#bJf#g#hJlQJiP#g#h+rQJqP#]Q!Q![JtQJwQ!Q![Jt#a#bJ}QKQP#g#h+rQKYP#]Q!Q![K]QK`Q!Q![K]#a#bKfQKiP#g#h+rPKoR!Q![Kx!c!iKx#T#ZKxPK}R#^P!Q![Kx!c!iKx#T#ZKxVL_T$wS!ZR!Q![Ln![!]Ln!c!}Ln#R#SLn#T#oLnRLsT!ZR!Q![Ln![!]Ln!c!}Ln#R#SLn#T#oLn~MXP!U~!_!`M[~MaO!T~~MfQ#kP!_!`Ml#r#sMqQMqO!QQ~MvO#l~~M{P!S~!_!`NO~NTO!R~VN[T!ZRqS!Q![NT![!]Ln!c!}NT#R#SNT#T#oNT~NpO$u~~NuO$v~~NzOu~~N}RO#SNz#S#T%Y#T~Nz~! ]O$z~~! bO${~",tokenizers:[0,1,2],topRules:{"@top":[0,25]},specialized:[{term:57,get:(t,e)=>((t,e)=>k[t.toLowerCase()]||-1)(t)<<1},{term:57,get:(t,e)=>((t,e)=>C[t.toLowerCase()]||-1)(t)<<1|1},{term:57,get:t=>_[t]||-1}],tokenPrec:6}),P=1,A=2,E=3,M=4,D=5,I=6,Q=7,R=8,L=9,N=10,$=11,V=12,j=13,F=14,H=15,B=16,z=17,q=18,U=19,W=20,X=21,G=22,Z=23,Y=24,K=26,J=27,tt=28,et=29,nt=30,rt=31,it=32,st=33,ot=34,lt=35,at=36,ct=37,ht=38,ut=39,dt=40,ft=41,pt=42,gt=43,mt=44,vt=45,yt=46,wt=47,bt=48,Ot=49,xt=50,St=51,kt=52,Ct=53,_t=54,Tt=55,Pt=56,At=57,Et=58,Mt=59,Dt=60,It=61,Qt=62,Rt=63,Lt=64,Nt=65,$t=66,Vt=67,jt=68,Ft=69,Ht=70,Bt=71,zt=72,qt=73,Ut=74,Wt=75,Xt=76,Gt=77,Zt=78,Yt=79,Kt=80,Jt=81,te=82,ee=83,ne=84,re=85,ie=86,se=87,oe=88,le=89,ae=90,ce=91,he=92,ue=93,de=94,fe=95,pe=96,ge=97,me=98,ve=99,ye=100,we=101,be=102,Oe=103,xe=104,Se=105,ke=106,Ce=107,_e=108,Te=109,Pe=110,Ae=111,Ee=112,Me=113,De=114,Ie=115,Qe=116,Re=117,Le=118,Ne=119,$e=120,Ve=121,je=["=","!=","=~","!~"],Fe=["^","*","/","%","+","-","==",">=",">","<","<=","!=","and","or","unless"],He=["on","ignoring","group_left","group_right"],Be=["abs","absent","absent_over_time","avg_over_time","ceil","changes","clamp_max","clamp_min","count_over_time","days_in_month","day_of_month","day_of_week","delta","deriv","exp","floor","histogram_quantile","holt_winters","hour","idelta","increase","irate","label_replace","label_join","ln","log10","log2","max_over_time","min_over_time","minute","month","predict_linear","quantile_over_time","rate","resets","round","scalar","sort","sort_desc","sqrt","stddev_over_time","stdvar_over_time","sum_over_time","time","timestamp","vector","year"],ze=["avg","bottomk","count","count_values","group","max","min","quantile","stddev","stdvar","sum","topk"],qe=["by","without"]},PxnU:function(t,e,n){"use strict";n.r(e),n.d(e,"LezerSyntax",(function(){return v})),n.d(e,"TreeIndentContext",(function(){return h})),n.d(e,"continuedIndent",(function(){return g})),n.d(e,"delimitedIndent",(function(){return d})),n.d(e,"flatIndent",(function(){return p})),n.d(e,"foldNodeProp",(function(){return m})),n.d(e,"indentNodeProp",(function(){return o}));var r=n("WQMp"),i=n("dC2d"),s=n("3Yt4");const o=new r.c;function l(t){return i.EditorState.indentation.of((e,n)=>function(t,e,n){let i=e.resolve(n);for(let s=i,o=n;;){let t=s.childBefore(o);if(!t)break;t.type.prop(r.c.error)&&t.start==t.end?(i=s,o=t.start):(s=t,o=s.end+1)}for(;i;i=i.parent){let e=a(i);if(e)return e(new h(t,n,i))}return-1}(e,t.getTree(e.state),n))}function a(t){let e=t.type.prop(o);if(e)return e;let n,i=t.firstChild;if(i&&(n=i.type.prop(r.c.closedBy))){let e=t.lastChild,r=e&&n.indexOf(e.name)>-1;return t=>f(t,!0,1,void 0,r&&!function(t){var e,n;return t.pos==(null===(e=t.options)||void 0===e?void 0:e.simulateBreak)&&(null===(n=t.options)||void 0===n?void 0:n.simulateDoubleBreak)}(t)?e.start:void 0)}return null==t.parent?c:null}function c(){return 0}class h extends i.IndentContext{constructor(t,e,n){super(t.state,t.options),this.pos=e,this.node=n}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.start);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.start==e.start;)e=e.parent;if(u(e,this.node))break;t=this.state.doc.lineAt(e.start)}return this.lineIndent(t)}}function u(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function d({closing:t,align:e=!0,units:n=1}){return r=>f(r,e,n,t)}function f(t,e,n,i,s){let o=t.textAfter,l=o.match(/^\s*/)[0].length,a=i&&o.slice(l,l+i.length)==i||s==t.pos+l,c=e?function(t){var e;let n=t.node,i=n.childAfter(n.start),s=n.lastChild;if(!i)return null;let o=null===(e=t.options)||void 0===e?void 0:e.simulateBreak,l=t.state.doc.lineAt(i.start),a=null==o||o<=l.from?l.to:Math.min(l.to,o);for(let c=i.end;;){let t=n.childAfter(c);if(!t||t==s)return null;if(!t.type.prop(r.c.skipped))return t.start<a?i:null;c=t.end}}(t):null;return c?t.column(a?c.start:c.end):t.baseIndent+(a?0:t.unit*n)}const p=t=>t.baseIndent;function g({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const m=new r.c;class v{constructor(t,e,n){this.parser=t,this.dialect=e,this.languageData=n;let o=i.StateEffect.define();var a;this.field=i.StateField.define({create:t=>O.advance(r.e.empty,this,t.doc),update:(t,e)=>t.apply(e,this,o)}),this.extension=[i.EditorState.syntax.of(this),this.field,s.ViewPlugin.define(t=>new k(t,this,o)),l(this),(a=this,i.EditorState.foldable.of((t,e,n)=>{let r=null;for(let i=a.getTree(t).resolve(n);i;i=i.parent){if(i.end<=n||i.start>n)continue;if(r&&i.start<e)break;let s=i.type.prop(m);if(s){let o=s(i,t);o&&o.from<=n&&o.from>=e&&o.to>n&&(r=o)}}return r}))]}static define(t,e={}){let n=i.Facet.define({combine:e.languageData?t=>t.concat(e.languageData):void 0});return new v(t.withProps(i.languageDataProp.add({[t.topType.name]:n})),e.dialect||"",n)}withDialect(t){return new v(this.parser,t,this.languageData)}getTree(t){return t.field(this.field).tree}parsePos(t){return t.field(this.field).upto}ensureTree(t,e,n=100){let r=t.field(this.field);if(r.upto>=e)return r.updatedTree;if(r.parse||r.startParse(this,t.doc),r.parse.pos<e){let i=w(r.parse,n,e);if(i)return r.stopParse(i,t.doc.length)}return r.parse.pos<e?null:r.stopParse()}languageDataFacetAt(t,e){if(this.parser.hasNested){let n=this.getTree(t).resolve(e,-1);for(;n;){let t=n.type.prop(i.languageDataProp);if(t)return t;n=n.parent}}return this.languageData}}class y{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}get(t){if(t>=this.length)return-1;let e=this.cursorPos-this.string.length;return(t<e||t>=this.cursorPos)&&(t<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,e=this.cursorPos-this.string.length),this.string.charCodeAt(t-e)}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}clip(t){return new y(this.doc,t)}}function w(t,e,n=5e6){let r=Date.now()+e;for(;;){let e=t.advance();if(e)return e;if(t.pos>n||Date.now()>r)return null}}function b(t,e){let n=t.forceFinish(),r=n.applyChanges([{fromA:t.pos,toA:n.length,fromB:t.pos,toB:n.length}]).append(e.applyChanges([{fromA:0,toA:t.pos,fromB:0,toB:t.pos}]));return{parsed:n,cache:r}}class O{constructor(t,e,n){this.tree=t,this.upto=e,this.cache=n,this.parse=null,this.updatedTree=t}static advance(t,e,n){let r=e.parser.startParse(new y(n),{cache:t,dialect:e.dialect}),i=w(r,25);if(i)return new O(i,n.length,i);let s=b(r,t);return new O(s.parsed,r.pos,s.cache)}apply(t,e,n){for(let i of t.effects)if(i.is(n))return i.value;if(!t.docChanged)return this;let r=[];return t.changes.iterChangedRanges((t,e,n,i)=>r.push({fromA:t,toA:e,fromB:n,toB:i})),O.advance((this.parse?b(this.parse,this.updatedTree).cache:this.cache).applyChanges(r),e,t.state.doc)}startParse(t,e){this.parse=t.parser.startParse(new y(e),{cache:this.cache,dialect:t.dialect})}stopParse(t,e){return t?this.cache=t:({parsed:t,cache:this.cache}=b(this.parse,this.updatedTree)),this.updatedTree=t,this.upto=null!=e?e:this.parse.pos,this.parse=null,t}}let x="undefined"!=typeof window&&window.requestIdleCallback||((t,{timeout:e})=>setTimeout(t,e)),S="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout;class k{constructor(t,e,n){this.view=t,this.syntax=e,this.setSyntax=n,this.working=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){t.docChanged&&this.scheduleWork()}scheduleWork(){if(this.working>-1)return;let{state:t}=this.view;t.field(this.syntax.field).upto>=t.doc.length||(this.working=x(this.work,{timeout:200}))}work(t){this.working=-1;let{state:e}=this.view,n=e.field(this.syntax.field);if(n.upto>=e.doc.length)return;n.parse||n.startParse(this.syntax,e.doc);let r=w(n.parse,t?Math.max(25,t.timeRemaining()):100);if(r||n.parse.badness>.8){let t=n.stopParse(r,e.doc.length);this.view.dispatch({effects:this.setSyntax.of(new O(t,e.doc.length,n.cache))})}else this.scheduleWork()}destroy(){this.working>=0&&S(this.working)}}},R5uj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("KoMb");class i{constructor(t,e,n){this.type=t,this.name=e,this.value=n}matchesEmpty(){switch(this.type){case r.EqlSingle:return""===this.value;case r.Neq:return""!==this.value;default:return!1}}}e.Matcher=i,e.buildLabelMatchers=function(t,e){const n=[];return t.forEach(t=>{n.push(function(t,e){const n=new i(0,"","");return t.iterate({enter:(t,i,s)=>{switch(t.id){case r.LabelMatcher:return;case r.LabelName:n.name=e.sliceDoc(i,s);break;case r.MatchOp:return;case r.EqlSingle:case r.Neq:case r.EqlRegex:case r.NeqRegex:n.type=t.id;break;case r.StringLiteral:n.value=e.sliceDoc(i,s).slice(1,-1)}return!1}}),n}(t,e))}),n}},St0M:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("PxnU"),i=n("KoMb"),s=n("mmpu"),o=n("vOYf"),l=n("X2sM");e.promQLSyntax=r.LezerSyntax.define(i.parser.withProps(s.styleTags({LineComment:"comment",LabelName:"labelName",StringLiteral:"string",NumberLiteral:"number",Duration:"number","Abs Absent AbsentOverTime AvgOverTime Ceil Changes ClampMax ClampMin CountOverTime DaysInMonth DayOfMonth DayOfWeek Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin Ln Log10 Log2 MaxOverTime MinOverTime Minute Month PredictLinear QuantileOverTime Rate Resets Round Scalar Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Time Timestamp Vector Year":"functionName","Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk":"operatorKeyword","By Without Bool On Ignoring GroupLeft GroupRight Offset":"modifier","And Unless Or":"logicOperator","Sub Add Mul Mod Div Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow":"operator",UnaryOp:"arithmeticOperator","( )":"paren","[ ]":"squareBracket","{ }":"brace","\u26a0":"invalid"})),{languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}}),e.PromQLExtension=class{constructor(){this.complete=o.newCompleteStrategy(),this.lint=l.newLintStrategy(),this.enableLinter=!0,this.enableCompletion=!0}setComplete(t){return this.complete=o.newCompleteStrategy(t),this}setLinter(t){return this.lint=l.newLintStrategy(t),this}activateCompletion(t){return this.enableCompletion=t,this}activateLinter(t){return this.enableLinter=t,this}asExtension(){let t=[e.promQLSyntax];if(this.enableCompletion){const n=e.promQLSyntax.languageData.of({autocomplete:t=>this.complete.promQL(t)});t=t.concat(n)}return this.enableLinter&&(t=t.concat(l.promQLLinter(this.lint.promQL,this.lint))),t}}},TauG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.walkBackward=function(t,e){let n=t;for(;n&&n.type.id!==e;)n=n.parent;return n},e.walkThrough=function(t,...e){let n=0;return e.unshift(t.type.id),t.iterate({enter:(r,i,s)=>{if(r.id!==e[n]&&r.name!==e[n])return!1;if(n++,n>=e.length){let e=t.resolve(i,-1);if(e.type.id===r.id&&e.start===i&&e.end===s)return e;for(e=t.resolve(i,1);e&&(e.type.id!==r.id||e.start!==i||e.end!==s);)e=e.parent;return e}}})},e.containsChild=function(t,...e){e.unshift(t.type.id);let n=0;const r=t.iterate({enter:r=>{if(r.id!==t.type.id||0!==n)return e.some(t=>r.id===t||r.name===t);n++}});return void 0!==r&&r},e.retrieveAllRecursiveNodes=function(t,e,n){const r=[];return function t(r,i){const s=null==r?void 0:r.firstChild,o=null==r?void 0:r.lastChild;s&&s.type.id===e&&t(s,i),o&&o.type.id===n&&i.push(o)}(t,r),r}},U2K6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("KoMb"),i=n("TauG");var s;!function(t){t.none="none",t.vector="vector",t.scalar="scalar",t.matrix="matrix",t.string="string"}(s=e.ValueType||(e.ValueType={}));const o={[r.Abs]:{name:"abs",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Absent]:{name:"absent",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.AbsentOverTime]:{name:"absent_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.AvgOverTime]:{name:"avg_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Ceil]:{name:"ceil",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Changes]:{name:"changes",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.ClampMax]:{name:"clamp_max",argTypes:[s.vector,s.scalar],variadic:0,returnType:s.vector},[r.ClampMin]:{name:"clamp_min",argTypes:[s.vector,s.scalar],variadic:0,returnType:s.vector},[r.CountOverTime]:{name:"count_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.DaysOfMonth]:{name:"days_in_month",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.DayOfMonth]:{name:"day_of_month",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.DayOfWeek]:{name:"day_of_week",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.Delta]:{name:"delta",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Deriv]:{name:"deriv",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Exp]:{name:"exp",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Floor]:{name:"floor",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.HistogramQuantile]:{name:"histogram_quantile",argTypes:[s.scalar,s.vector],variadic:0,returnType:s.vector},[r.HoltWinters]:{name:"holt_winters",argTypes:[s.matrix,s.scalar,s.scalar],variadic:0,returnType:s.vector},[r.Hour]:{name:"hour",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.Idelta]:{name:"idelta",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Increase]:{name:"increase",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Irate]:{name:"irate",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.LabelReplace]:{name:"label_replace",argTypes:[s.vector,s.string,s.string,s.string,s.string],variadic:0,returnType:s.vector},[r.LabelJoin]:{name:"label_join",argTypes:[s.vector,s.string,s.string,s.string],variadic:-1,returnType:s.vector},[r.Ln]:{name:"ln",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Log10]:{name:"log10",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Log2]:{name:"log2",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.MaxOverTime]:{name:"max_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.MinOverTime]:{name:"min_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Minute]:{name:"minute",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.Month]:{name:"month",argTypes:[s.vector],variadic:1,returnType:s.vector},[r.PredictLinear]:{name:"predict_linear",argTypes:[s.matrix,s.scalar],variadic:0,returnType:s.vector},[r.QuantileOverTime]:{name:"quantile_over_time",argTypes:[s.scalar,s.matrix],variadic:0,returnType:s.vector},[r.Rate]:{name:"rate",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Resets]:{name:"resets",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Round]:{name:"round",argTypes:[s.vector,s.scalar],variadic:1,returnType:s.vector},[r.Scalar]:{name:"scalar",argTypes:[s.vector],variadic:0,returnType:s.scalar},[r.Sort]:{name:"sort",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.SortDesc]:{name:"sort_desc",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Sqrt]:{name:"sqrt",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.StddevOverTime]:{name:"stddev_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.StdvarOverTime]:{name:"stdvar_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.SumOverTime]:{name:"sum_over_time",argTypes:[s.matrix],variadic:0,returnType:s.vector},[r.Time]:{name:"time",argTypes:[],variadic:0,returnType:s.scalar},[r.Timestamp]:{name:"timestamp",argTypes:[s.vector],variadic:0,returnType:s.vector},[r.Vector]:{name:"vector",argTypes:[s.scalar],variadic:0,returnType:s.vector},[r.Year]:{name:"year",argTypes:[s.vector],variadic:1,returnType:s.vector}};function l(t){return o[t]}e.getFunction=l,e.getType=function t(e){var n;if(!e)return s.none;switch(e.type.id){case r.Expr:return t(e.firstChild);case r.AggregateExpr:case r.VectorSelector:return s.vector;case r.StringLiteral:return s.string;case r.NumberLiteral:return s.scalar;case r.MatrixSelector:case r.SubqueryExpr:return s.matrix;case r.ParenExpr:case r.UnaryExpr:return t(i.walkThrough(e,r.Expr));case r.BinaryExpr:const o=t(e.firstChild),a=t(e.lastChild);return o===s.scalar&&a===s.scalar?s.scalar:s.vector;case r.FunctionCall:const c=null===(n=e.firstChild)||void 0===n?void 0:n.firstChild;return c?l(c.type.id).returnType:s.none;default:return s.none}}},WKRy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LSPComplete=class{constructor(t){this.lspClient=t}promQL(t){const{state:e,pos:n}=t,r=e.doc.lineAt(n),i={expr:e.doc.sliceString(0),limit:100,positionChar:n-r.from-1>0?n-r.from-1:n-r.from,positionLine:r.number-1};return this.lspClient.complete(i).then(t=>{const e=[];let i;for(const n of t){let t="";switch(n.kind){case 12:t="constant";break;case 3:t="function"}let r=n.label;n.textEdit&&(r=n.textEdit.newText,i=n.textEdit),e.push({label:n.label,original:n.label,apply:r,type:t,score:0})}return{from:i?r.from+i.range.start.character:r.from,to:n,options:e}})}}},WQMp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return p}));const r=1024;class i{constructor(t,e){this.enter=t,this.leave=e,this.result=void 0}get done(){return void 0!==this.result}doEnter(t,e,n){let r=this.enter(t,e,n);return void 0===r||(!1!==r&&(this.result=r),!1)}}let s=0;class o{constructor({deserialize:t}={}){this.id=s++,this.deserialize=t||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new o({deserialize:t=>t})}static number(){return new o({deserialize:Number})}static flag(){return new o({deserialize:()=>!0})}set(t,e){return t[this.id]=e,t}add(t){return new l(this,"function"==typeof t?t:a.match(t))}}o.error=o.flag(),o.skipped=o.flag(),o.closedBy=new o({deserialize:t=>t.split(" ")}),o.openedBy=new o({deserialize:t=>t.split(" ")}),o.top=o.flag();class l{constructor(t,e){this.prop=t,this.f=e}}class a{constructor(t,e,n){this.name=t,this.props=e,this.id=n}prop(t){return this.props[t.id]}static match(t){let e=Object.create(null);for(let n in t)for(let r of n.split(" "))e[r]=t[n];return t=>e[t.name]}}a.none=new a("",Object.create(null),0);class c{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node group")}extend(...t){let e=[];for(let n of this.types){let r=null;for(let e of t){let t=e.f(n);if(void 0!==t){if(!r){r=Object.create(null);for(let t in n.props)r[t]=n.props[t]}r[e.prop.id]=t}}e.push(r?new a(n.name,r,n.id):n)}return new c(e)}}class h{get name(){return this.type.name}get depth(){let t=0;for(let e=this.parent;e;e=e.parent)t++;return t}get root(){let t=this;for(;t.parent;)t=t.parent;return t}resolve(t,e=0){let n=this.resolveAt(t);if(0!=e)for(;;){let r=e<0?n.childBefore(t):n.childAfter(t);if(!r||(e<0?r.end:r.start)!=t)break;n=r}return n}get firstChild(){return this.childAfter(this.start-1)}get lastChild(){return this.childBefore(this.end+1)}}class u extends h{constructor(t,e,n,r){super(),this.type=t,this.children=e,this.positions=n,this.length=r}get start(){return 0}get end(){return this.length}toString(){let t=this.children.map(t=>t.toString()).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(o.error)?JSON.stringify(this.name):this.name)+(t.length?"("+t+")":""):t}partial(t,e,n,r,i){for(let s=0;s<this.children.length;s++){let o=this.positions[s];if(o>e)break;let l=this.children[s],a=o+l.length;a<t||(t<=o&&e>=a?(r.push(l),i.push(o+n)):l instanceof u&&l.partial(t-o,e-o,n+o,r,i))}}applyChanges(t){if(0==t.length)return this;let e=[],n=[];function r(t,e,n){let r=-1;return t.iterate({from:e,to:n<0?0:t.length,enter:()=>r<0&&void 0,leave(t,i,s){r<0&&(n<0?s<=e:i>=e)&&!t.prop(o.error)&&(r=n<0?Math.min(e,s-1):Math.max(e,i+1))}}),r>-1?r:n<0?0:t.length}let i=0;for(let s=0,o=0;;s++){let l=s==t.length?null:t[s],a=l?r(this,l.fromA,-1):this.length;if(a>o&&this.partial(o,a,i,e,n),!l)break;o=r(this,l.toA,1),i+=l.toB-l.fromB-(l.toA-l.fromA)}return new u(a.none,e,n,this.length+i)}cut(t){if(t>=this.length)return this;let e=[],n=[];for(let r=0;r<this.children.length;r++){let i=this.positions[r];if(i>=t)break;let s=this.children[r];e.push(i+s.length<=t?s:s.cut(t-i)),n.push(i)}return new u(this.type,e,n,t)}iterate({from:t=this.start,to:e=this.end,enter:n,leave:r}){let s=new i(n,r);return this.iterInner(t,e,0,s),s.result}iterInner(t,e,n,r){if(!this.type.name||r.doEnter(this.type,n,n+this.length)){if(t<=e)for(let i=0;i<this.children.length&&!r.done;i++){let s=this.children[i],o=this.positions[i]+n,l=o+s.length;if(o>e)break;l<t||s.iterInner(t,e,o,r)}else for(let i=this.children.length-1;i>=0&&!r.done;i--){let s=this.children[i],o=this.positions[i]+n;if(o+s.length<e)break;o>t||s.iterInner(t,e,o,r)}r.leave&&this.type.name&&r.leave(this.type,n,n+this.length)}}resolveAt(t){if(d==this)for(let e=f;;){let n=e.parent;if(!n)break;if(e.start<t&&e.end>t)return e.resolve(t);e=n}return d=this,f=this.resolveInner(t,0,this)}childBefore(t){return this.findChild(t,-1,0,this)}childAfter(t){return this.findChild(t,1,0,this)}findChild(t,e,n,r){for(let i=0;i<this.children.length;i++){let s=this.positions[i]+n,o=-1;if(s>=t)if(e<0&&i>0)o=i-1;else{if(!(e>0))break;o=i}if(o<0&&(s+this.children[i].length>t||e<0&&i==this.children.length-1)&&(o=i),o>=0){let i=this.children[o],s=this.positions[o]+n;if(0==i.length&&s==t)continue;if(i instanceof u)return i.type.name?new g(i,s,r):i.findChild(t,e,s,r);{let n=i.findIndex(t,e,s,0,i.buffer.length);if(n>-1)return new m(i,s,n,r)}}}return null}resolveInner(t,e,n){let r=this.findChild(t,0,e,n);return r?r.resolveAt(t):n}append(t){if(t.children.length&&t.positions[0]<this.length)throw new Error("Can't append overlapping trees");return new u(this.type,this.children.concat(t.children),this.positions.concat(t.positions),t.length)}balance(t=r){return this.children.length<=y?this:w(this.type,a.none,this.children,this.positions,0,this.children.length,0,t,this.length)}static build(t){return function(t){let{buffer:e,group:n,topID:i=0,maxBufferLength:s=r,reused:o=[],minRepeatType:l=n.types.length}=t,c=Array.isArray(e)?new v(e,e.length):e,h=n.types;function d(t,e,r,i,g){let m,{id:v,start:b,end:O,size:x}=c,S=b-t;if(x<0)return r.push(o[v]),i.push(S),void c.next();let k,C=h[v];if(O-b<=s&&(m=function(t){let e=c.fork(),n=0,r=0,i=0,o=e.end-s;t:for(let s=e.pos-t;e.pos>s;){let t=e.size,a=e.pos-t;if(t<0||a<s||e.start<o)break;let c=e.id>=l?4:0,h=e.start;for(e.next();e.pos>a;){if(e.size<0)break t;e.id>=l&&(c+=4),e.next()}r=h,n+=t,i+=c}return n>4?{size:n,start:r,skip:i}:null}(c.pos-e))){let e=new Uint16Array(m.size-m.skip),r=c.pos-m.size,i=e.length;for(;c.pos>r;)i=f(m.start,e,i);k=new p(e,O-m.start,n,g),S=m.start-t}else{let t=c.pos-x;c.next();let e=[],r=[],i=v>=n.types.length?v-(n.types.length-l):-1;if(i>-1)for(C=h[i];c.pos>t;)d(b,t,e,r,c.id==i?C:a.none);else for(;c.pos>t;)d(b,t,e,r,a.none);e.reverse(),r.reverse(),k=i>-1&&e.length>y?w(C,C,e,r,0,e.length,0,s,O-b):new u(C,e,r,O-b)}r.push(k),i.push(S)}function f(t,e,n){let{id:r,start:i,end:s,size:o}=c;c.next();let a=n;if(o>4){let r=c.pos-(o-4);for(;c.pos>r;)n=f(t,e,n)}return r<l&&(e[--n]=a,e[--n]=s-t,e[--n]=i-t,e[--n]=r),n}let g=[],m=[];for(;c.pos>0;)d(0,0,g,m,a.none);let b=g.length?m[0]+g[0].length:0;return new u(n.types[i],g.reverse(),m.reverse(),b)}(t)}}u.empty=new u(a.none,[],[],0),u.prototype.parent=null;let d=u.empty,f=u.empty;class p{constructor(t,e,n,r=a.none){this.buffer=t,this.length=e,this.group=n,this.type=r}toString(){let t=[];for(let e=0;e<this.buffer.length;)e=this.childToString(e,t);return t.join(",")}childToString(t,e){let n=this.buffer[t+3],r=this.group.types[this.buffer[t]],i=r.name;if(/\W/.test(i)&&!r.prop(o.error)&&(i=JSON.stringify(i)),n>(t+=4)){let e=[];for(;t<n;)t=this.childToString(t,e);i+="("+e.join(",")+")"}return e.push(i),t}cut(t){let e=0;for(;e<this.buffer.length&&this.buffer[e+1]<t;)e+=4;let n=new Uint16Array(e);for(let r=0;r<e;r+=4)n[r]=this.buffer[r],n[r+1]=this.buffer[r+1],n[r+2]=Math.min(t,this.buffer[r+2]),n[r+3]=Math.min(this.buffer[r+3],e);return new p(n,Math.min(t,this.length),this.group)}iterate({from:t=0,to:e=this.length,enter:n,leave:r}){let s=new i(n,r);return this.iterInner(t,e,0,s),s.result}iterInner(t,e,n,r){if(t<=e)for(let i=0;i<this.buffer.length;)i=this.iterChild(t,e,n,i,r);else this.iterRev(t,e,n,0,this.buffer.length,r)}iterChild(t,e,n,r,i){let s=this.group.types[this.buffer[r++]],o=this.buffer[r++]+n,l=this.buffer[r++]+n,a=this.buffer[r++];if(o>e)return this.buffer.length;if(l>=t&&i.doEnter(s,o,l)){for(;r<a&&!i.done;)r=this.iterChild(t,e,n,r,i);i.leave&&i.leave(s,o,l)}return a}parentNodesByEnd(t,e){let n=[],r=t=>{let e=this.buffer[t+3];if(e==t+4)return e;for(let n=t+4;n<e;)n=r(n);return n.push(t),e};for(let i=t;i<e;)i=r(i);return n}iterRev(t,e,n,r,i,s){let o=this.parentNodesByEnd(r,i),l=-1,a=-1,c=()=>{o.length>0?(l=o.pop(),a=this.buffer[l+3]):a=-1};c();t:for(let h=i;h>r&&!s.done;){for(;a==h;){let r=l,i=this.buffer[r],o=this.buffer[r+1]+n,u=this.buffer[r+2]+n;if(c(),o<=t&&u>=e&&!s.doEnter(this.group.types[i],o,u)){for(h=r;a>r;)c();continue t}}let r=this.buffer[--h],i=this.buffer[--h]+n,o=this.buffer[--h]+n,u=this.buffer[--h];o>t||i<e||(r!=h+4||s.doEnter(this.group.types[u],o,i))&&s.leave&&s.leave(this.group.types[u],o,i)}}findIndex(t,e,n,r,i){let s=-1;for(let o=r,l=this.buffer;o<i;){let r=l[o+1]+n,i=l[o+2]+n,a=r==i&&r==t;if(r>=t){if(e>0&&!a)return o;break}if(i>t)return o;a||(s=o),o=l[o+3]}return e<0?s:-1}}class g extends h{constructor(t,e,n){super(),this.node=t,this.start=e,this.parent=n}get type(){return this.node.type}get end(){return this.start+this.node.length}resolveAt(t){return t<=this.start||t>=this.end?this.parent.resolveAt(t):this.node.resolveInner(t,this.start,this)}childBefore(t){return this.node.findChild(t,-1,this.start,this)}childAfter(t){return this.node.findChild(t,1,this.start,this)}toString(){return this.node.toString()}iterate({from:t=this.start,to:e=this.end,enter:n,leave:r}){let s=new i(n,r);return this.node.iterInner(t,e,this.start,s),s.result}}class m extends h{constructor(t,e,n,r){super(),this.buffer=t,this.bufferStart=e,this.index=n,this.parent=r}get type(){return this.buffer.group.types[this.buffer.buffer[this.index]]}get start(){return this.buffer.buffer[this.index+1]+this.bufferStart}get end(){return this.buffer.buffer[this.index+2]+this.bufferStart}get endIndex(){return this.buffer.buffer[this.index+3]}childBefore(t){let e=this.buffer.findIndex(t,-1,this.bufferStart,this.index+4,this.endIndex);return e<0?null:new m(this.buffer,this.bufferStart,e,this)}childAfter(t){let e=this.buffer.findIndex(t,1,this.bufferStart,this.index+4,this.endIndex);return e<0?null:new m(this.buffer,this.bufferStart,e,this)}iterate({from:t=this.start,to:e=this.end,enter:n,leave:r}){let s=new i(n,r);return t<=e?this.buffer.iterChild(t,e,this.bufferStart,this.index,s):this.buffer.iterRev(t,e,this.bufferStart,this.index,this.endIndex,s),s.result}resolveAt(t){if(t<=this.start||t>=this.end)return this.parent.resolveAt(t);let e=this.buffer.findIndex(t,0,this.bufferStart,this.index+4,this.endIndex);return e<0?this:new m(this.buffer,this.bufferStart,e,this).resolveAt(t)}toString(){let t=[];return this.buffer.childToString(this.index,t),t.join("")}}class v{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new v(this.buffer,this.index)}}const y=8;function w(t,e,n,r,i,s,o,l,c){let h=[],d=[];if(c<=l)for(let a=i;a<s;a++)h.push(n[a]),d.push(r[a]-o);else{let t=Math.max(l,Math.ceil(1.5*c/y));for(let c=i;c<s;){let i=c,f=r[c];for(c++;c<s&&!(r[c]+n[c].length-f>t);c++);if(c==i+1){let r=n[i];if(r instanceof u&&r.type==e&&r.length>t<<1){for(let t=0;t<r.children.length;t++)h.push(r.children[t]),d.push(r.positions[t]+f-o);continue}h.push(r)}else if(c==i+1)h.push(n[i]);else{let t=w(e,e,n,r,i,c,f,l,r[c-1]+n[c-1].length-f);e==a.none||b(t.children,e)||(t=new u(a.none,t.children,t.positions,t.length)),h.push(t)}d.push(f-o)}}return new u(t,h,d,c)}function b(t,e){for(let n of t)if(n.type==e)return!0;return!1}},X2sM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("jcaT"),i=n("gNtM"),s=n("bNGr"),o=n("+9gL");e.newLintStrategy=function(t){if(null==t?void 0:t.lsp){const e=t.lsp;if(e.lspClient)return new i.LSPLint(e.lspClient);if(e.url)return new i.LSPLint(new s.HTTPLSPClient(e.url,e.httpErrorHandler));throw new Error("the url or the lspClient must be set")}return new o.HybridLint},e.promQLLinter=function(t,e){return r.linter(t.call(e))}},ZQd5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("KoMb"),i=n("TauG"),s=n("U2K6"),o=n("R5uj");e.Parser=class{constructor(t){this.tree=t.tree,this.state=t,this.diagnostics=[]}getDiagnostics(){return this.diagnostics.sort((t,e)=>t.from-e.from)}analyze(){this.checkAST(this.tree.firstChild),this.diagnoseAllErrorNodes()}diagnoseAllErrorNodes(){this.tree.iterate({enter:(t,e,n)=>{if(0===t.id&&n!==this.tree.end){const t=this.tree.resolve(e,-1);this.diagnostics.push({severity:"error",message:"unexpected expression",from:t.start,to:t.end})}}})}checkAST(t){if(!t)return s.ValueType.none;switch(t.type.id){case r.Expr:return this.checkAST(t.firstChild);case r.AggregateExpr:this.checkAggregationExpr(t);break;case r.BinaryExpr:this.checkBinaryExpr(t);break;case r.FunctionCall:this.checkCallFunction(t);break;case r.ParenExpr:this.checkAST(i.walkThrough(t,r.Expr));break;case r.UnaryExpr:const e=this.checkAST(i.walkThrough(t,r.Expr));e!==s.ValueType.scalar&&e!==s.ValueType.vector&&this.addDiagnostic(t,`unary expression only allowed on expressions of type scalar or instant vector, got ${e}`);break;case r.SubqueryExpr:const n=this.checkAST(i.walkThrough(t,r.Expr));n!==s.ValueType.vector&&this.addDiagnostic(t,`subquery is only allowed on instant vector, got ${n} in ${t.name} instead`);break;case r.MatrixSelector:this.checkAST(i.walkThrough(t,r.Expr));break;case r.VectorSelector:this.checkVectorSelector(t)}return s.getType(t)}checkAggregationExpr(t){var e;const n=null===(e=t.firstChild)||void 0===e?void 0:e.firstChild;if(!n)return void this.addDiagnostic(t,"aggregation operator expected in aggregation expression but got nothing");const o=i.walkThrough(t,r.FunctionCallBody,r.FunctionCallArgs,r.Expr);if(!o)return void this.addDiagnostic(t,"unable to find the parameter for the expression");this.expectType(o,s.ValueType.vector,"aggregation expression");const l=i.walkThrough(t,r.FunctionCallBody,r.FunctionCallArgs,r.FunctionCallArgs,r.Expr);if(n.type.id===r.Topk||n.type.id===r.Bottomk||n.type.id===r.Quantile){if(!l)return void this.addDiagnostic(t,"no parameter found");this.expectType(l,s.ValueType.scalar,"aggregation parameter")}if(n.type.id===r.CountValues){if(!l)return void this.addDiagnostic(t,"no parameter found");this.expectType(l,s.ValueType.string,"aggregation parameter")}}checkBinaryExpr(t){const e=t.firstChild,n=t.lastChild;if(!e||!n)return void this.addDiagnostic(t,"left or right expression is missing in binary expression");const o=this.checkAST(e),l=this.checkAST(n),a=i.walkThrough(t,r.BinModifier,r.GroupModifiers,r.BoolModifier,r.Bool),c=i.containsChild(t,r.Eql,r.Neq,r.Lte,r.Lss,r.Gte,r.Gtr),h=i.containsChild(t,r.And,r.Or,r.Unless);a?(c||this.addDiagnostic(t,"bool modifier can only be used on comparison operators"),o===s.ValueType.scalar&&l===s.ValueType.scalar||this.addDiagnostic(t,"comparisons between other things than scalar cannot use BOOL modifier")):o===s.ValueType.scalar&&l===s.ValueType.scalar&&this.addDiagnostic(t,"comparisons between scalars must use BOOL modifier"),o!==s.ValueType.scalar&&o!==s.ValueType.vector&&this.addDiagnostic(e,"binary expression must contain only scalar and instant vector types"),o!==s.ValueType.scalar&&o!==s.ValueType.vector&&this.addDiagnostic(n,"binary expression must contain only scalar and instant vector types"),o!==s.ValueType.scalar&&l!==s.ValueType.scalar||!h||this.addDiagnostic(t,"set operator not allowed in binary scalar expression")}checkCallFunction(t){var e;const n=null===(e=t.firstChild)||void 0===e?void 0:e.firstChild;if(!n)return void this.addDiagnostic(t,"function not defined");const o=i.retrieveAllRecursiveNodes(i.walkThrough(t,r.FunctionCallBody),r.FunctionCallArgs,r.Expr),l=s.getFunction(n.type.id),a=l.argTypes.length;if(0===l.variadic)o.length!==a&&this.addDiagnostic(t,`expected ${a} argument(s) in call to ${l.name}, got ${o.length}`);else{const e=a-1;if(e>o.length)this.addDiagnostic(t,`expected at least ${e} argument(s) in call to ${l.name}, got ${o.length}`);else{const n=e+l.variadic;l.variadic>0&&n<o.length&&this.addDiagnostic(t,`expected at most ${n} argument(s) in call to ${l.name}, got ${o.length}`)}}let c=0;for(let r=0;r<o.length;r++){if(c=r,c>=l.argTypes.length){if(0===l.variadic)break;c=l.argTypes.length-1}this.expectType(o[r],l.argTypes[c],`call to function ${l.name}`)}}checkVectorSelector(t){const e=o.buildLabelMatchers(i.retrieveAllRecursiveNodes(i.walkThrough(t,r.LabelMatchers,r.LabelMatchList),r.LabelMatchList,r.LabelMatcher),this.state);let n="";const s=i.walkThrough(t,r.MetricIdentifier,r.Identifier);if(s&&(n=this.state.sliceDoc(s.start,s.end)),""!==n){const i=e.find(t=>"__name__"===t.name);i&&this.addDiagnostic(t,`metric name must not be set twice: ${n} or ${i.value}`),e.push(new o.Matcher(r.EqlSingle,"__name__",n))}e.every(t=>t.matchesEmpty())&&this.addDiagnostic(t,"vector selector must contain at least one non-empty matcher")}expectType(t,e,n){const r=this.checkAST(t);r!==e&&this.addDiagnostic(t,`expected type ${e} in ${n}, got ${r}`)}addDiagnostic(t,e){this.diagnostics.push({severity:"error",message:e,from:t.start,to:t.end})}}},bNGr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTTPLSPClient=class{constructor(t,e,n){this.autocompleteEndpoint="/completion",this.diagnosticEndpoint="/diagnostics",this.fetchFn=(t,e)=>fetch(t,e),this.url=t,this.errorHandler=e,n&&(this.fetchFn=n)}fetchLSP(t,e){return this.fetchFn(this.url+t,{method:"POST",body:JSON.stringify(e)}).then(t=>{if(200!==t.status)throw new Error(t.statusText);return t}).then(t=>t.json()).catch(t=>(this.errorHandler&&this.errorHandler(t),[]))}complete(t){return this.fetchLSP(this.autocompleteEndpoint,t)}diagnostic(t){return this.fetchLSP(this.diagnosticEndpoint,t)}}},dC2d:function(t,e,n){"use strict";n.r(e),n.d(e,"Annotation",(function(){return j})),n.d(e,"AnnotationType",(function(){return F})),n.d(e,"ChangeDesc",(function(){return l})),n.d(e,"ChangeSet",(function(){return a})),n.d(e,"CharCategory",(function(){return G})),n.d(e,"EditorSelection",(function(){return m})),n.d(e,"EditorState",(function(){return K})),n.d(e,"Facet",(function(){return b})),n.d(e,"IndentContext",(function(){return V})),n.d(e,"MapMode",(function(){return o})),n.d(e,"SelectionRange",(function(){return g})),n.d(e,"StateEffect",(function(){return H})),n.d(e,"StateEffectType",(function(){return B})),n.d(e,"StateField",(function(){return k})),n.d(e,"Transaction",(function(){return z})),n.d(e,"combineConfig",(function(){return J})),n.d(e,"languageDataProp",(function(){return N})),n.d(e,"precedence",(function(){return _})),n.d(e,"tagExtension",(function(){return E}));var r=n("euHR");n.d(e,"Text",(function(){return r.a}));var i=n("WQMp");const s=/\r\n?|\n/;var o;!function(t){t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter"}(o||(o={}));class l{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,r=0;e<this.sections.length;){let i=this.sections[e++],s=this.sections[e++];s<0?(t(n,r,i),r+=i):r+=s,n+=i}}iterChangedRanges(t,e=!1){u(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];r<0?t.push(n,r):t.push(r,n)}return new l(t)}composeDesc(t){return this.empty?t:t.empty?this:f(this,t)}mapDesc(t,e=!1){return t.empty?this:d(this,t,e)}mapPos(t,e=-1,n=o.Simple){let r=0,i=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],a=this.sections[s++],c=r+l;if(a<0){if(c>t)return i+(t-r);i+=l}else{if(n!=o.Simple&&c>=t&&(n==o.TrackDel&&r<t&&c>t||n==o.TrackBefore&&r<t||n==o.TrackAfter&&c>t))return-1;if(c>t||c==t&&e<0&&!l)return t==r||e<0?i:i+a;i+=a}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return i}mapPosStable(t,e=-1){let n=0,r=0,i=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],l=this.sections[s++],a=n+o;if(l<0){if(a>t)return r+Math.max(0,t-n);i=r+=o}else{if(e<=0&&a>=t)return i;r+=l}n=a}return r}touchesRange(t,e=t){for(let n=0,r=0;n<this.sections.length&&r<=e;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=e&&i>=t)return!(r<t&&i>e)||"cover";r=i}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}}class a extends l{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return u(this,(e,n,r,i,s)=>t=t.replace(r,r+(n-e),s),!1),t}mapDesc(t,e=!1){return d(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,s=0;i<e.length;i+=2){let o=e[i],l=e[i+1];if(l>=0){e[i]=l,e[i+1]=o;let a=i>>1;for(;n.length<a;)n.push(r.a.empty);n.push(o?t.slice(s,s+o):r.a.empty)}s+=o}return new a(e,n)}compose(t){return this.empty?t:t.empty?this:f(this,t,!0)}map(t,e=!1){return t.empty?this:d(this,t,e,!0)}iterChanges(t,e=!1){u(this,t,e)}get desc(){return new l(this.sections)}filter(t){let e=[],n=[],r=[],i=new p(this);t:for(let s=0,o=0;;){let l=s==t.length?1e9:t[s++];for(;o<l||o==l&&0==i.len;){if(i.done)break t;let t=Math.min(i.len,l-o);c(r,t,-1);let s=-1==i.ins?-1:0==i.off?i.ins:0;c(e,t,s),s>0&&h(n,e,i.text),i.forward(t),o+=t}let a=t[s++];for(;o<a;){if(i.done)break t;let t=Math.min(i.len,a-o);c(e,t,-1),c(r,t,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(t),o+=t}}return{changes:new a(e,n),filtered:new l(r)}}static of(t,e,n){let i=[],o=[],l=0,u=null;function d(t=!1){if(!t&&!i.length)return;l<e&&c(i,e-l,-1);let n=new a(i,o);u=u?u.compose(n.map(u)):n,i=[],o=[],l=0}return function t(f){if(Array.isArray(f))for(let e of f)t(e);else if(f instanceof a){if(f.length!=e)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${e})`);d(),u=u?u.compose(f.map(u)):f}else{let{from:t,to:a=t,insert:u}=f;if(t>a||t<0||a>e)throw new RangeError(`Invalid change range ${t} to ${a} (in doc of length ${e})`);let p=u?"string"==typeof u?r.a.of(u.split(n||s)):u:r.a.empty,g=p.length;if(t==a&&0==g)return;t<l&&d(),t>l&&c(i,t-l,-1),c(i,a-t,g),h(o,i,p),l=a}}(t),d(!u),u}static empty(t){return new a(t?[t,-1]:[],[])}}function c(t,e,n,r=!1){if(0==e&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function h(t,e,n){if(0==n.length)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(r.a.empty);t.push(n)}}function u(t,e,n){let i=t.inserted;for(let s=0,o=0,l=0;l<t.sections.length;){let a=t.sections[l++],c=t.sections[l++];if(c<0)s+=a,o+=a;else{let h=s,u=o,d=r.a.empty;for(;h+=a,u+=c,c&&i&&(d=d.append(i[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)a=t.sections[l++],c=t.sections[l++];e(s,h,o,u,d),s=h,o=u}}}function d(t,e,n,r=!1){let i=[],s=r?[]:null,o=new p(t),u=new p(e);for(let d=0,f=0;;)if(-1==o.ins)d+=o.len,o.next();else if(-1==u.ins&&f<d){let t=Math.min(u.len,d-f);u.forward(t),c(i,t,-1),f+=t}else if(u.ins>=0&&(o.done||f<d||f==d&&(u.len<o.len||u.len==o.len&&!n))){for(c(i,u.ins,-1);d>f&&!o.done&&d+o.len<f+u.len;)d+=o.len,o.next();f+=u.len,u.next()}else{if(!(o.ins>=0)){if(o.done&&u.done)return s?new a(i,s):new l(i);throw new Error("Mismatched change set lengths")}{let t=0,e=d+o.len;for(;;)if(u.ins>=0&&f>d&&f+u.len<e)t+=u.ins,f+=u.len,u.next();else{if(!(-1==u.ins&&f<e))break;{let n=Math.min(u.len,e-f);t+=n,u.forward(n),f+=n}}c(i,t,o.ins),s&&h(s,i,o.text),d=e,o.next()}}}function f(t,e,n=!1){let r=[],i=n?[]:null,s=new p(t),o=new p(e);for(let u=!1;;){if(s.done&&o.done)return i?new a(r,i):new l(r);if(0==s.ins)c(r,s.len,0,u),s.next();else if(0!=o.len||o.done){if(s.done||o.done)throw new Error("Mismatched change set lengths");{let t=Math.min(s.len2,o.len),e=r.length;if(-1==s.ins){let e=-1==o.ins?-1:o.off?0:o.ins;c(r,t,e,u),i&&e&&h(i,r,o.text)}else-1==o.ins?(c(r,s.off?0:s.len,t,u),i&&h(i,r,s.textBit(t))):(c(r,s.off?0:s.len,o.off?0:o.ins,u),i&&!o.off&&h(i,r,o.text));u=(s.ins>t||o.ins>=0&&o.len>t)&&(u||r.length>e),s.forward2(t),o.forward(t)}}else c(r,0,o.ins,u),i&&h(i,r,o.text),o.next()}}class p{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?r.a.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?r.a.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class g{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let t=3&this.flags;return 3==t?null:t}get goalColumn(){let t=this.flags>>5;return 33554431==t?void 0:t}map(t){let e=t.mapPos(this.from),n=t.mapPos(this.to);return e==this.from&&n==this.to?this:new g(e,n,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return m.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return m.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return m.range(t.anchor,t.head)}}class m{constructor(t,e=0){this.ranges=t,this.primaryIndex=e}map(t){return t.empty?this:m.create(this.ranges.map(e=>e.map(t)),this.primaryIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.primaryIndex!=t.primaryIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get primary(){return this.ranges[this.primaryIndex]}asSingle(){return 1==this.ranges.length?this:new m([this.primary])}addRange(t,e=!0){return m.create([t].concat(this.ranges),e?0:this.primaryIndex+1)}replaceRange(t,e=this.primaryIndex){let n=this.ranges.slice();return n[e]=t,m.create(n,this.primaryIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),primaryIndex:this.primaryIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.primaryIndex||t.primaryIndex>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new m(t.ranges.map(t=>g.fromJSON(t)),t.primaryIndex)}static single(t,e=t){return new m([m.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let i=t[r];if(i.empty?i.from<=n:i.from<n)return v(t.slice(),e);n=i.to}return new m(t,e)}static cursor(t,e=0,n,r){return new g(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(t,e,n){let r=(null!=n?n:33554431)<<5;return e<t?new g(e,t,16|r):new g(t,e,r)}}function v(t,e=0){let n=t[e];t.sort((t,e)=>t.from-e.from),e=t.indexOf(n);for(let r=1;r<t.length;r++){let n=t[r],i=t[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let s=i.from,o=Math.max(n.to,i.to);r<=e&&e--,t.splice(--r,2,n.anchor>n.head?m.range(o,s):m.range(s,o))}}return new m(t,e)}function y(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let w=0;class b{constructor(t,e,n,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=r,this.id=w++,this.default=t([])}static define(t={}){return new b(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:O),!!t.static)}of(t){return new x([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new x(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new x(t,this,2,e)}from(t,e){return n=>T(e,this.compute([n],e=>t(e.field(n))))}nFrom(t,e){return n=>T(e,this.computeN([n],e=>t(e.field(n))))}}function O(t,e){return t==e||t.length==e.length&&t.every((t,n)=>t===e[n])}class x{constructor(t,e,n,r){this.dependencies=t,this.facet=e,this.type=n,this.value=r,this.id=w++}dynamicSlot(t){let e=this.value,n=this.facet.compareInput,r=t[this.id]>>1,i=2==this.type,s=!1,o=!1,l=[];for(let a of this.dependencies)"doc"==a?s=!0:"selection"==a?o=!0:0==(1&t[a.id])&&l.push(t[a.id]);return(t,a)=>{if(!a||a.reconfigure)return t.values[r]=e(t),1;{if(!(s&&a.docChanged||o&&(a.docChanged||a.selection)||l.some(e=>(1&D(t,e))>0)))return 0;let c=e(t),h=a.startState.values[r];return(i?function(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}(c,h,n):n(c,h))?0:(t.values[r]=c,1)}}}}function S(t,e,n){let r=n.map(e=>t[e.id]),i=n.map(t=>t.type),s=r.filter(t=>!(1&t)),o=t[e.id]>>1;return(t,n)=>{let l=n?n.reconfigure?n.startState.config.address[e.id]:o<<1:null,a=null==l;for(let e of s)1&D(t,e)&&(a=!0);if(!a)return 0;let c=[];for(let e=0;e<r.length;e++){let n=I(t,r[e]);if(2==i[e])for(let t of n)c.push(t);else c.push(n)}let h=e.combine(c);return null!=l&&e.compare(h,I(n.startState,l))?0:(t.values[o]=h,1)}}class k{constructor(t,e,n,r,i){this.id=t,this.createF=e,this.updateF=n,this.compareF=r,this.facets=i}static define(t){let e=[],n=new k(w++,t.create,t.update,t.compare||((t,e)=>t===e),e);if(t.provide)for(let r of t.provide)e.push(r instanceof b?r.compute([n],t=>t.field(n)):r(n));return n}slot(t){let e=t[this.id]>>1;return(t,n)=>{if(!n)return t.values[e]=this.createF(t),1;let r,i=0;if(n.reconfigure){let t=function(t,e){let n=t.config.address[e];return null==n?null:n>>1}(n.startState,this.id);r=null==t?this.createF(n.startState):n.startState.values[t],i=1}else r=n.startState.values[e];let s=this.updateF(r,n);return i||this.compareF(r,s)||(i=1),i&&(t.values[e]=s),i}}}const C={fallback:3,default:2,extend:1,override:0};function _(t,e){if(!C.hasOwnProperty(e))throw new RangeError(`Invalid precedence: ${e}`);return new P(t,C[e])}function T(t,e){return t?_(e,t):e}class P{constructor(t,e){this.e=t,this.prec=e}}class A{constructor(t,e){this.tag=t,this.extension=e}}function E(t,e){return new A(t,e)}class M{constructor(t,e,n,r,i){for(this.source=t,this.replacements=e,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e=Object.create(null),n){let r=[],i=Object.create(null);for(let a of function(t,e){let n=[[],[],[],[]],r=new Map,i=Object.create(null);function s(t,o){let l=r.get(t);if(null!=l){if(l>=o)return;let e=n[l].indexOf(t);e>-1&&n[l].splice(e,1)}if(r.set(t,o),Array.isArray(t))for(let e of t)s(e,o);else if(t instanceof A){if(t.tag in i)throw new RangeError(`Duplicate use of tag '${String(t.tag)}' in extensions`);i[t.tag]=!0,s(e[t.tag]||t.extension,o)}else t.extension?s(t.extension,o):t instanceof P?s(t.e,t.prec):(n[o].push(t),t instanceof k&&s(t.facets,o))}s(t,C.default);for(let l of(o=e,(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]).concat(Object.keys(o))))!(l in i)&&"full"!=l&&e[l]&&(i[l]=!0,s(e[l],C.default));var o;return n.reduce((t,e)=>t.concat(e))}(t,e))a instanceof k?r.push(a):(i[a.facet.id]||(i[a.facet.id]=[])).push(a);let s=Object.create(null),o=[],l=[];for(let a of r)s[a.id]=l.length<<1,l.push(t=>a.slot(t));for(let a in i){let t=i[a],e=t[0].facet;if(t.every(t=>0==t.type)){s[e.id]=o.length<<1|1;let r=e.combine(t.map(t=>t.value)),i=n?n.config.address[e.id]:null;if(null!=i){let t=I(n,i);e.compare(r,t)&&(r=t)}o.push(r)}else{for(let e of t)0==e.type?(s[e.id]=o.length<<1|1,o.push(e.value)):(s[e.id]=l.length<<1,l.push(t=>e.dynamicSlot(t)));s[e.id]=l.length<<1,l.push(n=>S(n,e,t))}}return new M(t,e,l.map(t=>t(s)),s,o)}}function D(t,e){if(1&e)return 2;let n=e>>1,r=t.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;t.status[n]=4;let i=t.config.dynamicSlots[n](t,t.applying);return t.status[n]=2|i}function I(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const Q=b.define({combine:t=>t.some(t=>t),static:!0}),R=b.define(),L=b.define(),N=new i.c,$=b.define();class V{constructor(t,e={}){this.state=t,this.options=e}get unit(){return this.state.indentUnit}textAfterPos(t){var e,n;let r=null===(e=this.options)||void 0===e?void 0:e.simulateBreak;return t==r&&(null===(n=this.options)||void 0===n?void 0:n.simulateDoubleBreak)?"":this.state.sliceDoc(t,Math.min(t+100,null!=r&&r>t?r:1e9,this.state.doc.lineAt(t).to))}countColumn(t,e){return Object(r.d)(e<0?t:t.slice(0,e),0,this.state.tabSize)}lineIndent(t){var e;let n=null===(e=this.options)||void 0===e?void 0:e.overrideIndentation;if(n){let e=n(t.from);if(e>-1)return e}let r=t.slice(0,Math.min(100,t.length));return this.countColumn(r,r.search(/\S/))}column(t){var e;let n=this.state.doc.lineAt(t),r=n.slice(0,t-n.from),i=this.countColumn(r,t-n.from),s=(null===(e=this.options)||void 0===e?void 0:e.overrideIndentation)?this.options.overrideIndentation(n.from):-1;return s>-1&&(i+=s-this.countColumn(r,r.search(/\S/))),i}}class j{constructor(t,e){this.type=t,this.value=e}static define(){return new F}}class F{of(t){return new j(this,t)}}class H{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new H(this.type,e)}is(t){return this.type==t}static define(t={}){return new B(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let r of t){let t=r.map(e);t&&n.push(t)}return n}}class B{constructor(t){this.map=t}of(t){return new H(this,t)}}class z{constructor(t,e,n,r,i,s,o){this.startState=t,this.changes=e,this.selection=n,this.effects=r,this.annotations=i,this.reconfigure=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&y(n,e.newLength),i.some(t=>t.type==z.time)||(this.annotations=i.concat(z.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}}function q(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else{if(!(i<e.length))return n;s=e[i++],o=e[i++]}!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function U(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=a.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):null===(r=t.selection)||void 0===r?void 0:r.map(i),effects:H.mapEffects(t.effects,i).concat(H.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView,reconfigure:e.reconfigure?e.reconfigure.full||!t.reconfigure?e.reconfigure:Object.assign({},t.reconfigure,e.reconfigure):t.reconfigure}}function W(t,e,n){let r=e.reconfigure;r&&r.append&&(r=Object.assign({},r),r["undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf")]=r.append,r.append=void 0);let i=e.selection;return{changes:e.changes instanceof a?e.changes:a.of(e.changes||[],n,t.facet(K.lineSeparator)),selection:i&&(i instanceof m?i:m.single(i.anchor,i.head)),effects:e.effects?Array.isArray(e.effects)?e.effects:[e.effects]:X,annotations:e.annotations?Array.isArray(e.annotations)?e.annotations:[e.annotations]:X,scrollIntoView:!!e.scrollIntoView,reconfigure:r}}z.time=j.define(),z.userEvent=j.define(),z.addToHistory=j.define();const X=[];var G;!function(t){t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other"}(G||(G={}));const Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Y;try{Y=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(tt){}class K{constructor(t,e,n,r=null){if(this.config=t,this.doc=e,this.selection=n,this.applying=null,this.status=t.statusTemplate.slice(),r&&!r.reconfigure)this.values=r.startState.values.slice();else if(this.values=t.dynamicSlots.map(t=>null),r)for(let i in t.address){let e=t.address[i],n=r.startState.config.address[i];null!=n&&0==(1&e)&&(this.values[e>>1]=I(r.startState,n))}this.applying=r,r&&(r._state=this);for(let i=0;i<this.config.dynamicSlots.length;i++)D(this,i<<1);this.applying=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return D(this,n),I(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return function t(e,n,r){let i=W(e,n.length?n[0]:{},e.doc.length);n.length&&!1===n[0].filter&&(r=!1);for(let o=1;o<n.length;o++){!1===n[o].filter&&(r=!1);let t=!!n[o].sequential;i=U(i,W(e,n[o],t?i.changes.newLength:e.doc.length),t)}let s=new z(e,i.changes,i.selection,i.effects,i.annotations,i.reconfigure,i.scrollIntoView);return r?function(e){let n=e.startState,r=!0;for(let t of n.facet(R)){let n=t(e);if(!1===n){r=!1;break}Array.isArray(n)&&(r=!0===r?n:q(r,n))}if(!0!==r){let t,i;if(!1===r)i=e.changes.invertedDesc,t=a.empty(n.doc.length);else{let n=e.changes.filter(r);t=n.changes,i=n.filtered.invertedDesc}e=new z(n,t,e.selection&&e.selection.map(i),H.mapEffects(e.effects,i),e.annotations,e.reconfigure,e.scrollIntoView)}let i=n.facet(L);for(let s=i.length-1;s>=0;s--){let r=i[s](e);e=r instanceof z?r:Array.isArray(r)&&1==r.length&&r[0]instanceof z?r[0]:t(n,Array.isArray(r)?r:[r],!1)}return e}(s):s}(this,t,!0)}applyTransaction(t){let e=this.config;t.reconfigure&&(e=M.resolve(t.reconfigure.full||e.source,Object.assign(e.replacements,t.reconfigure,{full:void 0}),this)),new K(e,t.newDoc,t.newSelection,t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:m.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),i=[n.range];for(let s=1;s<e.ranges.length;s++){let n=t(e.ranges[s]),o=this.changes(n.changes),l=o.map(r);for(let t=0;t<s;t++)i[t]=i[t].map(l);i.push(n.range.map(r.mapDesc(o,!0))),r=r.compose(l)}return{changes:r,selection:m.create(i,e.primaryIndex)}}changes(t=[]){return t instanceof a?t:a.of(t,this.doc.length,this.facet(K.lineSeparator))}toText(t){return r.a.of(t.split(this.facet(K.lineSeparator)||s))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(D(this,e),I(this,e))}toJSON(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}static fromJSON(t,e={}){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");return K.create({doc:t.doc,selection:m.fromJSON(t.selection),extensions:e.extensions})}static create(t={}){let e=M.resolve(t.extensions||[]),n=t.doc instanceof r.a?t.doc:r.a.of((t.doc||"").split(e.staticFacet(K.lineSeparator)||s)),i=t.selection?t.selection instanceof m?t.selection:m.single(t.selection.anchor,t.selection.head):m.single(0);return y(i,n.length),e.staticFacet(Q)||(i=i.asSingle()),new K(e,n,i)}get tabSize(){return this.facet(K.tabSize)}get lineBreak(){return this.facet(K.lineSeparator)||"\n"}get indentUnit(){let t=this.facet(K.indentUnit);return 9==t.charCodeAt(0)?this.tabSize*t.length:t.length}indentString(t){let e="";if(9==this.facet(K.indentUnit).charCodeAt(0))for(;t>=this.tabSize;)e+="\t",t-=this.tabSize;for(let n=0;n<t;n++)e+=" ";return e}phrase(t){for(let e of this.facet(K.phrases))if(Object.prototype.hasOwnProperty.call(e,t))return e[t];return t}charCategorizer(t){return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return G.Space;if(function(t){if(Y)return Y.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||Z.test(n)))return!0}return!1}(t))return G.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return G.Word;return G.Other};var e}get tree(){let t=this.facet(K.syntax);return t.length?t[0].getTree(this):i.e.empty}languageDataAt(t,e){let n=[],r=this.facet(K.syntax);for(let i=r.length?0:1;i<2;i++){let s=this.facet(i?$:r[0].languageDataFacetAt(this,e));for(let e of s)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t])}return n}}function J(t,e,n={}){let r={};for(let i of t)for(let t of Object.keys(i)){let e=i[t],s=r[t];if(void 0===s)r[t]=e;else if(s===e||void 0===e);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);r[t]=n[t](s,e)}}for(let i in e)void 0===r[i]&&(r[i]=e[i]);return r}K.allowMultipleSelections=Q,K.indentation=b.define(),K.tabSize=b.define({combine:t=>t.length?t[0]:4}),K.lineSeparator=b.define({combine:t=>t.length?t[0]:void 0,static:!0}),K.indentUnit=b.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}}),K.phrases=b.define(),K.syntax=b.define(),K.globalLanguageData=$,K.foldable=b.define(),K.changeFilter=R,K.transactionFilter=L},euHR:function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return u}));let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let A=1;A<r.length;A++)r[A]+=r[A-1];function i(t){for(let e=1;e<r.length;e+=2)if(r[e]>t)return r[e-1]<=t;return!1}function s(t){return t>=127462&&t<=127487}function o(t,e){if(e==t.length)return e;e&&a(t.charCodeAt(e))&&c(t.charCodeAt(e-1))&&e--;let n=h(t,e);for(e+=d(n);e<t.length;){let r=h(t,e);if(8205==n||8205==r||i(r))e+=d(r),n=r;else{if(!s(r))break;{let n=0,r=e-2;for(;r>=0&&s(h(t,r));)n++,r-=2;if(n%2==0)break;e+=2}}}return e}function l(t,e){for(;e>0;){let n=o(t,e-2);if(n<e)return n;e--}return 0}function a(t){return t>=56320&&t<57344}function c(t){return t>=55296&&t<56320}function h(t,e){let n=t.charCodeAt(e);if(!c(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return a(r)?r-56320+(n-55296<<10)+65536:n}function u(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function d(t){return t<65536?1:2}function f(t,e,n){for(let r=0;r<t.length;)9==t.charCodeAt(r)?(e+=n-e%n,r++):(e++,r=o(t,r));return e}function p(t,e,n,r){for(let i=0;i<t.length;){if(e>=n)return{offset:i,leftOver:0};e+=9==t.charCodeAt(i)?r-e%r:1,i=o(t,i)}return{offset:t.length,leftOver:n-e}}class g{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);for(let e=0;e<m.length;e+=2){if(m[e]!=this)continue;let n=m[e+1];if(n.start<=t&&n.end>=t)return n}return y(this,this.lineInner(t,!1,1,0).finish(this))}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);for(let e=0;e<m.length;e+=2){if(m[e]!=this)continue;let n=m[e+1];if(n.number==t)return n}return y(this,this.lineInner(t,!0,1,0).finish(this))}replace(t,e,n){let r=[];return this.decompose(0,t,r),r.push(n),this.decompose(e,this.length,r),b.from(r,this.length-(e-t)+n.length)}append(t){return 0==this.length?t:0==t.length?this:b.from([this,t],this.length+t.length)}slice(t,e=this.length){let n=[];return this.decompose(t,e,n),b.from(n,e-t)}eq(t){return this==t||function(t,e){if(t.length!=e.length||t.lines!=e.lines)return!1;let n=new k(t),r=new k(e);for(let i=0,s=0;;){if(n.lineBreak!=r.lineBreak||n.done!=r.done)return!1;if(n.done)return!0;if(n.lineBreak)n.next(),r.next(),i=s=0;else{let t=n.value.slice(i),e=r.value.slice(s);if(t.length==e.length){if(t!=e)return!1;n.next(),r.next(),i=s=0}else if(t.length>e.length){if(t.slice(0,e.length)!=e)return!1;i+=e.length,r.next(),s=0}else{if(e.slice(0,t.length)!=t)return!1;s+=t.length,n.next(),i=0}}}}(this,t)}iter(t=1){return new k(this,t)}iterRange(t,e=this.length){return new C(this,t,e)}iterLines(t=0){return new _(this,t)}toString(){return this.sliceString(0)}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");if(1==t.length&&!t[0]&&g.empty)return g.empty;let e=O(t);return e<1024?new w(t,e):b.from(w.split(t,[]),e)}}"undefined"!=typeof Symbol&&(g.prototype[Symbol.iterator]=function(){return this.iter()});let m=[],v=-2;function y(t,e){return v=(v+2)%12,m[v]=t,m[v+1]=e,e}class w extends g{constructor(t,e=O(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,r){for(let i=0;;i++){let s=this.text[i],o=r+s.length;if((e?n:o)>=t)return new T(r,o,n,s);r=o+1,n++}}decompose(t,e,n){n.push(new w(S(this.text,t,e),Math.min(e,this.length)-Math.max(0,t)))}lastLineLength(){return this.text[this.text.length-1].length}firstLineLength(){return this.text[0].length}replace(t,e,n){let r=this.length+n.length-(e-t);return r>=1024||!(n instanceof w)?super.replace(t,e,n):new w(x(this.text,x(n.text,S(this.text,0,t)),e),r)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,s=0;i<=e&&s<this.text.length;s++){let o=this.text[s],l=i+o.length;i>t&&s&&(r+=n),t<l&&e>i&&(r+=o.slice(Math.max(0,t-i),e-i)),i=l+1}return r}flatten(t){t[t.length-1]+=this.text[0];for(let e=1;e<this.text.length;e++)t.push(this.text[e])}static split(t,e){let n=[],r=-1;for(let i of t)for(;;){let t=r+i.length+1;if(t<512){r=t,n.push(i);break}let s=512-r-1,o=i.charCodeAt(s);o>=56320&&o<57344&&s++,n.push(i.slice(0,s)),e.push(new w(n,512)),i=i.slice(s),r=-1,n=[]}return-1!=r&&e.push(new w(n,r)),e}}class b extends g{constructor(t,e){super(),this.children=t,this.length=e,this.lines=1;for(let n of t)this.lines+=n.lines-1}lineInner(t,e,n,r){for(let i=0;;i++){let s=this.children[i],o=r+s.length,l=n+s.lines-1;if((e?l:o)>=t){let l,a=s.lineInner(t,e,n,r);return a.from==r&&(l=this.lineLengthTo(i))&&(a.from-=l,a.content=null),a.to==o&&(l=this.lineLengthFrom(i+1))&&(a.to+=l,a.content=null),a}r=o,n=l}}decompose(t,e,n){for(let r=0,i=0;i<e&&r<this.children.length;r++){let s=this.children[r],o=i+s.length;t<o&&e>i&&(i>=t&&o<=e?n.push(s):s.decompose(t-i,e-i,n)),i=o}}lineLengthTo(t){let e=0;for(let n=t-1;n>=0;n--){let t=this.children[n];if(t.lines>1)return e+t.lastLineLength();e+=t.length}return e}lastLineLength(){return this.lineLengthTo(this.children.length)}lineLengthFrom(t){let e=0;for(let n=t;n<this.children.length;n++){let t=this.children[n];if(t.lines>1)return e+t.firstLineLength();e+=t.length}return e}firstLineLength(){return this.lineLengthFrom(0)}replace(t,e,n){if(n.length<512&&e-t<512){let r=n.length-(e-t);for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(t>=s&&e<=l&&o.length+r<this.length+r>>2&&o.length+r>0){let l=this.children.slice();return l[i]=o.replace(t-s,e-s,n),new b(l,this.length+r)}s=l}}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,s=0;s<e&&i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(t<l&&e>s){let i=o.sliceString(t-s,e-s,n);if(t>=s&&e<=l)return i;r+=i}s=l}return r}flatten(t){for(let e of this.children)e.flatten(t)}static from(t,e){if(!t.every(t=>t instanceof g))throw new Error("NOP");if(e<1024){let n=[""];for(let e of t)e.flatten(n);return new w(n,e)}let n=Math.max(512,e>>3),r=n<<1,i=n>>1,s=[],o=0,l=[];function a(t){let e,h=t.length;if(h)if(h>r&&t instanceof b)for(let n of t.children)a(n);else h>i&&(o>i||0==o)?(c(),s.push(t)):t instanceof w&&o>0&&(e=l[l.length-1])instanceof w&&t.length+e.length<=512?(o+=h,l[l.length-1]=new w(x(t.text,e.text.slice()),t.length+e.length)):(o+h>n&&c(),o+=h,l.push(t))}function c(){0!=o&&(s.push(1==l.length?l[0]:b.from(l,o)),o=0,l.length=0)}for(let h of t)a(h);return c(),1==s.length?s[0]:new b(s,e)}}function O(t){let e=-1;for(let n of t)e+=n.length+1;return e}function x(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let l=t[s],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function S(t,e,n){return x(t,[""],e,n)}g.empty=g.of([""]);class k{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?0:t instanceof w?t.text.length:t.children.length]}next(t=0){for(;;){let e=this.nodes.length-1;if(e<0)return this.done=!0,this.value="",this.lineBreak=!1,this;let n=this.nodes[e],r=this.offsets[e];if(n instanceof w){if(r!=(this.dir>0?0:n.text.length)&&!this.lineBreak){if(this.lineBreak=!0,0==t)return this.value="\n",this;t--;continue}let i=n.text[r-(this.dir<0?1:0)];if(this.offsets[e]=r+=this.dir,r==(this.dir>0?n.text.length:0)&&(this.nodes.pop(),this.offsets.pop()),this.lineBreak=!1,i.length>Math.max(0,t))return this.value=0==t?i:this.dir>0?i.slice(t):i.slice(0,i.length-t),this;t-=i.length}else if(r==(this.dir>0?n.children.length:0))this.nodes.pop(),this.offsets.pop();else{let i=n.children[this.dir>0?r:r-1],s=i.length;this.offsets[e]=r+this.dir,t>s?t-=s:(this.nodes.push(i),this.offsets.push(this.dir>0?0:i instanceof w?i.text.length:i.children.length))}}}}class C{constructor(t,e,n){this.value="",this.cursor=new k(t,e>n?-1:1),e>n?(this.skip=t.length-e,this.limit=e-n):(this.skip=e,this.limit=n-e)}next(){if(this.limit<=0)this.limit=-1;else{let{value:t,lineBreak:e,done:n}=this.cursor.next(this.skip);this.skip=0,this.value=t;let r=e?1:t.length;r>this.limit&&(this.value=this.cursor.dir>0?t.slice(0,this.limit):t.slice(r-this.limit)),n||0==this.value.length?this.limit=-1:this.limit-=this.value.length}return this}get lineBreak(){return this.cursor.lineBreak}get done(){return this.limit<0}}class _{constructor(t,e=0){this.value="",this.done=!1,this.cursor=t.iter(),this.skip=e}next(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){let{value:t,lineBreak:e,done:n}=this.cursor.next(this.skip);if(this.skip=0,n||e)return this;this.value+=t}}get lineBreak(){return!1}}class T{constructor(t,e,n,r){this.from=t,this.to=e,this.number=n,this.content=r}get length(){return this.to-this.from}slice(t=0,e=this.length){if("string"==typeof this.content)return e==t+1?this.content.charAt(t):this.content.slice(t,e);if(t==e)return"";let n=this.content.slice(t,e);return 0==t&&e==this.length&&(this.content=n),n}finish(t){return null==this.content&&(this.content=new P(t,this.from)),this}findClusterBreak(t,e){if(t<0||t>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");let n,r;return"string"==this.content?(n=this.from,r=this.content):(n=Math.max(0,t-256),r=this.slice(n,Math.min(this.length,n+512))),(e?o:l)(r,t-n)+n}}class P{constructor(t,e){this.doc=t,this.start=e,this.cursor=null,this.strings=null}slice(t,e){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(let n="",r=0,i=0;;i++){i==this.strings.length&&this.strings.push(this.cursor.next().value);let s=this.strings[i],o=r;if(r+=s.length,!(r<=t)&&(n+=s.slice(Math.max(0,t-o),Math.min(s.length,e-o)),r>=e))return n}}}},f7Ao:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("St0M");e.PromQLExtension=r.PromQLExtension,e.promQLSyntax=r.promQLSyntax},gNtM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LSPLint=class{constructor(t){this.lspClient=t}promQL(){return t=>{const e=t.state,n=e.sliceDoc(0,e.doc.length);return this.lspClient.diagnostic({expr:n,limit:100}).then(t=>{const n=[];for(const r of t){const t=e.doc.line(r.range.start.line+1),i=e.doc.line(r.range.end.line+1);n.push({message:r.message,severity:"error",from:t.from+r.range.start.character,to:i.from+r.range.end.character})}return n.sort((t,e)=>t.from-e.from)})}}}},ggtp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseTheme=void 0;const r=n("3Yt4");e.baseTheme=r.EditorView.baseTheme({"tooltip.autocomplete":{fontFamily:"monospace",overflowY:"auto",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}},"snippetField@light":{backgroundColor:"#ddd"},"snippetField@dark":{backgroundColor:"#333"},snippetFieldPosition:{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},completionIcon:{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},"completionIcon.function, completionIcon.method":{"&:after":{content:"'\u0192'"}},"completionIcon.class":{"&:after":{content:"'\u25cb'"}},"completionIcon.interface":{"&:after":{content:"'\u25cc'"}},"completionIcon.variable":{"&:after":{content:"'\u{1d465}'"}},"completionIcon.constant":{"&:after":{content:"'\u{1d436}'"}},"completionIcon.type":{"&:after":{content:"'\u{1d461}'"}},"completionIcon.enum":{"&:after":{content:"'\u222a'"}},"completionIcon.property":{"&:after":{content:"'\u25a1'"}},"completionIcon.keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},"completionIcon.namespace":{"&:after":{content:"'\u25a2'"}},"completionIcon.text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}})},jcaT:function(t,e,n){"use strict";n.r(e),n.d(e,"closeLintPanel",(function(){return w})),n.d(e,"lintKeymap",(function(){return O})),n.d(e,"linter",(function(){return x})),n.d(e,"nextDiagnostic",(function(){return b})),n.d(e,"openLintPanel",(function(){return y})),n.d(e,"setDiagnostics",(function(){return u}));var r=n("3Yt4"),i=n("dC2d"),s=n("BVGc"),o=n("zlqw");class l{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class a{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}}function c(t,e=null,n=0){let r=null;return t.between(n,t.length,(t,n,{spec:i})=>{if(!e||i.diagnostic==e)return r=new l(t,n,i.diagnostic),!1}),r}function h(t){return t.field(g,!1)?void 0:{append:[g,r.EditorView.decorations.compute([g],t=>{let{selected:e,panel:n}=t.field(g);return e&&n&&e.from!=e.to?r.Decoration.set([m.range(e.from,e.to)]):r.Decoration.none}),Object(o.b)(),Object(s.hoverTooltip)(v),P]}}function u(t,e){return{effects:d.of(e),reconfigure:h(t)}}const d=i.StateEffect.define(),f=i.StateEffect.define(),p=i.StateEffect.define(),g=i.StateField.define({create:()=>new a(r.Decoration.none,null,null),update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=c(n,t.selected.diagnostic,i)||c(n,null,i)}t=new a(n,t.panel,r)}for(let n of e.effects)if(n.is(d)){let e=r.Decoration.set(n.value.map(t=>t.from<t.to?r.Decoration.mark({attributes:{class:Object(r.themeClass)("lintRange."+t.severity)},diagnostic:t}).range(t.from,t.to):r.Decoration.widget({widget:new k(t),diagnostic:t}).range(t.from)));t=new a(e,t.panel,c(e))}else n.is(f)?t=new a(t.diagnostics,n.value?_.open:null,t.selected):n.is(p)&&(t=new a(t.diagnostics,t.panel,n.value));return t},provide:[o.c.nFrom(t=>t.panel?[t.panel]:[]),r.EditorView.decorations.from(t=>t.diagnostics)]}),m=r.Decoration.mark({class:Object(r.themeClass)("lintRange.active")});function v(t,e){let{diagnostics:n}=t.state.field(g),r=[],i=2e8,s=0;return n.between(0,t.state.doc.length,(t,n,{spec:o})=>{e(t,n)&&(r.push(o.diagnostic),i=Math.min(t,i),s=Math.max(n,s))}),r.length?{pos:i,end:s,style:"lint",create(){let e=document.createElement("ul");for(let n of r)e.appendChild(S(t,n));return{dom:e}}}:null}const y=t=>{let e=t.state.field(g,!1);e&&e.panel||t.dispatch({effects:f.of(!0),reconfigure:h(t.state)});let n=Object(o.a)(t,_.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},w=t=>{let e=t.state.field(g,!1);return!(!e||!e.panel||(t.dispatch({effects:f.of(!1)}),0))},b=t=>{let e=t.state.field(g,!1);if(!e)return!1;let n=t.state.selection.primary,r=e.diagnostics.iter(n.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)||(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))},O=[{key:"Mod-Shift-m",run:y},{key:"F8",run:b}];function x(t){return r.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.lintTime=Date.now()+500,this.set=!0,this.run=this.run.bind(this),setTimeout(this.run,500)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view;Promise.resolve(t(this.view)).then(t=>{var n,r;this.view.state.doc==e.doc&&(t.length||(null===(r=null===(n=this.view.state.field(g,!1))||void 0===n?void 0:n.diagnostics)||void 0===r?void 0:r.size))&&this.view.dispatch(u(this.view.state,t))},t=>{Object(r.logException)(this.view.state,t)})}}update(t){t.docChanged&&(this.lintTime=Date.now()+500,this.set||(this.set=!0,setTimeout(this.run,500)))}})}function S(t,e){let n=document.createElement("li");if(n.textContent=e.message,n.className=Object(r.themeClass)("diagnostic."+e.severity),e.actions)for(let i of e.actions){let s=n.appendChild(document.createElement("button"));s.className=Object(r.themeClass)("diagnosticAction"),s.textContent=i.name,s.onclick=s.onmousedown=n=>{n.preventDefault();let r=c(t.state.field(g).diagnostics,e);r&&i.apply(t,r.from,r.to)}}return n}class k extends r.WidgetType{toDOM(){let t=document.createElement("span");return t.className=Object(r.themeClass)("lintPoint."+this.value.severity),t}}class C{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=S(t,e),this.dom.setAttribute("role","option")}}class _{constructor(t){this.view=t,this.items=[],this.dom=document.createElement("div"),this.list=this.dom.appendChild(document.createElement("ul")),this.list.tabIndex=0,this.list.setAttribute("role","listbox"),this.list.setAttribute("aria-label",this.view.state.phrase("Diagnostics")),this.list.addEventListener("keydown",t=>{27==t.keyCode?(t.preventDefault(),w(this.view),this.view.focus()):38==t.keyCode?(t.preventDefault(),this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length)):40==t.keyCode?(t.preventDefault(),this.moveSelection((this.selectedIndex+1)%this.items.length)):36==t.keyCode?(t.preventDefault(),this.moveSelection(0)):35==t.keyCode?(t.preventDefault(),this.moveSelection(this.items.length-1)):13==t.keyCode&&(t.preventDefault(),this.view.focus())}),this.list.addEventListener("click",t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)});let e=this.dom.appendChild(document.createElement("button"));e.setAttribute("name","close"),e.setAttribute("aria-label",this.view.state.phrase("close")),e.textContent="\xd7",e.addEventListener("click",()=>w(this.view)),this.update()}get selectedIndex(){let t=this.view.state.field(g).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(g),n=0,r=!1,i=null;for(t.between(0,this.view.state.doc.length,(t,s,{spec:o})=>{let l,a=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==o.diagnostic){a=e;break}a<0?(l=new C(this.view,o.diagnostic),this.items.splice(n,0,l),r=!0):(l=this.items[a],a>n&&(this.items.splice(n,a-n),r=!0)),e&&l.diagnostic==e.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),i=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new C(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{t.top<e.top?this.list.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(this.list.scrollTop+=t.bottom-e.bottom)}})):this.items.length||this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e();this.list.firstChild||this.list.appendChild(S(this.view,{severity:"info",message:this.view.state.phrase("No diagnostics")}))}moveSelection(t){if(0==this.items.length)return;let e=c(this.view.state.field(g).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:p.of(e)})}get style(){return"lint"}static open(t){return new _(t)}}function T(t){return`url('data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">\n    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>\n  </svg>`)}')`}const P=r.EditorView.baseTheme({diagnostic:{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block"},"diagnostic.error":{borderLeft:"5px solid #d11"},"diagnostic.warning":{borderLeft:"5px solid orange"},"diagnostic.info":{borderLeft:"5px solid #999"},diagnosticAction:{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},lintRange:{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},"lintRange.error":{backgroundImage:T("#d11")},"lintRange.warning":{backgroundImage:T("orange")},"lintRange.info":{backgroundImage:T("#999")},"lintRange.active":{backgroundColor:"#fec"},lintPoint:{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},"lintPoint.warning":{"&:after":{borderBottomColor:"orange"}},"lintPoint.info":{"&:after":{borderBottomColor:"#999"}},"panel.lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd"},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}},"tooltip.lint":{padding:0,margin:0}})},jvbj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return i}));var r=n("dC2d");class i{eq(t){return this==t}range(t,e=t){return new s(t,e,this)}}i.prototype.startSide=i.prototype.endSide=0,i.prototype.point=!1,i.prototype.mapMode=r.MapMode.TrackDel;class s{constructor(t,e,n){this.from=t,this.to=e,this.value=n}}function o(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}const l=1e9;class a{constructor(t,e,n,r){this.from=t,this.to=e,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,n=e*l,r=0){if(t<=0)return r;let i=e<0?this.to:this.from;for(let s=r,o=i.length;;){if(s==o)return s;let r=s+o>>1,l=i[r]-t||(e<0?this.value[r].startSide:this.value[r].endSide)-n;if(r==s)return l>=0?s:o;l>=0?o=r:s=r+1}}between(t,e,n,r){for(let i=this.findIndex(e,-1),s=this.findIndex(n,1,void 0,i);i<s;i++)if(!1===r(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}map(t,e){let n=[],r=[],i=[],s=-1,o=-1;for(let l=0;l<this.value.length;l++){let a,c,h=this.value[l],u=this.from[l]+t,d=this.to[l]+t;if(u==d){let t=e.mapPos(u,h.startSide,h.mapMode);if(t<0)continue;a=c=t}else if(a=e.mapPos(u,h.startSide),c=e.mapPos(d,h.endSide),a>c||a==c&&h.startSide>0&&h.endSide<=0)continue;(c-a||h.endSide-h.startSide)<0||(s<0&&(s=a),h.point&&(o=Math.max(o,c-a)),n.push(h),r.push(a-s),i.push(c-s))}return{mapped:n.length?new a(r,i,n,o):null,pos:s}}}class c{constructor(t,e,n=c.empty,r){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=r}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this==c.empty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filter:r,filterFrom:i=0,filterTo:l=this.length}=t;if(0==e.length&&!r)return this;if(n&&e.slice().sort(o),this==c.empty)return e.length?c.of(e):this;let a=new u(this,null,-1).goto(0),d=0,f=[],p=new h;for(;a.value||d<e.length;)if(d<e.length&&(a.from-e[d].from||a.startSide-e[d].value.startSide)>=0){let t=e[d++];p.addInner(t.from,t.to,t.value)||f.push(t)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(d==e.length||this.chunkEnd(a.chunkIndex)<e[d].from)&&(!r||i>this.chunkEnd(a.chunkIndex)||l<this.chunkPos[a.chunkIndex])&&p.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!r||i>a.to||l<a.from||r(a.from,a.to,a.value))&&(p.addInner(a.from,a.to,a.value)||f.push(new s(a.from,a.to,a.value))),a.next());return p.finishInner(this.nextLayer!=c.empty||f.length?this.nextLayer.update({add:f,filter:r,filterFrom:i,filterTo:l}):c.empty)}map(t){if(0==t.length||this==c.empty)return this;let e=[],n=[],r=-1;for(let s=0;s<this.chunk.length;s++){let i=this.chunkPos[s],o=this.chunk[s],l=t.touchesRange(i,i+o.length);if(!1===l)r=Math.max(r,o.maxPoint),e.push(o),n.push(t.mapPos(i));else if(!0===l){let{mapped:s,pos:l}=o.map(i,t);s&&(r=Math.max(r,s.maxPoint),e.push(s),n.push(l))}}let i=this.nextLayer.map(t);return 0==e.length?i:new c(n,e,i,r)}between(t,e,n){if(this!=c.empty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],s=this.chunk[r];if(e>=i&&t<=i+s.length&&!1===s.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return d.from([this]).goto(t)}static iter(t,e=0){return d.from(t).goto(e)}static compare(t,e,n,r){var i;let s=null!==(i=r.minPointSize)&&void 0!==i?i:-1,o=t.filter(t=>t.maxPoint>=500||t!=c.empty&&e.indexOf(t)<0&&t.maxPoint>=s),l=e.filter(e=>e.maxPoint>=500||e!=c.empty&&t.indexOf(e)<0&&e.maxPoint>=s),a=function(t,e){let n=new Map;for(let i of t)for(let t=0;t<i.chunk.length;t++)i.chunk[t].maxPoint<500&&n.set(i.chunk[t],i.chunkPos[t]);let r=new Set;for(let i of e)for(let t=0;t<i.chunk.length;t++)n.get(i.chunk[t])==i.chunkPos[t]&&r.add(i.chunk[t]);return r}(o,l),h=new p(o,a,s),u=new p(l,a,s);n.iterGaps((t,e,n)=>g(h,t,u,e,n,r)),n.empty&&0==n.length&&g(h,0,u,0,0,r)}static spans(t,e,n,r){var i;let s=new p(t,null,null!==(i=r.minPointSize)&&void 0!==i?i:-1).goto(e),o=e;for(;;){let t=Math.min(s.to,n);if(s.point?r.point(o,t,s.point,s.pointFrom<e,s.to>n):t>o&&r.span(o,t,s.active),s.to>n)break;o=s.to,s.next()}}static of(t,e=!1){let n=new h;for(let r of t instanceof s?[t]:e?t.slice().sort(o):t)n.add(r.from,r.to,r.value);return n.finish()}}c.empty=new c([],[],null,-1),c.empty.nextLayer=c.empty;class h{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-l,this.lastTo=-l,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new a(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new h)).add(t,e,n)}addInner(t,e,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),0))}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(c.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=new c(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}class u{constructor(t,e,n){this.layer=t,this.skip=e,this.minPoint=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-l){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}let r=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],-1,e);(!n||this.rangeIndex<r)&&(this.rangeIndex=r),this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=l,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex];if(this.from=t+e.from[this.rangeIndex],this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],++this.rangeIndex==e.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide}}class d{constructor(t){this.heap=t}static from(t,e=null,n=-1){let r=[];for(let i of t)for(let t=i;t!=c.empty;t=t.nextLayer)t.maxPoint>=n&&r.push(new u(t,e,n));return 1==r.length?r[0]:new d(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-l){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)f(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)f(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=l,this.value=null;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,t.value&&t.next(),f(this.heap,0)}}}function f(t,e){for(let n=t[e];;){let r=1+(e<<1);if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class p{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.to=-l,this.endSide=0,this.cursor=d.from(t,e,n)}goto(t,e=-l){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){v(this.active,t),v(this.activeTo,t),this.minActive=y(this.active,this.activeTo)}next(){let t=this.to;for(this.point=null;;){let e=this.minActive;if(e>-1&&(this.activeTo[e]-this.cursor.from||this.active[e].endSide-this.cursor.startSide)<0){if(this.activeTo[e]>t){this.to=this.activeTo[e],this.endSide=this.active[e].endSide;break}this.removeActive(e)}else{if(!this.cursor.value){this.to=this.endSide=l;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){this.point=e,this.pointFrom=this.cursor.from,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.to>t&&this.forward(this.to,this.endSide);break}this.active.push(e),this.activeTo.push(this.cursor.to),this.minActive=y(this.active,this.activeTo),this.cursor.next()}}}}}function g(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,l=r,a=r-e;for(;;){let e=t.to+a-n.to||t.endSide-n.endSide,r=e<0?t.to+a:n.to,i=Math.min(r,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))||s.comparePoint(l,i,t.point,n.point):i>l&&!m(t.active,n.active)&&s.compareRange(l,i,t.active,n.active),r>o)break;l=r,e<=0&&t.next(),e>=0&&n.next()}}function m(t,e){if(t.length!=e.length)return!1;t:for(let n=0;n<t.length;n++){for(let r=0;r<e.length;r++)if(t[n]==e[n]||t[n].eq(e[r]))continue t;return!1}return!0}function v(t,e){let n=t.pop();e!=t.length&&(t[e]=n)}function y(t,e){let n=-1,r=l;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}},jxh3:function(t,e,n){"use strict";function r(t,e){let n=0;for(let r=0;r<t.length;r++){const i=t[r];let s=null;0===r&&0!==i.from&&(s={from:0,to:i.from-1}),r>0&&(s={from:t[r-1].to+1,to:i.from-1}),null!==s&&(n-=(s.to-s.from+1)/e),n+=Math.pow(i.to-i.from+1,2)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Fuzzy=e.score=void 0,e.score=r,e.Fuzzy=class{constructor(t){this.caseSensitive=void 0!==(null==t?void 0:t.caseSensitive)&&t.caseSensitive,this.includeMatches=void 0!==(null==t?void 0:t.includeMatches)&&t.includeMatches,this.shouldSort=void 0!==(null==t?void 0:t.shouldSort)&&t.shouldSort,this.escapeHTML=void 0!==(null==t?void 0:t.escapeHTML)&&t.escapeHTML,this.pre=void 0===(null==t?void 0:t.pre)?"":t.pre,this.post=void 0===(null==t?void 0:t.post)?"":t.post}filter(t,e,n){const r=void 0!==(null==n?void 0:n.shouldSort)?n.shouldSort:this.shouldSort;let i=[];for(let s=0;s<e.length;s++){const r=this.match(t,e[s],n);null!==r&&(r.index=s,i.push(r))}return r&&(i=i.sort((t,e)=>e.score-t.score)),i}match(t,e,n){let i=t,s=e;const o=void 0!==(null==n?void 0:n.includeMatches)?n.includeMatches:this.includeMatches;if((void 0!==(null==n?void 0:n.caseSensitive)?n.caseSensitive:this.caseSensitive)||(i=i.toLowerCase(),s=s.toLowerCase()),i===s){const r=[{from:0,to:t.length-1}],i={original:e,rendered:this.render(e,r,n),score:1/0};return o&&(i.intervals=r),i}let l=0;const a=[];for(let r=0;r<s.length&&l<i.length;){if(s[r]===i[l]){const t={from:r,to:r};l++,r++;for(let e=r;e<s.length&&l<i.length&&s[e]===i[l];e++)t.to=e,l++,r=e;a.push(t)}r++}if(0===a.length||l!==i.length)return null;const c={original:e,rendered:this.render(e,a,n),score:r(a,e.length)};return o&&(c.intervals=a),c}render(t,e,n){let r="";const i=(null==n?void 0:n.pre)?n.pre:this.pre,s=(null==n?void 0:n.post)?n.post:this.post;for(let l=0;l<e.length;l++){const o=e[l];let a=null;0===l&&0!==o.from&&(a={from:0,to:o.from-1}),l>0&&(a={from:e[l-1].to+1,to:o.from-1});let c="";null!==a&&(c=this.extractSubString(t,a,n)),r=r+c+i+this.extractSubString(t,o,n)+s}const o=e[e.length-1];return o.to<t.length-1&&(r+=this.extractSubString(t,{from:o.to+1,to:t.length},n)),r}extractSubString(t,e,n){const r=void 0!==(null==n?void 0:n.escapeHTML)?n.escapeHTML:this.escapeHTML;let i=t.substr(e.from,e.to-e.from+1);return r&&(i=function(t){return t.replace(/[&<>"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return"&#039;"}})}(i)),i}}},"lf1/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.completeFromList=e.autocompleteKeymap=e.closeCompletion=e.startCompletion=e.autocomplete=e.AutocompleteContext=void 0;const r=n("3Yt4"),i=n("dC2d"),s=n("BVGc"),o=n("ggtp"),l=n("jxh3");class a{constructor(t,e,n,r,i,s){this.state=t,this.pos=e,this.explicit=n,this.caseSensitive=r,this.fuz=new l.Fuzzy({escapeHTML:!0,pre:i,post:s})}filter(t,e,n=this.caseSensitive){if(0===e.length)return t;const r=this.fuz.match(e,t.original,{caseSensitive:n});return null===r?null:Object.assign(Object.assign({},t),{label:r.rendered,score:r.score})}tokenBefore(){let t=this.pos,e=null,n="",r=this.state.tree.resolve(this.pos,-1);return!r.firstChild&&r.start<this.pos&&(t=r.start,e=r.type,n=this.state.sliceDoc(t,this.pos)),{from:t,to:this.pos,text:n,type:e}}}function c(t,e,n){if(!t.filterDownOn)return!1;let r=n?n.mapPos(t.to):t.to,i=e.selection.primary.head;return!(i<r||i>r+20)&&(i==r||t.filterDownOn.test(e.sliceDoc(r,i)))}function h(t,e){let n=e.state.sliceDoc(t.from,e.pos);return{from:t.from,to:e.pos,options:t.options.reduce((t,r)=>{const i=e.filter(r,n);return null===i?t:[...t,i]},[]),filterDownOn:t.filterDownOn}}e.AutocompleteContext=a;class u{constructor(t,e,n){this.sources=t,this.results=e,this.options=n}static create(t,e){let n=[];for(let r,i=0;i<e.length;i++)if(r=e[i])for(let t of r.options)n.push({completion:t,source:i});return new u(t,e,n.sort(({completion:{label:t,score:e}},{completion:{label:n,score:r}})=>e<r?1:e>r||t<n?-1:t===n?0:1))}get from(){return this.results.reduce((t,e)=>e?Math.min(t,e.from):t,1e9)}get to(){return this.results.reduce((t,e)=>e?Math.max(t,e.to):t,0)}map(t){return new u(this.sources,this.results.map(e=>e&&Object.assign(Object.assign({},e),{from:t.mapPos(e.from),to:t.mapPos(e.to)})),this.options)}refilterAll(t){let e=t.facet(d),n=new a(t,t.selection.primary.head,!1,e.caseSensitive,e.matchPre,e.matchPost);return u.create(this.sources,this.results.map(t=>t&&h(t,n)))}}const d=i.Facet.define({combine:t=>i.combineConfig(t,{activateOnTyping:!0,override:null,caseSensitive:!1,matchPre:"<b>",matchPost:"</b>"})});function f(t,e){return n=>{let r=n.state.field(b);if(!(r instanceof S)||Date.now()-r.timeStamp<p)return!1;let i,s=1;"page"==e&&(i=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(s=Math.max(2,Math.floor(i.offsetHeight/i.firstChild.offsetHeight)));let o=r.selected+s*("up"==t?-1:1),{length:l}=r.result.options;return o<0?o="page"==e?0:l-1:o>=l&&(o="page"==e?l-1:0),n.dispatch({effects:w.of(o)}),!0}}e.autocomplete=function(t={}){return[b,d.of(t),_,o.baseTheme,s.tooltips(),i.precedence(r.keymap([{key:"ArrowDown",run:f("down")},{key:"ArrowUp",run:f("up")},{key:"PageDown",run:f("down","page")},{key:"PageUp",run:f("up","page")},{key:"Enter",run:g}]),"override")]};const p=75;function g(t){let e=t.state.field(b);return e instanceof S&&!(Date.now()-e.timeStamp<p)&&(m(t,e.result,e.selected),!0)}function m(t,e,n){let r=e.options[n],i=r.completion.apply||r.completion.label,s=e.results[r.source];"string"==typeof i?t.dispatch({changes:{from:s.from,to:s.to,insert:i},selection:{anchor:s.from+i.length}}):i(t,s,r.completion)}e.startCompletion=t=>{let e=t.state.field(b,!1);return!(void 0===e||e instanceof S||e instanceof k&&e.explicit||(t.dispatch({effects:y.of(!0)}),0))},e.closeCompletion=t=>null!=t.state.field(b,!1)&&(t.dispatch({effects:y.of(!1)}),!0),e.autocompleteKeymap=[{key:"Mod-Space",run:e.startCompletion},{key:"Escape",run:e.closeCompletion}];const v=i.StateEffect.define(),y=i.StateEffect.define(),w=i.StateEffect.define(),b=i.StateField.define({create:()=>null,update(t,e){let n=e.annotation(i.Transaction.userEvent);if("input"==n&&t instanceof S&&t.result.results.every(t=>!t||c(t,e.state,e.changes))){const n=t.result.map(e.changes).refilterAll(e.state);t=n.options.length?new S(n,0,t.timeStamp):null}else"input"==n&&(t||e.state.facet(d).activateOnTyping)||"delete"==n&&t?t=new k(t instanceof S?t:t instanceof k?t.prev:null,t instanceof k&&t.explicit):t&&(e.selection||e.docChanged&&function(t,e){return e instanceof S?t.changes.touchesRange(e.result.from,e.result.to):t.changes.touchesRange(t.state.selection.primary.head)}(e,t))?t=null:e.docChanged&&t instanceof S&&(t=new S(t.result.map(e.changes),t.selected,t.timeStamp));for(let r of e.effects)r.is(v)?t=new S(r.value,0):r.is(y)?t=r.value?new k(null,!0):null:r.is(w)&&t instanceof S&&(t=new S(t.result,r.value,t.timeStamp,t.id,t.tooltip));return t},provide:[s.showTooltip.nFrom(t=>t instanceof S?t.tooltip:x),r.EditorView.contentAttributes.from(t=>t instanceof S?t.attrs:O)]}),O={"aria-autocomplete":"list"},x=[];class S{constructor(t,e,n=Date.now(),r="cm-ac-"+Math.floor(1679616*Math.random()).toString(36),i=[{pos:t.from,style:"autocomplete",create:C(t,r)}]){this.result=t,this.selected=e,this.timeStamp=n,this.id=r,this.tooltip=i,this.attrs={"aria-autocomplete":"list","aria-activedescendant":this.id+"-"+this.selected,"aria-owns":this.id}}}class k{constructor(t,e){this.prev=t,this.explicit=e}}function C(t,e){return n=>{let i=function(t,e){const n=document.createElement("ul");n.id=e,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true");for(let i=0;i<t.options.length;i++){let{completion:s}=t.options[i];const o=n.appendChild(document.createElement("li"));o.id=e+"-"+i;const l=r.themeClass("completionIcon"+(s.type?"."+s.type:""));o.innerHTML='<div class="'+l+'"></div>'+s.label,o.setAttribute("role","option")}return n}(t,e);function s(t){let e=t.state.field(b);e instanceof S&&function(t,e){let n=null;for(let r=t.firstChild,i=0;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");n&&function(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}(t,n)}(i,e.selected)}return i.addEventListener("click",e=>{let r=0,i=e.target;for(;i=i.previousSibling,i;)r++;r<t.options.length&&m(n,t,r)}),{dom:i,mount:s,update(t){t.state.field(b)!=t.prevState.field(b)&&s(t.view)}}}}const _=r.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.stateVersion=0,this.debounce=-1}update(t){if(!t.docChanged&&!t.selectionSet&&t.prevState.field(b)==t.state.field(b))return;(t.docChanged||t.selectionSet)&&this.stateVersion++,this.debounce>-1&&clearTimeout(this.debounce);const e=t.state.field(b);this.debounce=e instanceof k?setTimeout(()=>this.startUpdate(e),100):-1}startUpdate(t){this.debounce=-1;let{view:e,stateVersion:n}=this;(function(t,e){let n=t.facet(d),r=t.selection.primary.head,i=n.override?[n.override]:t.languageDataAt("autocomplete",r),s=new a(t,r,e.explicit,n.caseSensitive,n.matchPre,n.matchPost);return Promise.all(i.map(n=>{let r=e.prev?e.prev.result.sources.indexOf(n):-1,i=r<0?null:e.prev.result.results[r];return i&&c(i,t)&&h(i,s)||n(s)})).then(t=>u.create(i,t))})(e.state,t).then(t=>{this.stateVersion==n&&e.dispatch({effects:0==t.options.length?y.of(!1):v.of(t)})}).catch(t=>{e.dispatch({effects:y.of(!1)}),r.logException(e.state,t)})}});e.completeFromList=function(t){let e=t.map(t=>"string"==typeof t?{label:t}:t),n=e.every(t=>/^\w+$/.test(t.label))?/^\w+$/:void 0;return t=>{let r=t.tokenBefore();return{from:r.from,to:r.to,options:e.reduce((e,n)=>{const i=t.filter(n,r.text);return null===i?e:[...e,i]},[]),filterDownOn:n}}};var T=n("K+00");Object.defineProperty(e,"snippet",{enumerable:!0,get:function(){return T.snippet}}),Object.defineProperty(e,"completeSnippets",{enumerable:!0,get:function(){return T.completeSnippets}})},mmpu:function(t,e,n){"use strict";n.r(e),n.d(e,"TagSystem",(function(){return a})),n.d(e,"defaultHighlighter",(function(){return y})),n.d(e,"defaultTags",(function(){return c})),n.d(e,"highlighter",(function(){return f})),n.d(e,"styleTags",(function(){return d}));var r=n("WQMp"),i=n("rknV"),s=n("3Yt4"),o=n("dC2d"),l=n("jvbj");class a{constructor(t){this.typeNames=[""],this.typeIDs=Object.create(null),this.prop=new r.c,this.flags=t.flags,this.types=t.types,this.flagMask=Math.pow(2,this.flags.length)-1,this.typeShift=this.flags.length;let e=t.subtypes||0,n=[void 0];this.typeIDs[""]=0;let i=1;for(let r of t.types){let t=/^([\w\-]+)(?:=([\w-]+))?$/.exec(r);if(!t)throw new RangeError("Invalid type name "+r);let s=i++;this.typeNames[s]=t[1],this.typeIDs[t[1]]=s,n[s]=t[2];for(let r=0;r<e;r++){let e=i++,s=t[1]+"#"+(r+1);this.typeNames[e]=s,this.typeIDs[s]=e,n[e]=t[1]}}if(this.parents=n.map(t=>{if(null==t)return 0;let e=this.typeIDs[t];if(null==e)throw new RangeError(`Unknown parent type '${t}' specified`);return e}),this.flags.length>30||this.typeNames.length>Math.pow(2,30-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer")}get(t){let e=0;for(let n of t.split(" "))if(n){let r=this.flags.indexOf(n);if(r>-1)e+=1<<r;else{let r=this.typeIDs[n];if(null==r)throw new RangeError(`Unknown tag type '${n}'`);if(e>>this.typeShift)throw new RangeError(`Multiple tag types specified in '${t}'`);e+=r<<this.typeShift}}return e}getWithMode(t){let e="+"==t[0]?1:"!"==t[0]?0:2;return{mode:e,tag:this.get(2==e?t:t.slice(1))}}addTagProp(t,e={}){let{mode:n,tag:r}=this.getWithMode(t);return this.prop.set(e,new u(r,n,h))}add(t){let e=Object.create(null);for(let n in t){let r=t[n],{mode:i,tag:s}=this.getWithMode(r);for(let t of n.split(" ")){let n=t.split("/"),r=n[n.length-1],o=n.length>1?n.slice(0,n.length-1).map(t=>"*"==t?null:t):h,l=new u(s,i,o);e[r]=l.sort(e[r])}}return this.prop.add(e)}highlighter(t){let e=new g(this,t);return[s.ViewPlugin.define(t=>new m(t,this.prop,e)).decorations(),s.EditorView.styleModule.of(e.module)]}specificity(t){let e=t&this.flagMask,n=0;for(let r=1;r<=this.flags.length;r++)e&1<<r&&n++;for(let r=t>>this.typeShift;r;r=this.parents[r])n+=1e3;return n}}const c=new a({flags:["invalid","meta","standard","definition","constant","local","control","link","strong","emphasis","monospace","changed","inserted","deleted"],subtypes:7,types:["comment","lineComment=comment","blockComment=comment","docComment=comment","name","variableName=name","typeName=name","propertyName=name","className=name","labelName=name","functionName=name","namespace=name","literal","string=literal","docString=string","character=string","number=literal","integer=number","float=number","regexp=literal","escape=literal","color=literal","content","heading=content","list=content","quote=content","keyword","self=keyword","null=keyword","atom=keyword","unit=keyword","modifier=keyword","operatorKeyword=keyword","operator","derefOperator=operator","arithmeticOperator=operator","logicOperator=operator","bitwiseOperator=operator","compareOperator=operator","updateOperator=operator","typeOperator=operator","punctuation","separator=punctuation","bracket=punctuation","angleBracket=bracket","squareBracket=bracket","paren=bracket","brace=bracket"]}),h=[];class u{constructor(t,e,n,r){this.tag=t,this.mode=e,this.context=n,this.next=r}sort(t){return!t||t.context.length<this.context.length?(this.next=t,this):(t.next=this.sort(t.next),t)}}const d=t=>c.add(t),f=t=>c.highlighter(t);class p{constructor(t,e,n,r){this.type=t,this.flags=e,this.specificity=n,this.cls=r}}class g{constructor(t,e){this.tags=t,this.cache=Object.create(null);let n=Object.create(null),r=0,s=[];for(let i in e){let o="c"+r++;n[o]=e[i];for(let e of i.split(/\s*,\s*/)){let n=t.get(e);s.push(new p(n>>t.typeShift,n&t.flagMask,t.specificity(n),o))}}this.rules=s.sort((t,e)=>e.specificity-t.specificity),this.module=new i.a(n)}match(t){let e=this.cache[t];if(null!=e)return e;let n="",r=t>>this.tags.typeShift,i=t&this.tags.flagMask;for(;;){for(let t of this.rules)if(t.type==r&&(t.flags&i)==t.flags&&(n&&(n+=" "),n+=this.module[t.cls],i&=~t.flags,r))break;if(!r)break;r=this.tags.parents[r]}return this.cache[t]=n}}class m{constructor(t,e,n){this.prop=e,this.styling=n,this.nodeStack=[""],this.classStack=[""],this.inheritStack=[""],this.tree=t.state.tree,this.decorations=this.buildDeco(t.visibleRanges,this.tree)}update(t){let e=t.state.facet(o.EditorState.syntax);e.length?e[0].parsePos(t.state)<t.view.viewport.to?this.decorations=this.decorations.map(t.changes):(this.tree!=e[0].getTree(t.state)||t.viewportChanged)&&(this.tree=e[0].getTree(t.state),this.decorations=this.buildDeco(t.view.visibleRanges,this.tree)):this.decorations=s.Decoration.none}buildDeco(t,e){let n,r,i,o=new l.c;function a(t,e){t>n&&e&&o.add(n,t,s.Decoration.mark({class:e})),n=t}let{nodeStack:c,classStack:h,inheritStack:u}=this;for(let{from:s,to:l}of t)r="",i=0,n=s,e.iterate({from:s,to:l,enter:(t,e)=>{i++;let n=u[i-1],s=n,o=t.prop(this.prop),l=!1;for(;o;){if(!o.context.length||v(o.context,c,i)){let t=this.styling.match(o.tag);t&&(s&&(s+=" "),s+=t,1==o.mode?n=s:0==o.mode&&(l=!0));break}o=o.next}if(s!=r&&(a(e,r),r=s),l)return i--,!1;h[i]=s,u[i]=n,c[i]=t.name},leave:(t,e,n)=>{i--;let s=h[i];s!=r&&(a(Math.min(l,n),r),r=s)}});return o.finish()}}function v(t,e,n){if(t.length>n-1)return!1;for(let r=n-1,i=t.length-1;i>=0;i--,r--){let n=t[i];if(n&&n!=e[r])return!1}return!0}const y=f({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},invalid:{color:"#f00"},keyword:{color:"#708"},atom:{color:"#219"},number:{color:"#164"},string:{color:"#a11"},"regexp, escape":{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},className:{color:"#167"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},meta:{color:"#555"}})},rknV:function(t,e,n){"use strict";function r(t,e){return"undefined"==typeof Symbol?"__"+t+(e?Math.floor(1e8*Math.random()):""):e?Symbol(t):Symbol.for(t)}n.d(e,"a",(function(){return a}));const i=r("\u037c"),s=r("styleSet",1),o=r("rules",1),l="undefined"==typeof global?window:global;function a(t,e){this[o]=[];for(let n in t){let r=t[n].specificity||0,i=a.newName(),s=n;if(!1!==(e&&e.generateClasses)){let t=i;s="."+i;for(let e=0;e<r;e++){let n="\u037c_"+(e?e.toString(36):"");s+="."+n,t+=" "+n}this[n]=t}u(s,t[n],this[o])}}a.newName=()=>{let t=l[i]||1;return l[i]=t+1,"\u037c"+t.toString(36)},a.prototype=Object.create(null),a.mount=function(t,e){(t[s]||new h(t)).mount(Array.isArray(e)?e:[e])};let c=null;class h{constructor(t){if(t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(c)return t.adoptedStyleSheets=[c.sheet].concat(t.adoptedStyleSheets),t[s]=c;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),c=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[]}mount(t){let e=this.sheet,n=0,r=0;for(let i=0;i<t.length;i++){let s=t[i],l=this.modules.indexOf(s);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),-1==l){if(this.modules.splice(r++,0,s),e)for(let t=0;t<s[o].length;t++)e.insertRule(s[o][t],n++)}else{for(;r<l;)n+=this.modules[r++][o].length;n+=s[o].length,r++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e][o].join("\n")+"\n";this.styleTag.textContent=t}}}function u(t,e,n){if("object"!=typeof e)throw new RangeError("Expected style object, got "+JSON.stringify(e));let r=[];for(let i in e)if(/^@/.test(i)){let r=[];u(t,e[i],r),n.push(i+" {"+r.join(" ")+"}")}else if(/&/.test(i))u(t.split(/\s*,\s*/).map(t=>i.replace(/&/g,t)).join(", "),e[i],n);else if("specificity"!=i){if("object"==typeof e[i])throw new RangeError("The value of a property ("+i+") should be a primitive value.");r.push(i.replace(/_.*/,"").replace(/[A-Z]/g,t=>"-"+t.toLowerCase())+": "+e[i])}r.length&&n.push(t+" {"+r.join("; ")+"}")}},vOYf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n("WKRy"),i=n("71hz"),s=n("bNGr"),o=n("02xK");e.newCompleteStrategy=function(t){if(null==t?void 0:t.lsp){const e=t.lsp;if(e.lspClient)return new r.LSPComplete(e.lspClient);if(e.url)return new r.LSPComplete(new s.HTTPLSPClient(e.url,e.httpErrorHandler,e.fetchFn));throw new Error("the url or the lspClient must be set")}if(null==t?void 0:t.hybrid){const e=t.hybrid;if(e.prometheusClient)return new i.HybridComplete(e.prometheusClient);if(e.url)return new i.HybridComplete(new o.HTTPPrometheusClient(e.url,e.httpErrorHandler,e.lookbackInterval,e.fetchFn));throw new Error("the url or the prometheusClient must be set")}return new i.HybridComplete}},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const l={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},a=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let u=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(o){e=o instanceof h?d(o.errors):[o]}if(a(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof h?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new h(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends u{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==l&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(){}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(l)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)}:v)(this);var e}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class O extends u{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class x extends p{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new x(this)}lift(t){const e=new k(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),u.EMPTY):this.isStopped?(t.complete(),u.EMPTY):(this.observers.push(t),new O(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new k(t,e),t})();class k extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):u.EMPTY}}class C extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const _=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const P=T();const A=t=>{if(t&&"function"==typeof t[m])return s=t,t=>{const e=s[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((e=t)&&"number"==typeof e.length&&"function"!=typeof e)return _(t);var e,n,r,i,s;if((n=t)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return i=t,t=>(i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[P])return r=t,t=>{const e=r[P]();for(;;){const n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};class E extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class M{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new D(t,this.project,this.thisArg))}}class D extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class I{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Q(t,this.project,this.concurrent))}}class Q extends E{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new C(this,e,n),i=this.destination;i.add(r);const s=function(t,e,n,r,i=new C(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):A(e)(i)}(this,t,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function R(t){return t}function L(){return function(t){return t.lift(new N(t))}}class N{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new $(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class $ extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class V extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new u,t.add(this.source.subscribe(new F(this.getSubject(),this))),t.closed&&(this._connection=null,t=u.EMPTY)),t}refCount(){return L()(this)}}const j=(()=>{const t=V.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class F extends x{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function H(){return new S}function B(t){return{toString:t}.toString()}function z(t,e,n){return B(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const q=z("Inject",t=>({token:t})),U=z("Optional"),W=z("Self"),X=z("SkipSelf");var G=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function Z(t){for(let e in t)if(t[e]===Z)return e;throw Error("Could not find renamed property on target object.")}function Y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function K(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function J(t){return tt(t,t[nt])||tt(t,t[st])}function tt(t,e){return e&&e.token===t?e:null}function et(t){return t&&(t.hasOwnProperty(rt)||t.hasOwnProperty(ot))?t[rt]:null}const nt=Z({"\u0275prov":Z}),rt=Z({"\u0275inj":Z}),it=Z({"\u0275provFallback":Z}),st=Z({ngInjectableDef:Z}),ot=Z({ngInjectorDef:Z});function lt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(lt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function at(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ct=Z({__forward_ref__:Z});function ht(t){return t.__forward_ref__=ht,t.toString=function(){return lt(this())},t}function ut(t){return"function"==typeof(e=t)&&e.hasOwnProperty(ct)&&e.__forward_ref__===ht?t():t;var e}const dt="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,pt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gt="undefined"!=typeof global&&global,mt=dt||gt||ft||pt,vt=Z({"\u0275cmp":Z}),yt=Z({"\u0275dir":Z}),wt=Z({"\u0275pipe":Z}),bt=Z({"\u0275mod":Z}),Ot=Z({"\u0275loc":Z}),xt=Z({"\u0275fac":Z}),St=Z({__NG_ELEMENT_ID__:Z});class kt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ct=new kt("INJECTOR",-1),_t={},Tt=/\n/gm,Pt=Z({provide:String,useValue:Z});let At,Et=void 0;function Mt(t){const e=Et;return Et=t,e}function Dt(t){const e=At;return At=t,e}function It(t,e=G.Default){if(void 0===Et)throw new Error("inject() must be called from an injection context");return null===Et?Rt(t,void 0,e):Et.get(t,e&G.Optional?null:void 0,e)}function Qt(t,e=G.Default){return(At||It)(ut(t),e)}function Rt(t,e,n){const r=J(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&G.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${lt(t)}]`)}function Lt(t){const e=[];for(let n=0;n<t.length;n++){const r=ut(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=G.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof U||"Optional"===i.ngMetadataName||i===U?n|=G.Optional:i instanceof X||"SkipSelf"===i.ngMetadataName||i===X?n|=G.SkipSelf:i instanceof W||"Self"===i.ngMetadataName||i===W?n|=G.Self:t=i instanceof q||i===q?i.token:i}e.push(Qt(t,n))}else e.push(Qt(r))}return e}class Nt{get(t,e=_t){if(e===_t){const e=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw e.name="NullInjectorError",e}return e}}class $t{}function Vt(t,e){t.forEach(t=>Array.isArray(t)?Vt(t,e):e(t))}const jt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),Ft=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Ht={},Bt=[];let zt=0;function qt(t){return Zt(t)||function(t){return t[yt]||null}(t)}function Ut(t){return function(t){return t[wt]||null}(t)}const Wt={};function Xt(t){const e={type:t.type,bootstrap:t.bootstrap||Bt,declarations:t.declarations||Bt,imports:t.imports||Bt,exports:t.exports||Bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&B(()=>{Wt[t.id]=t.type}),e}function Gt(t,e){if(null==t)return Ht;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Zt(t){return t[vt]||null}function Yt(t,e){return t.hasOwnProperty(xt)?t[xt]:null}function Kt(t,e){const n=t[bt]||null;if(!n&&!0===e)throw new Error(`Type ${lt(t)} does not have '\u0275mod' property.`);return n}function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return null!==t.template}let re=void 0;function ie(t){return!!t.listen}const se={createRenderer:(t,e)=>void 0!==re?re:"undefined"!=typeof document?document:void 0};function oe(t){for(;Array.isArray(t);)t=t[0];return t}function le(t,e){return oe(e[t.index])}function ae(t,e){const n=e[t];return Jt(n)?n:n[0]}function ce(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function he(t){return 128==(128&t[2])}function ue(t,e){return null===t||null==e?null:t[e]}function de(t){t[18]=0}const fe={lFrame:Te(null),bindingsEnabled:!0,checkNoChangesMode:!1};function pe(){return fe.bindingsEnabled}function ge(){return fe.lFrame.lView}function me(){return fe.lFrame.tView}function ve(){return fe.lFrame.previousOrParentTNode}function ye(t,e){fe.lFrame.previousOrParentTNode=t,fe.lFrame.isParent=e}function we(){return fe.lFrame.isParent}function be(){return fe.checkNoChangesMode}function Oe(t){fe.checkNoChangesMode=t}function xe(t,e){const n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,n.currentDirectiveIndex=e}function Se(t){fe.lFrame.currentQueryIndex=t}function ke(t,e){const n=_e();fe.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function Ce(t,e){const n=_e(),r=t[1];fe.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function _e(){const t=fe.lFrame,e=null===t?null:t.child;return null===e?Te(t):e}function Te(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Pe(){const t=fe.lFrame;return fe.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Ae=Pe;function Ee(){const t=Pe();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Me(t){fe.lFrame.selectedIndex=t}function De(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function Ie(t,e,n){Le(t,e,3,n)}function Qe(t,e,n,r){(3&t[2])===n&&Le(t,e,n,r)}function Re(t,e){let n=t[2];(3&n)===e&&(n&=1023,n+=1,t[2]=n)}function Le(t,e,n,r){const i=null!=r?r:-1;let s=0;for(let o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(s=e[o],null!=r&&s>=r)break}else e[o]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ne(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Ne(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];i?t[2]>>10<t[18]>>16&&(3&t[2])===e&&(t[2]+=1024,s.call(o)):s.call(o)}class $e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ve(t,e,n){const r=ie(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],l=n[i++],a=n[i++];r?t.setAttribute(e,l,a,o):e.setAttributeNS(o,l,a)}else{const o=s,l=n[++i];64===o.charCodeAt(0)?r&&t.setProperty(e,o,l):r?t.setAttribute(e,o,l):e.setAttribute(o,l),i++}}return i}function je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Fe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Fe(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function He(t){return 32767&t}function Be(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}function ze(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":""+t}(t)}const qe=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt))();function Ue(t){return t instanceof Function?t():t}let We=!0;function Xe(t){const e=We;return We=t,e}let Ge=0;function Ze(t,e){const n=Ke(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ye(r.data,t),Ye(e,null),Ye(r.blueprint,null));const i=Je(t,e),s=t.injectorIndex;if(-1!==i){const t=He(i),n=Be(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Ye(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ke(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Je(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function tn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[St]:n.charCodeAt(0)||0;null==r&&(r=n[St]=Ge++);const i=255&r,s=1<<i,o=64&i,l=32&i,a=e.data;128&i?o?l?a[t+7]|=s:a[t+6]|=s:l?a[t+5]|=s:a[t+4]|=s:o?l?a[t+3]|=s:a[t+2]|=s:l?a[t+1]|=s:a[t]|=s}(t,e,n)}const en={};function nn(t,e,n,r,i,s){const o=e[1],l=o.data[t+8],a=function(t,e,n,r,i){const s=t.providerIndexes,o=e.data,l=65535&s,a=t.directiveStart,c=s>>16,h=i?l+c:t.directiveEnd;for(let u=r?l:l+c;u<h;u++){const t=o[u];if(u<a&&n===t||u>=a&&t.type===n)return u}if(i){const t=o[a];if(t&&ne(t)&&t.type===n)return a}return null}(l,o,n,null==r?function(t){return 2==(2&t.flags)}(l)&&We:r!=o&&3===l.type,i&G.Host&&s===l);return null!==a?rn(e,o,a,l):en}function rn(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof $e){const o=i;if(o.resolving)throw new Error(`Circular dep for ${ze(s[n])}`);const l=Xe(o.canSeeViewProviders);let a;o.resolving=!0,o.injectImpl&&(a=Dt(o.injectImpl)),ke(t,r);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:s}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{o.injectImpl&&Dt(a),Xe(l),o.resolving=!1,Ae()}}return i}function sn(t,e,n){const r=64&t,i=32&t;let s;return s=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(s&1<<t)}function on(t,e){return!(t&G.Self||t&G.Host&&e)}class ln{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return function(t,e,n,r=G.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[St];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){ke(e,t);try{const t=i();if(null!=t||r&G.Optional)return t;throw new Error(`No provider for ${ze(n)}!`)}finally{Ae()}}else if("number"==typeof i){if(-1===i)return new ln(t,e);let s=null,o=Ke(t,e),l=-1,a=r&G.Host?e[16][6]:null;for((-1===o||r&G.SkipSelf)&&(l=-1===o?Je(t,e):e[o+8],on(r,!1)?(s=e[1],o=He(l),e=Be(l,e)):o=-1);-1!==o;){l=e[o+8];const t=e[1];if(sn(i,o,t.data)){const t=nn(o,e,n,s,r,a);if(t!==en)return t}on(r,e[1].data[o+8]===a)&&sn(i,o,e)?(s=t,o=He(l),e=Be(l,e)):o=-1}}}if(r&G.Optional&&void 0===i&&(i=null),0==(r&(G.Self|G.Host))){const t=e[9],s=Dt(void 0);try{return t?t.get(n,i,r&G.Optional):Rt(n,i,r&G.Optional)}finally{Dt(s)}}if(r&G.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${ze(n)}]`)}(this._tNode,this._lView,t,void 0,e)}}function an(t){return t.ngDebugContext}function cn(t){return t.ngOriginalError}function hn(t,...e){t.error(...e)}class un{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||hn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?an(t)?an(t):this._findContext(cn(t)):null}_findOriginalError(t){let e=cn(t);for(;e&&cn(e);)e=cn(e);return e}}let dn=!0,fn=!1;function pn(){return fn=!0,dn}function gn(t,e){t.__ngContext__=e}function mn(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function vn(){throw new Error("Cannot mix multi providers and regular providers")}function yn(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function wn(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==yn(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function bn(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function On(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let n=0;n<t.length;n++)if(3===(e=t[n])||4===e||6===e)return n;var e;return t.length}(i);let o=!1;for(let l=0;l<e.length;l++){const a=e[l];if("number"!=typeof a){if(!o)if(4&r){if(r=2|1&r,""!==a&&!bn(t,a,n)||""===a&&1===e.length){if(xn(r))return!1;o=!0}}else{const c=8&r?a:e[++l];if(8&r&&null!==t.attrs){if(!wn(t.attrs,c,n)){if(xn(r))return!1;o=!0}continue}const h=Sn(8&r?"class":a,i,0==t.type&&"ng-template"!==t.tagName,n);if(-1===h){if(xn(r))return!1;o=!0;continue}if(""!==c){let t;t=h>s?"":i[h+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==yn(e,c,0)||2&r&&c!==t){if(xn(r))return!1;o=!0}}}}else{if(!o&&!xn(r)&&!xn(a))return!1;if(o&&xn(a))continue;o=!1,r=a|1&r}}return xn(r)||o}function xn(t){return 0==(1&t)}function Sn(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function kn(t,e,n=!1){for(let r=0;r<e.length;r++)if(On(t,e[r],n))return!0;return!1}function Cn(t,e){return t?":not("+e.trim()+")":e}function _n(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||xn(o)||(e+=Cn(s,i),i=""),r=o,s=s||!xn(r);n++}return""!==i&&(e+=Cn(s,i)),e}const Tn={};function Pn(t){const e=t[3];return te(e)?e[3]:e}function An(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];Se(i),n.contentQueries(2,e[s],s)}}}function En(t,e,n){return ie(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Mn(t,e,n,r,i,s,o,l,a,c){const h=e.blueprint.slice();return h[0]=i,h[2]=140|r,de(h),h[3]=h[15]=t,h[8]=n,h[10]=o||t&&t[10],h[11]=l||t&&t[11],h[12]=a||t&&t[12]||null,h[9]=c||t&&t[9]||null,h[6]=s,h[16]=2==e.type?t[16]:h,h}function Dn(t,e,n,r,i,s){const o=n+19,l=t.data[o]||function(t,e,n,r,i,s){const o=ve(),l=we(),a=l?o:o&&o.parent,c=t.data[n]=Vn(0,a&&a!==e?a:null,r,n,i,s);return null===t.firstChild&&(t.firstChild=c),o&&(!l||null!=o.child||null===c.parent&&2!==o.type?l||(o.next=c):o.child=c),c}(t,e,o,r,i,s);return ye(l,!0),l}function In(t,e,n){Ce(e,e[6]);try{const r=t.viewQuery;null!==r&&ir(1,r,n);const i=t.template;null!==i&&Ln(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&An(t,e),t.staticViewQueries&&ir(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)tr(t,e[n])}(e,s)}finally{e[2]&=-5,Ee()}}function Qn(t,e,n,r){const i=e[2];if(256==(256&i))return;Ce(e,e[6]);const s=be();try{de(e),fe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ln(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&Ie(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Qe(e,n,0,null),Re(e,0)}if(function(t){let e=t[13];for(;null!==e;){let n;if(te(e)&&(n=e[2])>>1==-1){for(let t=9;t<e.length;t++){const n=e[t],r=n[1];he(n)&&Qn(r,n,r.template,n[8])}0!=(1&n)&&Kn(e,t[16])}e=e[4]}}(e),null!==t.contentQueries&&An(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&Ie(e,n)}else{const n=t.contentHooks;null!==n&&Qe(e,n,1),Re(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,s=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(s=0-o,Me(s),r+=9+n[++t],i=r):r+=o:(null!==o&&(xe(r,i),o(2,e[i])),i++)}}}finally{Me(-1)}}(t,e);const l=t.components;null!==l&&function(t,e){for(let n=0;n<e.length;n++)Jn(t,e[n])}(e,l);const a=t.viewQuery;if(null!==a&&ir(2,a,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&Ie(e,n)}else{const n=t.viewHooks;null!==n&&Qe(e,n,2),Re(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73)}finally{Ee()}}function Rn(t,e,n,r){const i=e[10],s=!be(),o=4==(4&e[2]);try{s&&!o&&i.begin&&i.begin(),o&&In(t,e,r),Qn(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ln(t,e,n,r,i){const s=fe.lFrame.selectedIndex;try{Me(-1),2&r&&e.length>19&&function(t,e,n,r){if(!r)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&Ie(e,n,0)}else{const n=t.preOrderHooks;null!==n&&Qe(e,n,0,0)}Me(0)}(t,e,0,be()),n(r,i)}finally{Me(s)}}function Nn(t){return t.tView||(t.tView=$n(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts))}function $n(t,e,n,r,i,s,o,l,a,c){const h=19+r,u=h+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Tn);return n}(h,u);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:l,node:null,data:d.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:u,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:a,consts:c}}function Vn(t,e,n,r,i,s){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jn(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Fn(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Hn(t,e,n){for(let r=0;r<n;r++)e.push(Tn),t.blueprint.push(Tn),t.data.push(null)}function Bn(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function zn(t,e,n){const r=19-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function qn(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Un(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ne(e)&&(n[""]=t)}}function Wn(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Xn(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Yt(n.type)),i=new $e(r,ne(n),null);t.blueprint.push(i),e.push(i)}function Gn(t,e,n){const r=le(e,t),i=Nn(n),s=t[10],o=er(t,Mn(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n)));t[e.index]=o}function Zn(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],l=o[e++];null!==t?r.setInput(n,l,i,s):n[s]=l}}}function Yn(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Kn(t,e){const n=t[5];for(let r=0;r<n.length;r++){const t=n[r],i=t[3][3][16];if(i!==e&&0==(16&i[2])){const e=t[1];Qn(e,t,e.template,t[8])}}}function Jn(t,e){const n=ae(e,t);if(he(n)&&80&n[2]){const t=n[1];Qn(t,n,t.template,n[8])}}function tr(t,e){const n=ae(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),In(r,n,n[8])}function er(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function nr(t,e,n){const r=e[10];r.begin&&r.begin();try{Qn(t,e,t.template,n)}catch(i){throw function(t,e){const n=t[9],r=n?n.get(un,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function rr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ce(n),i=r[1];Rn(i,r,i.template,n)}}(t[8])}function ir(t,e,n){Se(0),e(t,n)}const sr=(()=>Promise.resolve(null))();function or(t,e){const n=e[3];return-1===t.index?te(n)?n:null:n}function lr(t,e,n,r,i){if(null!=r){let s,o=!1;te(r)?s=r:Jt(r)&&(o=!0,r=r[0]);const l=oe(r);0===t&&null!==n?null==i?ur(e,n,l):hr(e,n,l,i||null):1===t&&null!==n?hr(e,n,l,i||null):2===t?function(t,e,n){const r=fr(t,e);r&&function(t,e,n,r){ie(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,l,o):3===t&&e.destroyNode(l),null!=s&&function(t,e,n,r,i){const s=n[7];s!==oe(n)&&lr(e,t,r,s,i);for(let o=9;o<n.length;o++){const i=n[o];mr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function ar(t,e){let n;return Jt(t)&&(n=t[6])&&2===n.type?or(n,t):t[3]===e?null:t[3]}function cr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];t instanceof $e||n[r+1].call(t)}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(e):oe(e[i]),o=t[n[r+2]],l=n[r+3];"boolean"==typeof l?s.removeEventListener(n[r],o,l):l>=0?t[l]():t[-l].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&ie(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&te(e[3])){r!==e[3]&&function(t,e){const n=t[5],r=n.indexOf(e);n.splice(r,1)}(r,e);const n=e[5];null!==n&&n.detachView(t)}}}function hr(t,e,n,r){ie(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function ur(t,e,n){ie(t)?t.appendChild(e,n):e.appendChild(n)}function dr(t,e,n,r){null!==r?hr(t,e,n,r):ur(t,e,n)}function fr(t,e){return ie(t)?t.parentNode(e):e.parentNode}function pr(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?function(t,e){const n=or(t,e);return n?fr(e[11],n[7]):null}(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return le(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==Ft.ShadowDom&&n!==Ft.Native)return null}return le(r,n)}(t,r,e);if(null!=i){const t=e[11],s=function(t,e){if(2===t.type){const n=or(t,e);return null===n?null:function t(e,n){const r=9+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(3===i)return le(r,n);if(0===i)return t(-1,n[r.index]);if(4===i||5===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return te(e)?t(-1,e):oe(e)}}{const t=n[16],i=t[6],s=Pn(t),o=i.projection[r.projection];return null!=o?e(s,o):e(n,r.next)}}return null}(e,i)}return n[7]}(n.indexOf(e,9)-9,n)}return 4===t.type||5===t.type?le(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)dr(t,i,n[e],s);else dr(t,i,n,s)}}function gr(t,e,n,r,i,s,o){for(;null!=n;){const l=r[n.index],a=n.type;o&&0===e&&(l&&gn(oe(l),r),n.flags|=4),64!=(64&n.flags)&&(4===a||5===a?(gr(t,e,n.child,r,i,s,!1),lr(e,t,i,l,s)):1===a?vr(t,e,r,n,i,s):lr(e,t,i,l,s)),n=o?n.projectionNext:n.next}}function mr(t,e,n,r,i,s){gr(n,r,t.node.child,e,i,s,!1)}function vr(t,e,n,r,i,s){const o=n[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let a=0;a<l.length;a++)lr(e,t,i,l[a],s);else gr(t,e,l,o[3],i,s,!0)}function yr(t,e,n){ie(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function wr(t,e,n){ie(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class br extends class{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,s=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(oe(o)),te(o))for(let e=9;e<o.length;e++){const n=o[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const l=r.type;if(4===l||5===l)t(e,n,r.child,i);else if(1===l){const e=n[16],s=e[6],o=Pn(e);let l=s.projection[r.projection];null!==l&&null!==o&&t(o[1],o,l,i,!0)}r=s?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}!function(t,e){if(!(256&e[2])){const n=e[11];ie(n)&&n.destroyNode&&mr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return cr(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[9];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&cr(e[1],e),e=ar(e,t);null===e&&(e=t),Jt(e)&&cr(e[1],e),n=e&&e[4]}e=n}}(e)}}(this._lView[1],this._lView)}onDestroy(t){var e,n,r,i;e=this._lView[1],r=t,(i=n=this._lView,i[7]||(i[7]=[])).push(r),e.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(e).push(n[7].length-1,null)}markForCheck(){!function(t){for(;t;){t[2]|=64;const e=Pn(t);if(0!=(512&t[2])&&!e)return t;t=e}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){nr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Oe(!0);try{nr(t,e,n)}finally{Oe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,mr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}{constructor(t){super(t),this._view=t}detectChanges(){rr(this._view)}checkNoChanges(){!function(t){Oe(!0);try{rr(t)}finally{Oe(!1)}}(this._view)}get context(){return null}}let Or;function xr(t,e,n){return Or||(Or=class extends t{}),new Or(le(e,n))}const Sr=new kt("Set Injector scope."),kr={},Cr={},_r=[];let Tr=void 0;function Pr(){return void 0===Tr&&(Tr=new Nt),Tr}function Ar(t,e=null,n=null,r){return new Er(t,n,e||Pr(),r)}class Er{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Vt(e,n=>this.processProvider(n,t,e)),Vt([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ct,Dr(void 0,this));const s=this.records.get(Sr);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:lt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=_t,n=G.Default){this.assertNotDestroyed();const r=Mt(this);try{if(!(n&G.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof kt)&&J(t);e=n&&this.injectableDefInScope(n)?Dr(Mr(t),kr):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&G.Self?Pr():this.parent).get(t,e=n&G.Optional&&e===_t?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(lt(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=lt(e);if(Array.isArray(e))i=e.map(lt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):lt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Tt,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Mt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(lt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=ut(t)))return!1;let r=et(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=et(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{Vt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Vt(r,t=>this.processProvider(t,n,r||_r))}}this.injectorDefTypes.add(s),this.records.set(s,Dr(r.factory,kr));const l=r.providers;if(null!=l&&!o){const e=t;Vt(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Qr(t=ut(t))?t:ut(t&&t.provide);const i=function(t,e,n){return Ir(t)?Dr(void 0,t.useValue):Dr(function(t,e,n){let r=void 0;if(Qr(t)){const e=ut(t);return Yt(e)||Mr(e)}if(Ir(t))r=()=>ut(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Lt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Qt(ut(t.useExisting));else{const i=ut(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${lt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Yt(i)||Mr(i);r=()=>new i(...Lt(t.deps))}var i;return r}(t,e,n),kr)}(t,e,n);if(Qr(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&vn()}else{let e=this.records.get(r);e?void 0===e.multi&&vn():(e=Dr(void 0,kr,!0),e.factory=()=>Lt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Cr?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(lt(t)):e.value===kr&&(e.value=Cr,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Mr(t){const e=J(t),n=null!==e?e.factory:Yt(t);if(null!==n)return n;const r=et(t);if(null!==r)return r.factory;if(t instanceof kt)throw new Error(`Token ${lt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${lt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[nt]||t[st]||t[it]&&t[it]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Dr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ir(t){return null!==t&&"object"==typeof t&&Pt in t}function Qr(t){return"function"==typeof t}const Rr=function(t,e,n){return function(t,e=null,n=null,r){const i=Ar(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Lr=(()=>{class t{static create(t,e){return Array.isArray(t)?Rr(t,e,""):Rr(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=_t,t.NULL=new Nt,t.\u0275prov=Y({token:t,providedIn:"any",factory:()=>Qt(Ct)}),t.__NG_ELEMENT_ID__=-1,t})(),Nr=new Map;const $r=new Set;function Vr(t){return"string"==typeof t?t:t.text()}function jr(t,e){let n=t.styles,r=t.classes,i=0;for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?i=t:1==i?r=at(r,t):2==i&&(n=at(n,t+": "+e[++s]+";"))}null!==n&&(t.styles=n),null!==r&&(t.classes=r)}let Fr=null;function Hr(){if(!Fr){const t=mt.Symbol;if(t&&t.iterator)Fr=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Fr=n)}}}return Fr}function Br(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function zr(t){return!!qr(t)&&(Array.isArray(t)||!(t instanceof Map)&&Hr()in t)}function qr(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ur(t,e,n,r,i){const s=i?"class":"style";!function(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],l=n[s++],a=e[o],c=t.data[o];null!==c.setInput?c.setInput(a,i,r,l):a[l]=i}}(t,n,e.inputs[s],s,r)}function Wr(t,e,n,r){const i=ge(),s=me(),o=19+t,l=i[11],a=i[o]=En(e,l,fe.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const l=e.consts,a=ue(l,s),c=Dn(e,n[6],t,3,i,a);return function(t,e,n,r){let i=!1;if(pe()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];kn(n,o.selectors,!1)&&(i||(i=[]),tn(Ze(n,e),t,o.type),ne(o)?(2&n.flags&&mn(n),qn(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,Wn(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}zn(t,n,s.length);let l=!1,a=!1;for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=je(n.mergedAttrs,c.hostAttrs),Xn(t,e,c),Un(t.data.length-1,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128),!l&&(c.onChanges||c.onInit||c.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-19),l=!0),a||!c.onChanges&&!c.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-19),a=!0),Fn(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,l=null;for(let a=e.directiveStart;a<n;a++){const t=r[a],e=t.inputs;s.push(null!==i?Yn(e,i):null),o=jn(e,a,o),l=jn(t.outputs,a,l)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=l}(t,n),Hn(t,e,r)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}n.mergedAttrs=je(n.mergedAttrs,n.attrs)}(e,n,c,ue(l,o)),null!==c.mergedAttrs&&jr(c,c.mergedAttrs),null!==e.queries&&e.queries.elementStart(e,c),c}(t,s,i,0,e,n,r):s.data[o];ye(c,!0);const h=c.mergedAttrs;null!==h&&Ve(l,a,h);const u=c.classes;null!==u&&wr(l,a,u);const d=c.styles;null!==d&&yr(l,a,d),pr(s,i,a,c),0===fe.lFrame.elementDepthCount&&gn(a,i),fe.lFrame.elementDepthCount++,function(t){return 1==(1&t.flags)}(c)&&(function(t,e,n){pe()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ze(n,e),gn(r,e);const o=n.initialInputs;for(let l=i;l<s;l++){const r=t.data[l],s=ne(r);s&&Gn(e,n,r);const a=rn(e,t,l,n);gn(a,e),null!==o&&Zn(0,l-i,a,r,0,o),s&&(ae(n.index,e)[8]=a)}}(t,e,n,le(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=t.expandoInstructions,o=t.firstCreatePass,l=n.index-19;try{Me(l);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Bn(r,i):o&&s.push(null)}}finally{Me(-1)}}(t,e,n))}(s,i,c),function(t,e,n){if(ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&function(t,e,n=le){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],l=-1===o?n(e,t):t[o];t[i++]=l}}}(i,c)}function Xr(){let t=ve();we()?fe.lFrame.isParent=!1:(t=t.parent,ye(t,!1));const e=t;fe.lFrame.elementDepthCount--;const n=me();n.firstCreatePass&&(De(n,t),ee(t)&&n.queries.elementEnd(t)),null!==e.classes&&function(t){return 0!=(16&t.flags)}(e)&&Ur(n,e,ge(),e.classes,!0),null!==e.styles&&function(t){return 0!=(32&t.flags)}(e)&&Ur(n,e,ge(),e.styles,!1)}function Gr(t){return!!t&&"function"==typeof t.then}function Zr(t,e){const n=ce(t)[1],r=n.data.length-1;De(n,{directiveStart:r,directiveEnd:r+1})}class Yr{}class Kr{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${lt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Jr=(()=>{class t{}return t.NULL=new Kr,t})(),ti=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ei(t),t})();const ei=function(t){return xr(t,ve(),ge())};class ni{}const ri=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let ii=(()=>{class t{}return t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>null}),t})();class si{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const oi=new si("9.1.0");class li{constructor(){}supports(t){return zr(t)}create(t){return new ci(t)}}const ai=(t,e)=>e;class ci{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ai}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<fi(n,r,i)?e:n,o=fi(s,r,i),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=l-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==l&&t(s,o,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!zr(t))throw new Error(`Error trying to diff '${lt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Br(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Br(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Hr()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Br(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Br(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Br(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Br(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new hi(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new di),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new di),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class hi{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ui{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Br(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class di{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ui,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fi(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class pi{constructor(){}supports(t){return t instanceof Map||qr(t)}create(){return new gi}}class gi{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||qr(t)))throw new Error(`Error trying to diff '${lt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new mi(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Br(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class mi{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let vi=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new X,new U]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>new t([new li])}),t})(),yi=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new X,new U]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>new t([new pi])}),t})();const wi=[new pi],bi=new vi([new li]),Oi=new yi(wi),xi={};class Si extends Jr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zt(t);return new _i(e,this.ngModule)}}function ki(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ci=new kt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qe});class _i extends Yr{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(_n).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ki(this.componentDef.inputs)}get outputs(){return ki(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,xi,i);return s!==xi||r===xi?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(ni,se),o=i.get(ii,null),l=s.createRenderer(null,this.componentDef),a=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(ie(t))return t.selectRootElement(e,n===Ft.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,n,this.componentDef.encapsulation):En(a,s.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(a)),h=this.componentDef.onPush?576:528,u="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),d={components:[],scheduler:qe,clean:sr,playerHandler:null,flags:0},f=$n(0,-1,null,1,0,null,null,null,null,null),p=Mn(null,f,d,h,null,null,s,l,o,i);let g,m;Ce(p,null);try{const t=function(t,e,n,r,i,s){const o=n[1];n[19]=t;const l=Dn(o,null,0,3,null,null),a=l.mergedAttrs=e.hostAttrs;null!==a&&(jr(l,a),null!==t&&(Ve(i,t,a),null!==l.classes&&wr(i,t,l.classes),null!==l.styles&&yr(i,t,l.styles)));const c=r.createRenderer(t,e),h=Mn(n,Nn(e),null,e.onPush?64:16,n[19],l,r,c,void 0);return o.firstCreatePass&&(tn(Ze(l,n),o,e.type),qn(o,l),Wn(l,n.length,1)),er(n,h),n[19]=h}(c,this.componentDef,p,s,l);if(c)if(n)Ve(l,c,["ng-version",oi.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!xn(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ve(l,c,t),e&&e.length>0&&wr(l,c,e.join(" "))}m=p[1].data[19],e&&(m.projection=e.map(t=>Array.from(t))),g=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=ve();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),zn(t,r,1),Xn(t,e,n));const i=rn(e,t,e.length-1,r);gn(i,e);const s=le(r,e);return s&&gn(s,e),i}(s,n,e);r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const l=ve();if(s.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Me(l.index-19);const t=n[1];Fn(t,e),Hn(t,n,e.hostVars),Bn(e,o)}return o}(t,this.componentDef,p,d,[Zr]),In(f,p,null)}finally{Ee()}const v=new Ti(this.componentType,g,xr(ti,m,p),p,m);return n&&!u||(v.hostView._tViewNode.child=m),v}}class Ti extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new br(r),this.hostView._tViewNode=function(t,e,n,r){let i=t.node;return null==i&&(t.node=i=Vn(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new ln(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Pi=void 0;var Ai=["en",[["a","p"],["AM","PM"],Pi],[["AM","PM"],Pi,Pi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pi,"{1} 'at' {0}",Pi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ei={};function Mi(t){return t in Ei||(Ei[t]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[t]),Ei[t]}const Di=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let Ii="en-US";function Qi(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ii=t.toLowerCase().replace(/_/g,"-"))}const Ri=new Map;class Li extends $t{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Si(this);const n=Kt(t),r=t[Ot]||null;r&&Qi(r),this._bootstrapComponents=Ue(n.bootstrap),this._r3Injector=Ar(t,e,[{provide:$t,useValue:this},{provide:Jr,useValue:this.componentFactoryResolver}],lt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Lr.THROW_IF_NOT_FOUND,n=G.Default){return t===Lr||t===$t||t===Ct?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ni extends class{}{constructor(t){super(),this.moduleType=t,null!==Kt(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${lt(e)} vs ${lt(e.name)}`)})(t,Ri.get(t),e),Ri.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Li(this.moduleType,t)}}class $i extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return t instanceof u&&t.add(o),o}}const Vi=new kt("Application Initializer");let ji=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Gr(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Qt(Vi,8))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const Fi=new kt("AppId"),Hi={provide:Fi,useFactory:function(){return`${Bi()}${Bi()}${Bi()}`},deps:[]};function Bi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zi=new kt("Platform Initializer"),qi=new kt("Platform ID"),Ui=new kt("appBootstrapListener");let Wi=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const Xi=new kt("LocaleId"),Gi=new kt("DefaultCurrencyCode");class Zi{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Yi=function(t){return new Ni(t)},Ki=Yi,Ji=function(t){return Promise.resolve(Yi(t))},ts=function(t){const e=Yi(t),n=Ue(Kt(t).declarations).reduce((t,e)=>{const n=Zt(e);return n&&t.push(new _i(n)),t},[]);return new Zi(e,n)},es=ts,ns=function(t){return Promise.resolve(ts(t))};let rs=(()=>{class t{constructor(){this.compileModuleSync=Ki,this.compileModuleAsync=Ji,this.compileModuleAndAllComponentsSync=es,this.compileModuleAndAllComponentsAsync=ns}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const is=new kt("compilerOptions"),ss=(()=>Promise.resolve(0))();function os(t){"undefined"==typeof Zone?ss.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ls{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $i(!1),this.onMicrotaskEmpty=new $i(!1),this.onStable=new $i(!1),this.onError=new $i(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=mt.requestAnimationFrame,e=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mt,()=>{t.lastRequestAnimationFrameId=-1,us(t),hs(t)}),us(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,s,o,l)=>{try{return ds(t),n.invokeTask(i,s,o,l)}finally{e&&"eventTask"===s.type&&e(),fs(t)}},onInvoke:(e,n,r,i,s,o,l)=>{try{return ds(t),e.invoke(r,i,s,o,l)}finally{fs(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,us(t),hs(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ls.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ls.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,cs,as,as);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function as(){}const cs={};function hs(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function us(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ds(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fs(t){t._nesting--,hs(t)}class ps{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $i,this.onMicrotaskEmpty=new $i,this.onStable=new $i,this.onError=new $i}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let gs=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ls.assertNotInAngularZone(),os(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())os(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Qt(ls))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),ms=(()=>{class t{constructor(){this._applications=new Map,ws.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ws.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class vs{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ys,ws=new vs,bs=function(t,e,n){const r=t.get(is,[]).concat(e),i=new Ni(n);if(0===Nr.size)return Promise.resolve(i);const s=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(r.map(t=>t.providers));if(0===s.length)return Promise.resolve(i);const o=function(){const t=mt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),l=Lr.create({providers:s}).get(o.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(l.get(t)))(t);n.set(t,e=r.then(Vr))}return e}return Nr.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const s=t.styleUrls,o=t.styles||(t.styles=[]),l=t.styles.length;s&&s.forEach((e,n)=>{o.push(""),i.push(r(e).then(r=>{o[l+n]=r,s.splice(s.indexOf(e),1),0==s.length&&(t.styleUrls=void 0)}))});const a=Promise.all(i).then(()=>function(t){$r.delete(t)}(n));e.push(a)}),Nr=new Map,Promise.all(e).then(()=>{})}().then(()=>i)};const Os=new kt("AllowMultipleToken");function xs(t,e,n=[]){const r=`Platform: ${e}`,i=new kt(r);return(e=[])=>{let s=Ss();if(!s||s.injector.get(Os,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Sr,useValue:"platform"});!function(t){if(ys&&!ys.destroyed&&!ys.injector.get(Os,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ys=t.get(ks);const e=t.get(zi,null);e&&e.forEach(t=>t())}(Lr.create({providers:t,name:r}))}return function(t){const e=Ss();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ss(){return ys&&!ys.destroyed?ys:null}let ks=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ps:("zone.js"===t?void 0:t)||new ls({enableLongStackTrace:pn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:ls,useValue:n}];return n.run(()=>{const e=Lr.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(un,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Ts(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const r=n();return Gr(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(ji);return t.runInitializers(),t.donePromise.then(()=>(Qi(i.injector.get(Xi,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Cs({},e);return bs(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(_s);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${lt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Qt(Lr))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function Cs(t,e){return Array.isArray(e)?e.reduce(Cs,t):Object.assign(Object.assign({},t),e)}let _s=(()=>{class t{constructor(t,e,n,r,i,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=pn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ls.assertNotInAngularZone(),os(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];var i;return(i=r)&&"function"==typeof i.schedule?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:function(t=Number.POSITIVE_INFINITY){return function t(e,n,r=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(t((t,r)=>{return(i=e(t,r),i instanceof y?i:new y(A(i))).pipe(function(t,e){return function(e){return e.lift(new M(t,void 0))}}((e,i)=>n(t,e,r,i)));var i},r)):("number"==typeof n&&(r=n),t=>t.lift(new I(e,r)))}(R,t)}(e)(function(t,e){return e?function(t,e){return new y(n=>{const r=new u;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}(t,e):new y(_(t))}(t,n))}(o,l.pipe(t=>{return L()((e=H,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,j);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Yr?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($t),i=n.create(Lr.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(gs,null);return s&&i.injector.get(ms).registerApplication(i.location.nativeElement,s),this._loadComponent(i),pn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ts(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ui,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ts(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Qt(ls),Qt(Wi),Qt(Lr),Qt(un),Qt(Jr),Qt(ji))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();function Ts(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ps=xs(null,"core",[{provide:qi,useValue:"unknown"},{provide:ks,deps:[Lr]},{provide:ms,deps:[]},{provide:Wi,deps:[]}]),As=[{provide:_s,useClass:_s,deps:[ls,Wi,Lr,un,Jr,ji]},{provide:Ci,deps:[ls],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ji,useClass:ji,deps:[[new U,Vi]]},{provide:rs,useClass:rs,deps:[]},Hi,{provide:vi,useFactory:function(){return bi},deps:[]},{provide:yi,useFactory:function(){return Oi},deps:[]},{provide:Xi,useFactory:function(t){return Qi(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new q(Xi),new U,new X]]},{provide:Gi,useValue:"USD"}];let Es=(()=>{class t{constructor(t){}}return t.\u0275mod=Xt({type:t}),t.\u0275inj=K({factory:function(e){return new(e||t)(Qt(_s))},providers:As}),t})(),Ms=null;function Ds(){return Ms}const Is=new kt("DocumentToken"),Qs=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}();class Rs{}let Ls=(()=>{class t extends Rs{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Mi(e);if(n)return n;const r=e.split("-")[0];if(n=Mi(r),n)return n;if("en"===r)return Ai;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Di.PluralCase]}(e||this.locale)(t)){case Qs.Zero:return"zero";case Qs.One:return"one";case Qs.Two:return"two";case Qs.Few:return"few";case Qs.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Qt(Xi))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),Ns=(()=>{class t{}return t.\u0275mod=Xt({type:t}),t.\u0275inj=K({factory:function(e){return new(e||t)},providers:[{provide:Rs,useClass:Ls}]}),t})();class $s extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new $s,Ms||(Ms=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=js||(js=document.querySelector("base"),js)?js.getAttribute("href"):null;return null==e?null:(n=e,Vs||(Vs=document.createElement("a")),Vs.setAttribute("href",n),"/"===Vs.pathname.charAt(0)?Vs.pathname:"/"+Vs.pathname);var n}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Vs,js=null;const Fs=new kt("TRANSITION_ID"),Hs=[{provide:Vi,useFactory:function(t,e,n){return()=>{n.get(ji).donePromise.then(()=>{const n=Ds();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Fs,Is,Lr],multi:!0}];class Bs{static init(){var t;t=new Bs,ws=t}addToWindow(t){mt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},mt.getAllAngularTestabilities=()=>t.getAllTestabilities(),mt.getAllAngularRootElements=()=>t.getAllRootElements(),mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(t=>{const e=mt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Ds().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const zs=new kt("EventManagerPlugins");let qs=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Qt(zs),Qt(ls))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class Us{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Ds().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Ws=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})(),Xs=(()=>{class t extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Ds().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Qt(Is))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const Gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Zs=/%COMP%/g;function Ys(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ys(t,i,n):(i=i.replace(Zs,t),n.push(i))}return n}function Ks(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Js=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new to(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ft.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new eo(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Ft.Native:case Ft.ShadowDom:return new no(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ys(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Qt(qs),Qt(Xs),Qt(Fi))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();class to{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Gs[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Gs[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&ri.DashCase?t.style.setProperty(e,n,r&ri.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ri.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ks(n)):this.eventManager.addEventListener(t,e,Ks(n))}}class eo extends to{constructor(t,e,n,r){super(t),this.component=n;const i=Ys(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Zs,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Zs,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class no extends to{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Ft.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Ys(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ro=(()=>{class t extends Us{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Qt(Is))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const io=["alt","control","meta","shift"],so={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lo={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ao=(()=>{class t extends Us{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ds().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(io.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&oo.hasOwnProperty(e)&&(e=oo[e]))}return so[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),io.forEach(r=>{r!=n&&(0,lo[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Qt(Is))},t.\u0275prov=Y({token:t,factory:t.\u0275fac}),t})();const co=xs(Ps,"browser",[{provide:qi,useValue:"browser"},{provide:zi,useValue:function(){$s.makeCurrent(),Bs.init()},multi:!0},{provide:Is,useFactory:function(){return function(t){re=t}(document),document},deps:[]}]),ho=[[],{provide:Sr,useValue:"root"},{provide:un,useFactory:function(){return new un},deps:[]},{provide:zs,useClass:ro,multi:!0,deps:[Is,ls,qi]},{provide:zs,useClass:ao,multi:!0,deps:[Is]},[],{provide:Js,useClass:Js,deps:[qs,Xs,Fi]},{provide:ni,useExisting:Js},{provide:Ws,useExisting:Xs},{provide:Xs,useClass:Xs,deps:[Is]},{provide:gs,useClass:gs,deps:[ls]},{provide:qs,useClass:qs,deps:[zs,ls]},[]];let uo=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Fi,useValue:e.appId},{provide:Fs,useExisting:Fi},Hs]}}}return t.\u0275mod=Xt({type:t}),t.\u0275inj=K({factory:function(e){return new(e||t)(Qt(t,12))},providers:ho,imports:[Ns,Es]}),t})();"undefined"!=typeof window&&window;var fo=n("3Yt4"),po=n("dC2d");const go=po.Annotation.define(),mo=po.Annotation.define(),vo=po.Facet.define(),yo=po.Facet.define({combine:t=>Object(po.combineConfig)(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),wo=po.StateField.define({create:()=>Qo.empty,update(t,e){let n=e.state.facet(yo),r=e.annotation(go);if(r){let i=_o.fromTransaction(e),s=r.side,o=0==s?t.undone:t.done;return o=i?To(o,o.length,n.minDepth,i):Eo(o,e.startState.selection),new Qo(0==s?r.rest:o,0==s?o:r.rest)}let i=e.annotation(mo);if("full"!=i&&"before"!=i||(t=t.isolate()),!1===e.annotation(po.Transaction.addToHistory))return e.changes.length?t.addMapping(e.changes.desc):t;let s=_o.fromTransaction(e),o=e.annotation(po.Transaction.time),l=e.annotation(po.Transaction.userEvent);return s?t=t.addChanges(s,o,l,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),"full"!=i&&"after"!=i||(t=t.isolate()),t}});function bo(t,e){return function({state:n,dispatch:r}){let i=n.field(wo,!1);if(!i)return!1;let s=i.pop(t,n,e);return!!s&&(r(s),!0)}}const Oo=bo(0,!1),xo=bo(1,!1),So=bo(0,!0),ko=bo(1,!0);function Co(t){return function(e){let n=e.field(wo,!1);if(!n)return 0;let r=0==t?n.done:n.undone;return r.length-(r.length&&!r[0].changes?1:0)}}Co(0),Co(1);class _o{constructor(t,e,n,r,i){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(t){return new _o(this.changes,this.effects,this.mapped,this.startSelection,t)}static fromTransaction(t){let e=Ao;for(let n of t.startState.facet(vo)){let r=n(t);r.length&&(e=e.concat(r))}return!e.length&&t.changes.empty?null:new _o(t.changes.invert(t.startState.doc),e,void 0,t.startState.selection,Ao)}static selection(t){return new _o(void 0,Ao,void 0,void 0,t)}}function To(t,e,n,r){let i=t.slice(e+1>n+20?e-n-1:0,e);return i.push(r),i}function Po(t,e){return t.length?e.length?t.concat(e):t:e}const Ao=[];function Eo(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),To(t,t.length-1,1e9,n.setSelAfter(r)))}return[_o.selection([e])]}function Mo(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Do(t,e){if(!t.length)return t;let n=t.length,r=Ao;for(;n;){let i=Io(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let e=t.slice(0,n);return e[n-1]=i,e}e=i.mapped,n--,r=i.selectionsAfter}return r.length?[_o.selection(r)]:Ao}function Io(t,e,n){let r=Po(t.selectionsAfter.length?t.selectionsAfter.map(t=>t.map(e)):Ao,n);if(!t.changes)return _o.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new _o(i,po.StateEffect.mapEffects(t.effects,e),o,t.startSelection.map(e),r)}class Qo{constructor(t,e,n=0,r){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Qo(this.done,this.undone):this}addChanges(t,e,n,r,i){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&e-this.prevTime<r&&!o.selectionsAfter.length&&o.changes.length&&t.changes&&function(t,e){let n=[],r=!1;return t.iterChangedRanges((t,e)=>n.push(t,e)),e.iterChangedRanges((t,e,i,s)=>{for(let o=0;o<n.length;){let t=n[o++],e=n[o++];s>=t&&i<=e&&(r=!0)}}),r}(o.changes,t.changes)?To(s,s.length-1,i,new _o(t.changes.compose(o.changes),Po(t.effects,o.effects),o.mapped,o.startSelection,Ao)):To(s,s.length,i,t),new Qo(s,Ao,e,n)}addSelection(t,e,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Ao;return i.length>0&&e-this.prevTime<r&&"keyboardselection"==n&&this.prevUserEvent==n&&(s=i[i.length-1]).ranges.length==(o=t).ranges.length&&0===s.ranges.filter((t,e)=>t.empty!=o.ranges[e].empty).length?this:new Qo(Eo(this.done,t),this.undone,e,n);var s,o}addMapping(t){return new Qo(Do(this.done,t),Do(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let r=0==t?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:go.of({side:t,rest:Mo(r)})});if(i.changes){let n=1==r.length?Ao:r.slice(0,r.length-1);return i.mapped&&(n=Do(n,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:go.of({side:t,rest:n}),filter:!1})}return null}}Qo.empty=new Qo(Ao,Ao);const Ro=[{key:"Mod-z",run:Oo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:xo,preventDefault:!0},{key:"Mod-u",run:So,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ko,preventDefault:!0}];var Lo=n("jvbj");class No extends Lo.d{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}toDOM(t){return null}at(t){return new Lo.a(t,t,this)}}No.prototype.elementClass="",No.prototype.mapMode=po.MapMode.TrackBefore;const $o={style:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Lo.b.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Vo=po.Facet.define();function jo(t){return[Bo(),Vo.of(Object.assign(Object.assign({},$o),t))]}const Fo=fo.EditorView.baseTheme({gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"gutters@light":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid silver"},"gutters@dark":{backgroundColor:"#333338",color:"#ccc"},gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},gutterElement:{boxSizing:"border-box"},"gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),Ho=po.Facet.define({combine:t=>t.some(t=>t)});function Bo(t){let e=[zo,Fo];return t&&!1===t.fixed&&e.push(Ho.of(!0)),e}const zo=fo.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.dom=document.createElement("div"),this.dom.className=Object(fo.themeClass)("gutters"),this.dom.setAttribute("aria-hidden","true"),this.gutters=t.state.facet(Vo).map(e=>new Uo(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Ho),this.fixed&&(this.dom.style.position="sticky"),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(!this.updateGutters(t))return;let e=this.gutters.map(t=>new qo(t,this.view.viewport));this.view.viewportLines(t=>{let n;if(Array.isArray(t.type)){for(let e of t.type)if(e.type==fo.BlockType.Text){n=e;break}}else n=t.type==fo.BlockType.Text?t:void 0;if(n)for(let r of e)r.line(this.view,n)},0);for(let n of e)n.finish();this.dom.style.minHeight=this.view.contentHeight+"px",t.state.facet(Ho)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(t){let e=t.prevState.facet(Vo),n=t.state.facet(Vo),r=t.docChanged||t.heightChanged||t.viewportChanged;if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=e.indexOf(r);n<0?i.push(new Uo(this.view,r)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return r}destroy(){this.dom.remove()}}).provide(fo.PluginField.scrollMargins,t=>0!=t.gutters.length&&t.fixed?t.view.textDirection==fo.Direction.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null);class qo{constructor(t,e){this.gutter=t,this.localMarkers=[],this.i=0,this.height=0,this.cursor=Lo.b.iter(Array.isArray(t.markers)?t.markers:[t.markers],e.from)}line(t,e){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=e.from;)this.cursor.from==e.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();let n=this.gutter.config.lineMarker(t,e,this.localMarkers);n&&this.localMarkers.unshift(n);let r=this.gutter;if(0==this.localMarkers.length&&!r.config.renderEmptyElements)return;let i=e.top-this.height;if(this.i==r.elements.length){let n=new Wo(t,e.height,i,this.localMarkers,r.elementClass);r.elements.push(n),r.dom.appendChild(n.dom)}else{let n=this.localMarkers,s=r.elements[this.i];(function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0})(n,s.markers)&&(n=s.markers,this.localMarkers.length=0),s.update(t,e.height,i,n,r.elementClass)}this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;)t.dom.removeChild(t.elements.pop().dom)}}class Uo{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className=Object(fo.themeClass)("gutter"+(this.config.style?"."+this.config.style:"")),this.elementClass=Object(fo.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));for(let n in e.domEventHandlers)this.dom.addEventListener(n,r=>{let i=t.visualLineAtHeight(r.clientY,t.contentDOM.getBoundingClientRect().top);e.domEventHandlers[n](t,i,r)&&r.preventDefault()});this.markers=e.markers(t.state),e.initialSpacer&&(this.spacer=new Wo(t,0,0,[e.initialSpacer(t)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=this.config.markers(t.state),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e],this.elementClass)}return this.markers!=e}}class Wo{constructor(t,e,n,r,i){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(t,e,n,r,i)}update(t,e,n,r,i){if(this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),this.markers!=r){this.markers=r;for(let t;t=this.dom.lastChild;)t.remove();let e=i;for(let n of r){let r=n.toDOM(t);r&&this.dom.appendChild(r);let i=n.elementClass;i&&(e+=" "+i)}this.dom.className=e}}}const Xo=po.Facet.define(),Go=po.Facet.define({combine:t=>Object(po.combineConfig)(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let r in e){let t=n[r],i=e[r];n[r]=t?(e,n,r)=>t(e,n,r)||i(e,n,r):i}return n}})});class Zo extends No{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(t){let e=t.state.facet(Go);return document.createTextNode(e.formatNumber(this.number))}}const Yo=jo({style:"lineNumber",markers:t=>t.facet(Xo),lineMarker:(t,e,n)=>n.length?null:new Zo(t.state.doc.lineAt(e.from).number),initialSpacer:t=>new Zo(Jo(t.state.doc.lines)),updateSpacer(t,e){let n=Jo(e.view.state.doc.lines);return n==t.number?t:new Zo(n)}});function Ko(t={}){return[Go.of(t),Yo]}function Jo(t){let e=9;for(;e<t;)e=10*e+9;return e}function tl(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const el=po.StateEffect.define({map:tl}),nl=po.StateEffect.define({map:tl});function rl(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(t=>t.from<=n&&t.to>=n)||e.push(t.visualLineAt(n));return e}const il=po.StateField.define({create:()=>fo.Decoration.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(el)&&!ol(t,n.value.from,n.value.to)?t=t.update({add:[fl.decoration.range(n.value.from,n.value.to)]}):n.is(nl)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.primary;t.between(r,r,(t,e)=>{t<r&&e>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(t,e)=>e<=r||t>=r}))}return t},provide:[fo.EditorView.decorations]});function sl(t,e,n){var r;let i=null;return null===(r=t.field(il,!1))||void 0===r||r.between(e,n,(t,e)=>{(!i||i.from>t)&&(i={from:t,to:e})}),i}function ol(t,e,n){let r=!1;return t.between(e,e,(t,i)=>{t==e&&i==n&&(r=!0)}),r}function ll(t,e,n){return t.facet(po.EditorState.foldable).reduce((r,i)=>r||i(t,e,n),null)}function al(t){return t.field(il,!1)?void 0:{append:dl()}}const cl=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of rl(t)){let n=ll(t.state,e.from,e.to);if(n)return t.dispatch({effects:el.of(n),reconfigure:al(t.state)}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(il,!1))return!1;let e=[];for(let n of rl(t)){let r=sl(t.state,n.from,n.to);r&&e.push(nl.of(r))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.visualLineAt(r),s=ll(e,i.from,i.to);s&&n.push(el.of(s)),r=(s?t.visualLineAt(s.to):i).to+1}return n.length&&t.dispatch({effects:n,reconfigure:al(t.state)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(il,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(t,e)=>{n.push(nl.of({from:t,to:e}))}),t.dispatch({effects:n}),!0}}],hl={placeholderDOM:null,placeholderText:"\u2026"},ul=po.Facet.define({combine:t=>Object(po.combineConfig)(t,hl)});function dl(t){let e=[il,vl];return t&&e.push(ul.of(t)),e}class fl extends fo.WidgetType{ignoreEvents(){return!1}toDOM(t){let{state:e}=t,n=e.facet(ul);if(n.placeholderDOM)return n.placeholderDOM();let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className=Object(fo.themeClass)("foldPlaceholder"),r.onclick=e=>{let n=t.visualLineAt(t.posAtDOM(e.target)),r=sl(t.state,n.from,n.to);r&&t.dispatch({effects:nl.of(r)}),e.preventDefault()},r}}fl.decoration=fo.Decoration.replace({widget:new fl(null)});const pl={openText:"\u2304",closedText:"\u203a"};class gl extends No{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function ml(t={}){let e=Object.assign(Object.assign({},pl),t),n=new gl(e,!0),r=new gl(e,!1);return[jo({style:"foldGutter",lineMarker:(t,e)=>sl(t.state,e.from,e.to)?r:ll(t.state,e.from,e.to)?n:null,initialSpacer:()=>new gl(e,!1),domEventHandlers:{click:(t,e)=>{let n=sl(t.state,e.from,e.to);if(n)return t.dispatch({effects:nl.of(n)}),!0;let r=ll(t.state,e.from,e.to);return!!r&&(t.dispatch({effects:el.of(r)}),!0)}}}),dl()]}const vl=fo.EditorView.baseTheme({foldPlaceholder:{backgroundColor:"#eee",border:"1px solid silver",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}});var yl=n("euHR"),wl=n("WQMp");const bl=fo.EditorView.baseTheme({matchingBracket:{color:"#0b0"},nonmatchingBracket:{color:"#a22"}}),Ol=po.Facet.define({combine:t=>Object(po.combineConfig)(t,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4})}),xl=fo.Decoration.mark({class:Object(fo.themeClass)("matchingBracket")}),Sl=fo.Decoration.mark({class:Object(fo.themeClass)("nonmatchingBracket")}),kl=[po.StateField.define({create:()=>fo.Decoration.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Ol);for(let i of e.state.selection.ranges){if(!i.empty)continue;let t=Tl(e.state,i.head,-1,r)||i.head>0&&Tl(e.state,i.head-1,1,r)||r.afterCursor&&(Tl(e.state,i.head,1,r)||i.head<e.state.doc.length&&Tl(e.state,i.head+1,-1,r));if(!t)continue;let s=t.matched?xl:Sl;n.push(s.range(t.start.from,t.start.to)),t.end&&n.push(s.range(t.end.from,t.end.to))}return fo.Decoration.set(n,!0)},provide:[fo.EditorView.decorations]}),bl];function Cl(t={}){return[Ol.of(t),kl]}function _l(t,e,n){let r=t.prop(e<0?wl.c.openedBy:wl.c.closedBy);if(r)return r;if(1==t.name.length){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Tl(t,e,n,r={}){let i,s=r.maxScanDistance||1e4,o=r.brackets||"()[]{}",l=t.tree,a=l.resolve(e,n);return(i=_l(a.type,n,o))?function(t,e,n,r,i,s){let o=r.parent,l={from:r.start,to:r.end},a=0;return o&&o.iterate({from:n<0?r.start:r.end,to:n<0?o.start:o.end,enter(t,e,o){if(!(n<0?o>r.start:e<r.end)){if(0==a&&i.indexOf(t.name)>-1)return{start:l,end:{from:e,to:o},matched:!0};if(_l(t,n,s))a++;else if(_l(t,-n,s)&&(a--,0==a))return{start:l,end:{from:e,to:o},matched:!1};return!1}}})||{start:l,matched:!1}}(0,0,n,a,i,o):function(t,e,n,r,i,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),u=0;for(let d=0;!h.next().done&&d<=s;){let t=h.value;n<0&&(d+=t.length);let s=e+d*n;for(let e=n>0?0:t.length-1,l=n>0?t.length:-1;e!=l;e+=n){let l=o.indexOf(t[e]);if(!(l<0||r.resolve(s+e,1).type!=i))if(l%2==0==n>0)u++;else{if(1==u)return{start:c,end:{from:s+e,to:s+e+1},matched:l>>1==a>>1};u--}}n>0&&(d+=t.length)}return h.done?{start:c,matched:!1}:null}(t,e,n,l,a.type,s,o)}function Pl(t,e){return po.EditorSelection.create(t.ranges.map(e),t.primaryIndex)}function Al(t,e){return t.update({selection:e,scrollIntoView:!0,annotations:po.Transaction.userEvent.of("keyboardselection")})}function El({state:t,dispatch:e},n){let r=Pl(t.selection,n);return!r.eq(t.selection)&&(e(Al(t,r)),!0)}function Ml(t,e){return El(t,n=>n.empty?t.moveByChar(n,e):po.EditorSelection.cursor(e?n.to:n.from))}const Dl=t=>Ml(t,t.textDirection!=fo.Direction.LTR),Il=t=>Ml(t,t.textDirection==fo.Direction.LTR);function Ql(t,e){return El(t,n=>n.empty?t.moveByGroup(n,e):po.EditorSelection.cursor(e?n.to:n.from))}function Rl(t,e,n){if(e.type.prop(n))return!0;let r=e.end-e.start;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.start,e.end)))||e.firstChild}function Ll(t,e,n){let r,i,s=t.tree.resolve(e.head),o=n?wl.c.closedBy:wl.c.openedBy;for(let l=e.head;;){let e=n?s.childAfter(l):s.childBefore(l);if(!e)break;Rl(t,e,o)?s=e:l=n?e.end:e.start}return i=s.type.prop(o)&&(r=n?Tl(t,s.start,1):Tl(t,s.end,-1))&&r.matched?n?r.end.to:r.end.from:n?s.end:s.start,po.EditorSelection.cursor(i,n?-1:1)}function Nl(t,e){return El(t,n=>t.moveVertically(n,e))}const $l=t=>Nl(t,!1),Vl=t=>Nl(t,!0);function jl(t,e){return El(t,n=>t.moveVertically(n,e,t.dom.clientHeight))}const Fl=t=>jl(t,!1),Hl=t=>jl(t,!0);function Bl(t,e,n){let r=t.visualLineAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&e.head>r.from+n&&(i=po.EditorSelection.cursor(r.from+n))}return i}const zl=t=>El(t,e=>po.EditorSelection.cursor(t.visualLineAt(e.head).from,1)),ql=t=>El(t,e=>po.EditorSelection.cursor(t.visualLineAt(e.head).to,-1));function Ul(t,e){let n=Pl(t.state.selection,t=>{let n=e(t);return po.EditorSelection.range(t.anchor,n.head,n.goalColumn)});return!n.eq(t.state.selection)&&(t.dispatch(Al(t.state,n)),!0)}function Wl(t,e){return Ul(t,n=>t.moveByChar(n,e))}const Xl=t=>Wl(t,t.textDirection!=fo.Direction.LTR),Gl=t=>Wl(t,t.textDirection==fo.Direction.LTR);function Zl(t,e){return Ul(t,n=>t.moveByGroup(n,e))}function Yl(t,e){return Ul(t,n=>t.moveVertically(n,e))}const Kl=t=>Yl(t,!1),Jl=t=>Yl(t,!0);function ta(t,e){return Ul(t,n=>t.moveVertically(n,e,t.dom.clientHeight))}const ea=t=>ta(t,!1),na=t=>ta(t,!0),ra=t=>Ul(t,e=>po.EditorSelection.cursor(t.visualLineAt(e.head).from)),ia=t=>Ul(t,e=>po.EditorSelection.cursor(t.visualLineAt(e.head).to)),sa=({state:t,dispatch:e})=>(e(Al(t,{anchor:0})),!0),oa=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.doc.length})),!0),la=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.selection.primary.anchor,head:0})),!0),aa=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.selection.primary.anchor,head:t.doc.length})),!0);function ca(t,e){let{state:n}=t,r=n.changeByRange(t=>{let{from:n,to:r}=t;if(n==r){let t=e(n);n=Math.min(n,t),r=Math.max(r,t)}return n==r?{range:t}:{changes:{from:n,to:r},range:po.EditorSelection.cursor(n)}});return!r.changes.empty&&(t.dispatch(r,{scrollIntoView:!0,annotations:po.Transaction.userEvent.of("delete")}),!0)}const ha=(t,e)=>ca(t,n=>{let r,{state:i}=t,s=i.doc.lineAt(n);if(!e&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let t=Object(yl.d)(r,0,i.tabSize)%i.indentUnit||i.indentUnit;for(let e=0;e<t&&" "==r[r.length-1-e];e++)n--;return n}let o=s.findClusterBreak(n-s.from,e)+s.from;return o==n&&s.number!=(e?i.doc.lines:1)&&(o+=e?1:-1),o}),ua=t=>ha(t,!1),da=t=>ha(t,!0),fa=(t,e)=>ca(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),s=r.charCategorizer(n);for(let t=null;;){let o,l;if(n==(e?i.to:i.from)){if(i.number==(e?r.doc.lines:1))break;i=r.doc.line(i.number+(e?1:-1)),o=e?i.from:i.to,l="\n"}else o=i.findClusterBreak(n-i.from,e)+i.from,l=i.slice(Math.min(n,o)-i.from,Math.max(n,o)-i.from);let a=s(l);if(null!=t&&a!=t)break;a!=po.CharCategory.Space&&(t=a),n=o}return n}),pa=t=>fa(t,!1),ga=t=>fa(t,!0);function ma(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);n==i.number?e[e.length-1].to=s.to:e.push({from:i.from,to:s.to}),n=s.number}return e}function va(t,e,n){let r=[];for(let i of ma(t)){if(n?i.to==t.doc.length:0==i.from)continue;let e=t.doc.lineAt(n?i.to+1:i.from-1);n?r.push({from:i.to,to:e.to},{from:i.from,insert:e.slice()+t.lineBreak}):r.push({from:e.from,to:i.from},{from:i.to,insert:t.lineBreak+e.slice()})}return!!r.length&&(e(t.update({changes:r,scrollIntoView:!0})),!0)}function ya(t,e,n){let r=[];for(let i of ma(t))r.push(n?{from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}:{from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0})),!0}function wa(t,e){for(let n of t.state.facet(po.EditorState.indentation)){let r=n(t,e);if(r>-1)return r}return-1}function ba(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=t.doc.lineAt(r.from);o.number>n&&(e(o,i,r),n=o.number),!(r.to<=o.to);)o=t.doc.lineAt(o.to+1);let s=t.changes(i);return{changes:i,range:po.EditorSelection.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Oa=[{key:"ArrowLeft",run:Dl,shift:Xl},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>Ql(t,t.textDirection!=fo.Direction.LTR),shift:t=>Zl(t,t.textDirection!=fo.Direction.LTR)},{mac:"Cmd-ArrowLeft",run:zl,shift:ra},{key:"ArrowRight",run:Il,shift:Gl},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>Ql(t,t.textDirection==fo.Direction.LTR),shift:t=>Zl(t,t.textDirection==fo.Direction.LTR)},{mac:"Cmd-ArrowRight",run:ql,shift:ia},{key:"ArrowUp",run:$l,shift:Kl},{mac:"Cmd-ArrowUp",run:sa,shift:la},{mac:"Ctrl-ArrowUp",run:Fl,shift:ea},{key:"ArrowDown",run:Vl,shift:Jl},{mac:"Cmd-ArrowDown",run:oa,shift:aa},{mac:"Ctrl-ArrowDown",run:Hl,shift:na},{key:"PageUp",run:Fl,shift:ea},{key:"PageDown",run:Hl,shift:na},{key:"Home",run:t=>El(t,e=>Bl(t,e,!1)),shift:t=>Ul(t,e=>Bl(t,e,!1))},{key:"Mod-Home",run:sa,shift:la},{key:"End",run:t=>El(t,e=>Bl(t,e,!0)),shift:t=>Ul(t,e=>Bl(t,e,!0))},{key:"Mod-End",run:oa,shift:aa},{key:"Enter",run:({state:t,dispatch:e})=>{let n=t.changeByRange(({from:e,to:n})=>{let r=e==n&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,r=t.tree.resolve(e),i=r.childBefore(e),s=r.childAfter(e);return i&&s&&i.end<=e&&s.start>=e&&(n=i.type.prop(wl.c.closedBy))&&n.indexOf(s.name)>-1?{from:i.end,to:s.start}:null}(t,e),i=new po.IndentContext(t,{simulateBreak:e,simulateDoubleBreak:!!r}),s=wa(i,e);s<0&&(s=/^\s*/.exec(t.doc.lineAt(e).slice(0,50))[0].length);let o=t.doc.lineAt(e);for(;n<o.to&&/\s/.test(o.slice(n-o.from,n+1-o.from));)n++;r?({from:e,to:n}=r):e>o.from&&e<o.from+100&&!/\S/.test(o.slice(0,e))&&(e=o.from);let l=["",t.indentString(s)];return r&&l.push(t.indentString(i.lineIndent(o))),{changes:{from:e,to:n,insert:yl.a.of(l)},range:po.EditorSelection.cursor(e+1+s)}});return e(t.update(n,{scrollIntoView:!0})),!0}},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},annotations:po.Transaction.userEvent.of("keyboarselection")})),!0)},{key:"Backspace",run:ua},{key:"Delete",run:da},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pa},{key:"Mod-Delete",mac:"Alt-Delete",run:ga}].concat([{key:"Ctrl-b",run:Dl,shift:Xl},{key:"Ctrl-f",run:Il,shift:Gl},{key:"Ctrl-p",run:$l,shift:Kl},{key:"Ctrl-n",run:Vl,shift:Jl},{key:"Ctrl-a",run:zl,shift:ra},{key:"Ctrl-e",run:ql,shift:ia},{key:"Ctrl-d",run:da},{key:"Ctrl-h",run:ua},{key:"Ctrl-k",run:t=>ca(t,e=>{let n=t.visualLineAt(e).to;return e<n?n:Math.max(t.state.doc.length,e+1)})},{key:"Alt-d",run:ga},{key:"Ctrl-Alt-h",run:pa},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{let n=t.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:yl.a.of(["",""])},range:po.EditorSelection.cursor(t.from)}));return e(t.update(n,{scrollIntoView:!0,annotations:po.Transaction.userEvent.of("input")})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{let n=t.changeByRange(e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:r.findClusterBreak(n-r.from,!1)+r.from,s=n==r.to?n+1:r.findClusterBreak(n-r.from,!0)+r.from;return{changes:{from:i,to:s,insert:t.doc.slice(n,s).append(t.doc.slice(i,n))},range:po.EditorSelection.cursor(s)}});return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0})),!0)}},{key:"Alt-f",run:t=>Ql(t,!0),shift:t=>Zl(t,!0)},{key:"Alt-b",run:t=>Ql(t,!1),shift:t=>Zl(t,!1)},{key:"Alt-<",run:sa},{key:"Alt->",run:oa},{key:"Ctrl-v",run:Hl},{key:"Alt-v",run:Fl}].map(t=>({mac:t.key,run:t.run,shift:t.shift}))),xa=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>El(t,e=>Ll(t.state,e,t.textDirection!=fo.Direction.LTR)),shift:t=>Ul(t,e=>Ll(t.state,e,t.textDirection!=fo.Direction.LTR))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>El(t,e=>Ll(t.state,e,t.textDirection==fo.Direction.LTR)),shift:t=>Ul(t,e=>Ll(t.state,e,t.textDirection==fo.Direction.LTR))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>va(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>ya(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>va(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>ya(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=new po.EditorSelection([n.primary]):n.primary.empty||(r=new po.EditorSelection([po.EditorSelection.cursor(n.primary.head)])),!!r&&(e(Al(t,r)),!0)}},{key:"Mod-l",run:({state:t,dispatch:e})=>{let n=ma(t).map(({from:e,to:n})=>po.EditorSelection.range(e,Math.min(n+1,t.doc.length)));return e(t.update({selection:new po.EditorSelection(n),annotations:po.Transaction.userEvent.of("keyboardselection")})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=Pl(t.selection,e=>{var n;let r=t.tree.resolve(e.head,1);for(;!(r.start<e.from&&r.end>=e.to||r.end>e.to&&r.start<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return po.EditorSelection.range(r.end,r.start)});return e(Al(t,n)),!0}},{key:"Mod-[",run:({state:t,dispatch:e})=>(e(t.update(ba(t,(e,n)=>{let r=e.slice(0,Math.min(e.length,200)),i=/^\s*/.exec(r)[0];if(!i)return;let s=Object(yl.d)(i,0,t.tabSize),o=t.indentString(Math.max(0,s-t.indentUnit)),l=0;for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;n.push({from:e.from+l,to:e.from+i.length,insert:o.slice(l)})}))),!0)},{key:"Mod-]",run:({state:t,dispatch:e})=>(e(t.update(ba(t,(e,n)=>{n.push({from:e.from,insert:t.facet(po.EditorState.indentUnit)})}))),!0)},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{let n=Object.create(null),r=new po.IndentContext(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),i=ba(t,(e,i,s)=>{let o=wa(r,e.from);if(o<0)return;let l=/^\s*/.exec(e.slice(0,Math.min(e.length,200)))[0],a=t.indentString(o);(l!=a||s.from<e.from+l.length)&&(n[e.from]=o,i.push({from:e.from,to:e.from+l.length,insert:a}))});return i.changes.empty||e(t.update(i)),!0}},{key:"Shift-Mod-k",run:t=>{let{state:e}=t,n=e.changes(ma(e).map(({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n}))),r=Pl(e.selection,e=>t.moveVertically(e,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>function(t,e,n){let r=!1,i=Pl(t.selection,e=>{let n=Tl(t,e.head,-1)||Tl(t,e.head,1)||e.head>0&&Tl(t,e.head-1,1)||e.head<t.doc.length&&Tl(t,e.head+1,-1);if(!n||!n.end)return e;r=!0;let i=n.start.from==e.head?n.end.to:n.end.from;return po.EditorSelection.cursor(i)});return!!r&&(e(Al(t,i)),!0)}(t,e)}].concat(Oa),Sa={brackets:["(","[","{","'",'"'],before:")]}'\":;>"};function ka(){return fo.EditorView.inputHandler.of(Ta)}function Ca(t){for(let e=0;e<"()[]{}<>".length;e+=2)if("()[]{}<>".charCodeAt(e)==t)return"()[]{}<>".charAt(e+1);return Object(yl.f)(t<128?t:t+1)}function _a(t,e){return t.languageDataAt("closeBrackets",e)[0]||Sa}function Ta(t,e,n,r){let i=t.state.selection.primary;if(r.length>2||2==r.length&&1==Object(yl.c)(Object(yl.b)(r,0))||e!=i.from||n!=i.to)return!1;let s=function(t,e){let n=_a(t,t.selection.primary.head),r=n.brackets||Sa.brackets;for(let i of r){let s=Ca(Object(yl.b)(i,0));if(e==i)return s==i?Da(t,i,r.indexOf(i+i+i)>-1):Ea(t,i,s,n.before||Sa.before);if(e==s)return Ma(t,0,s)}return null}(t.state,r);return!!s&&(t.dispatch(s),!0)}const Pa=[{key:"Backspace",run:({state:t,dispatch:e})=>{let n=_a(t,t.selection.primary.head).brackets||Sa.brackets,r=null,i=t.changeByRange(e=>{if(e.empty){let r=function(t,e){let n=t.sliceString(e-2,e);return Object(yl.c)(Object(yl.b)(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of n)if(i==r&&Aa(t.doc,e.head)==Ca(Object(yl.b)(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:po.EditorSelection.cursor(e.head-i.length)}}return{range:r=e}});return r||e(t.update(i,{scrollIntoView:!0})),!r}}];function Aa(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Object(yl.c)(Object(yl.b)(n,0)))}function Ea(t,e,n,r){let i=null,s=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],range:po.EditorSelection.range(s.anchor+e.length,s.head+e.length)};let o=Aa(t.doc,s.head);return!o||/\s/.test(o)||r.indexOf(o)>-1?{changes:{insert:e+n,from:s.head},range:po.EditorSelection.cursor(s.head+e.length)}:{range:i=s}});return i?null:t.update(s,{scrollIntoView:!0})}function Ma(t,e,n){let r=null,i=t.selection.ranges.map(e=>e.empty&&Aa(t.doc,e.head)==n?po.EditorSelection.cursor(e.head+n.length):r=e);return r?null:t.update({selection:po.EditorSelection.create(i,t.selection.primaryIndex),scrollIntoView:!0})}function Da(t,e,n){let r=null,i=t.changeByRange(i=>{if(!i.empty)return{changes:[{insert:e,from:i.from},{insert:e,from:i.to}],range:po.EditorSelection.range(i.anchor+e.length,i.head+e.length)};let s=i.head,o=Aa(t.doc,s);if(o==e){if(Ia(t,s))return{changes:{insert:e+e,from:s},range:po.EditorSelection.cursor(s+e.length)};{let r=n&&t.sliceDoc(s,s+3*e.length)==e+e+e;return{range:po.EditorSelection.cursor(s+e.length*(r?3:1))}}}if(n&&t.sliceDoc(s-2*e.length,s)==e+e&&Ia(t,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},range:po.EditorSelection.cursor(s+e.length)};if(t.charCategorizer(s)(o)!=po.CharCategory.Word){let n=t.sliceDoc(s-1,s);if(n!=e&&t.charCategorizer(s)(n)!=po.CharCategory.Word)return{changes:{insert:e+e,from:s},range:po.EditorSelection.cursor(s+e.length)}}return{range:r=i}});return r?null:t.update(i,{scrollIntoView:!0})}function Ia(t,e){let n=t.tree.resolve(e+1);return n.parent&&n.start==e}var Qa=n("zlqw");const Ra="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class La{constructor(t,e,n=0,r=t.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=i?t=>i(Ra(t)):Ra,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return this.buffer.charCodeAt(this.bufferPos)}next(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=String.fromCharCode(t),n=this.bufferStart+this.bufferPos;for(this.bufferPos++;;){let t=this.peek();if(t<56320||t>=57344)break;this.bufferPos++,e+=String.fromCharCode(t)}let r=this.normalize(e);for(let i=0,s=n;;i++){let t=r.charCodeAt(i),o=this.match(t,s);if(o)return this.value=o,this;if(i==r.length-1)break;s==n&&i<e.length&&e.charCodeAt(i)==t&&s++}}}match(t,e){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],s=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?n={from:this.matches[r+1],to:e+1}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n}}class Na{constructor(t,e,n){this.search=t,this.replace=e,this.caseInsensitive=n}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseInsensitive==t.caseInsensitive}cursor(t,e=0,n=t.length){return new La(t,this.search,e,n,this.caseInsensitive?t=>t.toLowerCase():void 0)}get valid(){return!!this.search}}const $a=po.StateEffect.define(),Va=po.StateEffect.define(),ja=po.StateField.define({create:()=>new Fa(new Na("","",!1),[]),update(t,e){for(let n of e.effects)n.is($a)?t=new Fa(n.value,t.panel):n.is(Va)&&(t=new Fa(t.query,n.value?[Ja]:[]));return t},provide:[Qa.c.nFrom(t=>t.panel)]});class Fa{constructor(t,e){this.query=t,this.panel=e}}const Ha=fo.Decoration.mark({class:Object(fo.themeClass)("searchMatch")}),Ba=fo.Decoration.mark({class:Object(fo.themeClass)("searchMatch.selected")}),za=fo.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ja))}update(t){let e=t.state.field(ja);(e!=t.prevState.field(ja)||t.docChanged||t.selectionSet)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e.length||!t.valid)return fo.Decoration.none;let n=this.view.state,r=this.view.viewport,i=t.cursor(n.doc,Math.max(0,r.from-t.search.length),Math.min(r.to+t.search.length,n.doc.length)),s=new Lo.c;for(;!i.next().done;){let{from:t,to:e}=i.value,r=n.selection.ranges.some(n=>n.from==t&&n.to==e);s.add(t,e,r?Ba:Ha)}return s.finish()}}).decorations();function qa(t){return e=>{let n=e.state.field(ja,!1);return n&&n.query.valid?t(e,n):tc(e)}}function Ua(t,e,n){let r=n.cursor(t,e).next();return r.done&&(r=n.cursor(t,0,e+n.search.length-1).next(),r.done)?null:r.value}const Wa=qa((t,e)=>{let{from:n,to:r}=t.state.selection.primary,i=Ua(t.state.doc,t.state.selection.primary.from+1,e.query);return!(!i||i.from==n&&i.to==r||(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),oc(t),0))});function Xa(t,e,n,r){for(let i=r;;){let r=Math.max(n,i-1e4-t.search.length),s=t.cursor(e,r,i),o=null;for(;!s.next().done;)o=s.value;if(o)return o;if(r==n)return null;i-=1e4}}const Ga=qa((t,{query:e})=>{let{state:n}=t,r=Xa(e,n.doc,0,n.selection.primary.to-1)||Xa(e,n.doc,n.selection.primary.from+1,n.doc.length);return!!r&&(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),oc(t),!0)}),Za=qa((t,{query:e})=>{let n=e.cursor(t.state.doc),r=[];for(;!n.next().done;)r.push(po.EditorSelection.range(n.value.from,n.value.to));return!!r.length&&(t.dispatch({selection:po.EditorSelection.create(r)}),!0)}),Ya=qa((t,{query:e})=>{let{state:n}=t,r=Ua(n.doc,n.selection.primary.from,e);if(!r)return!1;let i,{from:s,to:o}=n.selection.primary,l=[];if(r.from==s&&r.to==o&&(l.push({from:r.from,to:r.to,insert:e.replace}),r=Ua(n.doc,r.to,e)),r){let t=0==l.length||l[0].from>=r.to?0:r.to-r.from-e.replace.length;i={anchor:r.from-t,head:r.to-t}}return t.dispatch({changes:l,selection:i,scrollIntoView:!!i}),r&&oc(t),!0}),Ka=qa((t,{query:e})=>{let n=e.cursor(t.state.doc),r=[];for(;!n.next().done;){let{from:t,to:i}=n.value;r.push({from:t,to:i,insert:e.replace})}return!!r.length&&(t.dispatch({changes:r}),!0)});function Ja(t){let{query:e}=t.state.field(ja);return{dom:ic({view:t,query:e,updateQuery(n){e.eq(n)||(e=n,t.dispatch({effects:$a.of(e)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80,style:"search"}}const tc=t=>{let e=t.state.field(ja,!1);if(e&&e.panel.length){let e=Object(Qa.a)(t,Ja);if(!e)return!1;e.dom.querySelector("[name=search]").focus()}else t.dispatch({effects:Va.of(!0),reconfigure:e?void 0:{append:ac}});return!0},ec=t=>{let e=t.state.field(ja,!1);if(!e||!e.panel.length)return!1;let n=Object(Qa.a)(t,Ja);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Va.of(!1)}),!0},nc=[{key:"Mod-f",run:tc,scope:"editor search-panel"},{key:"F3",run:Wa,shift:Ga,scope:"editor search-panel"},{key:"Mod-g",run:Wa,shift:Ga,scope:"editor search-panel"},{key:"Escape",run:ec,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.primary.empty)return!1;let{from:r,to:i}=n.primary,s=[],o=0;for(let l=new La(t.doc,t.sliceDoc(r,i));!l.next().done;){if(s.length>1e3)return!1;l.value.from==r&&(o=s.length),s.push(po.EditorSelection.range(l.value.from,l.value.to))}return e(t.update({selection:new po.EditorSelection(s,o)})),!0}}];function rc(t,e=null,n=[]){let r=document.createElement(t);if(e)for(let i in e){let t=e[i];"string"==typeof t?r.setAttribute(i,t):r[i]=t}for(let i of n)r.appendChild("string"==typeof i?document.createTextNode(i):i);return r}function ic(t){function e(e){return t.view.state.phrase(e)}let n=rc("input",{value:t.query.search,placeholder:e("Find"),"aria-label":e("Find"),class:Object(fo.themeClass)("textfield"),name:"search",onchange:s,onkeyup:s}),r=rc("input",{value:t.query.replace,placeholder:e("Replace"),"aria-label":e("Replace"),class:Object(fo.themeClass)("textfield"),name:"replace",onchange:s,onkeyup:s}),i=rc("input",{type:"checkbox",name:"case",checked:!t.query.caseInsensitive,onchange:s});function s(){t.updateQuery(new Na(n.value,r.value,!i.checked))}function o(t,e,n){return rc("button",{class:Object(fo.themeClass)("button"),name:t,onclick:e},n)}return rc("div",{onkeydown:function(e){Object(fo.runScopeHandlers)(t.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==n?(e.preventDefault(),(e.shiftKey?Ga:Wa)(t.view)):13==e.keyCode&&e.target==r&&(e.preventDefault(),Ya(t.view))}},[n,o("next",()=>Wa(t.view),[e("next")]),o("prev",()=>Ga(t.view),[e("previous")]),o("select",()=>Za(t.view),[e("all")]),rc("label",null,[i,"match case"]),rc("br"),r,o("replace",()=>Ya(t.view),[e("replace")]),o("replaceAll",()=>Ka(t.view),[e("replace all")]),rc("button",{name:"close",onclick:()=>ec(t.view),"aria-label":e("close")},["\xd7"]),rc("div",{style:"position: absolute; top: -10000px","aria-live":"polite"})])}const sc=/[\s\.,:;?!]/;function oc(t){let{from:e,to:n}=t.state.selection.primary,r=t.state.doc.lineAt(e).from,i=t.state.doc.lineAt(n).to,s=Math.max(r,e-30),o=Math.min(i,n+30),l=t.state.sliceDoc(s,o);if(s!=r)for(let c=0;c<30;c++)if(!sc.test(l[c+1])&&sc.test(l[c])){l=l.slice(c);break}if(o!=i)for(let c=l.length-1;c>l.length-30;c--)if(!sc.test(l[c-1])&&sc.test(l[c])){l=l.slice(0,c);break}let a=Object(Qa.a)(t,Ja);a&&a.dom.contains(t.root.activeElement)&&(a.dom.querySelector("div[aria-live]").textContent=t.state.phrase("current match")+". "+l)}const lc=fo.EditorView.baseTheme({"panel.search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button":{margin:".2em .5em .2em 0"},"& label":{fontSize:"80%"}},"searchMatch@light":{backgroundColor:"#ffa"},"searchMatch@dark":{backgroundColor:"#088"},"searchMatch.selected@light":{backgroundColor:"#fca"},"searchMatch.selected@dark":{backgroundColor:"#808"}}),ac=[ja,za,Object(Qa.b)(),lc];var cc=n("BVGc");fo.EditorView.baseTheme({"tooltip.autocomplete":{fontFamily:"monospace",overflowY:"auto",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}},"snippetField@light":{backgroundColor:"#ddd"},"snippetField@dark":{backgroundColor:"#333"},snippetFieldPosition:{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},completionIcon:{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},"completionIcon.function, completionIcon.method":{"&:after":{content:"'\u0192'"}},"completionIcon.class":{"&:after":{content:"'\u25cb'"}},"completionIcon.interface":{"&:after":{content:"'\u25cc'"}},"completionIcon.variable":{"&:after":{content:"'\u{1d465}'"}},"completionIcon.constant":{"&:after":{content:"'\u{1d436}'"}},"completionIcon.type":{"&:after":{content:"'\u{1d461}'"}},"completionIcon.enum":{"&:after":{content:"'\u222a'"}},"completionIcon.property":{"&:after":{content:"'\u25a1'"}},"completionIcon.keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},"completionIcon.namespace":{"&:after":{content:"'\u25a2'"}},"completionIcon.text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});let hc=fo.Decoration.widget({widget:new class extends fo.WidgetType{toDOM(){let t=document.createElement("span");return t.className=Object(fo.themeClass)("snippetFieldPosition"),t}}(null)}),uc=fo.Decoration.mark({class:Object(fo.themeClass)("snippetField")});class dc{constructor(t,e){this.ranges=t,this.active=e,this.deco=fo.Decoration.set(t.map(t=>(t.from==t.to?hc:uc).range(t.from,t.to)))}map(t){return new dc(this.ranges.map(e=>e.map(t)),this.active)}selectionInsideField(t){return t.ranges.every(t=>this.ranges.some(e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))}}const fc=po.StateEffect.define({map:(t,e)=>t&&t.map(e)}),pc=po.StateEffect.define(),gc=po.StateField.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(fc))return n.value;if(n.is(pc)&&t)return new dc(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:[fo.EditorView.decorations.from(t=>t?t.deco:fo.Decoration.none)]});function mc(t){return({state:e,dispatch:n})=>{let r=e.field(gc,!1);if(!r||t<0&&0==r.active)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(e=>e.field==i+t);return n(e.update({selection:(o=r.ranges,l=i,po.EditorSelection.create(o.filter(t=>t.field==l).map(t=>po.EditorSelection.range(t.from,t.to)))),effects:fc.of(s?null:new dc(r.ranges,i))})),!0;var o,l}}var vc;Object(po.precedence)(Object(fo.keymap)([{key:"Tab",run:mc(1),shift:mc(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(gc,!1)&&(e(t.update({effects:fc.of(null)})),!0)}]),"override"),function(t){t[t.Start=0]="Start",t[t.Include=1]="Include",t[t.Fuzzy=2]="Fuzzy"}(vc||(vc={}));class yc{constructor(t,e,n,r,i){this.state=t,this.pos=e,this.explicit=n,this.filterType=r,this.caseSensitive=i}filter(t,e,n=this.caseSensitive){if(n||t!=t.toLowerCase()||(e=e.toLowerCase()),this.filterType==vc.Start)return t.slice(0,e.length)==e;if(this.filterType==vc.Include)return t.indexOf(e)>-1;for(let r=0,i=0;r<e.length;r++){let n=t.indexOf(e[r],i);if(n<0)return!1;i=n+1}return!0}tokenBefore(){let t=this.pos,e=null,n="",r=this.state.tree.resolve(this.pos,-1);return!r.firstChild&&r.start<this.pos&&(t=r.start,e=r.type,n=this.state.sliceDoc(t,this.pos)),{from:t,to:this.pos,text:n,type:e}}}function wc(t,e,n){if(!t.filterDownOn)return!1;let r=n?n.mapPos(t.to):t.to,i=e.selection.primary.head;return!(i<r||i>r+20)&&(i==r||t.filterDownOn.test(e.sliceDoc(r,i)))}function bc(t,e){let n=e.state.sliceDoc(t.from,e.pos);return{from:t.from,to:e.pos,options:t.options.filter(t=>e.filter(t.label,n)),filterDownOn:t.filterDownOn}}class Oc{constructor(t,e,n){this.sources=t,this.results=e,this.options=n}static create(t,e){let n=[];for(let r,i=0;i<e.length;i++)if(r=e[i])for(let t of r.options)n.push({completion:t,source:i});return new Oc(t,e,n.sort(({completion:{label:t}},{completion:{label:e}})=>t<e?-1:t==e?0:1))}get from(){return this.results.reduce((t,e)=>e?Math.min(t,e.from):t,1e9)}get to(){return this.results.reduce((t,e)=>e?Math.max(t,e.to):t,0)}map(t){return new Oc(this.sources,this.results.map(e=>e&&Object.assign(Object.assign({},e),{from:t.mapPos(e.from),to:t.mapPos(e.to)})),this.options)}refilterAll(t){let e=t.facet(xc),n=new yc(t,t.selection.primary.head,!1,e.filterType,e.caseSensitive);return Oc.create(this.sources,this.results.map(t=>t&&bc(t,n)))}}const xc=po.Facet.define({combine:t=>Object(po.combineConfig)(t,{activateOnTyping:!0,override:null,filterType:vc.Start,caseSensitive:!1})});function Sc(t,e){return n=>{let r=n.state.field(Mc);if(!(r instanceof Qc)||Date.now()-r.timeStamp<kc)return!1;let i,s=1;"page"==e&&(i=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(s=Math.max(2,Math.floor(i.offsetHeight/i.firstChild.offsetHeight)));let o=r.selected+s*("up"==t?-1:1),{length:l}=r.result.options;return o<0?o="page"==e?0:l-1:o>=l&&(o="page"==e?l-1:0),n.dispatch({effects:Ec.of(o)}),!0}}const kc=75;function Cc(t){let e=t.state.field(Mc);return e instanceof Qc&&!(Date.now()-e.timeStamp<kc)&&(_c(t,e.result,e.selected),!0)}function _c(t,e,n){let r=e.options[n],i=r.completion.apply||r.completion.label,s=e.results[r.source];"string"==typeof i?t.dispatch({changes:{from:s.from,to:s.to,insert:i},selection:{anchor:s.from+i.length}}):i(t,s,r.completion)}const Tc=[{key:"Mod-Space",run:t=>{let e=t.state.field(Mc,!1);return!(void 0===e||e instanceof Qc||e instanceof Rc&&e.explicit||(t.dispatch({effects:Ac.of(!0)}),0))}},{key:"Escape",run:t=>null!=t.state.field(Mc,!1)&&(t.dispatch({effects:Ac.of(!1)}),!0)}],Pc=po.StateEffect.define(),Ac=po.StateEffect.define(),Ec=po.StateEffect.define(),Mc=po.StateField.define({create:()=>null,update(t,e){let n=e.annotation(po.Transaction.userEvent);if("input"==n&&t instanceof Qc&&t.result.results.every(t=>!t||wc(t,e.state,e.changes))){let n=t.result.map(e.changes).refilterAll(e.state);t=n.options.length?new Qc(n,0,t.timeStamp):null}else"input"==n&&(t||e.state.facet(xc).activateOnTyping)||"delete"==n&&t?t=new Rc(t instanceof Qc?t:t instanceof Rc?t.prev:null,t instanceof Rc&&t.explicit):t&&(e.selection||e.docChanged&&function(t,e){return e instanceof Qc?t.changes.touchesRange(e.result.from,e.result.to):t.changes.touchesRange(t.state.selection.primary.head)}(e,t))?t=null:e.docChanged&&t instanceof Qc&&(t=new Qc(t.result.map(e.changes),t.selected,t.timeStamp));for(let r of e.effects)r.is(Pc)?t=new Qc(r.value,0):r.is(Ac)?t=r.value?new Rc(null,!0):null:r.is(Ec)&&t instanceof Qc&&(t=new Qc(t.result,r.value,t.timeStamp,t.id,t.tooltip));return t},provide:[cc.showTooltip.nFrom(t=>t instanceof Qc?t.tooltip:Ic),fo.EditorView.contentAttributes.from(t=>t instanceof Qc?t.attrs:Dc)]}),Dc={"aria-autocomplete":"list"},Ic=[];class Qc{constructor(t,e,n=Date.now(),r="cm-ac-"+Math.floor(1679616*Math.random()).toString(36),i=[{pos:t.from,style:"autocomplete",create:Lc(t,r)}]){this.result=t,this.selected=e,this.timeStamp=n,this.id=r,this.tooltip=i,this.attrs={"aria-autocomplete":"list","aria-activedescendant":this.id+"-"+this.selected,"aria-owns":this.id}}}class Rc{constructor(t,e){this.prev=t,this.explicit=e}}function Lc(t,e){return n=>{let r=function(t,e){const n=document.createElement("ul");n.id=e,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true");for(let r=0;r<t.options.length;r++){let{completion:i}=t.options[r];const s=n.appendChild(document.createElement("li"));s.id=e+"-"+r,s.appendChild(document.createElement("div")).className=Object(fo.themeClass)("completionIcon"+(i.type?"."+i.type:"")),s.appendChild(document.createTextNode(i.label)),s.setAttribute("role","option")}return n}(t,e);function i(t){let e=t.state.field(Mc);e instanceof Qc&&function(t,e){let n=null;for(let r=t.firstChild,i=0;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");n&&function(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}(t,n)}(r,e.selected)}return r.addEventListener("click",e=>{let r=0,i=e.target;for(;i=i.previousSibling,i;)r++;r<t.options.length&&_c(n,t,r)}),{dom:r,mount:i,update(t){t.state.field(Mc)!=t.prevState.field(Mc)&&i(t.view)}}}}fo.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.stateVersion=0,this.debounce=-1}update(t){if(!t.docChanged&&!t.selectionSet&&t.prevState.field(Mc)==t.state.field(Mc))return;(t.docChanged||t.selectionSet)&&this.stateVersion++,this.debounce>-1&&clearTimeout(this.debounce);const e=t.state.field(Mc);this.debounce=e instanceof Rc?setTimeout(()=>this.startUpdate(e),100):-1}startUpdate(t){this.debounce=-1;let{view:e,stateVersion:n}=this;(function(t,e){let n=t.facet(xc),r=t.selection.primary.head,i=n.override?[n.override]:t.languageDataAt("autocomplete",r),s=new yc(t,r,e.explicit,n.filterType,n.caseSensitive);return Promise.all(i.map(n=>{let r=e.prev?e.prev.result.sources.indexOf(n):-1,i=r<0?null:e.prev.result.results[r];return i&&wc(i,t)&&bc(i,s)||n(s)})).then(t=>Oc.create(i,t))})(e.state,t).then(t=>{this.stateVersion==n&&e.dispatch({effects:0==t.options.length?Ac.of(!1):Pc.of(t)})}).catch(t=>{e.dispatch({effects:Ac.of(!1)}),Object(fo.logException)(e.state,t)})}});const Nc=[{key:"Mod-/",run:t=>$c(Hc(Vc.Toggle),t)},{key:"Alt-A",run:t=>$c(Fc(Vc.Toggle),t)}];function $c(t,e){const n=t(e.state);return!!n&&(e.dispatch(n),!0)}var Vc;function jc(t,e=t.selection.primary.head){return t.languageDataAt("commentTokens",e)[0]||{}}!function(t){t[t.Toggle=0]="Toggle",t[t.OnlyComment=1]="OnlyComment",t[t.OnlyUncomment=2]="OnlyUncomment"}(Vc||(Vc={}));const Fc=t=>e=>{const n=jc(e);return n.block?new Bc(n.block.open,n.block.close).toggle(t,e):null},Hc=t=>e=>{const n=jc(e);return n.line?new qc(n.line).toggle(t,e):null};class Bc{constructor(t,e,n=" "){this.open=t,this.close=e,this.margin=n}toggle(t,e){const n=this.isSelectionCommented(e);if(null!==n){if(t!==Vc.OnlyComment)return e.update({changes:n.map(({open:t,close:e})=>[{from:t.pos-this.open.length,to:t.pos+t.margin},{from:e.pos-e.margin,to:e.pos+this.close.length}])})}else if(t!==Vc.OnlyUncomment)return e.update(e.changeByRange(t=>{const e=(this.open+this.margin).length;return{changes:[{from:t.from,insert:this.open+this.margin},{from:t.to,insert:this.margin+this.close}],range:po.EditorSelection.range(t.anchor+e,t.head+e)}}));return null}isSelectionCommented(t){let e=[];for(const n of t.selection.ranges){const r=this.isRangeCommented(t,n);if(null===r)return null;e.push(r)}return e}isRangeCommented(t,e){let n,r,i=t.sliceDoc(e.from-zc,e.from),s=t.sliceDoc(e.to,e.to+zc),o=/\s*$/.exec(i)[0].length,l=/^\s*/.exec(s)[0].length,a=i.length-o;if(i.slice(a-this.open.length,a)==this.open&&s.slice(l,l+this.close.length)==this.close)return{open:{pos:e.from-o,margin:o&&1},close:{pos:e.to+l,margin:l&&1}};e.to-e.from<=2*zc?n=r=t.sliceDoc(e.from,e.to):(n=t.sliceDoc(e.from,e.from+zc),r=t.sliceDoc(e.to-zc,e.to));let c=/^\s*/.exec(n)[0].length,h=/\s*$/.exec(r)[0].length,u=r.length-h-this.close.length;return n.slice(c,c+this.open.length)==this.open&&r.slice(u,u+this.close.length)==this.close?{open:{pos:e.from+c+this.open.length,margin:/\s/.test(n.charAt(c+this.open.length))?1:0},close:{pos:e.to-h-this.close.length,margin:/\s/.test(r.charAt(u-1))?1:0}}:null}}const zc=50;class qc{constructor(t,e=" "){this.lineCommentToken=t,this.margin=e}toggle(t,e){const n=[],r={};for(let s=0;s<e.selection.ranges.length;s++){const t=Uc(e.doc,e.selection.ranges[s]);n.push(...t),r[s]=t}const i=this.isRangeCommented(e,n);if(i.isRangeLineSkipped){if(t!=Vc.OnlyComment){let t=[];for(let n=0;n<e.selection.ranges.length;n++){const e=r[n];for(const n of e){if(e.length>1&&i.isLineSkipped[n.number])continue;const r=n.from+i.minCol,s=i.minCol+this.lineCommentToken.length,o=" "==n.slice(s,s+1)?1:0;t.push({from:r,to:r+this.lineCommentToken.length+o})}}return e.update({changes:t})}}else if(t!=Vc.OnlyUncomment){let t=[];for(let n=0;n<e.selection.ranges.length;n++){const e=r[n];for(const n of e)(e.length<=1||!i.isLineSkipped[n.number])&&t.push({from:n.from+i.minCol,insert:this.lineCommentToken+this.margin})}return e.update({changes:t})}return null}isRangeCommented(t,e){let n=1/0,r=!0;const i=[];for(const s of e){const t=s.slice(0,Math.min(s.length,zc)),o=/^\s*/.exec(t)[0].length;(1==e.length||o<t.length)&&o<n&&(n=o),r&&(1==e.length||o<t.length)&&t.slice(o,o+this.lineCommentToken.length)!=this.lineCommentToken&&(r=!1),i[s.number]=o==t.length}return{minCol:n,isRangeLineSkipped:r,isLineSkipped:i}}}function Uc(t,e){let n=t.lineAt(e.from);const r=[];for(;(n.from+n.length<e.to||n.from<=e.to&&e.to<=n.to)&&(r.push(n),n.number+1<=t.lines);)n=t.line(n.number+1);return r}function Wc(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY}),r=t.state.doc.lineAt(n),i=n-r.from,s=i>2e3?-1:i==r.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):Object(yl.d)(r.slice(0,n-r.from),0,t.state.tabSize);return{line:r.number,col:s,off:i}}function Xc(t){let e=t||(t=>t.altKey&&0==t.button);return fo.EditorView.mouseSelectionStyle.of((t,n)=>e(n)?function(t,e){let n=Wc(t,e),r=t.state.selection;return{update(t){if(t.docChanged){let e=t.changes.mapPos(t.prevState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(t.changes)}},get(e,i,s){let o=Wc(t,e),l=function(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>2e3||n.off>2e3||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let e=r;e<=i;e++){let n=t.doc.line(e);n.length<=l&&s.push(po.EditorSelection.range(n.from+o,n.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let e=r;e<=i;e++){let n=t.doc.line(e),r=n.length>2e3?n.slice(0,2*l):n.slice(),i=Object(yl.e)(r,0,o,t.tabSize),a=Object(yl.e)(r,0,l,t.tabSize);i.leftOver||s.push(po.EditorSelection.range(n.from+i.offset,n.from+a.offset))}}return s}(t.state,n,o);return l.length?po.EditorSelection.create(s?l.concat(r.ranges):l):r}}}(t,n):null)}const Gc="undefined"==typeof Symbol?"__goto-line":Symbol("goto-line");function Zc(t){let e=document.createElement("form");e.innerHTML=`<label>${t.state.phrase("Go to line:")} <input class=${Object(fo.themeClass)("textfield")} name=line></label>\n<button class=${Object(fo.themeClass)("button")} type=submit>${t.state.phrase("go")}</button>`;let n=e.querySelector("input");function r(){let e=parseInt(n.value,10);t.dispatch({reconfigure:{[Gc]:[Yc]},selection:!isNaN(e)&&e>0&&e<=t.state.doc.lines?po.EditorSelection.cursor(t.state.doc.line(e).from):void 0,scrollIntoView:!0}),t.focus()}return e.addEventListener("keydown",e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({reconfigure:{append:[Yc]}}),t.focus()):13==e.keyCode&&(e.preventDefault(),r())}),e.addEventListener("submit",r),{dom:e,style:"gotoLine",pos:-10}}const Yc=fo.EditorView.baseTheme({"panel.gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Kc=[{key:"Alt-g",run:t=>{let e=Object(Qa.a)(t,Zc);return e||(t.dispatch({reconfigure:{append:[Object(Qa.b)(),Qa.c.of(Zc),Yc]}}),e=Object(Qa.a)(t,Zc)),e&&e.dom.querySelector("input").focus(),!0}}];function Jc(){return[ah,eh]}const th=fo.Decoration.line({attributes:{class:Object(fo.themeClass)("activeLine")}}),eh=fo.ViewPlugin.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){if(!r.empty)continue;let i=t.visualLineAt(r.head);i.from>e&&(n.push(th.range(i.from)),e=i.from)}return fo.Decoration.set(n)}}).decorations(),nh={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},rh=po.Facet.define({combine:t=>Object(po.combineConfig)(t,nh,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function ih(t){let e=[ah,lh];return t&&e.push(rh.of(t)),e}const sh=fo.Decoration.mark({class:Object(fo.themeClass)("selectionMatch")}),oh=fo.Decoration.mark({class:Object(fo.themeClass)("selectionMatch.main")}),lh=fo.ViewPlugin.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(rh),{state:n}=t,r=n.selection;if(r.ranges.length>1)return fo.Decoration.none;let i,s=r.primary,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return fo.Decoration.none;if(o=n.charCategorizer(s.head),i=function(t,e,n){let r=t.lineAt(e),i=e-r.from,s=e-r.from;for(;i>0;){let t=r.findClusterBreak(i,!1);if(n(r.slice(t,i))!=po.CharCategory.Word)break;i=t}for(;s<r.length;){let t=r.findClusterBreak(s,!0);if(n(r.slice(s,t))!=po.CharCategory.Word)break;s=t}return i==s?null:r.slice(i,s)}(n.doc,s.head,o),!i)return fo.Decoration.none}else{let t=s.to-s.from;if(t<e.minSelectionLength||t>200)return fo.Decoration.none;if(i=n.sliceDoc(s.from,s.to).trim(),!i)return fo.Decoration.none}let l=[];for(let a of t.visibleRanges){let t=new La(n.doc,i,a.from,a.to);for(;!t.next().done;){let{from:r,to:i}=t.value;if((!o||(0==r||o(n.sliceDoc(r-1,r))!=po.CharCategory.Word)&&(i==n.doc.length||o(n.sliceDoc(i,i+1))!=po.CharCategory.Word))&&(o&&r<=s.from&&i>=s.to?l.push(oh.range(r,i)):(r>=s.to||i<=s.from)&&l.push(sh.range(r,i)),l.length>e.maxMatches))return fo.Decoration.none}}return fo.Decoration.set(l)}}).decorations(),ah=fo.EditorView.baseTheme({"activeLine@light":{backgroundColor:"#e8f2ff"},"activeLine@dark":{backgroundColor:"#223039"},selectionMatch:{backgroundColor:"#cfb"}});var ch=n("mmpu"),hh=n("jcaT");Ko(),Object(fo.highlightSpecialChars)(),function(t={}){yo.of(t)}(),ml(),Object(fo.multipleSelections)(),Object(fo.indentOnInput)(),Cl(),ka(),function(t={}){xc.of(t),Object(cc.tooltips)(),Object(po.precedence)(Object(fo.keymap)([{key:"ArrowDown",run:Sc("down")},{key:"ArrowUp",run:Sc("up")},{key:"PageDown",run:Sc("down","page")},{key:"PageUp",run:Sc("up","page")},{key:"Enter",run:Cc}]),"override")}(),Xc(),Jc(),ih(),Object(fo.keymap)([...Pa,...xa,...nc,...Ro,...cl,...Nc,...Kc,...Tc,...hh.lintKeymap]);var uh=n("f7Ao"),dh=n("lf1/");let fh=(()=>{class t{constructor(){this.basicSetup=[Ko(),Object(fo.highlightSpecialChars)(),ml(),Object(fo.multipleSelections)(),Cl(),ka(),Object(dh.autocomplete)({matchPre:'<b style="color: brown">',matchPost:"</b>"}),Xc(),Jc(),ih(),Object(fo.keymap)([...Pa,...xa,...nc,...cl,...Nc,...Kc,...dh.autocompleteKeymap,...hh.lintKeymap])],this.promQLHighlightMaterialTheme=Object(ch.highlighter)({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},invalid:{color:"#f00"},keyword:{color:"#C792EA"},operator:{color:"#89DDFF"},atom:{color:"#F78C6C"},number:{color:"#FF5370"},string:{color:"#99b867"},"regexp, escape":{color:"#e40"},"variableName definition":{color:"#f07178"},labelName:{color:"#f07178"},typeName:{color:"#085"},functionName:{color:"#C792EA"},"propertyName definition":{color:"#00c"},comment:{color:"#546E7A"},meta:{color:"#FFCB6B"}})}ngOnInit(){const t=new uh.PromQLExtension;new fo.EditorView({state:po.EditorState.create({extensions:[this.basicSetup,t.asExtension(),this.promQLHighlightMaterialTheme]}),parent:document.getElementById("editor")})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=(e={type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","editor"]],template:function(t,e){1&t&&(Wr(0,"h3"),function(t,e=""){const n=ge(),r=me(),i=t+19,s=r.firstCreatePass?Dn(r,n[6],t,3,null,null):r.data[i],o=n[i]=function(t,e){return ie(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);pr(r,n,o,s),ye(s,!1)}(1,"CodeMirror Mode PromQL"),Xr(),Wr(2,"div",0,void 0),Xr())},styles:[""]},B(()=>{const t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===jt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Bt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ft.Emulated,id:"c",styles:e.styles||Bt,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,o=e.features,l=e.pipes;return i.id+=zt++,i.inputs=Gt(e.inputs,r),i.outputs=Gt(e.outputs),o&&o.forEach(t=>t(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(qt):null,i.pipeDefs=l?()=>("function"==typeof l?l():l).map(Ut):null,i})),t;var e})(),ph=(()=>{class t{}return t.\u0275mod=Xt({type:t,bootstrap:[fh]}),t.\u0275inj=K({factory:function(e){return new(e||t)},providers:[],imports:[[uo]]}),t})();(function(){if(fn)throw new Error("Cannot enable prod mode after platform setup.");dn=!1})(),co().bootstrapModule(ph).catch(t=>console.error(t))},zlqw:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return l}));var r=n("3Yt4"),i=n("dC2d");const s=i.Facet.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function o(t){let e=[c,f];return t&&e.push(s.of(t)),e}const l=i.Facet.define();function a(t,e){let n=t.plugin(c),r=t.state.facet(l).indexOf(e);return n&&r>-1?n.panels[r]:null}const c=r.ViewPlugin.fromClass(class{constructor(t){this.specs=t.state.facet(l),this.panels=this.specs.map(e=>e(t));let e=t.state.facet(s);this.top=new u(t,!0,e.topContainer),this.bottom=new u(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let n of this.panels)n.dom.className+=" "+h(n),n.mount&&n.mount()}update(t){let e=t.state.facet(s);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new u(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new u(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(l);if(n!=this.specs){let e=[],r=[],i=[],s=[];for(let o of n){let n,l=this.specs.indexOf(o);l<0?(n=o(t.view),s.push(n)):(n=this.panels[l],n.update&&n.update(t)),e.push(n),(n.top?r:i).push(n)}this.specs=n,this.panels=e,this.top.sync(r),this.bottom.sync(i);for(let t of s)t.dom.className+=" "+h(t),t.mount&&t.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}}).provide(r.PluginField.scrollMargins,t=>({top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}));function h(t){return Object(r.themeClass)(t.style?`panel.${t.style}`:"panel")}class u{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=Object(r.themeClass)(this.top?"panels.top":"panels.bottom"),this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=d(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=d(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-this.view.scrollDOM.getBoundingClientRect().top:this.view.scrollDOM.getBoundingClientRect().bottom-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function d(t){let e=t.nextSibling;return t.remove(),e}const f=r.EditorView.baseTheme({panels:{boxSizing:"border-box",position:"sticky",left:0,right:0},"panels@light":{backgroundColor:"#f5f5f5",color:"black"},"panels.top@light":{borderBottom:"1px solid silver"},"panels.bottom@light":{borderTop:"1px solid silver"},"panels@dark":{backgroundColor:"#333338",color:"white"}})},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);