function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"2SVd":function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"3Yt4":function(e,t,n){"use strict";n.r(t),n.d(t,"Range",(function(){return o.a})),n.d(t,"BidiSpan",(function(){return Ee})),n.d(t,"BlockInfo",(function(){return Ve})),n.d(t,"BlockType",(function(){return J})),n.d(t,"Decoration",(function(){return re})),n.d(t,"Direction",(function(){return ge})),n.d(t,"EditorView",(function(){return un})),n.d(t,"PluginField",(function(){return it})),n.d(t,"ViewPlugin",(function(){return st})),n.d(t,"ViewUpdate",(function(){return gt})),n.d(t,"WidgetType",(function(){return ne})),n.d(t,"__test",(function(){return Bn})),n.d(t,"highlightSpecialChars",(function(){return Hn})),n.d(t,"keymap",(function(){return bn})),n.d(t,"logException",(function(){return nt})),n.d(t,"multipleSelections",(function(){return xn})),n.d(t,"runScopeHandlers",(function(){return wn})),n.d(t,"themeClass",(function(){return ve}));for(var r=n("dC2d"),i=n("rknV"),o=n("jvbj"),a=n("euHR"),s={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},u="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),c="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),h="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),d="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=u&&(f||+u[1]<57)||h&&f,v=0;v<10;v++)s[48+v]=s[96+v]=String(v);for(v=1;v<=24;v++)s[v+111]="F"+v;for(v=65;v<=90;v++)s[v]=String.fromCharCode(v+32),l[v]=String.fromCharCode(v);for(var g in s)l.hasOwnProperty(g)||(l[g]=s[g]);var m=_slicedToArray("undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],2),y=m[0],k=m[1],b=/Edge\/(\d+)/.exec(y.userAgent),w=/MSIE \d/.test(y.userAgent),_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(y.userAgent),C=!!(w||_||b),O=!C&&/gecko\/(\d+)/i.test(y.userAgent),S=!C&&/Chrome\/(\d+)/.exec(y.userAgent),x="webkitFontSmoothing"in k.documentElement.style,A={mac:/Mac/.test(y.platform),ie:C,ie_version:w?k.documentMode||6:_?+_[1]:b?+b[1]:0,gecko:O,gecko_version:O?+(/Firefox\/(\d+)/.exec(y.userAgent)||[0,0])[1]:0,chrome:!!S,chrome_version:S?+S[1]:0,ios:!C&&/AppleWebKit/.test(y.userAgent)&&/Mobile\/\w+/.test(y.userAgent),android:/Android\b/.test(y.userAgent),webkit:x,safari:/Apple Computer/.test(y.vendor),webkit_version:x?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=k.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function P(e){return e.getSelection?e.getSelection():document.getSelection()}function T(e,t){if(!t.anchorNode)return!1;try{return e.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)}catch(n){return!1}}function E(e){if(3==e.nodeType){var t=document.createRange();return t.setEnd(e,e.nodeValue.length),t.setStart(e,0),t.getClientRects()}return 1==e.nodeType?e.getClientRects():[]}function I(e,t,n,r){return!!n&&(D(e,t,n,r,-1)||D(e,t,n,r,1))}function M(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function D(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:R(e))){if("DIV"==e.nodeName)return!1;var o=e.parentNode;if(!o||1!=o.nodeType)return!1;t=M(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(i<0?-1:0)],t=i<0?R(e):0}}}function R(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function F(e,t){var n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function H(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}var N=function(){function e(){_classCallCheck(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return _createClass(e,[{key:"eq",value:function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}},{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}}]),e}(),L=null;function j(e){if(e.setActive)return e.setActive();if(L)return e.focus(L);for(var t=[],n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==L?{get preventScroll(){return L={preventScroll:!0},!0}}:void 0),!L){L=!1;for(var r=0;r<t.length;){var i=t[r++],o=t[r++],a=t[r++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=a&&(i.scrollLeft=a)}}}var V=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,e),this.node=t,this.offset=n,this.precise=r}return _createClass(e,null,[{key:"before",value:function(t,n){return new e(t.parentNode,M(t),n)}},{key:"after",value:function(t,n){return new e(t.parentNode,M(t)+1,n)}}]),e}(),q=[],B=function(){function e(){_classCallCheck(this,e),this.parent=null,this.dom=null,this.dirty=2}return _createClass(e,[{key:"posBefore",value:function(e){var t,n=this.posAtStart,r=_createForOfIteratorHelper(this.children);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i==e)return n;n+=i.length+i.breakAfter}}catch(o){r.e(o)}finally{r.f()}throw new RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(e){return this.posBefore(e)+e.length}},{key:"coordsAt",value:function(e,t){return null}},{key:"sync",value:function(t){if(2&this.dirty){var n,r=this.dom,i=null,o=_createForOfIteratorHelper(this.children);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.dirty){var s=i?i.nextSibling:r.firstChild;!s||a.dom||e.get(s)||a.reuseDOM(s),a.sync(t),a.dirty=0}t&&t.node==r&&i!=a.dom&&(t.written=!0),X(r,i,a.dom),i=a.dom}}catch(f){o.e(f)}finally{o.f()}var l=i?i.nextSibling:r.firstChild;for(l&&t&&t.node==r&&(t.written=!0);l;)l=z(l)}else if(1&this.dirty){var u,c=_createForOfIteratorHelper(this.children);try{for(c.s();!(u=c.n()).done;){var h=u.value;h.dirty&&(h.sync(t),h.dirty=0)}}catch(f){c.e(f)}finally{c.f()}}}},{key:"reuseDOM",value:function(e){return!1}},{key:"localPosFromDOM",value:function(t,n){var r;if(t==this.dom)r=this.dom.childNodes[n];else{for(var i=0==R(t)?0:0==n?-1:1;;){var o=t.parentNode;if(o==this.dom)break;0==i&&o.firstChild!=o.lastChild&&(i=t==o.firstChild?-1:1),t=o}r=i<0?t:t.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!e.get(r);)r=r.nextSibling;if(!r)return this.length;for(var a=0,s=0;;a++){var l=this.children[a];if(l.dom==r)return s;s+=l.length+l.breakAfter}}},{key:"domBoundsAround",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=-1,o=-1,a=-1,s=0,l=n;s<this.children.length;s++){var u=this.children[s],c=l+u.length;if(l<e&&c>t)return u.domBoundsAround(e,t,l);if(c>=e&&-1==r&&(r=s,i=l),c>=t&&-1==o){o=s,a=c;break}l=c+u.breakAfter}return{from:i,to:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length-1?this.children[o+1].dom:null}}},{key:"markDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];2&this.dirty||(this.dirty|=2,this.markParentsDirty(e))}},{key:"markParentsDirty",value:function(e){for(var t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}},{key:"setParent",value:function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(e){this.dom=e,e.cmView=this}},{key:"replaceChildren",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;this.markDirty();for(var i=e;i<t;i++)this.children[i].parent=null;(n=this.children).splice.apply(n,[e,t-e].concat(_toConsumableArray(r)));for(var o=0;o<r.length;o++)r[o].setParent(this)}},{key:"ignoreMutation",value:function(e){return!1}},{key:"ignoreEvent",value:function(e){return!1}},{key:"childCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new U(this.children,e,this.children.length)}},{key:"childPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}},{key:"toString",value:function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"editorView",get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"rootView",get:function(){for(var e=this;;){var t=e.parent;if(!t)return e;e=t}}}],[{key:"get",value:function(e){return e.cmView}}]),e}();function z(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}function X(e,t,n){var r=t?t.nextSibling:e.firstChild;if(n.parentNode==e)for(;r!=n;)r=z(r);else e.insertBefore(n,r)}B.prototype.breakAfter=0;var U=function(){function e(t,n,r){_classCallCheck(this,e),this.children=t,this.pos=n,this.i=r,this.off=0}return _createClass(e,[{key:"findPos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}]),e}();function W(e,t){for(var n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Q(e,t){if(e==t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0,o=n;i<o.length;i++){var a=o[i];if(-1==r.indexOf(a)||e[a]!==t[a])return!1}return!0}function Z(e,t,n){if(t)for(var r in t)n&&r in n||e.removeAttribute(r);if(n)for(var i in n)t&&t[i]==n[i]||e.setAttribute(i,n[i])}var G=[],$=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"match",value:function(e){return!1}},{key:"getSide",value:function(){return 0}},{key:"children",get:function(){return G}}]),n}(B),Y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).text=e,a.tagName=r,a.attrs=o,a.textDOM=null,a.class=i,a}return _createClass(n,[{key:"createDOM",value:function(e){var t=this.tagName||(this.attrs||this.class?"span":null);if(this.textDOM=e||document.createTextNode(this.text),t){var n=document.createElement(t);if(n.appendChild(this.textDOM),this.class&&(n.className=this.class),this.attrs)for(var r in this.attrs)n.setAttribute(r,this.attrs[r]);this.setDOM(n)}else this.setDOM(this.textDOM)}},{key:"sync",value:function(e){if(this.dom||this.createDOM(),this.textDOM.nodeValue!=this.text){e&&e.node==this.textDOM&&(e.written=!0),this.textDOM.nodeValue=this.text;var t=this.dom;if(this.textDOM!=t&&(this.dom.firstChild!=this.textDOM||t.lastChild!=this.textDOM)){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(this.textDOM)}}}},{key:"reuseDOM",value:function(e){return 3==e.nodeType&&(this.createDOM(e),!0)}},{key:"merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!(r&&(!(r instanceof n&&r.tagName==this.tagName&&r.class==this.class&&Q(r.attrs,this.attrs))||this.length-(t-e)+r.length>256)||(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),0))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new n(this.text.slice(e,t),this.tagName,this.class,this.attrs)}},{key:"localPosFromDOM",value:function(e,t){return e==this.textDOM?t:t?this.text.length:0}},{key:"domAtPos",value:function(e){return new V(this.textDOM,e)}},{key:"domBoundsAround",value:function(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(e,t){return K(this.textDOM,e,t,this.length)}},{key:"length",get:function(){return this.text.length}}]),n}($);function K(e,t,n,r){var i=t,o=t,a=0;0==t&&n<0||t==r&&n>=0?A.chrome||A.gecko||(t?(i--,a=1):(o++,a=-1)):n<0?i--:o++;var s=document.createRange();s.setEnd(e,o),s.setStart(e,i);var l=s.getBoundingClientRect();return a?F(l,a<0):l}var J,ee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).widget=e,a.length=r,a.side=i,a.open=o,a}return _createClass(n,[{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return n.create(this.widget,t-e,this.side)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r){if(!(r instanceof n)||!r.open||e>0&&!(1&r.open)||t<this.length&&!(2&r.open))return!1;if(!this.widget.compare(r.widget))throw new Error("Trying to merge incompatible widgets")}return this.length=e+(r?r.length:0)+(this.length-t),!0}},{key:"match",value:function(e){return e.length==this.length&&e instanceof n&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget.value)||this.markDirty(!0),this.widget=e.widget,!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(e){return this.widget.ignoreEvent(e)}},{key:"domAtPos",value:function(e){return 0==e?V.before(this.dom):V.after(this.dom,e==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(e,t){for(var n=this.dom.getClientRects(),r=null,i=e>0?n.length-1:0;r=n[i],!(e>0?0==i:i==n.length-1||r.top<r.bottom);i+=e>0?-1:1);return r}},{key:"overrideDOMText",get:function(){if(0==this.length)return a.a.empty;for(var e=this;e.parent;)e=e.parent;var t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):a.a.empty}}],[{key:"create",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new(e.customView||n)(e,t,r,i)}}]),n}($),te=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"domAtPos",value:function(e){return new V(this.widget.value.text,e)}},{key:"sync",value:function(){this.dom||this.setDOM(this.widget.toDOM(this.editorView))}},{key:"localPosFromDOM",value:function(e,t){return t?3==e.nodeType?Math.min(t,this.length):this.length:0}},{key:"ignoreMutation",value:function(){return!1}},{key:"coordsAt",value:function(e,t){return K(this.widget.value.text,e,t,this.length)}},{key:"overrideDOMText",get:function(){return null}}]),n}(ee),ne=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"eq",value:function(e){return this.value===e}},{key:"updateDOM",value:function(e){return!1}},{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e.value)}},{key:"ignoreEvent",value:function(e){return!0}},{key:"estimatedHeight",get:function(){return-1}},{key:"customView",get:function(){return null}}]),e}();!function(e){e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange"}(J||(J={}));var re=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).startSide=e,a.endSide=r,a.widget=i,a.spec=o,a}return _createClass(n,[{key:"hasHeight",value:function(){return!!this.widget&&this.widget.estimatedHeight>-1}},{key:"point",get:function(){return!1}},{key:"heightRelevant",get:function(){return!1}}],[{key:"mark",value:function(e){return new ie(e)}},{key:"widget",value:function(e){var t=e.side||0;return e.block&&(t+=200000001*(t>0?1:-1)),new ae(e,t,t,!!e.block,e.widget||null,!1)}},{key:"replace",value:function(e){var t=!!e.block,n=se(e),r=n.start,i=n.end;return new ae(e,t?-2e8*(r?2:1):1e8*(r?-1:1),t?2e8*(i?2:1):1e8*(i?1:-1),t,e.widget||null,!0)}},{key:"line",value:function(e){return new oe(e)}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.b.of(e,t)}}]),n}(o.d);re.none=o.b.empty;var ie=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var r=se(e),i=r.start,o=r.end;return t.call(this,1e8*(i?-1:1),1e8*(o?1:-1),null,e)}return _createClass(n,[{key:"eq",value:function(e){return this==e||e instanceof n&&this.spec.tagName==e.spec.tagName&&this.spec.class==e.spec.class&&Q(this.spec.attributes||null,e.spec.attributes||null)}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return _get(_getPrototypeOf(n.prototype),"range",this).call(this,e,t)}}]),n}(re),oe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,-1e8,-1e8,null,e)}return _createClass(n,[{key:"eq",value:function(e){return e instanceof n&&Q(this.spec.attributes,e.spec.attributes)}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return _get(_getPrototypeOf(n.prototype),"range",this).call(this,e,t)}},{key:"point",get:function(){return!0}}]),n}(re);oe.prototype.mapMode=r.MapMode.TrackBefore;var ae=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,a,s,l){var u;return _classCallCheck(this,n),(u=t.call(this,i,o,s,e)).block=a,u.isReplace=l,u.mapMode=a?i<0?r.MapMode.TrackBefore:r.MapMode.TrackAfter:r.MapMode.TrackDel,u}return _createClass(n,[{key:"eq",value:function(e){return e instanceof n&&((t=this.widget)==(r=e.widget)||!!(t&&r&&t.compare(r)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,r}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return _get(_getPrototypeOf(n.prototype),"range",this).call(this,e,t)}},{key:"point",get:function(){return!0}},{key:"type",get:function(){return this.startSide<this.endSide?J.WidgetRange:this.startSide<0?J.WidgetBefore:J.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}}]),n}(re);function se(e){var t=e.inclusiveStart,n=e.inclusiveEnd;return null==t&&(t=e.inclusive),null==n&&(n=e.inclusive),{start:t||!1,end:n||!1}}function le(e,t,n){var r=n.length-1;r>=0&&n[r]+4>e?n[r]=Math.max(n[r],t):n.push(e,t)}var ue=r.Facet.define({combine:function(e){return e.join(" ")}}),ce=r.Facet.define({combine:function(e){return e.indexOf(!0)>-1}}),he=i.a.newName(),fe=i.a.newName(),de=i.a.newName();function pe(e,t){var n=Object.create(null);for(var r in t)n[r.split(/\s*,\s*/).map((function(t){var n,r=e;r==he&&(n=/^(.*?)@(light|dark)$/.exec(t))&&(r="dark"==n[2]?de:fe,t=n[1]);for(var i=t.split("."),o="."+r+("wrap"==i[0]?"":" "),a=1;a<=i.length;a++)o+=".cm-"+i.slice(0,a).join("-");return o})).join(", ")]=t[r];return new i.a(n,{generateClasses:!1})}function ve(e){for(var t=e.split("."),n="",r=1;r<=t.length;r++)n+=(n?" ":"")+"cm-"+t.slice(0,r).join("-");return n}var ge,me=pe(he,{wrap:{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto"},content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"content@light":{caretColor:"black"},"content@dark":{caretColor:"white"},line:{display:"block",padding:"0 2px 0 4px"},button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"button@light":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"button@dark":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"textfield@light":{backgroundColor:"white"},"textfield@dark":{border:"1px solid #555",backgroundColor:"inherit"},secondarySelection:{backgroundColor_fallback:"#3297FD",color_fallback:"white !important",backgroundColor:"Highlight",color:"HighlightText !important"},secondaryCursor:{display:"inline-block",verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em"},"secondaryCursor@light":{borderLeft:"1.4px solid #555"},"secondaryCursor@dark":{borderLeft:"1.4px solid #ddd"}}),ye=ve("line"),ke=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).children=[],e.length=0,e.prevAttrs=void 0,e.attrs=null,e.breakAfter=0,e}return _createClass(n,[{key:"merge",value:function(e,t,r,i){if(r){if(!(r instanceof n))return!1;this.dom||r.transferDOM(this)}i&&this.setDeco(r?r.attrs:null);var o,a=r?r.children:[],s=this.childCursor(),l=s.findPos(t,1),u=l.i,c=l.off,h=s.findPos(e,-1),f=h.i,d=h.off,p=e-t,v=_createForOfIteratorHelper(a);try{for(v.s();!(o=v.n()).done;){p+=o.value.length}}catch(b){v.e(b)}finally{v.f()}if(this.length+=p,f==u&&d){var g=this.children[f];if(1==a.length&&g.merge(d,c,a[0]))return!0;if(0==a.length)return g.merge(d,c,null),!0;var m=g.slice(c);m.merge(0,0,a[a.length-1])?a[a.length-1]=m:a.push(m),u++,c=0}if(c){var y=this.children[u];a.length&&y.merge(0,c,a[a.length-1])?a.pop():y.merge(0,c,null)}else u<this.children.length&&a.length&&this.children[u].merge(0,0,a[a.length-1])&&a.pop();if(d){var k=this.children[f];a.length&&k.merge(d,void 0,a[0])?a.shift():k.merge(d,void 0,null),f++}else f&&a.length&&this.children[f-1].merge(this.children[f-1].length,void 0,a[0])&&a.shift();for(;f<u&&a.length&&this.children[u-1].match(a[a.length-1]);)a.pop(),u--;for(;f<u&&a.length&&this.children[f].match(a[0]);)a.shift(),f++;return(a.length||f!=u)&&this.replaceChildren(f,u,a),!0}},{key:"split",value:function(e){var t=new n;if(t.breakAfter=this.breakAfter,0==this.length)return t;var r=this.childPos(e),i=r.i,o=r.off;o&&(t.append(this.children[i].slice(o)),this.children[i].merge(o,void 0,null),i++);for(var a=i;a<this.children.length;a++)t.append(this.children[a]);for(;i>0&&0==this.children[i-1].length;)this.children[i-1].parent=null,i--;return this.children.length=i,this.markDirty(),this.length=e,t}},{key:"transferDOM",value:function(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(e){Q(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}},{key:"append",value:function(e){this.children.push(e),e.setParent(this),this.length+=e.length}},{key:"addLineDeco",value:function(e){var t=e.spec.attributes;t&&(this.attrs=W(t,this.attrs||{}))}},{key:"domAtPos",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.length;if(!(i==n&&r.getSide()<=0)){if(e>n&&e<i&&r.dom.parentNode==this.dom)return r.domAtPos(e-n);if(e<=n)break;n=i}}for(;t>0;t--){var o=this.children[t-1].dom;if(o.parentNode==this.dom)return V.after(o)}return new V(this.dom,0)}},{key:"sync",value:function(e){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=ye,this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Z(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(ye),this.prevAttrs=void 0),_get(_getPrototypeOf(n.prototype),"sync",this).call(this,e);var t=this.dom.lastChild;if(!t||"BR"!=t.nodeName&&!(B.get(t)instanceof Y)){var r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}},{key:"measureTextSize",value:function(){if(0==this.children.length||this.length>20)return null;var e,t=0,n=_createForOfIteratorHelper(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!(r instanceof Y))return null;var i=E(r.dom);if(1!=i.length)return null;t+=i[0].width}}catch(o){n.e(o)}finally{n.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}}},{key:"coordsAt",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.length;if(o!=n&&(t<=0||o==this.length?o>=e:o>e))return i.coordsAt(e-n,t);n=o}return this.dom.lastChild.getBoundingClientRect()}},{key:"match",value:function(e){return!1}},{key:"type",get:function(){return J.Text}}],[{key:"find",value:function(e,t){for(var r=0,i=0;;r++){var o=e.children[r],a=i+o.length;if(a>=t){if(o instanceof n)return o;if(o.length)return null}i=a+o.breakAfter}}}]),n}(B),be=[],we=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return _classCallCheck(this,n),(o=t.call(this)).widget=e,o.length=r,o.type=i,o.open=a,o.breakAfter=0,o}return _createClass(n,[{key:"merge",value:function(e,t,r){if(!(r instanceof n)||!r.open||e>0&&!(1&r.open)||t<this.length&&!(2&r.open))return!1;if(!this.widget.compare(r.widget))throw new Error("Trying to merge an open widget with an incompatible node");return this.length=e+r.length+(this.length-t),!0}},{key:"domAtPos",value:function(e){return 0==e?V.before(this.dom):V.after(this.dom,e==this.length)}},{key:"split",value:function(e){var t=this.length-e;return this.length=e,new n(this.widget,t,this.type)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"domBoundsAround",value:function(){return null}},{key:"match",value:function(e){return e instanceof n&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget.value)||this.markDirty(!0),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}},{key:"children",get:function(){return be}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.Text.empty}}]),n}(B),_e=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.pos=n,this.end=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=n}return _createClass(e,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof we&&e.type==J.WidgetBefore)}},{key:"getLine",value:function(){return this.curLine||this.content.push(this.curLine=new ke),this.curLine}},{key:"addWidget",value:function(e){this.curLine=null,this.content.push(e)}},{key:"finish",value:function(){this.posCovered()||this.getLine()}},{key:"buildText",value:function(e,t,n,r,i){for(;e>0;){if(this.textOff==this.text.length){var o=this.cursor.next(this.skip),a=o.value,s=o.lineBreak,l=o.done;if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,e--;continue}this.text=a,this.textOff=0}var u=Math.min(this.text.length-this.textOff,e);this.getLine().append(new Y(this.text.slice(this.textOff,this.textOff+u),t,n,r)),e-=u,this.textOff+=u}}},{key:"span",value:function(e,t,n){var r,i=null,o=null,a=null,s=_createForOfIteratorHelper(n);try{for(s.s();!(r=s.n()).done;){var l=r.value.spec;if(l.tagName&&(i=l.tagName),l.class&&(o=o?o+" "+l.class:l.class),l.attributes)for(var u in l.attributes){var c=l.attributes[u];null!=c&&("class"==u?o=o?o+" "+c:c:(a||(a={}),"style"==u&&a.style&&(c=a.style+";"+c),a[u]=c))}}}catch(h){s.e(h)}finally{s.f()}this.buildText(t-e,i,o,a,n),this.pos=t}},{key:"point",value:function(e,t,n,r,i){var o=(r?1:0)|(i?2:0),a=t-e;if(n instanceof ae)if(n.block){var s=n.type;s!=J.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new we(n.widget||new Ce("div"),a,s,o))}else this.getLine().append(ee.create(n.widget||new Ce("span"),a,n.startSide,o));else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t)}}],[{key:"build",value:function(t,n,r,i){var a=new e(t,n,r);return o.b.spans(i,n,r,a),a.finish(),a}}]),e}(),Ce=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){return document.createElement(this.value)}},{key:"updateDOM",value:function(e){return e.nodeName.toLowerCase()==this.value}}]),n}(ne);!function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ge||(ge={}));var Oe=ge.LTR,Se=ge.RTL;function xe(e){for(var t=[],n=0;n<e.length;n++)t.push(1<<+e[n]);return t}var Ae=xe("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Pe=xe("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Te=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ee=function(){function e(t,n,r){_classCallCheck(this,e),this.from=t,this.to=n,this.level=r}return _createClass(e,[{key:"side",value:function(e,t){return this.dir==t==e?this.to:this.from}},{key:"dir",get:function(){return this.level%2?Se:Oe}}],[{key:"find",value:function(e,t,n,r){for(var i=-1,o=0;o<e.length;o++){var a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(i<0||(0!=r?r<0?a.from<t:a.to>t:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}]),e}(),Ie=[];function Me(e,t){var n,r=e.length,i=t==Oe?1:2;if(!e||1==i&&!Te.test(e))return De(r);for(var o=0,a=i,s=i;o<r;o++){var l=(n=e.charCodeAt(o))<=247?Ae[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Pe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||8204==n?256:1;512==l?l=a:8==l&&4==s&&(l=16),Ie[o]=4==l?2:l,7&l&&(s=l),a=l}for(var u=0,c=i,h=i;u<r;u++){var f=Ie[u];if(128==f)u<r-1&&c==Ie[u+1]&&24&c?f=Ie[u]=c:Ie[u]=256;else if(64==f){for(var d=u+1;d<r&&64==Ie[d];)d++;for(var p=u&&8==c||d<r&&8==Ie[d]?1==h?1:8:256,v=u;v<d;v++)Ie[v]=p;u=d-1}else 8==f&&1==h&&(Ie[u]=1);c=f,7&f&&(h=f)}for(var g=0;g<r;g++)if(256==Ie[g]){for(var m=g+1;m<r&&256==Ie[m];)m++;for(var y=1==(g?Ie[g-1]:i),k=y==(1==(m<r?Ie[m]:i))?y?1:2:i,b=g;b<m;b++)Ie[b]=k;g=m-1}var w=[];if(1==i)for(var _=0;_<r;){for(var C=_,O=1!=Ie[_++];_<r&&O==(1!=Ie[_]);)_++;if(O)for(var S=_;S>C;){for(var x=S,A=2!=Ie[--S];S>C&&A==(2!=Ie[S-1]);)S--;w.push(new Ee(S,x,A?2:1))}else w.push(new Ee(C,_,0))}else for(var P=0;P<r;){for(var T=P,E=2==Ie[P++];P<r&&E==(2==Ie[P]);)P++;w.push(new Ee(T,P,E?1:2))}return w}function De(e){return[new Ee(0,e,0)]}var Re="";function Fe(e,t,n,i,o){var a,s=i.head-e.from,l=-1;if(0==s){if(!o||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),l=0)}else if(s==e.length){if(o)return null;var u=t[t.length-1];u.level!=n&&(s=u.side(!0,n),l=t.length-1)}l<0&&(l=Ee.find(t,s,null!==(a=i.bidiLevel)&&void 0!==a?a:-1,i.assoc));var c=t[l];s==c.side(o,n)&&(s=(c=t[l+=o?1:-1]).side(!o,n));var h=o==(c.dir==n),f=e.findClusterBreak(s,h);if(Re=e.slice(Math.min(s,f),Math.max(s,f)),f!=c.side(o,n))return r.EditorSelection.cursor(f+e.from,h?-1:1,c.level);var d=l==(o?t.length-1:0)?null:t[l+(o?1:-1)];return d||c.level==n?d&&d.level<c.level?r.EditorSelection.cursor(d.side(!o,n)+e.from,0,d.level):r.EditorSelection.cursor(f+e.from,0,c.level):r.EditorSelection.cursor(o?e.to:e.from,o?-1:1,n)}var He,Ne=["pre-wrap","normal","pre-line"],Le=function(){function e(){_classCallCheck(this,e),this.doc=a.a.empty,this.lineWrapping=!1,this.direction=ge.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}return _createClass(e,[{key:"heightForGap",value:function(e,t){var n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}},{key:"heightForLine",value:function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(e){return this.doc=e,this}},{key:"mustRefresh",value:function(e,t,n){for(var r=!1,i=0;i<e.length;i++){var o=e[i];o<0?i++:this.heightSamples[Math.floor(10*o)]||(r=!0,this.heightSamples[Math.floor(10*o)]=!0)}return r||Ne.indexOf(t)>-1!=this.lineWrapping||this.direction!=n}},{key:"refresh",value:function(e,t,n,r,i,o){var a=Ne.indexOf(e)>-1,s=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a||this.direction!=t;if(this.lineWrapping=a,this.direction=t,this.lineHeight=n,this.charWidth=r,this.lineLength=i,s){this.heightSamples={};for(var l=0;l<o.length;l++){var u=o[l];u<0?l++:this.heightSamples[Math.floor(10*u)]=!0}}return s}}]),e}(),je=function(){function e(t,n){_classCallCheck(this,e),this.from=t,this.heights=n,this.index=0}return _createClass(e,[{key:"more",get:function(){return this.index<this.heights.length}}]),e}(),Ve=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.from=t,this.length=n,this.top=r,this.height=i,this.type=o}return _createClass(e,[{key:"join",value:function(t){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new e(this.from,this.length+t.length,this.top,this.height+t.height,n)}},{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}}]),e}();!function(e){e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight"}(He||(He={}));var qe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;_classCallCheck(this,e),this.length=t,this.height=n,this.flags=r}return _createClass(e,[{key:"setHeight",value:function(e,t){this.height!=t&&(Math.abs(this.height-t)>1e-4&&(e.heightChanged=!0),this.height=t)}},{key:"replace",value:function(t,n,r){return e.of(r)}},{key:"decomposeLeft",value:function(e,t){t.push(this)}},{key:"decomposeRight",value:function(e,t){t.push(this)}},{key:"applyChanges",value:function(e,t,n,r){for(var i=this,o=r.length-1;o>=0;o--){var a=r[o],s=a.fromA,l=a.toA,u=a.fromB,c=a.toB,h=i.lineAt(s,He.ByPosNoHeight,t,0,0),f=h.to>=l?h:i.lineAt(l,He.ByPosNoHeight,t,0,0);for(c+=f.to-l,l=f.to;o>0&&h.from<=r[o-1].toA;)s=r[o-1].fromA,u=r[o-1].fromB,o--,s<h.from&&(h=i.lineAt(s,He.ByPosNoHeight,t,0,0));u+=h.from-s,s=h.from;var d=Qe.build(n,e,u,c);i=i.replace(s,l,d)}return i.updateHeight(n,0)}},{key:"outdated",get:function(){return(2&this.flags)>0},set:function(e){this.flags=(e?2:0)|-3&this.flags}}],[{key:"empty",value:function(){return new ze(0,0)}},{key:"of",value:function(t){if(1==t.length)return t[0];for(var n=0,r=t.length,i=0,o=0;;)if(n==r)if(i>2*o){var a=t[n-1];a.break?t.splice(--n,1,a.left,null,a.right):t.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else{if(!(o>2*i))break;var s=t[r];s.break?t.splice(r,1,s.left,null,s.right):t.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else if(i<o){var l=t[n++];l&&(i+=l.size)}else{var u=t[--r];u&&(o+=u.size)}var c=0;return null==t[n-1]?(c=1,n--):null==t[n]&&(c=1,r++),new Ue(e.of(t.slice(0,n)),c,e.of(t.slice(r)))}}]),e}();qe.prototype.size=1;var Be=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).type=i,o}return _createClass(n,[{key:"blockAt",value:function(e,t,n,r){return new Ve(r,this.length,n,this.height,this.type)}},{key:"lineAt",value:function(e,t,n,r,i){return this.blockAt(0,n,r,i)}},{key:"forEachLine",value:function(e,t,n,r,i,o){o(this.blockAt(0,n,r,i))}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0);return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]),n}(qe),ze=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r,J.Text)).collapsed=0,i.widgetHeight=0,i}return _createClass(n,[{key:"replace",value:function(e,t,r){var i=r[0];return 1==r.length&&(i instanceof n||i instanceof Xe&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Xe?i=new n(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):qe.of(r)}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]),n}(Be),Xe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,0)}return _createClass(n,[{key:"lines",value:function(e,t){var n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}},{key:"blockAt",value:function(e,t,n,r){var i=this.lines(t,r),o=i.firstLine,a=i.lastLine,s=i.lineHeight,l=Math.max(0,Math.min(a-o,Math.floor((e-n)/s))),u=t.line(o+l),c=u.from,h=u.length;return new Ve(c,h,n+s*l,s,J.Text)}},{key:"lineAt",value:function(e,t,n,r,i){if(t==He.ByHeight)return this.blockAt(e,n,r,i);if(t==He.ByPosNoHeight){var o=n.lineAt(e),a=o.from,s=o.to;return new Ve(a,s-a,0,0,J.Text)}var l=this.lines(n,i),u=l.firstLine,c=l.lineHeight,h=n.lineAt(e),f=h.from,d=h.length,p=h.number;return new Ve(f,d,r+c*(p-u),c,J.Text)}},{key:"forEachLine",value:function(e,t,n,r,i,o){for(var a=this.lines(n,i),s=a.firstLine,l=a.lastLine,u=a.lineHeight,c=s;c<=l;c++){var h=n.line(c),f=h.from,d=h.to;if(f>d)break;d>=f&&o(new Ve(f,d-f,r,r+=u,J.Text))}}},{key:"replace",value:function(e,t,r){var i=this.length-t;if(i>0){var o=r[r.length-1];o instanceof n?r[r.length-1]=new n(o.length+i):r.push(null,new n(i-1))}if(e>0){var a=r[0];a instanceof n?r[0]=new n(e+a.length):r.unshift(new n(e-1),null)}return qe.of(r)}},{key:"decomposeLeft",value:function(e,t){t.push(new n(e-1),null)}},{key:"decomposeRight",value:function(e,t){t.push(null,new n(this.length-e-1))}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=t+this.length;if(i&&i.from<=t+this.length&&i.more){var a=[],s=Math.max(t,i.from);for(i.from>t&&a.push(new n(i.from-t-1).updateHeight(e,t));s<=o&&i.more;){var l=e.doc.lineAt(s).length;a.length&&a.push(null);var u=new ze(l,i.heights[i.index++]);u.outdated=!1,a.push(u),s+=l+1}return s<=o&&a.push(null,new n(o-s).updateHeight(e,s)),e.heightChanged=!0,qe.of(a)}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]),n}(qe),Ue=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e.length+r+i.length,e.height+i.height,r|(e.outdated||i.outdated?2:0))).left=e,o.right=i,o.size=e.size+i.size,o}return _createClass(n,[{key:"blockAt",value:function(e,t,n,r){var i=n+this.left.height;return e<i||0==this.right.height?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}},{key:"lineAt",value:function(e,t,n,r,i){var o=r+this.left.height,a=i+this.left.length+this.break,s=t==He.ByHeight?e<o||0==this.right.height:e<a,l=s?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;var u=t==He.ByPosNoHeight?He.ByPosNoHeight:He.ByPos;return s?l.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,r,i).join(l)}},{key:"forEachLine",value:function(e,t,n,r,i,o){var a=r+this.left.height,s=i+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,r,i,o),t>=s&&this.right.forEachLine(e,t,n,a,s,o);else{var l=this.lineAt(s,He.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,o)}}},{key:"replace",value:function(e,t,n){var r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));var i=[];e>0&&this.decomposeLeft(e,i);var o,a=i.length,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;i.push(l)}}catch(c){s.e(c)}finally{s.f()}if(e>0&&We(i,a-1),t<this.length){var u=i.length;this.decomposeRight(t,i),We(i,u)}return qe.of(i)}},{key:"decomposeLeft",value:function(e,t){var n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(e>=++n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}},{key:"decomposeRight",value:function(e,t){var n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}},{key:"balanced",value:function(e,t){return e.size>2*t.size||t.size>2*e.size?qe.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this.left,o=this.right,a=t+i.length+this.break,s=null;return r&&r.from<=t+i.length&&r.more?s=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=a+o.length&&r.more?s=o=o.updateHeight(e,a,n,r):o.updateHeight(e,a,n),s?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}},{key:"toString",value:function(){return this.left+(this.break?" ":"-")+this.right}},{key:"break",get:function(){return 1&this.flags}}]),n}(qe);function We(e,t){var n,r;null==e[t]&&(n=e[t-1])instanceof Xe&&(r=e[t+1])instanceof Xe&&e.splice(t-1,3,new Xe(n.length+1+r.length))}var Qe=function(){function e(t,n){_classCallCheck(this,e),this.pos=t,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}return _createClass(e,[{key:"span",value:function(e,t){if(this.lineStart>-1){var n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ze?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new ze(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}},{key:"point",value:function(e,t,n){if(e<t||n.heightRelevant){var r=n.widget?Math.max(0,n.widget.estimatedHeight):0,i=t-e;n.block?this.addBlock(new Be(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(this.lineStart>-1)){var e=this.oracle.doc.lineAt(this.pos),t=e.from,n=e.to;this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new ze(this.pos-t,-1)),this.writtenTo=this.pos}}},{key:"blankContent",value:function(e,t){var n=new Xe(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}},{key:"ensureLine",value:function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ze)return e;var t=new ze(0,-1);return this.nodes.push(t),t}},{key:"addBlock",value:function(e){this.enterLine(),e.type!=J.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=J.WidgetBefore&&(this.covering=e)}},{key:"addLineDeco",value:function(e,t){var n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}},{key:"finish",value:function(e){var t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof ze||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new ze(0,-1));var n,r=e,i=_createForOfIteratorHelper(this.nodes);try{for(i.s();!(n=i.n()).done;){var o=n.value;o instanceof ze&&o.updateHeight(this.oracle,r),r+=o?o.length:1}}catch(a){i.e(a)}finally{i.f()}return this.nodes}},{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"minPointSize",get:function(){return 0}}],[{key:"build",value:function(t,n,r,i){var a=new e(r,t);return o.b.spans(n,r,i,a),a.finish(r)}}]),e}(),Ze=function(){function e(){_classCallCheck(this,e),this.changes=[]}return _createClass(e,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&le(e,t,this.changes)}},{key:"minPointSize",get:function(){return 0}}]),e}(),Ge=[],$e=r.Facet.define(),Ye=r.Facet.define(),Ke=r.Facet.define(),Je=r.Facet.define(),et=r.Facet.define(),tt=r.Facet.define();function nt(e,t,n){var r=e.facet(Je);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}var rt=r.Facet.define({combine:function(e){return!e.length||e[0]}}),it=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"define",value:function(){return new e}}]),e}();it.scrollMargins=it.define();var ot=0,at=r.Facet.define(),st=function(){function e(t,n,r){_classCallCheck(this,e),this.id=t,this.create=n,this.fields=r,this.extension=at.of(this)}return _createClass(e,[{key:"provide",value:function(t,n){return new e(this.id,this.create,this.fields.concat({field:t,get:n}))}},{key:"decorations",value:function(e){return this.provide(lt,e||function(e){return e.decorations})}},{key:"eventHandlers",value:function(e){return this.provide(ut,(function(t){return{plugin:t,handlers:e}}))}}],[{key:"define",value:function(t){return new e(ot++,t,[])}},{key:"fromClass",value:function(t){return e.define((function(e){return new t(e)}))}}]),e}(),lt=it.define(),ut=it.define(),ct=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.spec=n,this.updateFunc=this.value.update?this.value.update.bind(this.value):function(){}}return _createClass(e,[{key:"takeField",value:function(e,t){var n,r=_createForOfIteratorHelper(this.spec.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.field,a=i.get;o==e&&t.push(a(this.value))}}catch(s){r.e(s)}finally{r.f()}}},{key:"update",value:function(t){try{return this.updateFunc(t),this}catch(n){if(nt(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(r){}return e.dummy}}},{key:"destroy",value:function(e){try{this.value.destroy&&this.value.destroy()}catch(t){nt(e.state,t,"CodeMirror plugin crashed")}}}],[{key:"create",value:function(t,n){var r;try{r=t.create(n)}catch(i){return nt(n.state,i,"CodeMirror plugin crashed"),e.dummy}return new e(r,t)}}]),e}();ct.dummy=new ct({},st.define((function(){return{}})));var ht=r.Facet.define({combine:function(e){return e.reduce((function(e,t){return W(t,e)}),{})}}),ft=r.Facet.define({combine:function(e){return e.reduce((function(e,t){return W(t,e)}),{})}}),dt=r.Facet.define(),pt=r.Facet.define(),vt=function(){function e(t,n,r,i){_classCallCheck(this,e),this.fromA=t,this.toA=n,this.fromB=r,this.toB=i}return _createClass(e,[{key:"join",value:function(t){return new e(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}},{key:"addToSet",value:function(e){for(var t=e.length,n=this;t>0;t--){var r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}}],[{key:"extendWithRanges",value:function(t,n){if(0==n.length)return t;for(var r=[],i=0,o=0,a=0,s=0;;i++){for(var l=i==t.length?null:t[i],u=a-s,c=l?l.fromB:1e9;o<n.length&&n[o]<c;){var h=n[o+1],f=Math.max(s,n[o]),d=Math.min(c,h);if(f<=d&&new e(f+u,d+u,f,d).addToSet(r),h>c)break;o+=2}if(!l)return r;new e(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),a=l.toA,s=l.toB}}}]),e}(),gt=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge;_classCallCheck(this,e),this.view=t,this.state=n,this.transactions=i,this.flags=0,this.prevState=t.state,this.changes=r.ChangeSet.empty(this.prevState.doc.length);var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.changes=this.changes.compose(s.changes)}}catch(c){a.e(c)}finally{a.f()}var l=[];this.changes.iterChangedRanges((function(e,t,n,r){return l.push(new vt(e,t,n,r))})),this.changedRanges=l;var u=t.hasFocus;u!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=u),this.docChanged&&(this.flags|=2)}return _createClass(e,[{key:"viewportChanged",get:function(){return(4&this.flags)>0}},{key:"heightChanged",get:function(){return(2&this.flags)>0}},{key:"focusChanged",get:function(){return(1&this.flags)>0}},{key:"docChanged",get:function(){return this.transactions.some((function(e){return e.docChanged}))}},{key:"selectionSet",get:function(){return this.transactions.some((function(e){return e.selection}))}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}]),e}(),mt=function(){function e(t,n,r){_classCallCheck(this,e),this.from=t,this.to=n,this.size=r}return _createClass(e,[{key:"draw",value:function(e){return re.replace({widget:new yt({size:this.size,vertical:e})}).range(this.from,this.to)}}],[{key:"same",value:function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}}]),e}(),yt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("div");return this.value.vertical?e.style.height=this.value.size+"px":(e.style.width=this.value.size+"px",e.style.height="2px",e.style.display="inline-block"),e}},{key:"eq",value:function(e){return this.value.size==e.size&&this.value.vertical==e.vertical}},{key:"estimatedHeight",get:function(){return this.value.vertical?this.value.size:-1}}]),n}(ne),kt=function(){function e(t){_classCallCheck(this,e),this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.paddingTop=0,this.paddingBottom=0,this.heightOracle=new Le,this.heightMap=qe.empty(),this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=this.heightMap.applyChanges(t.facet(dt),a.a.empty,this.heightOracle.setDoc(t.doc),[new vt(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=re.set(this.lineGaps.map((function(e){return e.draw(!1)}))),this.computeVisibleRanges()}return _createClass(e,[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state;this.state=e.state;var i,a,s,l,u=this.state.facet(dt),c=vt.extendWithRanges(e.changedRanges,(i=e.prevState.facet(dt),a=u,s=e?e.changes:r.ChangeSet.empty(this.state.doc.length),l=new Ze,o.b.compare(i,a,s,l),l.changes)),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(u,n.doc,this.heightOracle.setDoc(this.state.doc),c),this.heightMap.height!=h&&(e.flags|=2);var f=c.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.head<f.from||t.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,t)),f.eq(this.viewport)||(this.viewport=f,e.flags|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(e.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes)))),this.computeVisibleRanges(),t&&(this.scrollTo=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.primary.empty&&e.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}},{key:"measure",value:function(e,t){var n=e.dom,r="",i=ge.LTR;if(!t){var o=window.getComputedStyle(n);r=o.whiteSpace,i="rtl"==o.direction?ge.RTL:ge.LTR,this.paddingTop=parseInt(o.paddingTop)||0,this.paddingBottom=parseInt(o.paddingBottom)||0}var a=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(e,t){for(var n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(innerHeight,n.bottom),s=e.parentNode;s;)if(1==s.nodeType){if((s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)&&"visible"!=window.getComputedStyle(s).overflow){var l=s.getBoundingClientRect();r=Math.max(r,l.left),i=Math.min(i,l.right),o=Math.max(o,l.top),a=Math.min(a,l.bottom)}s=s.parentNode}else{if(11!=s.nodeType)break;s=s.host}return{left:r-n.left,right:i-n.left,top:o-(n.top+t),bottom:a-(n.top+t)}}(n,this.paddingTop),s=a.top-this.pixelViewport.top,l=a.bottom-this.pixelViewport.bottom;if(this.pixelViewport=a,this.pixelViewport.bottom<=this.pixelViewport.top||this.pixelViewport.right<=this.pixelViewport.left)return 0;var u=e.measureVisibleLineHeights(),c=!1,h=0;if(!t){if(this.heightOracle.mustRefresh(u,r,i)){var f=e.measureTextSize(),d=f.lineHeight,p=f.charWidth;(c=this.heightOracle.refresh(r,i,d,p,e.dom.clientWidth/p,u))&&(e.minWidth=0)}s>0&&l>0?h=Math.max(s,l):s<0&&l<0&&(h=Math.min(s,l))}this.heightOracle.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(this.heightOracle,0,c,new je(this.viewport.from,u));var v=this.heightOracle.heightChanged?2:0;return(!this.viewportIsAppropriate(this.viewport,h)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))&&(this.viewport=this.getViewport(h,this.scrollTo),v|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(v|=this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.enforceCursorAssoc()),v}},{key:"getViewport",value:function(e,t){var n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,o=this.pixelViewport,a=o.top,s=o.bottom,l=new bt(r.lineAt(a-1e3*n,He.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),He.ByHeight,i,0,0).to);if(t)if(t.head<l.from){var u=r.lineAt(t.head,He.ByPos,i,0,0).top;l=new bt(r.lineAt(u-500,He.ByHeight,i,0,0).from,r.lineAt(u+(s-a)+500,He.ByHeight,i,0,0).to)}else if(t.head>l.to){var c=r.lineAt(t.head,He.ByPos,i,0,0).bottom;l=new bt(r.lineAt(c-(s-a)-500,He.ByHeight,i,0,0).from,r.lineAt(c+500,He.ByHeight,i,0,0).to)}return l}},{key:"mapViewport",value:function(e,t){var n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new bt(this.heightMap.lineAt(n,He.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,He.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(e){var t=e.from,n=e.to,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.heightMap.lineAt(t,He.ByPos,this.state.doc,0,0),o=i.top,a=this.heightMap.lineAt(n,He.ByPos,this.state.doc,0,0),s=a.bottom;return(0==t||o<=this.pixelViewport.top-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=this.pixelViewport.bottom+Math.max(10,Math.min(r,250)))&&o>this.pixelViewport.top-2e3&&s<this.pixelViewport.bottom+2e3}},{key:"mapLineGaps",value:function(e,t){if(!e.length||t.empty)return e;var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.touchesRange(o.from,o.to)||r.push(new mt(t.mapPos(o.from),t.mapPos(o.to),o.size))}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"ensureLineGaps",value:function(e){var t=this,n=[];return this.heightOracle.direction!=ge.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(r){if(!(r.length<1e4)){var i,a,s,l,u,c,h,f,d=(s=r.from,l=r.to,u=t.state,c=[],h=s,f=0,o.b.spans(u.facet(dt),s,l,{span:function(){},point:function(e,t){e>h&&(c.push({from:h,to:e}),f+=e-h),h=t},minPointSize:20}),h<l&&(c.push({from:h,to:l}),f+=l-h),{total:f,ranges:c});if(!(d.total<1e4)){if(t.heightOracle.lineWrapping)i=r.from!=t.viewport.from?r.from:wt(d,(t.pixelViewport.top-r.top)/r.height),a=r.to!=t.viewport.to?r.to:wt(d,(t.pixelViewport.bottom-r.top)/r.height);else{var p=d.total*t.heightOracle.charWidth;i=wt(d,t.pixelViewport.left/p),a=wt(d,t.pixelViewport.right/p)}var v=t.state.selection.primary;v.from<=i&&v.to>=r.from&&(i=v.from),v.from<=r.to&&v.to>=a&&(a=v.to);var g=i-1e4,m=a+1e4;g>r.from+5e3&&n.push(Ct(e,(function(e){return e.from==r.from&&e.to>g-5e3&&e.to<g+5e3}))||new mt(r.from,g,t.gapSize(r,g,!0,d))),m<r.to-5e3&&n.push(Ct(e,(function(e){return e.to==r.to&&e.from>m-5e3&&e.from<m+5e3}))||new mt(m,r.to,t.gapSize(r,m,!1,d)))}}})),n}},{key:"gapSize",value:function(e,t,n,r){if(this.heightOracle.lineWrapping){var i=e.height*_t(r,t);return n?i:e.height-i}var o=_t(r,t);return r.total*this.heightOracle.charWidth*(n?o:1-o)}},{key:"updateLineGaps",value:function(e){var t=this;return mt.same(e,this.lineGaps)?0:(this.lineGaps=e,this.lineGapDeco=re.set(e.map((function(e){return e.draw(t.heightOracle.lineWrapping)}))),16)}},{key:"computeVisibleRanges",value:function(){var e=this.state.facet(dt);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));var t=[];o.b.spans(e,this.viewport.from,this.viewport.to,{span:function(e,n){t.push({from:e,to:n})},point:function(){},minPointSize:20}),this.visibleRanges=t}},{key:"lineAt",value:function(e,t){return this.heightMap.lineAt(e,He.ByPos,this.state.doc,t+this.paddingTop,0)}},{key:"lineAtHeight",value:function(e,t){return this.heightMap.lineAt(e,He.ByHeight,this.state.doc,t+this.paddingTop,0)}},{key:"blockAtHeight",value:function(e,t){return this.heightMap.blockAt(e,this.state.doc,t+this.paddingTop,0)}},{key:"forEachLine",value:function(e,t,n,r){return this.heightMap.forEachLine(e,t,this.state.doc,r+this.paddingTop,0,n)}}]),e}(),bt=function(){function e(t,n){_classCallCheck(this,e),this.from=t,this.to=n}return _createClass(e,[{key:"eq",value:function(e){return this.from==e.from&&this.to==e.to}}]),e}();function wt(e,t){var n=e.total,r=e.ranges;if(t<=0)return r[0].from;if(t>=1)return r[r.length-1].to;for(var i=Math.floor(n*t),o=0;;o++){var a=r[o],s=a.from,l=a.to-s;if(i<=l)return s+i;i-=l}}function _t(e,t){var n,r=0,i=_createForOfIteratorHelper(e.ranges);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.from,s=o.to;if(t<=s){r+=t-a;break}r+=s-a}}catch(l){i.e(l)}finally{i.f()}return r/e.total}function Ct(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(o){r.e(o)}finally{r.f()}}var Ot=[],St=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).view=e,r.viewports=Ot,r.compositionDeco=re.none,r.decorations=[],r.minWidth=0,r.minWidthFrom=0,r.minWidthTo=0,r.impreciseAnchor=null,r.impreciseHead=null,r.setDOM(e.contentDOM),r.children=[new ke],r.children[0].setParent(_assertThisInitialized(r)),r.updateInner([new vt(0,0,0,e.state.doc.length)],r.updateDeco(),0),r}return _createClass(n,[{key:"update",value:function(e){var t,n=this,i=e.changedRanges;this.minWidth>0&&i.length&&(i.every((function(e){var t=e.fromA;return e.toA<n.minWidthFrom||t>n.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),(null===(t=this.view.inputState)||void 0===t?void 0:t.composing)?e.transactions.length&&(this.compositionDeco=function(e,t){var n=P(e.root),r=n.focusNode&&Pt(n.focusNode,n.focusOffset,0);if(!r)return re.none;var i,o,a=e.docView.nearest(r),s=r;if(a instanceof $)o=(i=a.posAtStart)+a.length,s=a.dom;else{if(!(a instanceof ke))return re.none;for(;s.parentNode!=a.dom;)s=s.parentNode;for(var l=s.previousSibling;l&&!B.get(l);)l=l.previousSibling;i=o=l?B.get(l).posAtEnd:a.posAtStart}var u=t.mapPos(i,1),c=Math.max(u,t.mapPos(o,-1)),h=r.nodeValue,f=e.state;if(c-u<h.length)if(f.sliceDoc(u,Math.min(f.doc.length,u+h.length))==h)c=u+h.length;else{if(f.sliceDoc(Math.max(0,c-h.length),c)!=h)return re.none;u=c-h.length}else if(f.sliceDoc(u,c)!=h)return re.none;return re.set(re.replace({widget:new At({top:s,text:r})}).range(u,c))}(this.view,e.changes)):this.compositionDeco=re.none;var a,s,l,u,c=(A.ie||A.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.prevState.doc.lines,h=this.decorations,f=this.updateDeco(),d=(a=h,s=f,l=e.changes,u=new Et,o.b.compare(a,s,l,u),u.changes);i=vt.extendWithRanges(i,d);var p=e.transactions.some((function(e){return"pointerselection"==e.annotation(r.Transaction.userEvent)}));return 0==this.dirty&&0==i.length&&!(20&e.flags)&&e.state.selection.primary.from>=this.view.viewport.from&&e.state.selection.primary.to<=this.view.viewport.to?(this.updateSelection(c,p),!1):(this.updateInner(i,f,e.prevState.doc.length,c,p),!0)}},{key:"updateInner",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.updateChildren(e,t,n),this.view.observer.ignore((function(){r.dom.style.height=r.view.viewState.heightMap.height+"px",r.dom.style.minWidth=r.minWidth?r.minWidth+"px":"";var e=A.chrome?{node:P(r.view.root).focusNode,written:!1}:void 0;r.sync(e),r.dirty=0,(null==e?void 0:e.written)&&(i=!0),r.updateSelection(i,o),r.dom.style.height=""}))}},{key:"updateChildren",value:function(e,t,n){for(var r=this.childCursor(n),i=e.length-1;;i--){var o=i>=0?e[i]:null;if(!o)break;var a=o.fromA,s=o.toA,l=o.fromB,u=o.toB,c=_e.build(this.view.state.doc,l,u,t),h=c.content,f=c.breakAtStart,d=r.findPos(s,1),p=d.i,v=d.off,g=r.findPos(a,-1),m=g.i,y=g.off;this.replaceRange(m,y,p,v,h,f)}}},{key:"replaceRange",value:function(e,t,n,r,i,o){var a=this.children[e],s=i.length?i[i.length-1]:null,l=s?s.breakAfter:o;if(e!=n||o||l||!(i.length<2)||!a.merge(t,r,i.length?s:null,0==t)){var u=this.children[n];for(r<u.length||u.children.length&&0==u.children[u.children.length-1].length?(e==n&&(u=u.split(r),r=0),!l&&s&&u.merge(0,r,s,!0)?i[i.length-1]=u:((r||u.children.length&&0==u.children[0].length)&&u.merge(0,r,null,!1),i.push(u))):u.breakAfter&&(s?s.breakAfter=1:o=1),n++,a.breakAfter=o,t>0&&(!o&&i.length&&a.merge(t,a.length,i[0],!1)?a.breakAfter=i.shift().breakAfter:(t<a.length||a.children.length&&0==a.children[a.children.length-1].length)&&a.merge(t,a.length,null,!1),e++);e<n&&i.length;)if(this.children[n-1].match(i[i.length-1]))n--,i.pop();else{if(!this.children[e].match(i[0]))break;e++,i.shift()}(e<n||i.length)&&this.replaceChildren(e,n,i)}}},{key:"updateSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t||this.mayControlSelection()){var n=this.view.state.selection.primary,r=this.domAtPos(n.anchor),i=this.domAtPos(n.head),o=P(this.root);(e||!o.focusNode||A.gecko&&n.empty&&Tt(o.focusNode,o.focusOffset)||!I(r.node,r.offset,o.anchorNode,o.anchorOffset)||!I(i.node,i.offset,o.focusNode,o.focusOffset))&&this.view.observer.ignore((function(){if(n.empty){if(A.gecko){var e=Tt(r.node,r.offset);if(e&&3!=e){var t=Pt(r.node,r.offset,1==e?1:-1);t&&(r=new V(t,1==e?0:t.nodeValue.length))}}o.collapse(r.node,r.offset),null!=n.bidiLevel&&null!=o.cursorBidiLevel&&(o.cursorBidiLevel=n.bidiLevel)}else if(o.extend)o.collapse(r.node,r.offset),o.extend(i.node,i.offset);else{var a,s=document.createRange();n.anchor>n.head&&(r=(a=[i,r])[0],i=a[1]),s.setEnd(i.node,i.offset),s.setStart(r.node,r.offset),o.removeAllRanges(),o.addRange(s)}})),this.impreciseAnchor=r.precise?null:new V(o.anchorNode,o.anchorOffset),this.impreciseHead=i.precise?null:new V(o.focusNode,o.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){var e=this.view.state.selection.primary,t=P(this.root);if(e.empty&&e.assoc&&t.modify){var n=ke.find(this,e.head);if(n){var r=n.posAtStart;if(e.head!=r&&e.head!=r+n.length){var i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(i&&o&&!(i.bottom>o.top)){var a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}}}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet(rt)?this.root.activeElement==this.dom:T(this.dom,P(this.root))}},{key:"nearest",value:function(e){for(var t=e;t;){var n=B.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}},{key:"posFromDOM",value:function(e,t){var n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}},{key:"domAtPos",value:function(e){for(var t=this.childCursor().findPos(e,-1),n=t.i,r=t.off;n<this.children.length-1;){var i=this.children[n];if(r<i.length||i instanceof ke)break;n++,r=0}return this.children[n].domAtPos(r)}},{key:"coordsAt",value:function(e,t){for(var n=this.length,r=this.children.length-1;;r--){var i=this.children[r],o=n-i.breakAfter-i.length;if(e>=o&&i.type!=J.WidgetAfter)return i.coordsAt(e-o,t);n=o}}},{key:"measureVisibleLineHeights",value:function(){for(var e=[],t=this.view.viewState.viewport,n=t.from,r=t.to,i=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=0,a=0;a<this.children.length;a++){var s=this.children[a],l=o+s.length;if(l>r)break;if(o>=n){e.push(s.dom.getBoundingClientRect().height);var u=s.dom.scrollWidth;u>i&&(this.minWidth=i=u,this.minWidthFrom=o,this.minWidthTo=l)}o=l+s.breakAfter}return e}},{key:"measureTextSize",value:function(){var e,t=this,n=_createForOfIteratorHelper(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof ke){var i=r.measureTextSize();if(i)return i}}}catch(l){n.e(l)}finally{n.f()}var o,a,s=document.createElement("div");return s.className="cm-line",s.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){t.dom.appendChild(s);var e=E(s.firstChild)[0];o=s.getBoundingClientRect().height,a=e?e.width/27:7,s.remove()})),{lineHeight:o,charWidth:a}}},{key:"childCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new U(this.children,e,t)}},{key:"computeBlockGapDeco",value:function(){var e=this.view.viewState.viewport,t=[e],n=this.view.state.selection.primary,r=n.head,i=n.anchor;if(r<e.from||r>e.to){var o=this.view.viewState.lineAt(r,0),a=o.from,s=o.to;t.push(new bt(a,s))}if(!t.some((function(e){var t=e.from,n=e.to;return i>=t&&i<=n}))){var l=this.view.viewState.lineAt(i,0),u=l.from,c=l.to;t.push(new bt(u,c))}this.viewports=t.sort((function(e,t){return e.from-t.from}));for(var h=[],f=0,d=0;;d++){var p=d==t.length?null:t[d],v=p?p.from-1:this.length;if(v>f){var g=this.view.viewState.lineAt(v,0).bottom-this.view.viewState.lineAt(f,0).top;h.push(re.replace({widget:new xt(g),block:!0,inclusive:!0}).range(f,v))}if(!p)break;f=p.to+1}return re.set(h)}},{key:"updateDeco",value:function(){return this.decorations=[].concat(_toConsumableArray(this.view.state.facet(dt)),[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco],_toConsumableArray(this.view.pluginField(lt)))}},{key:"scrollPosIntoView",value:function(e,t){var n=this.coordsAt(e,t);if(n){var r,i=0,o=0,a=0,s=0,l=_createForOfIteratorHelper(this.view.pluginField(it.scrollMargins));try{for(l.s();!(r=l.n()).done;){var u=r.value;if(u){var c=u.left,h=u.right,f=u.top,d=u.bottom;null!=c&&(i=Math.max(i,c)),null!=h&&(o=Math.max(o,h)),null!=f&&(a=Math.max(a,f)),null!=d&&(s=Math.max(s,d))}}}catch(p){l.e(p)}finally{l.f()}!function(e,t){for(var n=e.ownerDocument.defaultView,r=e.parentNode;r;)if(1==r.nodeType){var i=void 0,o=r==document.body;if(o)i=H(n);else{if(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth){r=r.parentNode;continue}var a=r.getBoundingClientRect();i={left:a.left,right:a.left+r.clientWidth,top:a.top,bottom:a.top+r.clientHeight}}var s=0,l=0;if(t.top<i.top?l=-(i.top-t.top+5):t.bottom>i.bottom&&(l=t.bottom-i.bottom+5),t.left<i.left?s=-(i.left-t.left+5):t.right>i.right&&(s=t.right-i.right+5),s||l)if(o)n.scrollBy(s,l);else{if(l){var u=r.scrollTop;r.scrollTop+=l,l=r.scrollTop-u}if(s){var c=r.scrollLeft;r.scrollLeft+=s,s=r.scrollLeft-c}t={left:t.left-s,top:t.top-l,right:t.right-s,bottom:t.bottom-l}}if(o)break;r=r.parentNode}else{if(11!=r.nodeType)break;r=r.host}}(this.dom,{left:n.left-i,top:n.top-a,right:n.right+o,bottom:n.bottom+s})}}},{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}}]),n}(B),xt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("div");return this.updateDOM(e),e}},{key:"updateDOM",value:function(e){if(this.value<1e7){for(;e.lastChild;)e.lastChild.remove();e.style.height=this.value+"px"}else{e.style.height="";for(var t=this.value;t>0;t-=1e7)e.appendChild(document.createElement("div")).style.height=Math.min(t,1e7)+"px"}return!0}},{key:"estimatedHeight",get:function(){return this.value}}]),n}(ne),At=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"eq",value:function(e){return this.value.top==e.top&&this.value.text==e.text}},{key:"toDOM",value:function(){return this.value.top}},{key:"ignoreEvent",value:function(){return!1}},{key:"customView",get:function(){return te}}]),n}(ne);function Pt(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=R(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}function Tt(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}var Et=function(){function e(){_classCallCheck(this,e),this.changes=[]}return _createClass(e,[{key:"compareRange",value:function(e,t){le(e,t,this.changes)}},{key:"comparePoint",value:function(e,t){le(e,t,this.changes)}}]),e}();function It(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Mt(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Dt(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Rt(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Ft(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Ht(e,t,n){for(var r=e.nodeValue.length,i=document.createRange(),o=0;o<r;o++){i.setEnd(e,o+1),i.setStart(e,o);for(var a=i.getClientRects(),s=0;s<a.length;s++){var l=a[s];if(l.top!=l.bottom&&l.left-1<=t&&l.right+1>=t&&l.top-1<=n&&l.bottom+1>=n){var u=t>=(l.left+l.right)/2,c=u;return(A.chrome||A.gecko)&&(i.setEnd(e,o),i.getBoundingClientRect().left==l.right&&(c=!u)),{node:e,offset:o+(c?1:0)}}}}return{node:e,offset:0}}function Nt(e,t){for(var n,r=t.x,i=t.y,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=e.contentDOM.getBoundingClientRect(),s=e.defaultLineHeight/2,l=!1;;){if((n=e.blockAtHeight(i,a.top)).top>i||n.bottom<i){if(o=n.top>i?-1:1,i=Math.min(n.bottom-s,Math.max(n.top+s,i)),l)return-1;l=!0}if(n.type==J.Text)break;i=o>0?n.bottom+s:n.top-s}var u=n.from;if(u<e.viewport.from)return 0==e.viewport.from?0:-1;if(u>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:-1;r=Math.max(a.left+1,Math.min(a.right-1,r));var c,h=e.root,f=h.elementFromPoint(r,i),d=-1;if(f&&e.contentDOM.contains(f)&&!(e.docView.nearest(f)instanceof ee))if(h.caretPositionFromPoint){var p,v=h.caretPositionFromPoint(r,i);v&&(c=(p=v).offsetNode,d=p.offset)}else if(h.caretRangeFromPoint){var g,m=h.caretRangeFromPoint(r,i);m&&(c=(g=m).startContainer,d=g.startOffset)}if(!c){var y=ke.find(e.docView,u),k=function e(t,n,r){for(var i,o,a,s,l,u,c,h,f=t.firstChild;f;f=f.nextSibling)for(var d=E(f),p=0;p<d.length;p++){var v=d[p];o&&Dt(o,v)&&(v=Rt(Ft(v,o.bottom),o.top));var g=It(n,v),m=Mt(r,v);if(0==g&&0==m)return 3==f.nodeType?Ht(f,n,r):e(f,n,r);(!i||s>m||s==m&&a>g)&&(i=f,o=v,a=g,s=m),0==g?r>v.bottom&&(!c||c.bottom<v.bottom)?(l=f,c=v):r<v.top&&(!h||h.top>v.top)&&(u=f,h=v):c&&Dt(c,v)?c=Ft(c,v.bottom):h&&Dt(h,v)&&(h=Rt(h,v.top))}if(c&&c.bottom>=r?(i=l,o=c):h&&h.top<=r&&(i=u,o=h),!i)return{node:t,offset:0};var y=Math.max(o.left,Math.min(o.right,n));return 3==i.nodeType?Ht(i,y,r):a||"true"!=i.contentEditable?{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(n>=(o.left+o.right)/2?1:0)}:e(i,y,r)}(y.dom,r,i);c=k.node,d=k.offset}return e.docView.posFromDOM(c,d)}function Lt(e,t,n,i){for(var o=e.state.doc.lineAt(t.head),a=e.bidiSpans(o),s=t,l=null;;){var u=Fe(o,a,e.textDirection,s,n),c=Re;if(!u){if(o.number==(n?e.state.doc.lines:1))return s;c="\n",o=e.state.doc.line(o.number+(n?1:-1)),a=e.bidiSpans(o),u=r.EditorSelection.cursor(n?o.from:o.to)}if(l){if(!l(c))return s}else{if(!i)return u;l=i(c)}s=u}}var jt=function(){function e(t){var n=this;_classCallCheck(this,e),this.lastKeyCode=0,this.lastKeyTime=0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.registeredEvents=[],this.customHandlers=[],this.composing=!1,this.compositionEndedAt=0,this.mouseSelection=null;var r=function(e){var r=Bt[e];t.contentDOM.addEventListener(e,(function(i){qt(t,i)&&!n.ignoreDuringComposition(i)&&(n.mustFlushObserver(i)&&t.observer.forceFlush(),n.runCustomHandlers(e,t,i)?i.preventDefault():r(t,i))})),n.registeredEvents.push(e)};for(var i in Bt)r(i);t.contentDOM.addEventListener("keydown",(function(e){t.inputState.lastKeyCode=e.keyCode,t.inputState.lastKeyTime=Date.now()})),t.root.activeElement==t.contentDOM&&t.dom.classList.add("cm-focused"),this.notifiedFocused=t.hasFocus,this.ensureHandlers(t)}return _createClass(e,[{key:"setSelectionOrigin",value:function(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(e){var t,n=this,r=_createForOfIteratorHelper(this.customHandlers=e.pluginField(ut));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=function(t){n.registeredEvents.indexOf(t)<0&&(n.registeredEvents.push(t),("scroll"!=t?e.contentDOM:e.scrollDOM).addEventListener(t,(function(r){qt(e,r)&&n.runCustomHandlers(t,e,r)&&r.preventDefault()})))};for(var a in i.handlers)o(a)}}catch(s){r.e(s)}finally{r.f()}}},{key:"runCustomHandlers",value:function(e,t,n){var r,i=_createForOfIteratorHelper(this.customHandlers);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.handlers[e];if(a)try{if(a.call(o.plugin,n,t)||n.defaultPrevented)return!0}catch(s){nt(t.state,s)}}}catch(l){i.e(l)}finally{i.f()}return!1}},{key:"ignoreDuringComposition",value:function(e){return!(!/^key/.test(e.type)||!this.composing&&(!(A.safari&&e.timeStamp-this.compositionEndedAt<500)||(this.compositionEndedAt=0,0)))}},{key:"mustFlushObserver",value:function(e){return"keydown"==e.type||"compositionend"==e.type}},{key:"startMouseSelection",value:function(e,t,n){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new Vt(this,e,t,n)}},{key:"update",value:function(e){this.mouseSelection&&this.mouseSelection.update(e),this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]),e}(),Vt=function(){function e(t,n,i,o){_classCallCheck(this,e),this.inputState=t,this.view=n,this.startEvent=i,this.style=o;var a=n.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=n.state.facet(r.EditorState.allowMultipleSelections)&&function(e,t){var n=e.state.facet($e);return n.length?n[0](t):A.mac?t.metaKey:t.ctrlKey}(n,i),this.dragMove=function(e,t){var n=e.state.facet(Ye);return n.length?n[0](t):A.mac?!t.altKey:!t.ctrlKey}(n,i),this.dragging=!!function(e,t){if(e.state.selection.primary.empty)return!1;var n=P(e.root);if(0==n.rangeCount)return!0;for(var r=n.getRangeAt(0).getClientRects(),i=0;i<r.length;i++){var o=r[i];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}(n,i)&&null,!1===this.dragging&&(i.preventDefault(),this.select(i))}return _createClass(e,[{key:"move",value:function(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(e)}},{key:"up",value:function(e){null==this.dragging&&this.select(this.startEvent),this.dragging||e.preventDefault(),this.destroy()}},{key:"destroy",value:function(){var e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}},{key:"select",value:function(e){var t=this.style.get(e,this.extend,this.multiple);t.eq(this.view.state.selection)&&t.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:t,annotations:r.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}},{key:"update",value:function(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)}}]),e}();function qt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=B.get(r))&&n.ignoreEvent(t))return!1;return!0}var Bt=Object.create(null),zt=A.ie&&A.ie_version<15||A.ios&&A.webkit_version<604;function Xt(e,t){var n=e.state.toText(t),i=1,o=n.lines==e.state.selection.ranges.length?e.state.changeByRange((function(e){var t=n.line(i++);return{changes:{from:e.from,to:e.to,insert:t.slice()},range:r.EditorSelection.cursor(e.from+t.length)}})):e.state.replaceSelection(n);e.dispatch(o,{annotations:r.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function Ut(e,t,n,i){if(1==i)return r.EditorSelection.cursor(t,n);if(2==i)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.charCategorizer(t),o=e.doc.lineAt(t),a=t-o.from;if(0==o.length)return r.EditorSelection.cursor(t);0==a?n=1:a==o.length&&(n=-1);var s=a,l=a;n<0?s=o.findClusterBreak(a,!1):l=o.findClusterBreak(a,!0);for(var u=i(o.slice(s,l));s>0;){var c=o.findClusterBreak(s,!1);if(i(o.slice(c,s))!=u)break;s=c}for(;l<o.length;){var h=o.findClusterBreak(l,!0);if(i(o.slice(l,h))!=u)break;l=h}return r.EditorSelection.range(s+o.from,l+o.from)}(e.state,t,n);var o=ke.find(e.docView,t);if(o)return r.EditorSelection.range(o.posAtStart,o.posAtEnd);var a=e.state.doc.lineAt(t),s=a.from,l=a.to;return r.EditorSelection.range(s,l)}Bt.keydown=function(e,t){(function(e){var t=(e.ctrlKey?1:0)|(e.metaKey?8:0)|(e.altKey?2:0)|(e.shiftKey?4:0),n=e.keyCode,r=A.mac&&1==t;return 8==n||r&&72==n||46==n||r&&68==n||27==n||t==(A.mac?8:1)&&(66==n||73==n||89==n||90==n)})(t)&&t.preventDefault(),e.inputState.setSelectionOrigin("keyboardselection")},Bt.touchdown=Bt.touchmove=function(e){e.inputState.setSelectionOrigin("pointerselection")},Bt.mousedown=function(e,t){var n,i=null,o=_createForOfIteratorHelper(e.state.facet(Ke));try{for(o.s();!(n=o.n()).done;){if(i=(0,n.value)(e,t))break}}catch(a){o.e(a)}finally{o.f()}i||0!=t.button||(i=function(e,t){var n=Gt(e,t),i=function(e){if(!$t)return e.detail;var t=Yt;return Yt=e,Kt=!t||t.timeStamp>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Kt+1)%3:1}(t),o=e.state.selection,a=n,s=t;return{update:function(e){e.changes&&(n&&(n.pos=e.changes.mapPos(n.pos)),o=o.map(e.changes))},get:function(t,l,u){var c;if(t.clientX==s.clientX&&t.clientY==s.clientY?c=a:(c=a=Gt(e,t),s=t),!c||!n)return o;var h=Ut(e,c.pos,c.bias,i);if(n.pos!=c.pos&&!l){var f=Ut(e,n.pos,n.bias,i),d=Math.min(f.from,h.from),p=Math.max(f.to,h.to);h=d<h.from?r.EditorSelection.range(d,p):r.EditorSelection.range(p,d)}return l?o.replaceRange(o.primary.extend(h.from,h.to)):u?o.addRange(h):r.EditorSelection.create([h])}}}(e,t)),i&&(e.root.activeElement!=e.contentDOM&&e.observer.ignore((function(){return j(e.contentDOM)})),e.inputState.startMouseSelection(e,t,i))};var Wt=function(e,t){return e>=t.top&&e<=t.bottom},Qt=function(e,t,n){return Wt(t,n)&&e>=n.left&&e<=n.right};function Zt(e,t,n,r){var i=ke.find(e.docView,t);if(!i)return 1;var o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;var a=i.coordsAt(o,-1);if(a&&Qt(n,r,a))return-1;var s=i.coordsAt(o,1);return s&&Qt(n,r,s)?1:a&&Wt(r,a)?-1:1}function Gt(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY});return n<0?null:{pos:n,bias:Zt(e,n,t.clientX,t.clientY)}}var $t=A.ie&&A.ie_version<=11,Yt=null,Kt=0;function Jt(e){e.docView.compositionDeco.size&&e.update([])}Bt.dragstart=function(e,t){var n=e.state.selection.primary,r=e.inputState.mouseSelection;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Bt.drop=function(e,t){if(t.dataTransfer){var n=e.posAtCoords({x:t.clientX,y:t.clientY}),i=t.dataTransfer.getData("Text");if(!(n<0)&&i){t.preventDefault();var o=e.inputState.mouseSelection,a=o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,s={from:n,insert:i},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},annotations:r.Transaction.userEvent.of("drop")})}}},Bt.paste=function(e,t){e.observer.flush();var n=zt?null:t.clipboardData,r=n&&n.getData("text/plain");r?(Xt(e,r),t.preventDefault()):function(e){var t=e.dom.parentNode;if(t){var n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.remove(),Xt(e,n.value)}),50)}}(e)},Bt.copy=Bt.cut=function(e,t){var n=function(e){var t,n=[],r=[],i=_createForOfIteratorHelper(e.selection.ranges);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.empty||(n.push(e.sliceDoc(o.from,o.to)),r.push(o))}}catch(h){i.e(h)}finally{i.f()}if(!n.length){var a,s=-1,l=_createForOfIteratorHelper(e.selection.ranges);try{for(l.s();!(a=l.n()).done;){var u=a.value.from,c=e.doc.lineAt(u);c.number>s&&(n.push(c.slice()),r.push({from:c.from,to:Math.min(e.doc.length,c.to+1)})),s=c.number}}catch(h){l.e(h)}finally{l.f()}}return{text:n.join(e.lineBreak),ranges:r}}(e.state),i=n.text,o=n.ranges;if(i){var a=zt?null:t.clipboardData;a?(t.preventDefault(),a.clearData(),a.setData("text/plain",i)):function(e,t){var n=e.dom.parentNode;if(n){var r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((function(){r.remove(),e.focus()}),50)}}(e,i),"cut"==t.type&&e.dispatch({changes:o,scrollIntoView:!0,annotations:r.Transaction.userEvent.of("cut")})}},Bt.focus=Bt.blur=function(e){setTimeout((function(){e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)},Bt.beforeprint=function(e){e.viewState.printing=!0,e.requestMeasure(),setTimeout((function(){e.viewState.printing=!1,e.requestMeasure()}),2e3)},Bt.compositionstart=Bt.compositionupdate=function(e){e.inputState.composing||(e.docView.compositionDeco.size&&(e.observer.flush(),Jt(e)),e.inputState.composing=!0)},Bt.compositionend=function(e){e.inputState.composing=!1,e.inputState.compositionEndedAt=Date.now(),setTimeout((function(){e.inputState.composing||Jt(e)}),50)};var en={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},tn=A.ie&&A.ie_version<=11,nn=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.view=t,this.onChange=n,this.onScrollChanged=r,this.active=!1,this.ignoreSelection=new N,this.delayedFlush=-1,this.queue=[],this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.queue.push(r)}}catch(o){n.e(o)}finally{n.f()}A.ie&&A.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?i.flushSoon():i.flush()})),tn&&(this.onCharData=function(e){i.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),i.flushSoon()}),this.onSelectionChange=function(){if(i.view.root.activeElement==i.dom){if(A.ie&&A.ie_version<=11&&!i.view.state.selection.primary.empty){var e=P(i.view.root);if(e.focusNode&&I(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return i.flushSoon()}i.flush()}},this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(e){i.parentCheck<0&&(i.parentCheck=setTimeout(i.listenForScroll.bind(i),1e3)),e[e.length-1].intersectionRatio>0!=i.intersecting&&(i.intersecting=!i.intersecting,i.onScroll())}),{}),this.intersection.observe(this.dom)),this.listenForScroll()}return _createClass(e,[{key:"onScroll",value:function(){this.intersecting&&(this.flush(),this.onScrollChanged())}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var e=0,t=null,n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){var r,i=_createForOfIteratorHelper(this.scrollTargets);try{for(i.s();!(r=i.n()).done;){r.value.removeEventListener("scroll",this.onScroll)}}catch(s){i.e(s)}finally{i.f()}var o,a=_createForOfIteratorHelper(this.scrollTargets=t);try{for(a.s();!(o=a.n()).done;){o.value.addEventListener("scroll",this.onScroll)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"ignore",value:function(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||(this.observer.observe(this.dom,en),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),tn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),tn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clearSelection",value:function(){this.ignoreSelection.set(P(this.view.root))}},{key:"clear",value:function(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}},{key:"flushSoon",value:function(){var e=this;this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((function(){e.delayedFlush=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"flush",value:function(){var e=this;if(!(this.delayedFlush>=0)){var t,n=this.queue,r=_createForOfIteratorHelper(this.observer.takeRecords());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i)}}catch(g){r.e(g)}finally{r.f()}n.length&&(this.queue=[]);var o=P(this.view.root),a=!this.ignoreSelection.eq(o)&&T(this.dom,o);if(0!=n.length||a){var s,l=-1,u=-1,c=!1,h=_createForOfIteratorHelper(n);try{for(h.s();!(s=h.n()).done;){var f,d=s.value,p=this.readMutation(d);p&&(p.typeOver&&(c=!0),-1==l?(l=(f=p).from,u=f.to):(l=Math.min(p.from,l),u=Math.max(p.to,u)))}}catch(g){h.e(g)}finally{h.f()}var v=this.view.state;(l>-1||a)&&this.onChange(l,u,c),this.view.state==v&&(this.view.docView.dirty&&(this.ignore((function(){return e.view.docView.sync()})),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}}}},{key:"readMutation",value:function(e){var t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(),"childList"==e.type){var n=rn(t,e.previousSibling||e.target.previousSibling,-1),r=rn(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}},{key:"destroy",value:function(){this.stop(),this.intersection&&this.intersection.disconnect();var e,t=_createForOfIteratorHelper(this.scrollTargets);try{for(t.s();!(e=t.n()).done;){e.value.removeEventListener("scroll",this.onScroll)}}catch(n){t.e(n)}finally{t.f()}window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}}]),e}();function rn(e,t,n){for(;t;){var r=B.get(t);if(r&&r.parent==e)return r;var i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}var on=function(){function e(t){_classCallCheck(this,e),this.points=t,this.text=""}return _createClass(e,[{key:"readRange",value:function(e,t){if(e){for(var n=e.parentNode,r=e;;){this.findPointBefore(n,r),this.readNode(r);var i=r.nextSibling;if(i==t)break;var o=B.get(r),a=B.get(i);((o?o.breakAfter:an(r))||(a?a.breakAfter:an(i))&&("BR"!=r.nodeName||r.cmIgnore))&&(this.text+="\ufdda"),r=i}this.findPointBefore(n,t)}}},{key:"readNode",value:function(e){if(!e.cmIgnore){var t,n=B.get(e),r=n&&n.overrideDOMText;null!=r?t=r.sliceString(0,void 0,"\ufdda"):3==e.nodeType?t=e.nodeValue:"BR"==e.nodeName?t=e.nextSibling?"\ufdda":"":1==e.nodeType&&this.readRange(e.firstChild,null),null!=t&&(this.findPointIn(e,t.length),this.text+=t)}}},{key:"findPointBefore",value:function(e,t){var n,r=_createForOfIteratorHelper(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}}catch(o){r.e(o)}finally{r.f()}}},{key:"findPointIn",value:function(e,t){var n,r=_createForOfIteratorHelper(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t))}}catch(o){r.e(o)}finally{r.f()}}}]),e}();function an(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}var sn=function e(t,n){_classCallCheck(this,e),this.node=t,this.offset=n,this.pos=-1};function ln(e,t,n){var r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);e.contentDOM.dispatchEvent(i);var o=new KeyboardEvent("keyup",r);return e.contentDOM.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}var un=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.className=ve("scroller"),this.scrollDOM.appendChild(this.contentDOM),this.dom=document.createElement("div"),this.dom.appendChild(this.scrollDOM),this._dispatch=n.dispatch||function(e){return t.update([e])},this.dispatch=this.dispatch.bind(this),this.root=n.root||document,this.viewState=new kt(n.state||r.EditorState.create()),this.plugins=this.state.facet(at).map((function(e){return ct.create(e,t)})),this.observer=new nn(this,(function(e,n,i){return function(e,t,n,i){var o,a,s,l=e.state.selection.primary;if(t>-1&&(s=e.docView.domBoundsAround(t,n,0))){var u=s,c=u.from,h=u.to,f=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e,t){var n=[];if(t.activeElement!=e)return n;var r=P(t),i=r.anchorNode,o=r.anchorOffset,a=r.focusNode,s=r.focusOffset;return i&&(n.push(new sn(i,o)),a==i&&s==o||n.push(new sn(a,s))),n}(e.contentDOM,e.root),d=new on(f);d.readRange(s.startDOM,s.endDOM),a=function(e,t){if(0==e.length)return null;var n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?r.EditorSelection.single(n+t,i+t):null}(f,c);var p=l.from,v=null;8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100&&(p=l.to,v="end");var g=function(e,t,n,r){for(var i=Math.min(e.length,t.length),o=0;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;for(var a=e.length,s=t.length;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;return"end"==r&&(n-=a+Math.max(0,o-Math.min(a,s))-o),a<o&&e.length<t.length?(s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o):s<o&&(a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o),{from:o,toA:a,toB:s}}(e.state.doc.sliceString(c,h,"\ufdda"),d.text,p-c,v);g&&(o={from:c+g.from,to:c+g.toA,insert:r.Text.of(d.text.slice(g.from,g.toB).split("\ufdda"))})}else if(e.hasFocus){var m=P(e.root),y=e.docView,k=y.impreciseHead,b=y.impreciseAnchor,w=k&&k.node==m.focusNode&&k.offset==m.focusOffset?e.state.selection.primary.head:e.docView.posFromDOM(m.focusNode,m.focusOffset),_=b&&b.node==m.anchorNode&&b.offset==m.anchorOffset?e.state.selection.primary.anchor:function(e){var t=e.isCollapsed;return t&&A.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t}(m)?w:e.docView.posFromDOM(m.anchorNode,m.anchorOffset);w==l.head&&_==l.anchor||(a=r.EditorSelection.single(_,w))}if(o||a)if(!o&&i&&!l.empty&&a&&a.primary.empty&&(o={from:l.from,to:l.to,insert:e.state.doc.slice(l.from,l.to)}),o){var C=e.state;if(A.android&&(o.from==l.from&&o.to==l.to&&1==o.insert.length&&2==o.insert.lines&&ln(e,"Enter",10)||o.from==l.from-1&&o.to==l.to&&0==o.insert.length&&ln(e,"Backspace",8)||o.from==l.from&&o.to==l.to+1&&0==o.insert.length&&ln(e,"Delete",46)))return;var O,S=o.insert.toString();if(e.state.facet(tt).some((function(t){return t(e,o.from,o.to,S)})))return;if(o.from>=l.from&&o.to<=l.to&&o.to-o.from>=(l.to-l.from)/3){var x=l.from<o.from?C.doc.sliceString(l.from,o.from,"\ufdda"):"",T=l.to>o.to?C.doc.sliceString(o.to,l.to,"\ufdda"):"";O=C.replaceSelection(r.Text.of((x+o.insert.sliceString(0,void 0,"\ufdda")+T).split("\ufdda")))}else{var E=C.changes(o);O={changes:E,selection:a&&!C.selection.primary.eq(a.primary)&&a.primary.to<=E.newLength?C.selection.replaceRange(a.primary):void 0}}e.dispatch(O,{scrollIntoView:!0,annotations:r.Transaction.userEvent.of("input")})}else if(a&&!a.primary.eq(l)){var I,M=!1;e.inputState.lastSelectionTime>Date.now()-50&&("keyboardselection"==e.inputState.lastSelectionOrigin?M=!0:I=r.Transaction.userEvent.of(e.inputState.lastSelectionOrigin)),e.dispatch({selection:a,scrollIntoView:M,annotations:I})}}(t,e,n,i)}),(function(){return t.measure()})),this.docView=new St(this),this.inputState=new jt(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,window.addEventListener("resize",(function(){-1==fn&&(fn=setTimeout(dn,50))})),this.requestMeasure(),n.parent&&n.parent.appendChild(this.dom)}return _createClass(e,[{key:"dispatch",value:function(){var e;this._dispatch(1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof r.Transaction?arguments.length<=0?void 0:arguments[0]:(e=this.state).update.apply(e,arguments))}},{key:"update",value:function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;var t,n=this.state,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=i.state}}catch(c){r.e(c)}finally{r.f()}var o=new gt(this,n,e),a=e.some((function(e){return e.scrolledIntoView}))?n.selection.primary:null;this.viewState.update(o,a),this.bidiCache=vn.update(this.bidiCache,o.changes),o.empty||this.updatePlugins(o);var s=this.docView.update(o);this.state.facet(pt)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.updateState=0,(s||a||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();var l,u=_createForOfIteratorHelper(this.state.facet(et));try{for(u.s();!(l=u.n()).done;){(0,l.value)(o)}}catch(c){u.e(c)}finally{u.f()}}},{key:"setState",value:function(e){var t=this;if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;var n,r=_createForOfIteratorHelper(this.plugins);try{for(r.s();!(n=r.n()).done;){n.value.destroy(this)}}catch(i){r.e(i)}finally{r.f()}this.viewState=new kt(e),this.plugins=e.facet(at).map((function(e){return ct.create(e,t)})),this.docView=new St(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[],this.updateState=0,this.requestMeasure()}},{key:"updatePlugins",value:function(e){var t=e.prevState.facet(at),n=e.state.facet(at);if(t!=n){var r,i=[],o=[],a=_createForOfIteratorHelper(n);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=t.indexOf(s);if(l<0)i.push(ct.create(s,this));else{var u=this.plugins[l].update(e);o.push(u),i.push(u)}}}catch(p){a.e(p)}finally{a.f()}var c,h=_createForOfIteratorHelper(this.plugins);try{for(h.s();!(c=h.n()).done;){var f=c.value;o.indexOf(f)<0&&f.destroy(this)}}catch(p){h.e(p)}finally{h.f()}this.plugins=i,this.inputState.ensureHandlers(this)}else for(var d=0;d<this.plugins.length;d++)this.plugins[d]=this.plugins[d].update(e)}},{key:"measure",value:function(){var e=this;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=1;for(var t=null,n=0;;n++){this.updateState=1;var r=this.viewState.measure(this.docView,n>0),i=this.measureRequests;if(!r&&!i.length&&null==this.viewState.scrollTo)break;if(this.measureRequests=[],n>5){console.warn("Viewport failed to stabilize");break}var o=i.map((function(t){try{return t.read(e)}catch(n){return nt(e.state,n),pn}})),a=new gt(this,this.state);a.flags|=r,t?t.flags|=r:t=a,this.updateState=2,this.updatePlugins(a),r&&this.docView.update(a);for(var s=0;s<i.length;s++)if(o[s]!=pn)try{i[s].write(o[s],this)}catch(c){nt(this.state,c)}if(this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null),!(4&r)&&0==this.measureRequests.length)break}if(this.updateState=0,this.measureScheduled=-1,t){var l,u=_createForOfIteratorHelper(this.state.facet(et));try{for(u.s();!(l=u.n()).done;){(0,l.value)(t)}}catch(h){u.e(h)}finally{u.f()}}}},{key:"updateAttrs",value:function(){var e=W(this.state.facet(ht),{class:ve("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});Z(this.dom,this.editorAttrs,e),this.editorAttrs=e;var t=W(this.state.facet(ft),{spellcheck:"false",contenteditable:String(this.state.facet(rt)),class:ve("content"),style:"".concat(A.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"});Z(this.contentDOM,this.contentAttrs,t),this.contentAttrs=t}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(pt),i.a.mount(this.root,this.styleModules.concat(me).reverse())}},{key:"domAtPos",value:function(e){return this.docView.domAtPos(e)}},{key:"posAtDOM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}},{key:"readMeasured",value:function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure()}},{key:"requestMeasure",value:function(e){var t=this;if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((function(){return t.measure()}))),e){if(null!=e.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key)return void(this.measureRequests[n]=e);this.measureRequests.push(e)}}},{key:"pluginField",value:function(e){var t,n=[],r=_createForOfIteratorHelper(this.plugins);try{for(r.s();!(t=r.n()).done;){t.value.takeField(e,n)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"plugin",value:function(e){var t,n=_createForOfIteratorHelper(this.plugins);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.spec==e)return r.value}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"blockAtHeight",value:function(e,t){return this.readMeasured(),this.viewState.blockAtHeight(e,hn(t,this.contentDOM))}},{key:"visualLineAtHeight",value:function(e,t){return this.readMeasured(),this.viewState.lineAtHeight(e,hn(t,this.contentDOM))}},{key:"visualLineAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.viewState.lineAt(e,t)}},{key:"viewportLines",value:function(e,t){var n=this.viewport,r=n.from,i=n.to;this.viewState.forEachLine(r,i,e,hn(t,this.contentDOM))}},{key:"moveByChar",value:function(e,t,n){return Lt(this,e,t,n)}},{key:"moveByGroup",value:function(e,t){var n=this;return Lt(this,e,t,(function(t){return function(e,t,n){var i=e.state.charCategorizer(t),o=i(n);return function(e){var t=i(e);return o==r.CharCategory.Space&&(o=t),o==t}}(n,e.head,t)}))}},{key:"moveToLineBoundary",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e,t,n,i){var o=e.state.doc.lineAt(t.head),a=i&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>o.from?t.head-1:t.head):null;if(a){var s=e.dom.getBoundingClientRect(),l=e.posAtCoords({x:n==(e.textDirection==ge.LTR)?s.right-1:s.left+1,y:(a.top+a.bottom)/2});if(l>-1)return r.EditorSelection.cursor(l,n?-1:1)}var u=ke.find(e.docView,t.head);return r.EditorSelection.cursor(u?n?u.posAtEnd:u.posAtStart:n?o.to:o.from,n?-1:1)}(this,e,t,n)}},{key:"moveVertically",value:function(e,t,n){return function(e,t,n,i){var o,s=t.head,l=n?1:-1;if(s==(n?e.state.doc.length:0))return r.EditorSelection.cursor(s);var u=e.coordsAtPos(s);if(u)for(var c=e.dom.getBoundingClientRect(),h=null!==(o=t.goalColumn)&&void 0!==o?o:u.left-c.left,f=c.left+h,d=null!=i?i:5,p=l<0?u.top:u.bottom,v=0;v<50;v+=10){var g=Nt(e,{x:f,y:p+(d+v)*l},l);if(g<0)break;if(g!=s)return r.EditorSelection.cursor(g,void 0,void 0,h)}var m=e.state.doc,y=m.lineAt(s),k=e.state.tabSize,b=t.goalColumn,w=0;if(null==b){for(var _=m.iterRange(y.from,s);!_.next().done;)w=Object(a.d)(_.value,w,k);b=w*e.defaultCharacterWidth}else w=Math.round(b/e.defaultCharacterWidth);if(l<0&&0==y.from)return r.EditorSelection.cursor(0);if(l>0&&y.to==m.length)return r.EditorSelection.cursor(y.to);for(var C=m.line(y.number+l),O=C.from,S=0,x=m.iterRange(C.from,C.to);S>=w&&!x.next().done;){var A=Object(a.e)(x.value,S,w,k),P=A.offset;S=w-A.leftOver,O+=P}return r.EditorSelection.cursor(O,void 0,void 0,b)}(this,e,t,n)}},{key:"scrollPosIntoView",value:function(e){this.viewState.scrollTo=r.EditorSelection.cursor(e),this.requestMeasure()}},{key:"posAtCoords",value:function(e){return this.readMeasured(),Nt(this,e)}},{key:"coordsAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var n=this.state.doc.lineAt(e),r=this.bidiSpans(n),i=this.docView.coordsAt(e,t);return i&&i.left!=i.right?F(i,r[Ee.find(r,e-n.from,-1,t)].dir==ge.LTR==t>0):i}},{key:"bidiSpans",value:function(e){if(e.length>cn)return De(e.length);var t,n=this.textDirection,r=_createForOfIteratorHelper(this.bidiCache);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.from==e.from&&i.dir==n)return i.order}}catch(a){r.e(a)}finally{r.f()}var o=Me(e.slice(),this.textDirection);return this.bidiCache.push(new vn(e.from,e.to,n,o)),o}},{key:"focus",value:function(){var e=this;this.observer.ignore((function(){j(e.contentDOM),e.docView.updateSelection()}))}},{key:"destroy",value:function(){var e,t=_createForOfIteratorHelper(this.plugins);try{for(t.s();!(e=t.n()).done;){e.value.destroy(this)}}catch(n){t.e(n)}finally{t.f()}this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}},{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"themeClasses",get:function(){return he+" "+(this.state.facet(ce)?de:fe)+" "+this.state.facet(ue)}},{key:"contentHeight",get:function(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"hasFocus",get:function(){return this.root.activeElement==this.contentDOM}}],[{key:"domEventHandlers",value:function(e){return st.define((function(){return{}})).eventHandlers(e)}},{key:"theme",value:function(e,t){var n=i.a.newName(),r=[ue.of(n),pt.of(pe(n,e))];return t&&t.dark&&r.push(ce.of(!0)),r}},{key:"baseTheme",value:function(e){return Object(r.precedence)(pt.of(pe(he,e)),"fallback")}}]),e}();un.styleModule=pt,un.inputHandler=tt,un.exceptionSink=Je,un.updateListener=et,un.editable=rt,un.dragMovesSelection=Ye,un.clickAddsSelectionRange=$e,un.mouseSelectionStyle=Ke,un.decorations=dt,un.lineWrapping=un.theme({content:{whiteSpace:"pre-wrap"}}),un.contentAttributes=ft,un.editorAttributes=ht;var cn=4096;function hn(e,t){return null==e?t.getBoundingClientRect().top:e}var fn=-1;function dn(){fn=-1;for(var e=document.querySelectorAll(".cm-content"),t=0;t<e.length;t++){var n=B.get(e[t]);n&&n.editorView.requestMeasure()}}var pn={},vn=function(){function e(t,n,r,i){_classCallCheck(this,e),this.from=t,this.to=n,this.dir=r,this.order=i}return _createClass(e,null,[{key:"update",value:function(t,n){if(n.empty)return t;for(var r=[],i=t.length?t[t.length-1].dir:ge.LTR,o=Math.max(0,t.length-10);o<t.length;o++){var a=t[o];a.dir!=i||n.touchesRange(a.from,a.to)||r.push(new e(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return r}}]),e}(),gn="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function mn(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var yn=r.Facet.define(),kn=un.domEventHandlers({keydown:function(e,t){return On(t.state.facet(yn),e,t,"editor")}});function bn(e,t){return[kn,yn.of(Cn(e,t))]}function wn(e,t,n){return On(e.state.facet(yn),t,e,n)}var _n=null;function Cn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn,r=Object.create(null),i=Object.create(null),o=function(e,t){var n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},a=function(e,t,i,a){for(var s=r[e]||(r[e]=Object.create(null)),l=t.split(/ (?!$)/).map((function(e){return function(e,t){var n,r,i,o,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;++l){var u=a[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))i=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);"mac"==t?o=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}(e,n)})),u=function(t){var n=l.slice(0,t).join(" ");o(n,!0),s[n]||(s[n]={preventDefault:!0,commands:[function(t){var r=_n={view:t,prefix:n,scope:e};return setTimeout((function(){_n==r&&(_n=null)}),4e3),!0}]})},c=1;c<l.length;c++)u(c);var h=l.join(" ");o(h,!1);var f=s[h]||(s[h]={preventDefault:!1,commands:[]});f.commands.push(i),a&&(f.preventDefault=!0)},s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=l[n]||l.key;if(u){var c,h=_createForOfIteratorHelper(l.scope?l.scope.split(" "):["editor"]);try{for(h.s();!(c=h.n()).done;){var f=c.value;a(f,u,l.run,l.preventDefault),l.shift&&a(f,"Shift-"+u,l.shift,l.preventDefault)}}catch(d){h.e(d)}finally{h.f()}}}}catch(d){s.e(d)}finally{s.f()}return r}function On(e,t,n,r){var i=function(e){var t=!(p&&(e.ctrlKey||e.altKey||e.metaKey)||(c||d)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?l:s)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,a="";_n&&_n.view==n&&_n.scope==r&&(a=_n.prefix+" ",_n=null);var u,h=!!a,f=function(e){if(e){var t,r=_createForOfIteratorHelper(e.commands);try{for(r.s();!(t=r.n()).done;){if((0,t.value)(n))return!0}}catch(i){r.e(i)}finally{r.f()}e.preventDefault&&(h=!0)}return!1},v=_createForOfIteratorHelper(e);try{for(v.s();!(u=v.n()).done;){var g=u.value,m=void 0,y=g[r];if(y){if(f(y[a+mn(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(m=s[t.keyCode])&&m!=i){if(f(y[a+mn(m,t,!0)]))return!0}else if(o&&t.shiftKey&&f(y[a+mn(i,t,!0)]))return!0}}}catch(k){v.e(k)}finally{v.f()}return h}var Sn=r.StateField.define({create:function(e){return Tn(e.selection)},update:function(e,t){return t.docChanged||t.selection?Tn(t.state.selection):e},provide:[un.decorations]});function xn(){return[r.EditorState.allowMultipleSelections.of(!0),Sn]}var An=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className=ve("secondaryCursor"),e}}]),n}(ne);An.deco=re.widget({widget:new An(null)});var Pn=re.mark({class:ve("secondarySelection")});function Tn(e){var t=e.ranges,n=e.primaryIndex;if(1==t.length)return re.none;for(var r=[],i=0;i<t.length;i++)if(i!=n){var o=t[i];r.push(o.empty?An.deco.range(o.from):Pn.range(t[i].from,t[i].to))}return re.set(r)}var En=/[\0-\x08\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200C\u200E\u200F\u2028\u2029\uFEFF\uFFF9-\uFFFC]/g,In={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Mn=null;function Dn(){if(null==Mn&&"undefined"!=typeof document&&document.body){var e=document.body.style;Mn=null!=(e.tabSize||e.MozTabSize)}return Mn||!1}var Rn=null!=/x/.unicode?"gu":"g",Fn=r.Facet.define({combine:function(e){var t=Object(r.combineConfig)(e,{render:null,specialChars:En,addSpecialChars:null});return(t.replaceTabs=!Dn())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Rn)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Rn)),t}});function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[Fn.of(e),Nn];return Dn()||t.push(qn),t}var Nn=st.fromClass(function(){function e(t){_classCallCheck(this,e),this.view=t,this.decorations=re.none,this.decorationCache=Object.create(null),this.recompute()}return _createClass(e,[{key:"update",value:function(e){var t=e.prevState.facet(Fn)!=e.state.facet(Fn);t&&(this.decorationCache=Object.create(null)),(t||e.changes.length||e.viewportChanged)&&this.recompute()}},{key:"recompute",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.view.visibleRanges);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.from,o=r.to;this.getDecorationsFor(i,o,t)}}catch(a){n.e(a)}finally{n.f()}this.decorations=re.set(t)}},{key:"getDecorationsFor",value:function(e,t,n){for(var r,i=this.view.state.facet(Fn),o=this.view.state.doc,s=e,l=o.iterRange(e,t);!l.next().done;){if(!l.lineBreak)for(;r=i.specialChars.exec(l.value);){var u=void 0,c=Object(a.b)(r[0],0);if(null!=c){if(9==c){var h=o.lineAt(s+r.index),f=this.view.state.tabSize,d=Object(a.d)(o.sliceString(h.from,s+r.index),0,f);u=re.replace({widget:new jn((f-d%f)*this.view.defaultCharacterWidth)})}else u=this.decorationCache[c]||(this.decorationCache[c]=re.replace({widget:new Ln(i,c)}));n.push(u.range(s+r.index,s+r.index+r[0].length))}}s+=l.value.length}}}]),e}()).decorations(),Ln=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,r)).options=e,i}return _createClass(n,[{key:"toDOM",value:function(){var e,t=((e=this.value)>=32?null:10==e?"\u2424":String.fromCharCode(9216+e))||"\u2022",n="Control character "+(In[this.value]||this.value),r=this.options.render&&this.options.render(this.value,n,t);if(r)return r;var i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.style.color="red",i}},{key:"ignoreEvent",value:function(){return!1}}]),n}(ne),jn=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.textContent="\t",e.className=Vn.tab,e.style.width=this.value+"px",e}},{key:"ignoreEvent",value:function(){return!1}}]),n}(ne),Vn=new i.a({tab:{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}}),qn=un.styleModule.of(Vn),Bn={HeightMap:qe,HeightOracle:Le,MeasuredHeights:je,QueryType:He,ChangedRange:vt,computeOrder:Me,moveVisually:Fe}},"5oMp":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"71hz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lf1/"),i=n("KoMb"),o=n("P8+q"),a={MatchOp:{labels:i.promQLSyntax.MatchOp,type:""},BinaryExpr:{labels:i.promQLSyntax.BinOp,type:""},FunctionIdentifier:{labels:i.promQLSyntax.FunctionIdentifier,type:"function"},AggregateOp:{labels:i.promQLSyntax.AggregateOp,type:"keyword"}},s=[{keyword:"sum(rate(&lt;input vector>[5m]))",snippet:"sum(rate(${<input vector>}[5m]))"},{keyword:"histogram_quantile(&lt;quantile>, sum by(le) (rate(&lt;histogram metric>[5m])))",snippet:"histogram_quantile(${<quantile>}, sum by(le) (rate(${<histogram metric>}[5m])))"},{keyword:'label_replace(&lt;input vector>, "&lt;dst>", "&lt;replacement>", "&lt;src>", "&lt;regex>")',snippet:'label_replace(${<input vector>}, "${<dst>}", "${<replacement>}", "${<src>}", "${<regex>}")'}].map((function(e){return{label:e.name||e.keyword,apply:r.snippet(e.snippet),score:0}}));function l(e){return e.replace(/[&<>"']/g,(function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return"&#039;"}}))}t.HybridComplete=function(){function e(t,n,r){_classCallCheck(this,e),this.prometheusClient=t,this.fuzzyPre=n||"",this.fuzzyPost=r||""}return _createClass(e,[{key:"promQL",value:function(e){var t,n,r,i,o,s,l,u=this,c=e.state,h=e.pos,f=c.tree.resolve(h,-1);return"MetricIdentifier"===(null===(t=f.parent)||void 0===t?void 0:t.name)&&"Identifier"===f.name?this.prometheusClient?this.prometheusClient.labelValues("__name__").then((function(t){return u.arrayToCompletionResult([{labels:t,type:"constant"}].concat(a.FunctionIdentifier,a.AggregateOp),f.start,h,e,c,!0)})):this.arrayToCompletionResult([a.FunctionIdentifier].concat(a.AggregateOp),f.start,h,e,c,!0):"GroupingLabels"===f.name||"GroupingLabel"===(null===(n=f.parent)||void 0===n?void 0:n.name)&&"LabelName"===f.name?this.labelNames(f,h,e,c):"LabelMatchers"===f.name||"LabelMatcher"===(null===(r=f.parent)||void 0===r?void 0:r.name)&&"LabelName"===f.name?this.autocompleteLabelNamesByMetric(f,h,e,c):"LabelMatcher"===(null===(i=f.parent)||void 0===i?void 0:i.name)&&"StringLiteral"===f.name?this.autocompleteLabelValue(f.parent,f,h,e,c):"MatchOp"===f.name?this.arrayToCompletionResult([a.MatchOp],f.start,h,e,c):"BinaryExpr"===(null===(o=f.parent)||void 0===o?void 0:o.name)?this.arrayToCompletionResult([a.BinaryExpr],f.start,h,e,c):"FunctionIdentifier"===(null===(s=f.parent)||void 0===s?void 0:s.name)?this.arrayToCompletionResult([a.FunctionIdentifier],f.start,h,e,c):"AggregateOp"===(null===(l=f.parent)||void 0===l?void 0:l.name)?this.arrayToCompletionResult([a.AggregateOp],f.start,h,e,c):null}},{key:"autocompleteLabelValue",value:function(e,t,n,r,i){var o=this;if(!this.prometheusClient)return null;var a="";this.prometheusClient&&e.firstChild&&"LabelName"===e.firstChild.name&&(a=i.sliceDoc(e.firstChild.start,e.firstChild.end));var s=this.getMetricNameInVectorSelector(t,i);return this.prometheusClient.labelValues(a,s).then((function(e){return o.arrayToCompletionResult([{labels:e,type:"text"}],t.start+1,n,r,i)}))}},{key:"autocompleteLabelNamesByMetric",value:function(e,t,n,r){return this.labelNames(e,t,n,r,this.getMetricNameInVectorSelector(e,r))}},{key:"getMetricNameInVectorSelector",value:function(e,t){for(var n=e;n&&"VectorSelector"!==n.name;)n=n.parent;return n&&n.firstChild&&"MetricIdentifier"===n.firstChild.name?(n=n.firstChild).firstChild&&"Identifier"===n.firstChild.name?(n=n.firstChild,t.sliceDoc(n.start,n.end)):"":""}},{key:"labelNames",value:function(e,t,n,r,i){var o=this;return this.prometheusClient?this.prometheusClient.labelNames(i).then((function(i){return o.arrayToCompletionResult([{labels:i,type:"constant"}],"GroupingLabels"===e.name||"LabelMatchers"===e.name?e.start+1:e.start,t,n,r)})):null}},{key:"arrayToCompletionResult",value:function(e,t,n,r,i){var o,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=i.sliceDoc(t,n),c=[],h=_createForOfIteratorHelper(e);try{for(h.s();!(o=h.n()).done;){var f,d=o.value,p=_createForOfIteratorHelper(d.labels);try{for(p.s();!(f=p.n()).done;){var v=f.value,g=this.filter(l(v),u,v,r);g&&c.push(g)}}catch(w){p.e(w)}finally{p.f()}}}catch(w){h.e(w)}finally{h.f()}if(a){var m,y=_createForOfIteratorHelper(s);try{for(y.s();!(m=y.n()).done;){var k=m.value,b=this.filter(k.label,u,k.apply,r);b&&c.push(b)}}catch(w){y.e(w)}finally{y.f()}}return{from:t,to:n,options:c}}},{key:"filter",value:function(e,t,n,i,a){var s;if(i.filterType!==r.FilterType.Fuzzy&&(s=i.filter(e,t,!1)))return{label:e,apply:n,type:a,score:s};var l=o.match(t,e,{pre:this.fuzzyPre,post:this.fuzzyPost});return l?{label:l.rendered,apply:e,type:a,score:l.score}:null}}]),e}()},"9rSQ":function(e,t,n){"use strict";var r=n("xTJ+");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},BVGc:function(e,t,n){"use strict";n.r(t),n.d(t,"hoverTooltip",(function(){return h})),n.d(t,"showTooltip",(function(){return l})),n.d(t,"tooltips",(function(){return s}));var r=n("3Yt4"),i=n("dC2d"),o=r.ViewPlugin.fromClass(function(){function e(t){var n=this;_classCallCheck(this,e),this.view=t,t.scrollDOM.addEventListener("scroll",this.onscroll=this.onscroll.bind(this)),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.tooltips=t.state.facet(l),this.tooltipViews=this.tooltips.map((function(e){return n.createTooltip(e)}))}return _createClass(e,[{key:"update",value:function(e){var t=e.state.facet(l);if(t==this.tooltips){var n,r=_createForOfIteratorHelper(this.tooltipViews);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.update&&i.update(e)}}catch(v){r.e(v)}finally{r.f()}}else{for(var o=[],a=0;a<t.length;a++){for(var s=t[a],u=-1,c=0;c<this.tooltips.length;c++)this.tooltips[c].create==s.create&&(u=c);if(u<0)o[a]=this.createTooltip(s);else{var h=o[a]=this.tooltipViews[u];h.update&&h.update(e)}}var f,d=_createForOfIteratorHelper(this.tooltipViews);try{for(d.s();!(f=d.n()).done;){var p=f.value;o.indexOf(p)<0&&p.dom.remove()}}catch(v){d.e(v)}finally{d.f()}this.tooltips=t,this.tooltipViews=o,this.tooltips.length&&this.view.requestMeasure(this.measureReq)}e.docChanged&&this.tooltips.length&&this.view.requestMeasure(this.measureReq)}},{key:"createTooltip",value:function(e){var t=e.create(this.view);return t.dom.className=Object(r.themeClass)("tooltip"+(e.style?"."+e.style:"")),this.view.dom.appendChild(t.dom),t.mount&&t.mount(this.view),t}},{key:"destroy",value:function(){this.view.scrollDOM.removeEventListener("scroll",this.onscroll);var e,t=_createForOfIteratorHelper(this.tooltipViews);try{for(t.s();!(e=t.n()).done;){e.value.dom.remove()}}catch(n){t.e(n)}finally{t.f()}}},{key:"readMeasure",value:function(){var e=this;return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map((function(t){return e.view.coordsAtPos(t.pos)})),size:this.tooltipViews.map((function(e){return e.dom.getBoundingClientRect()})),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}},{key:"writeMeasure",value:function(e){for(var t=e.editor,n=0;n<this.tooltipViews.length;n++){var i=this.tooltips[n],o=this.tooltipViews[n].dom,a=e.pos[n],s=e.size[n];if(!a||a.bottom<=t.top||a.top>=t.bottom||a.right<=t.left||a.left>=t.right)o.style.top="-10000px";else{var l=s.right-s.left,u=s.bottom-s.top,c=this.view.textDirection==r.Direction.LTR?Math.min(a.left,e.innerWidth-l):Math.max(0,a.left-l),h=!!i.above;!i.strictSide&&(h?a.top-(s.bottom-s.top)<0:a.bottom+(s.bottom-s.top)>e.innerHeight)&&(h=!h),o.style.top=(h?a.top-u:a.bottom)-t.top+"px",o.style.left=c-t.left+"px"}}}},{key:"onscroll",value:function(){this.tooltips.length&&this.view.requestMeasure(this.measureReq)}}]),e}()),a=r.EditorView.baseTheme({tooltip:{position:"absolute",border:"1px solid silver",backgroundColor:"#f5f5f5",zIndex:100}});function s(){return[o,a]}var l=i.Facet.define(),u=function(){function e(t,n,r,i){_classCallCheck(this,e),this.view=t,this.source=n,this.field=r,this.setHover=i,this.lastMouseMove=null,this.hoverTimeout=-1,this.mouseInside=!1,this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseenter",this.mouseenter),t.dom.addEventListener("mouseleave",this.mouseleave),t.dom.addEventListener("mousemove",this.mousemove)}return _createClass(e,[{key:"checkHover",value:function(){var e=this;if(this.hoverTimeout=-1,this.mouseInside&&!this.active){var t=Date.now(),n=this.lastMouseMove;if(t-n.timeStamp<750)this.hoverTimeout=setTimeout(this.checkHover,750-(t-n.timeStamp));else{var r=this.view.contentDOM.contains(n.target)?this.view.posAtCoords({x:n.clientX,y:n.clientY}):-1,i=r<0?null:this.source(this.view,(function(t,i){return t<=r&&i>=r&&(t==i||c(e.view,t,i,n.clientX,n.clientY))}));i&&this.view.dispatch({effects:this.setHover.of(i)})}}}},{key:"mousemove",value:function(e){var t;this.lastMouseMove=e,this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,750));var n=this.active;if(n&&!function(e){for(var t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(e.target)){var r=n.pos,i=null!==(t=n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords({x:e.clientX,y:e.clientY})==r:c(this.view,r,i,e.clientX,e.clientY,10))||this.view.dispatch({effects:this.setHover.of(null)})}}},{key:"mouseenter",value:function(){this.mouseInside=!0}},{key:"mouseleave",value:function(){this.mouseInside=!1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}},{key:"destroy",value:function(){this.view.dom.removeEventListener("mouseenter",this.mouseenter.bind(this)),this.view.dom.removeEventListener("mouseleave",this.mouseleave.bind(this)),this.view.dom.removeEventListener("mousemove",this.mousemove.bind(this))}},{key:"active",get:function(){return this.view.state.field(this.field)}}]),e}();function c(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=document.createRange(),s=e.domAtPos(t),l=e.domAtPos(n);a.setEnd(l.node,l.offset),a.setStart(s.node,s.offset);for(var u=a.getClientRects(),c=0;c<u.length;c++){var h=u[c];if(Math.max(h.top-i,i-h.bottom,h.left-r,r-h.right)<=o)return!0}return!1}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.StateEffect.define(),o=i.StateField.define({create:function(){return null},update:function(e,r){if(e&&t.hideOnChange&&(r.docChanged||r.selection))return null;var o,a=_createForOfIteratorHelper(r.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(n))return s.value}}catch(c){a.e(c)}finally{a.f()}if(e&&r.docChanged){var l=r.changes.mapPos(e.pos,-1,i.MapMode.TrackDel);if(l<0)return null;var u=Object.assign(Object.create(null),e);return u.pos=l,null!=e.end&&(u.end=r.changes.mapPos(e.end)),u}return e},provide:[l.nFrom((function(e){return e?[e]:[]}))]});return[o,r.ViewPlugin.define((function(t){return new u(t,e,o,n)})),s()]}},CgaS:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("MLWZ"),o=n("9rSQ"),a=n("UnBK"),s=n("SntB");function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=l},DfZB:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},HSsa:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},JEQr:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("yK9s"),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n("tQ2B")),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(o)})),e.exports=l},"K+00":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeSnippets=t.snippet=void 0;var r=n("3Yt4"),i=n("dC2d"),o=n("ggtp"),a=function e(t,n,r,i){_classCallCheck(this,e),this.field=t,this.line=n,this.from=r,this.to=i},s=function(){function e(t,n,r){_classCallCheck(this,e),this.field=t,this.from=n,this.to=r}return _createClass(e,[{key:"map",value:function(t){return new e(this.field,t.mapPos(this.from,-1),t.mapPos(this.to,1))}}]),e}(),l=function(){function e(t,n){_classCallCheck(this,e),this.lines=t,this.fieldPositions=n}return _createClass(e,[{key:"instantiate",value:function(e,t){var n,r=[],o=[t],a=e.doc.lineAt(t),l=/^\s*/.exec(a.slice(0,Math.min(100,a.length)))[0],u=_createForOfIteratorHelper(this.lines);try{for(u.s();!(n=u.n()).done;){var c=n.value;if(r.length){for(var h=l,f=/^\t*/.exec(c)[0].length,d=0;d<f;d++)h+=e.facet(i.EditorState.indentUnit);o.push(t+h.length-f),c=h+c.slice(f)}r.push(c),t+=c.length+1}}catch(p){u.e(p)}finally{u.f()}return{text:r,ranges:this.fieldPositions.map((function(e){return new s(e.field,o[e.line]+e.from,o[e.line]+e.to)}))}}}],[{key:"parse",value:function(t){var n,r,i=[],o=[],s=[],l=_createForOfIteratorHelper(t.split(/\r\n?|\n/));try{for(l.s();!(r=l.n()).done;){for(var u=r.value;n=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(u);){for(var c=n[1]?+n[1]:null,h=n[2]||n[3],f=-1,d=0;d<i.length;d++)(h?i[d].name==h:null!=c&&i[d].seq==c)&&(f=d);if(f<0){for(var p=0;p<i.length&&(null==c||null!=i[p].seq&&i[p].seq<c);)p++;i.splice(p,0,{seq:c,name:h||null}),f=p}s.push(new a(f,o.length,n.index,n.index+h.length)),u=u.slice(0,n.index)+h+u.slice(n.index+n[0].length)}o.push(u)}}catch(v){l.e(v)}finally{l.f()}return new e(o,s)}}]),e}(),u=r.Decoration.widget({widget:new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className=r.themeClass("snippetFieldPosition"),e}}]),n}(r.WidgetType))(null)}),c=r.Decoration.mark({class:r.themeClass("snippetField")}),h=function(){function e(t,n){_classCallCheck(this,e),this.ranges=t,this.active=n,this.deco=r.Decoration.set(t.map((function(e){return(e.from==e.to?u:c).range(e.from,e.to)})))}return _createClass(e,[{key:"map",value:function(t){return new e(this.ranges.map((function(e){return e.map(t)})),this.active)}},{key:"selectionInsideField",value:function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field==t.active&&n.from<=e.from&&n.to>=e.to}))}))}}]),e}(),f=i.StateEffect.define({map:function(e,t){return e&&e.map(t)}}),d=i.StateEffect.define(),p=i.StateField.define({create:function(){return null},update:function(e,t){var n,r=_createForOfIteratorHelper(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is(f))return i.value;if(i.is(d)&&e)return new h(e.ranges,i.value)}}catch(o){r.e(o)}finally{r.f()}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:[r.EditorView.decorations.from((function(e){return e?e.deco:r.Decoration.none}))]});function v(e,t){return i.EditorSelection.create(e.filter((function(e){return e.field==t})).map((function(e){return i.EditorSelection.range(e.from,e.to)})))}function g(e){var t=l.parse(e);return function(e,n){var r=t.instantiate(e.state,n.from),a=r.text,s=r.ranges,l={changes:{from:n.from,to:n.to,insert:i.Text.of(a)}};s.length&&(l.selection=v(s,0)),s.length>1&&(l.effects=f.of(new h(s,0)),void 0===e.state.field(p,!1)&&(l.reconfigure={append:[p,y,o.baseTheme]})),e.dispatch(e.state.update(l))}}function m(e){return function(t){var n=t.state,r=t.dispatch,i=n.field(p,!1);if(!i||e<0&&0==i.active)return!1;var o=i.active+e,a=e>0&&!i.ranges.some((function(t){return t.field==o+e}));return r(n.update({selection:v(i.ranges,o),effects:f.of(a?null:new h(i.ranges,o))})),!0}}t.snippet=g;var y=i.precedence(r.keymap([{key:"Tab",run:m(1),shift:m(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(p,!1)&&(n(t.update({effects:f.of(null)})),!0)}}]),"override");t.completeSnippets=function(e){var t=e.map((function(e){return{label:e.name||e.keyword,apply:g(e.snippet),score:0}}));return function(n){var r=n.tokenBefore();if(!/[\w\u00a1-\uffff]/.test(r.text)&&!n.explicit)return null;for(var i=[],o=0;o<e.length;o++){var a=e[o],s=0;r.text&&!(s=n.filter(a.keyword,r.text))||(t[o].score=s,i.push(t[o]))}return{from:r.from,to:n.pos,options:i,filterDownOn:/^[\w\u00a1-\uffff]+$/}}}},KoMb:function(e,t,n){"use strict";n.r(t),n.d(t,"parser",(function(){return O})),n.d(t,"promQLSyntax",(function(){return S}));var r,i=n("WQMp"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},a=function(){function e(e,t,n,r,i,o,a,s,l){this.cx=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.recovered=o,this.buffer=a,this.bufferBase=s,this.parent=l}return e.prototype.toString=function(){return"["+this.stack.filter((function(e,t){return t%3==0})).concat(this.state)+"]@"+this.pos+(this.recovered?"!"+this.recovered:"")},e.start=function(t,n,r){return void 0===r&&(r=0),new e(t,[],n,r,r,0,[],0,null)},e.prototype.pushState=function(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e},e.prototype.reduce=function(e){var t=e>>19,n=65535&e,r=this.cx.parser;if(0==t)return n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.pushState(r.getGoto(this.state,n,!0),this.reducePos);var i=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[i-2],a=this.bufferBase+this.buffer.length-this.stack[i-1];if(n<r.minRepeatTerm||131072&e||n>r.maxNode&&n<=r.maxRepeatWrap){var s=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,o,s,a+4,!0)}for(this.state=262144&e?this.stack[i]:r.getGoto(this.stack[i-3],n,!0);this.stack.length>i;)this.stack.pop()},e.prototype.storeNode=function(e,t,n,r,i){if(void 0===r&&(r=4),void 0===i&&(i=!1),0==e){var o=this,a=this.buffer.length;if(0==a&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&0==o.buffer[a-4]&&o.buffer[a-1]>-1){if(t==n)return;if(o.buffer[a-2]>=t)return void(o.buffer[a-2]=n)}}if(i&&this.pos!=n){var s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=r}else this.buffer.push(e,t,n,r)},e.prototype.shift=function(e,t,n){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){var r=this.pos,i=e,o=this.cx.parser;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else t<=this.cx.parser.maxNode&&this.buffer.push(t,this.pos,n,4),this.pos=n},e.prototype.apply=function(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)},e.prototype.useNode=function(e,t){var n=this.cx.reused.length-1;(n<0||this.cx.reused[n]!=e)&&(this.cx.reused.push(e),n++);var r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1)},e.prototype.split=function(){for(var t=this,n=t.buffer.length;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;for(var r=t.buffer.slice(n),i=t.bufferBase+n;t&&i==t.bufferBase;)t=t.parent;return new e(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.recovered,r,i,t)},e.prototype.recoverByDelete=function(e,t){var n=e<=this.cx.parser.maxNode;n&&this.storeNode(e,this.pos,t),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.recovered+=2},e.prototype.canShift=function(e){for(var t=new s(this);;){var n=this.cx.parser.stateSlot(t.top,4)||this.cx.parser.hasAction(t.top,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}},Object.defineProperty(e.prototype,"ruleStart",{get:function(){var e=this.cx.parser.stateSlot(this.state,5);return 65536&e?this.stack[this.stack.length-3*(e>>19)+1]:0},enumerable:!0,configurable:!0}),e.prototype.startOf=function(e){for(var t=this.state,n=this.stack.length,r=this.cx.parser;;){var i=r.stateSlot(t,5),o=i>>19,a=65535&i;if(e.indexOf(a)>-1)return this.stack[n-3*(i>>19)+1];if(0==n)return-1;t=0==o?this.stack[n-=3]:r.getGoto(this.stack[(n-=3*(o-1))-3],a,!0)}},e.prototype.recoverByInsert=function(e){var t=this,n=this.cx.parser.nextStates(this.state);if(n.length>4){for(var r=n.filter((function(n){return n!=t.state&&t.cx.parser.hasAction(n,e)})),i=0;r.length<4&&i<n.length;i++)r.indexOf(n[i])<0&&r.push(n[i]);n=r}var o=[];for(i=0;i<n.length&&o.length<4;i++)if(n[i]!=this.state){var a=this.split();a.storeNode(0,a.pos,a.pos,4,!0),a.pushState(n[i],this.pos),a.recovered+=2,o.push(a)}return o},e.prototype.forceReduce=function(){var e=this.cx.parser.stateSlot(this.state,5);return 0!=(65536&e)&&(this.cx.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.recovered+=1),this.reduce(e),!0)},e.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this},e.prototype.toTree=function(){return i.e.build({buffer:l.create(this),group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})},e}();!function(e){e[e.Token=2]="Token",e[e.Reduce=1]="Reduce",e[e.MaxNext=4]="MaxNext"}(r||(r={}));var s=function(){function e(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}return e.prototype.reduce=function(e){var t=65535&e,n=e>>19;0==n?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(n-1);var r=this.stack.cx.parser.getGoto(this.rest[this.offset-3],t,!0);this.top=r},e}(),l=function(){function e(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}return e.create=function(t){return new e(t,t.bufferBase+t.buffer.length,t.buffer.length)},e.prototype.maybeNext=function(){var e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)},Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),e.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},e.prototype.fork=function(){return new e(this.stack,this.pos,this.index)},e}(),u=function(){function e(){this.start=-1,this.value=-1,this.end=-1}return e.prototype.accept=function(e,t){this.value=e,this.end=t},e}(),c=function(){function e(e,t){void 0===t&&(t=e.length),this.string=e,this.length=t}return e.prototype.get=function(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)},e.prototype.read=function(e,t){return this.string.slice(e,Math.min(this.length,t))},e.prototype.clip=function(t){return new e(this.string,t)},e}(),h=function(){function e(e,t){this.data=e,this.id=t}return e.prototype.token=function(e,t,n){!function(e,t,n,r,i){var o=0,a=1<<i;e:for(var s=n.start;0!=(a&e[o]);){for(var l=e[o+1],u=o+3;u<l;u+=2)if((e[u+1]&a)>0){var c=e[u];if(-1==n.value||n.value==c||r.cx.parser.overrides(c,n.value)){n.accept(c,s);break}}for(var h=t.get(s++),f=0,d=e[o+2];f<d;){var p=f+d>>1,v=l+p+(p<<1);if(h<e[v])d=p;else{if(!(h>=e[v+1])){o=e[v+2];continue e}f=p+1}}break}}(this.data,e,t,n,this.id)},e}();function f(e,t){void 0===t&&(t=Uint16Array);for(var n=null,r=0,i=0;r<e.length;){for(var o=0;;){var a=e.charCodeAt(r++),s=!1;if(126==a){o=65535;break}a>=92&&a--,a>=34&&a--;var l=a-32;if(l>=46&&(l-=46,s=!0),o+=l,s)break;o*=46}n?n[i++]=o:n=new t(o)}return n}h.prototype.contextual=!1;var d="undefined"!=typeof process&&/\bparse\b/.test(process.env.LOG),p=function(){function e(e){this.start=[0],this.index=[0],this.nextStart=0,this.trees=[e]}return e.prototype.nodeAt=function(e){if(e<this.nextStart)return null;for(;;){var t=this.trees.length-1;if(t<0)return this.nextStart=1e9,null;var n=this.trees[t],r=this.index[t];if(r!=n.children.length){var o=n.children[r],a=this.start[t]+n.positions[r];if(a>=e)return a==e?o:null;o instanceof i.f?(this.index[t]++,this.nextStart=a+o.length):(this.index[t]++,a+o.length>=e&&(this.trees.push(o),this.start.push(a),this.index.push(0)))}else this.trees.pop(),this.start.pop(),this.index.pop()}},e}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.extended=-1,t.mask=0,t}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.clear=function(e){this.start=e,this.value=this.extended=-1},t}(u),g=new u,m=function(){function e(e){this.tokens=[],this.mainToken=g,this.actions=[],this.tokens=e.tokenizers.map((function(e){return new v}))}return e.prototype.getActions=function(e,t){for(var n=0,r=null,i=e.cx.parser,o=i.tokenizers,a=i.stateSlot(e.state,3),s=0;s<o.length;s++)if(0!=(1<<s&a)){var l=o[s],u=this.tokens[s];(l.contextual||u.start!=e.pos||u.mask!=a)&&(this.updateCachedToken(u,l,e,t),u.mask=a);var c=n;if(u.extended>-1&&(n=this.addActions(e,u.extended,u.end,n)),(n=this.addActions(e,u.value,u.end,n))>c){r=u;break}r&&0==u.value||(r=u)}for(;this.actions.length>n;)this.actions.pop();return r||((r=g).start=e.pos,e.pos==t.length?r.accept(e.cx.parser.eofTerm,e.pos):r.accept(0,e.pos+1)),this.mainToken=r,this.actions},e.prototype.updateCachedToken=function(e,t,n,r){if(e.clear(n.pos),t.token(r,e,n),e.value>-1){var i=n.cx.parser,o=_(i.data,i.specializeTable,e.value);if(o>=0){var a=i.specializations[o][r.read(e.start,e.end)];null!=a&&(0==(1&a)?e.value=a>>1:e.extended=a>>1)}}else n.pos==r.length?e.accept(n.cx.parser.eofTerm,n.pos):e.accept(0,n.pos+1)},e.prototype.putAction=function(e,t,n,r){for(var i=0;i<r;i+=3)if(this.actions[i]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r},e.prototype.addActions=function(e,t,n,r){for(var i=e.state,o=e.cx.parser,a=o.data,s=0;s<2;s++)for(var l=o.stateSlot(i,s?2:1),u=void 0;65535!=(u=a[l]);l+=3)(u==t||0==u&&0==r)&&(r=this.putAction(a[l+1]|a[l+2]<<16,t,n,r));return r},e}(),y=function(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=-1),this.parser=e,this.maxBufferLength=t,this.input=n,this.topTerm=r,this.parent=i,this.wrapType=o,this.reused=[],this.tokens=new m(e)},k=function(){function e(e,t,n){var r=void 0===n?{}:n,o=r.cache,s=void 0===o?void 0:o,l=r.strict,u=void 0!==l&&l,c=r.bufferLength,h=void 0===c?i.a:c,f=r.top,d=void 0===f?void 0:f;this.pos=0,this.recovering=0,this.tokenCount=0;var v=d?e.topRules[d]:e.defaultTop;if(!v)throw new RangeError("Invalid top rule name "+d);this.stacks=[a.start(new y(e,h,t,v[1]),v[0])],this.strict=u,this.cache=s?new p(s):null}return e.prototype.putStack=function(e){this.stacks.push(e),(this.pos<0||e.pos<this.pos)&&(this.pos=e.pos)},e.prototype.advance=function(){var e=this.stacks,t=this.pos;this.stacks=[],this.pos=-1;for(var n=null,r=null,i=0;i<e.length;i++)for(var o=e[i];;){if(o.pos>t)this.putStack(o);else{var a=this.advanceStack(o,e);if(a){o=a;continue}n||(n=[],r=[]),n.push(o);var s=o.cx.tokens.mainToken;r.push(s.value,s.end)}break}if(!this.stacks.length){var l;if(l=n&&function(e){for(var t=null,n=0,r=e;n<r.length;n++){var i=r[n];i.pos==i.cx.input.length&&i.cx.parser.stateFlag(i.state,2)&&(!t||t.recovered>i.recovered)&&(t=i)}return t}(n))return l.toTree();if(this.strict)throw new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n&&(l=this.runRecovery(n,r)))return l.forceAll().toTree();if(this.recovering){var u=1==this.recovering?1:3*this.recovering;this.stacks.length>u&&(this.stacks.sort((function(e,t){return e.recovered-t.recovered})),this.stacks.length=u),this.stacks.some((function(e){return e.reducePos>t}))&&this.recovering--}else if(this.stacks.length>1&&this.stacks[0].buffer.length>200){var c=1e9,h=-1;for(i=0;i<this.stacks.length;i++)(o=this.stacks[i]).buffer.length<c&&(c=o.buffer.length,h=i);c>200&&this.stacks.splice(h,1)}return this.tokenCount++,null},e.prototype.advanceStack=function(e,t){var n=e.pos,r=e.cx,o=r.input,s=r.parser,l=d?e+" -> ":"";if(this.cache)for(var u=this.cache.nodeAt(n);u;){var c=s.group.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(c>-1)return e.useNode(u,c),d&&console.log(l+e+" (via reuse of "+s.getName(u.type.id)+")"),e;if(!(u instanceof i.e)||0==u.children.length||u.positions[0]>0)break;var h=u.children[0];if(!(h instanceof i.e))break;u=h}var f=s.startNested(e.state);e:if(f>-1){var p=s.nested[f],v=p.grammar,g=p.end,m=p.placeholder,k=void 0,b=null,w=void 0,_=void 0,C=void 0;if("function"==typeof v){var O=v(o,e);if(O.stay)break e;b=O.parseNode,w=O.parser,_=O.top,k=O.filterEnd,C=O.wrapType}else w=v;var S=this.scanForNestEnd(e,g,k),x=e.cx.input.clip(S);if(b||!w){var A=b?b(x,e.pos):i.e.empty;return A.length!=S-e.pos&&(A=new i.e(A.type,A.children,A.positions,S-e.pos)),null!=C&&(A=new i.e(s.group.types[C],[A],[0],A.length)),e.useNode(A,s.getGoto(e.state,m,!0)),e}var P=_?w.topRules[_]:w.defaultTop,T=a.start(new y(w,e.cx.maxBufferLength,x,P[1],e,C),P[0],e.pos);return d&&console.log(l+T+" (nested)"),T}var E=s.stateSlot(e.state,4);if(E>0)return e.reduce(E),d&&console.log(l+e+" (via always-reduce "+s.getName(65535&E)+")"),e;for(var I=e.cx.tokens.getActions(e,o),M=0;M<I.length;){var D=I[M++],R=I[M++],F=(S=I[M++],M==I.length||!t),H=F?e:e.split();if(H.apply(D,R,S),d&&console.log(l+H+" (via "+(0==(65536&D)?"shift":"reduce of "+s.getName(65535&D))+" for "+s.getName(R)+" @ "+n+(H==e?"":", split")+")"),F)return H;H.pos>n?this.putStack(H):t.push(H)}return e.cx.parent&&e.pos==o.length?function(e){if(-2==e.cx.wrapType)return null;var t=e.cx.parent,n=e.forceAll().toTree(),r=t.cx.parser,o=r.nested[r.startNested(t.state)];return n=new i.e(n.type,n.children,n.positions.map((function(e){return e-t.pos})),e.pos-t.pos),e.cx.wrapType>-1&&(n=new i.e(r.group.types[e.cx.wrapType],[n],[0],n.length)),e.cx.wrapType=-2,t.useNode(n,r.getGoto(t.state,o.placeholder,!0)),d&&console.log(t+" (via unnest "+(e.cx.wrapType>-1?r.getName(e.cx.wrapType):n.type.name)+")"),t}(e):null},e.prototype.advanceFully=function(e){for(var t=e.pos;;){var n=this.advanceStack(e,null);if(!n)return e;if(n.pos>t)return this.putStack(n),null;e=n}},e.prototype.runRecovery=function(e,t){for(var n=null,r=0;r<e.length;r++){for(var i=e[r],o=t[r<<1],a=t[1+(r<<1)],s=d?i+" -> ":"",l=i.split(),u=s,c=0;l.forceReduce()&&c<10;c++){d&&console.log(u+l+" (via force-reduce)");var h=this.advanceFully(l);if(!h)break;l=h,d&&(u=h+" -> ")}for(var f=0,p=i.recoverByInsert(o);f<p.length;f++){var v=p[f];d&&console.log(s+v+" (via recover-insert)"),this.advanceFully(v)}i.cx.input.length>i.pos?(a==i.pos&&(a++,o=0),i.recoverByDelete(o,a),d&&console.log(s+i+" (via recover-delete "+i.cx.parser.getName(o)+")"),this.putStack(i)):i.cx.parent||n&&!(n.recovered>i.recovered)||(n=i)}return n},e.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()},Object.defineProperty(e.prototype,"badness",{get:function(){return 2*this.stacks[0].recovered/this.tokenCount},enumerable:!0,configurable:!0}),e.prototype.scanForNestEnd=function(e,t,n){for(var r=e.cx.input,i=e.pos;i<r.length;i++)if(g.start=i,g.value=-1,t.token(r,g,e),g.value>-1&&(!n||n(r.read(i,g.end))))return i;return r.length},e}(),b=function(){function e(e,t,n,r,i,o,a,s,l,u,c,h){void 0===h&&(h=null),this.states=e,this.data=t,this.goto=n,this.group=r,this.minRepeatTerm=i,this.tokenizers=o,this.topRules=a,this.nested=s,this.specializeTable=l,this.specializations=u,this.tokenPrecTable=c,this.termNames=h,this.nextStateCache=[],this.maxNode=this.group.types.length-1,this.maxRepeatWrap=this.group.types.length+(this.group.types.length-i)-1;for(var f=0,d=this.states.length/6;f<d;f++)this.nextStateCache[f]=null}return e.prototype.parse=function(e,t){"string"==typeof e&&(e=new c(e));for(var n=new k(this,e,t);;){var r=n.advance();if(r)return r}},e.prototype.startParse=function(e,t){return"string"==typeof e&&(e=new c(e)),new k(this,e,t)},e.prototype.getGoto=function(e,t,n){void 0===n&&(n=!1);var r=this.goto;if(t>=r[0])return-1;for(var i=r[t+1];;){var o=r[i++],a=1&o,s=r[i++];if(a&&n)return s;for(var l=i+(o>>1);i<l;i++)if(r[i]==e)return s;if(a)return-1}},e.prototype.hasAction=function(e,t){for(var n=this.data,r=0;r<2;r++)for(var i=this.stateSlot(e,r?2:1),o=void 0;65535!=(o=n[i]);i+=3)if(o==t||0==o)return n[i+1]|n[i+2]<<16;return 0},e.prototype.stateSlot=function(e,t){return this.states[6*e+t]},e.prototype.stateFlag=function(e,t){return(this.stateSlot(e,0)&t)>0},e.prototype.startNested=function(e){var t=this.stateSlot(e,0);return 4&t?t>>10:-1},e.prototype.validAction=function(e,t){if(t==this.stateSlot(e,4))return!0;for(var n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n])return!1;if(t==(this.data[n+1]|this.data[n+2]<<16))return!0}},e.prototype.nextStates=function(e){var t=this.nextStateCache[e];if(t)return t;for(var n=[],r=this.stateSlot(e,1);65535!=this.data[r];r+=3)0==(1&this.data[r+2])&&n.indexOf(this.data[r+1])<0&&n.push(this.data[r+1]);for(var i=this.goto,o=i[0],a=0;a<o;a++)for(var s=i[a+1];;){for(var l=i[s++],u=i[s++],c=s+(l>>1);s<c;s++)i[s]==e&&n.indexOf(u)<0&&n.push(u);if(1&l)break}return this.nextStateCache[e]=n},e.prototype.overrides=function(e,t){var n=_(this.data,this.tokenPrecTable,t);return n<0||_(this.data,this.tokenPrecTable,e)<n},e.prototype.withNested=function(t){return new e(this.states,this.data,this.goto,this.group,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested.map((function(e){return Object.prototype.hasOwnProperty.call(t,e.name)?{name:e.name,grammar:t[e.name],end:e.end,placeholder:e.placeholder}:e})),this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},e.prototype.withProps=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new e(this.states,this.data,this.goto,(t=this.group).extend.apply(t,n),this.minRepeatTerm,this.tokenizers,this.topRules,this.nested,this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},e.prototype.getName=function(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.group.types[e].name||e)},Object.defineProperty(e.prototype,"eofTerm",{get:function(){return this.maxRepeatWrap+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNested",{get:function(){return this.nested.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0}),e.deserialize=function(t){for(var n=f(t.tokenData),r=t.nodeNames.split(" "),o=r.length,a=0;a<t.repeatNodeCount;a++)r.push("");var s=[];for(a=0;a<r.length;a++)s.push(w);function l(e,t,n){s[e]==w&&(s[e]=Object.create(null)),t.set(s[e],t.deserialize(String(n)))}if(l(0,i.c.error,""),t.nodeProps)for(var u=0,c=t.nodeProps;u<c.length;u++){var d=c[u],p=d[0];for(a=1;a<d.length;a+=2)l(d[a],p,d[a+1])}var v=new i.b(r.map((function(e,t){return new i.d(e,s[t],t)})));return new e(f(t.states,Uint32Array),f(t.stateData),f(t.goto),v,o,t.tokenizers.map((function(e){return"number"==typeof e?new h(n,e):e})),t.topRules,(t.nested||[]).map((function(e){var t=e[3];return{name:e[0],grammar:e[1],end:new h(f(e[2]),0),placeholder:t}})),t.specializeTable,(t.specializations||[]).map(C),t.tokenPrec,t.termNames)},e}(),w=Object.create(null);function _(e,t,n){for(var r=t,i=void 0;65535!=(i=e[r]);r++)if(i==n)return r-t;return-1}function C(e){if(!(e instanceof Object))return e;var t=Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var O=b.deserialize({states:",xOVOPOOO%fOPO'#C`Q%pOQOOO%lOPO'#DkOVOPO'#EtOUOO'#Ex'#ExOVOPO'#EwOUOO'#Ez'#EzO&vOSO'#E{O&}OQO'#EyOUOO'#Ey'#EyOUOO'#C_'#C_OUOO'#Ca'#CaOUOO'#Dl'#DlO(aOPO'#CoO(eOPO'#CxO%lOPO,58zO,wOQO,58zOUOO'#Cp'#CpOUOO'#Cv'#CvO.^OPO,59fO.^OPO,59fO.^OPO,59fO2vOQO,5;YO2zOQO,5;]O.^OPO,59fO.^OPO,59fOUOO'#Er'#ErOUOO,5:V,5:VO3OOQO,5;`O4XOQO,5;cO5hOPO'#E}O5uOPO,5;gOUOO'#E|'#E|OUOO,5;g,5;gOUOO,5;e,5;eO5|OSO'#CrOUOO,59Z,59ZO6TOPO,59dO6[OQO'#CyOUOO,59d,59dOUOO1G.f1G.fOUOO'#DO'#DOO7hOPO'#C}O;}OPO'#C}OUOO'#C|'#C|OVOPO1G/QOUOO'#DP'#DPOVOPO1G/QOVOPO1G/QO@dOSO1G0tOUOO1G0w1G0wOVOPO1G/QOVOPO1G/QOUOO1G0z1G0zO@kOPO,5;iO@oOSO1G1ROUOO1G1R1G1ROUOO'#Ct'#CtO@vOPO,59^OUOO'#Cs'#CsOUOO,59^,59^O@}OPO,59eOUOO1G/O1G/OO(aOPO,59mOUOO'#DS'#DSOUOO'#DU'#DUOEdOPO,59iOUOO'#DW'#DWOUOO'#DZ'#DZOIsOQO7+$lOKSOQO7+$lOLcOQO7+$lOUOO7+&`7+&`OMrOQO7+&hOMyOQO7+$lO! YOQO7+$lOUOO1G1T1G1TOUOO1G1S1G1SOUOO7+&m7+&mO!!iOSO1G.xOUOO1G.x1G.xO!!pOQO1G/POUOO1G/X1G/XOUOO'#DY'#DYOUOO1G/T1G/TOUOO<<JS<<JSO!#|OPO<<JSOUOO1G.y1G.yOUOO7+$d7+$dOUOOAN?nAN?n",stateData:"!$SPOS#xOS~UVOV[OW[OX[OY[OZ[O[[O][O^[O_[O`[Oa[Ob[O!a]O!b]O!c]O!d]O!e]O!f]O!g]O!h]O!i]O!j]O!k]O!l]O!m]O!n]O!o]O!p]O!q]O!r]O!s]O!t]O!u]O!v]O!w]O!x]O!y]O!z]O!{]O!|]O!}]O#O]O#P]O#Q]O#R]O#S]O#T]O#U]O#V]O#W]O#X]O#Y]O#Z]O#[]O#]]O#^]O#_]O#`]O#a]O#dZO#iZO#ySO$PTO$QTO$RWO~ebOkcO#y_O~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![iO!]iO!^jO#gkO#|gO~ioO$SrO~$RWOo#mX!P#mX!Q#mX!R#mX!S#mX!T#mX!U#mX!V#mX!W#mX!X#mX!Y#mX!Z#mX![#mX!]#mX!^#mX#g#mX#v#mX#|#mX#{#mX#z#mX~#ytO~UVOV[OW[OX[OY[OZ[O[[O][O^[O_[O`[Oa[Ob[O!a]O!b]O!c]O!d]O!e]O!f]O!g]O!h]O!i]O!j]O!k]O!l]O!m]O!n]O!o]O!p]O!q]O!r]O!s]O!t]O!u]O!v]O!w]O!x]O!y]O!z]O!{]O!|]O!}]O#O]O#P]O#Q]O#R]O#S]O#T]O#U]O#V]O#W]O#X]O#Y]O#Z]O#[]O#]]O#^]O#_]O#`]O#a]O#dZO#iZO#ySO#{xO$PTO$QTO$RWO~ebOkcOoSa!PSa!QSa!RSa!SSa!TSa!USa!VSa!WSa!XSa!YSa!ZSa![Sa!]Sa!^Sa#gSa#vSa#|Sa#{Sa#zSa~t!POUrPVrPWrPXrPYrPZrP[rP]rP^rP_rP`rParPbrPwrPyrP!arP!brP!crP!drP!erP!frP!grP!hrP!irP!jrP!krP!lrP!mrP!nrP!orP!prP!qrP!rrP!srP!trP!urP!vrP!wrP!xrP!yrP!zrP!{rP!|rP!}rP#OrP#PrP#QrP#RrP#SrP#TrP#UrP#VrP#WrP#XrP#YrP#ZrP#[rP#]rP#^rP#_rP#`rP#arP#drP#irP#yrP$PrP$QrP$RrP~#c!SO~#c!TO~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![iO!]iO!^jO#gkO#{!WO#|gO~odO!P#ka!Q#ka!R#ka!S#ka!T#ka!U#ka!V#ka!W#ka!X#ka!Y#ka!Z#ka![#ka!]#ka!^#ka#g#ka#v#ka#|#ka#{#ka#z#ka~#r!XO#s!XO#t!XO#u!XO~#z!YO$S!ZO~i![O#{!_O~#z!`O#{!aO~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![iO!]iO!^jO#gkO#|gO#zmX#{mX~w!cOy!dOUqXVqXWqXXqXYqXZqX[qX]qX^qX_qX`qXaqXbqX!aqX!bqX!cqX!dqX!eqX!fqX!gqX!hqX!iqX!jqX!kqX!lqX!mqX!nqX!oqX!pqX!qqX!rqX!sqX!tqX!uqX!vqX!wqX!xqX!yqX!zqX!{qX!|qX!}qX#OqX#PqX#QqX#RqX#SqX#TqX#UqX#VqX#WqX#XqX#YqX#ZqX#[qX#]qX#^qX#_qX#`qX#aqX#dqX#iqX#yqX$PqX$QqX$RqX~{!fO!O!gOUqXVqXWqXXqXYqXZqX[qX]qX^qX_qX`qXaqXbqX!aqX!bqX!cqX!dqX!eqX!fqX!gqX!hqX!iqX!jqX!kqX!lqX!mqX!nqX!oqX!pqX!qqX!rqX!sqX!tqX!uqX!vqX!wqX!xqX!yqX!zqX!{qX!|qX!}qX#OqX#PqX#QqX#RqX#SqX#TqX#UqX#VqX#WqX#XqX#YqX#ZqX#[qX#]qX#^qX#_qX#`qX#aqX#dqX#iqX#yqX$PqX$QqX$RqX~#}!kO$O!lO~#i!oO~ioO$S!qO~#z!rO#{!sO~UVOV[OW[OX[OY[OZ[O[[O][O^[O_[O`[Oa[Ob[O!a]O!b]O!c]O!d]O!e]O!f]O!g]O!h]O!i]O!j]O!k]O!l]O!m]O!n]O!o]O!p]O!q]O!r]O!s]O!t]O!u]O!v]O!w]O!x]O!y]O!z]O!{]O!|]O!}]O#O]O#P]O#Q]O#R]O#S]O#T]O#U]O#V]O#W]O#X]O#Y]O#Z]O#[]O#]]O#^]O#_]O#`]O#a]O#dZO#iZO#ySO$PTO$QTO$RWO#zma#{ma~#ytOU|PV|PW|PX|PY|PZ|P[|P]|P^|P_|P`|Pa|Pb|P!a|P!b|P!c|P!d|P!e|P!f|P!g|P!h|P!i|P!j|P!k|P!l|P!m|P!n|P!o|P!p|P!q|P!r|P!s|P!t|P!u|P!v|P!w|P!x|P!y|P!z|P!{|P!||P!}|P#O|P#P|P#Q|P#R|P#S|P#T|P#U|P#V|P#W|P#X|P#Y|P#Z|P#[|P#]|P#^|P#_|P#`|P#a|P#d|P#i|P$P|P$Q|P$R|P~odO!Pnq!Qnq!Rnq!Snq!Tnq!Unq!Vnq!Wnq!Xnq!Ynq!Znq![nq!]nq!^nq#gnq#vnq#|nq#{nq#znq~odO!PdO!QdO!RdO!Snq!Tnq!Unq!Vnq!Wnq!Xnq!Ynq!Znq![nq!]nq!^nq#gnq#vnq#|nq#{nq#znq~odO!PdO!QdO!RdO!SeO!TeO!Unq!Vnq!Wnq!Xnq!Ynq!Znq![nq!]nq!^nq#gnq#vnq#|nq#{nq#znq~#c!yO#}!xO~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![nq!]nq!^nq#gnq#vnq#|nq#{nq#znq~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![iO!]iO!^nq#gnq#vnq#|nq#{nq#znq~i![O#{!{O~odO!PdO!QdO!RdO!SeO!TeO!UfO!VfO!WfO!XfO!YfO!ZfO![iO!]iO!^jO#gkO#|gO#zmi#{mi~#}!|O~U~",goto:"(a#rPPP#s$c$oPPPPPPPPPPPPP${%RP%V%`%cP%RP%i%r$cP%u&U&]&dP&k&rP&rP&uP&x&uPPPPPPPPPPPPPPP$c&{PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$cPP$c'XP$cP$c$c'_$c'k'w(W(ZQQOQmSQnUQw_Q!h!OQ!i!QQ!j!RQ!m!UQ!n!VR!t!`eZOSU_!O!Q!R!U!V!`ePOSU_!O!Q!R!U!V!`Q`PRyaT^PaQu^Q!u!bR!v!eR!]tQ!^tR!z!rQaPQlRRy`Rv_Q!OdQ!QeQ!RfQ!UiR!VjZ}defijZ{defijZzdefijZ|defijR!b{R!e|R!w!eeROSU_!O!Q!R!U!V!`XhQmw!teUOSU_!O!Q!R!U!V!`eXOSU_!O!Q!R!U!V!`dYOSU_!O!Q!R!U!V!`RsXRpWQqWR!p!Y",nodeNames:"\u26a0 LineComment  Expr AggregateExpr AggregateOp Identifier avg bottomk count count_values group max min quantile stddev stdvar sum topk AggregateModifier By by GroupingLabels GroupingLabelList GroupingLabel LabelName Without without FunctionCallBody FunctionCallArgs BinaryExpr BinOp BinModifier GroupModifiers BoolModifier Bool bool OnOrIgnoring Ignoring ignoring On on GroupLeft group_left MaybeGroupingLabels GroupRight group_right BinOp BinOp BinOp BinOp BinOp BinOp BinOp BinOp BinOp BinOp BinOp and unless or FunctionCall FunctionIdentifier abs absent absent_over_time avg_over_time ceil changes clamp_max clamp_min count_over_time days_in_month day_of_month day_of_week delta deriv exp floor histogram_quantile holt_winters hour idelta increase irate label_replace label_join ln log10 log2 max_over_time min_over_time minute month predict_linear quantile_over_time rate resets round scalar sort sort_desc sqrt stddev_over_time stdvar_over_time sum_over_time time timestamp vector year MatrixSelector Duration NumberLiteral OffsetExpr Offset offset ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp MatchOp MatchOp MatchOp",nodeProps:[[i.c.top,2,!0]],repeatNodeCount:0,tokenData:".T~RvX^#ipq#iqr$^rs$sst%guv%rwx%wxy&fyz&kz{&p{|&u|}&|}!O'R!O!P'Y!P!Q(Y!Q!R(_!R![)e![!]*y!^!_+u!_!`,S!`!a,i!c!},v!}#O-^#P#Q-c#Q#R-h#R#S,v#S#T-m#T#o,v#o#p-y#q#r.O#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY#x~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aQ!_!`$g#r#s$nR$nO!ZQ#sP~$sO#u~~$xU#i~OY$sZr$srs%[s#O$s#O#P%a#P~$s~%aO#i~~%dPO~$s~%lQP~OY%gZ~%g~%wO!R~~%|U#i~OY%wZw%wwx%[x#O%w#O#P&`#P~%w~&cPO~%w~&kO#y~~&pO#{~~&uO!P~R&|O$QP!SQ~'RO#z~R'YO$PP!TQP']P!Q!['`P'eR#dP!Q!['`!g!h'n#X#Y'nP'qR{|'z}!O'z!Q![(QP'}P!Q![(QP(VP#dP!Q![(Q~(_O!Q~R(dZ#dP!O!P)V!Q![)e!g!h'n#W#X*Y#X#Y'n#[#]*Y#a#b*Y#g#h*Y#k#l*Y#l#m*_#m#n*YP)[R#dP!Q![)V!g!h'n#X#Y'nR)jY#dP!O!P)V!Q![)e!g!h'n#W#X*Y#X#Y'n#[#]*Y#a#b*Y#g#h*Y#k#l*Y#m#n*YQ*_O#cQP*bR!Q![*k!c!i*k#T#Z*kP*pR#dP!Q![*k!c!i*k#T#Z*kV+QT$OSUR!Q![+a![!]+a!c!}+a#R#S+a#T#o+aR+fTUR!Q![+a![!]+a!c!}+a#R#S+a#T#o+a~+zP!X~!_!`+}~,SO!Y~~,XQ#rP!_!`,_#r#s,dQ,dO!UQ~,iO#t~~,nP!W~!_!`,q~,vO!V~V,}TURiS!Q![,v![!]+a!c!},v#R#S,v#T#o,v~-cO#|~~-hO#}~~-mOo~~-pRO#S-m#S#T%[#T~-m~.OO$R~~.TO$S~",tokenizers:[0,1,2],topRules:{"@top":[0,2]},specializeTable:2256,specializations:[{avg:15,bottomk:17,count:19,count_values:21,group:23,max:25,min:27,quantile:29,stddev:31,stdvar:33,sum:35,topk:37,by:43,without:55,bool:72,ignoring:78,on:82,group_left:86,group_right:92,and:117,unless:119,or:121,abs:127,absent:129,absent_over_time:131,avg_over_time:133,ceil:135,changes:137,clamp_max:139,clamp_min:141,count_over_time:143,days_in_month:145,day_of_month:147,day_of_week:149,delta:151,deriv:153,exp:155,floor:157,histogram_quantile:159,holt_winters:161,hour:163,idelta:165,increase:167,irate:169,label_replace:171,label_join:173,ln:175,log10:177,log2:179,max_over_time:181,min_over_time:183,minute:185,month:187,predict_linear:189,quantile_over_time:191,rate:193,resets:195,round:197,scalar:199,sort:201,sort_desc:203,sqrt:205,stddev_over_time:207,stdvar_over_time:209,sum_over_time:211,time:213,timestamp:215,vector:217,year:219,offset:230}],tokenPrec:6}),S={MatchOp:["=","!=","=~","!~"],BinOp:["^","*","/","%","+","-","==",">=",">","<","<=","!=","and","or","unless"],FunctionIdentifier:["abs","absent","absent_over_time","avg_over_time","ceil","changes","clamp_max","clamp_min","count_over_time","days_in_month","day_of_month","day_of_week","delta","deriv","exp","floor","histogram_quantile","holt_winters","hour","idelta","increase","irate","label_replace","label_join","ln","log10","log2","max_over_time","min_over_time","minute","month","predict_linear","quantile_over_time","rate","resets","round","scalar","sort","sort_desc","sqrt","stddev_over_time","stdvar_over_time","sum_over_time","time","timestamp","vector","year"],AggregateOp:["avg","bottomk","count","count_values","group","max","min","quantile","stddev","stdvar","sum","topk"]}},LYNF:function(e,t,n){"use strict";var r=n("OH9c");e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},Lmem:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},MLWZ:function(e,t,n){"use strict";var r=n("xTJ+");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},OH9c:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},OTTw:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"P8+q":function(e,t,n){var r;e.exports=r={},r.simpleFilter=function(e,t){return t.filter((function(t){return r.test(e,t)}))},r.test=function(e,t){return null!==r.match(e,t)},r.match=function(e,t,n){var r,i=0,o=[],a=t.length,s=0,l=0,u=(n=n||{}).pre||"",c=n.post||"",h=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var f=0;f<a;f++)r=t[f],h[f]===e[i]?(r=u+r+c,i+=1,l+=1+l):l=0,s+=l,o[o.length]=r;return i===e.length?(s=h===e?1/0:s,{rendered:o.join(""),score:s}):null},r.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce((function(t,i,o,a){var s=i;n.extract&&(s=n.extract(i));var l=r.match(e,s,n);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:o,original:i}),t}),[]).sort((function(e,t){return t.score-e.score||e.index-t.index}))):[]}},PxnU:function(e,t,n){"use strict";n.r(t),n.d(t,"LezerSyntax",(function(){return m})),n.d(t,"TreeIndentContext",(function(){return c})),n.d(t,"continuedIndent",(function(){return v})),n.d(t,"delimitedIndent",(function(){return f})),n.d(t,"flatIndent",(function(){return p})),n.d(t,"foldNodeProp",(function(){return g})),n.d(t,"indentNodeProp",(function(){return a}));var r=n("WQMp"),i=n("dC2d"),o=n("3Yt4"),a=new r.c;function s(e){return i.EditorState.indentation.of((function(t,n){return function(e,t,n){for(var i=t.resolve(n),o=i,a=n;;){var s=o.childBefore(a);if(!s)break;s.type.prop(r.c.error)&&s.start==s.end?(i=o,a=s.start):a=(o=s).end+1}for(;i;i=i.parent){var u=l(i);if(u)return u(new c(e,n,i))}return-1}(t,e.getTree(t.state),n)}))}function l(e){var t=e.type.prop(a);if(t)return t;var n,i=e.firstChild;if(i&&(n=i.type.prop(r.c.closedBy))){var o=e.lastChild,s=o&&n.indexOf(o.name)>-1;return function(e){return d(e,!0,1,void 0,s?o.start:void 0)}}return null==e.parent?u:null}function u(){return 0}var c=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e.state,e.overrideIndentation,e.simulateBreak)).pos=r,o.node=i,o}return _createClass(n,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var e=this.state.doc.lineAt(this.node.start);;){for(var t=this.node.resolve(e.from);t.parent&&t.parent.start==t.start;)t=t.parent;if(h(t,this.node))break;e=this.state.doc.lineAt(t.start)}return this.lineIndent(e)}}]),n}(i.IndentContext);function h(e,t){for(var n=t;n;n=n.parent)if(e==n)return!0;return!1}function f(e){var t=e.closing,n=e.align,r=void 0===n||n,i=e.units,o=void 0===i?1:i;return function(e){return d(e,r,o,t)}}function d(e,t,n,i,o){var a=e.textAfter,s=a.match(/^\s*/)[0].length,l=i&&a.slice(s,s+i.length)==i||o==e.pos+s,u=t?function(e){var t=e.node,n=t.childAfter(t.start),i=t.lastChild;if(!n||e.simulateBreak==n.end)return null;for(var o=e.state.doc.lineAt(n.start),a=n.end;;){var s=t.childAfter(a);if(!s||s==i)return null;if(!s.type.prop(r.c.skipped))return s.start<o.to?n:null;a=s.end}}(e):null;return u?e.column(l?u.start:u.end):e.baseIndent+(l?0:e.unit*n)}var p=function(e){return e.baseIndent};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.except,n=e.units,r=void 0===n?1:n;return function(e){var n=t&&t.test(e.textAfter);return e.baseIndent+(n?0:r*e.unit)}}var g=new r.c,m=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var l,u=i.StateEffect.define(),c=a.languageData;this.languageData=i.Facet.define({combine:c?function(e){return e.concat(c)}:void 0}),t=this.parser=t.withProps(i.languageDataProp.add(_defineProperty({},t.topType.name,this.languageData))),this.field=i.StateField.define({create:function(e){return w.advance(r.e.empty,t,e.doc)},update:function(e,n){return e.apply(n,t,u)}}),this.extension=[i.EditorState.syntax.of(this),this.field,o.ViewPlugin.define((function(e){return new O(e,n,u)})),s(this),(l=this,i.EditorState.foldable.of((function(e,t,n){for(var r=null,i=l.getTree(e).resolve(n);i;i=i.parent)if(!(i.end<=n||i.start>n)){if(r&&i.start<t)break;var o=i.type.prop(g);if(o){var a=o(i,e);a&&a.from<=n&&a.from>=t&&a.to>n&&(r=a)}}return r})))]}return _createClass(e,[{key:"getTree",value:function(e){return e.field(this.field).tree}},{key:"parsePos",value:function(e){return e.field(this.field).upto}},{key:"ensureTree",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=e.field(this.field);if(r.upto>=t)return r.updatedTree;if(r.parse||r.startParse(this.parser,e.doc),r.parse.pos<t){var i=k(r.parse,n,t);if(i)return r.stopParse(i,e.doc.length)}return r.parse.pos<t?null:r.stopParse()}},{key:"languageDataFacetAt",value:function(e,t){if(this.parser.hasNested)for(var n=this.getTree(e).resolve(t);n;){var r=n.type.prop(i.languageDataProp);if(r)return r;n=n.parent}return this.languageData}}]),e}(),y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;_classCallCheck(this,e),this.doc=t,this.length=n,this.cursorPos=0,this.string="",this.cursor=t.iter()}return _createClass(e,[{key:"get",value:function(e){if(e>=this.length)return-1;var t=this.cursorPos-this.string.length;return(e<t||e>=this.cursorPos)&&(e<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,t=this.cursorPos-this.string.length),this.string.charCodeAt(e-t)}},{key:"read",value:function(e,t){var n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},{key:"clip",value:function(t){return new e(this.doc,t)}}]),e}();function k(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e6,r=Date.now()+t;;){var i=e.advance();if(i)return i;if(e.pos>n||Date.now()>r)return null}}function b(e,t){var n=e.forceFinish(),r=n.applyChanges([{fromA:e.pos,toA:n.length,fromB:e.pos,toB:n.length}]).append(t.applyChanges([{fromA:0,toA:e.pos,fromB:0,toB:e.pos}]));return{parsed:n,cache:r}}var w=function(){function e(t,n,r){_classCallCheck(this,e),this.tree=t,this.upto=n,this.cache=r,this.parse=null,this.updatedTree=t}return _createClass(e,[{key:"apply",value:function(t,n,r){var i,o=_createForOfIteratorHelper(t.effects);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.is(r))return a.value}}catch(l){o.e(l)}finally{o.f()}if(!t.docChanged)return this;var s=[];return t.changes.iterChangedRanges((function(e,t,n,r){return s.push({fromA:e,toA:t,fromB:n,toB:r})})),e.advance((this.parse?b(this.parse,this.updatedTree).cache:this.cache).applyChanges(s),n,t.state.doc)}},{key:"startParse",value:function(e,t){this.parse=e.startParse(new y(t),{cache:this.cache})}},{key:"stopParse",value:function(e,t){var n;return e?this.cache=e:(e=(n=b(this.parse,this.updatedTree)).parsed,this.cache=n.cache),this.updatedTree=e,this.upto=null!=t?t:this.parse.pos,this.parse=null,e}}],[{key:"advance",value:function(t,n,r){var i=n.startParse(new y(r),{cache:t}),o=k(i,25);if(o)return new e(o,r.length,o);var a=b(i,t);return new e(a.parsed,i.pos,a.cache)}}]),e}(),_="undefined"!=typeof window&&window.requestIdleCallback||function(e,t){var n=t.timeout;return setTimeout(e,n)},C="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout,O=function(){function e(t,n,r){_classCallCheck(this,e),this.view=t,this.syntax=n,this.setSyntax=r,this.working=-1,this.work=this.work.bind(this),this.scheduleWork()}return _createClass(e,[{key:"update",value:function(e){e.docChanged&&this.scheduleWork()}},{key:"scheduleWork",value:function(){if(!(this.working>-1)){var e=this.view.state;e.field(this.syntax.field).upto>=e.doc.length||(this.working=_(this.work,{timeout:200}))}}},{key:"work",value:function(e){this.working=-1;var t=this.view.state,n=t.field(this.syntax.field);if(!(n.upto>=t.doc.length)){n.parse||n.startParse(this.syntax.parser,t.doc);var r=k(n.parse,e?Math.max(25,e.timeRemaining()):100);if(r||n.parse.badness>.8){var i=n.stopParse(r,t.doc.length);this.view.dispatch({effects:this.setSyntax.of(new w(i,t.doc.length,n.cache))})}else this.scheduleWork()}}},{key:"destroy",value:function(){this.working>=0&&C(this.working)}}]),e}()},"Rn+g":function(e,t,n){"use strict";var r=n("LYNF");e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},Sfmq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("vDqi"),i=function(){function e(){_classCallCheck(this,e),this.completeAssociation=new Map,this.labelValues=new Map,this.labelNames=[]}return _createClass(e,[{key:"setAssociation",value:function(e,t){var n=this.completeAssociation.get(e);n||(n=new Map,this.completeAssociation.set(e,n));for(var r=0,i=Object.entries(t);r<i.length;r++){var o=_slicedToArray(i[r],2),a=o[0],s=o[1];if("__name__"!==a){var l=n.get(a);l&&0!==l.length?l.includes(s)||l.push(s):l=[s],n.set(a,l)}}}},{key:"setLabelNames",value:function(e){this.labelNames=e}},{key:"getLabelNames",value:function(e){if(!e||0===e.length)return this.labelNames;var t=this.completeAssociation.get(e);return t?Array.from(t.keys()):[]}},{key:"setLabelValues",value:function(e,t){this.labelValues.set(e,t)}},{key:"getLabelValues",value:function(e,t){if(!t||0===t.length)return this.labelValues.get(e)||[];var n=this.completeAssociation.get(t);return n&&n.get(e)||[]}}]),e}();t.PrometheusClient=function(){function e(t,n,r){_classCallCheck(this,e),this.lookbackInterval=432e5,this.cache=new i,this.url=t,this.errorHandler=n,r&&(this.lookbackInterval=r)}return _createClass(e,[{key:"labelNames",value:function(e){var t=this;if(this.cache.getLabelNames(e)&&this.cache.getLabelNames(e).length>0)return Promise.resolve(this.cache.getLabelNames(e));var n=new Date,i=new Date(n.getTime()-this.lookbackInterval);return e&&0!==e.length?this.series(e,i,n).then((function(n){return t.cache.getLabelNames(e)})):r.default.get(this.url+"/api/v1/labels",{params:{start:i.toISOString(),end:n.toISOString()}}).then((function(e){return e.data?(t.cache.setLabelNames(e.data.data),e.data.data):[]})).catch((function(e){return t.errorHandler&&t.errorHandler(e),[]}))}},{key:"labelValues",value:function(e,t){var n=this;if(this.cache.getLabelValues(e,t)&&this.cache.getLabelValues(e,t).length>0)return Promise.resolve(this.cache.getLabelValues(e,t));var i=new Date,o=new Date(i.getTime()-this.lookbackInterval);return t&&0!==t.length?this.series(t,o,i).then((function(r){return n.cache.getLabelValues(e,t)})):r.default.get(this.url+"/api/v1/label/:name/values".replace(/:name/gi,e),{params:{start:o.toISOString(),end:i.toISOString()}}).then((function(t){return t.data?(n.cache.setLabelValues(e,t.data.data),t.data.data):[]})).catch((function(e){return n.errorHandler&&n.errorHandler(e),[]}))}},{key:"series",value:function(e,t,n){var i=this;return r.default.get(this.url+"/api/v1/series",{params:{start:t.toISOString(),end:n.toISOString(),"match[]":e}}).then((function(t){if(!t.data)return[];var n=t.data.data;return n.forEach((function(t){i.cache.setAssociation(e,t)})),n})).catch((function(e){return i.errorHandler&&i.errorHandler(e),[]}))}}]),e}()},SntB:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=i.concat(o).concat(a),l=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(l,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},St0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("PxnU"),i=n("KoMb"),o=n("mmpu"),a=n("vOYf");t.promQLSyntax=new r.LezerSyntax(i.parser.withProps(o.styleTags({LineComment:"comment",LabelName:"labelName",StringLiteral:"string",NumberLiteral:"number",Duration:"number","abs absent absent_over_time avg_over_time ceil changes clamp_max clamp_min count_over_time days_in_month day_of_month day_of_week delta deriv exp floor histogram_quantile holt_winters hour idelta increase irate label_replace label_join ln log10 log2 max_over_time min_over_time minute month predict_linear quantile_over_time rate resets round scalar sort sort_desc sqrt stddev_over_time stdvar_over_time sum_over_time time timestamp vector year":"functionName","avg bottomk count count_values group max min quantile stddev stdvar sum topk":"operatorKeyword","by without bool on ignoring group_left group_right offset":"modifier","and unless or":"logicOperator",BinOp:"operator",MatchOp:"compareOperator",UnaryOp:"arithmeticOperator","( )":"paren","[ ]":"squareBracket","{ }":"brace","\u26a0":"invalid"})),{languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}}),t.PromQLExtension=function(){function e(){_classCallCheck(this,e),this.complete=a.newCompleteStrategy({enableLSP:!1,url:"",offline:!0})}return _createClass(e,[{key:"setComplete",value:function(e){this.complete=a.newCompleteStrategy(e)}},{key:"asExtension",value:function(){var e=this,n=t.promQLSyntax.languageData.of({autocomplete:function(t){return e.complete.promQL(t)}});return[t.promQLSyntax,n]}}]),e}()},UnBK:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("xAGQ"),o=n("Lmem"),a=n("JEQr");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},WKRy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LSPComplete=function(){function e(t){_classCallCheck(this,e),this.lspClient=t}return _createClass(e,[{key:"promQL",value:function(e){var t=e.state,n=e.pos,r=t.doc.lineAt(n),i={expr:t.doc.sliceString(0),limit:100,positionChar:n-r.from-1>0?n-r.from-1:n-r.from,positionLine:r.number-1};return this.lspClient.complete(i).then((function(e){var t,i,o=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,l="";switch(s.kind){case 12:l="constant";break;case 3:l="function"}var u=s.label;s.textEdit&&(u=s.textEdit.newText,t=s.textEdit),o.push({label:s.label,apply:u,type:l,score:0})}}catch(c){a.e(c)}finally{a.f()}return{from:t?r.from+t.range.start.character:r.from,to:n,options:o}}))}}]),e}()},WQMp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return p}));var r=1024,i=function(){function e(t,n){_classCallCheck(this,e),this.enter=t,this.leave=n,this.result=void 0}return _createClass(e,[{key:"doEnter",value:function(e,t,n){var r=this.enter(e,t,n);return void 0===r||(!1!==r&&(this.result=r),!1)}},{key:"done",get:function(){return void 0!==this.result}}]),e}(),o=0,a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.deserialize;_classCallCheck(this,e),this.id=o++,this.deserialize=n||function(){throw new Error("This node type doesn't define a deserialize function")}}return _createClass(e,[{key:"set",value:function(e,t){return e[this.id]=t,e}},{key:"add",value:function(e){return new s(this,"function"==typeof e?e:l.match(e))}}],[{key:"string",value:function(){return new e({deserialize:function(e){return e}})}},{key:"number",value:function(){return new e({deserialize:Number})}},{key:"flag",value:function(){return new e({deserialize:function(){return!0}})}}]),e}();a.error=a.flag(),a.skipped=a.flag(),a.closedBy=new a({deserialize:function(e){return e.split(" ")}}),a.openedBy=new a({deserialize:function(e){return e.split(" ")}}),a.top=a.flag();var s=function e(t,n){_classCallCheck(this,e),this.prop=t,this.f=n},l=function(){function e(t,n,r){_classCallCheck(this,e),this.name=t,this.props=n,this.id=r}return _createClass(e,[{key:"prop",value:function(e){return this.props[e.id]}}],[{key:"match",value:function(e){var t=Object.create(null);for(var n in e){var r,i=_createForOfIteratorHelper(n.split(" "));try{for(i.s();!(r=i.n()).done;){var o=r.value;t[o]=e[n]}}catch(a){i.e(a)}finally{i.f()}}return function(e){return t[e.name]}}}]),e}();l.none=new l("",Object.create(null),0);var u=function(){function e(t){_classCallCheck(this,e),this.types=t;for(var n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node group")}return _createClass(e,[{key:"extend",value:function(){for(var t=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o,a=_createForOfIteratorHelper(this.types);try{for(a.s();!(o=a.n()).done;){var s,u=o.value,c=null,h=_createForOfIteratorHelper(r);try{for(h.s();!(s=h.n()).done;){var f=s.value,d=f.f(u);if(void 0!==d){if(!c)for(var p in c=Object.create(null),u.props)c[p]=u.props[p];c[f.prop.id]=d}}}catch(v){h.e(v)}finally{h.f()}t.push(c?new l(u.name,c,u.id):u)}}catch(v){a.e(v)}finally{a.f()}return new e(t)}}]),e}(),c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.resolveAt(e);if(0!=t)for(;;){var r=t<0?n.childBefore(e):n.childAfter(e);if(!r||(t<0?r.end:r.start)!=e)break;n=r}return n}},{key:"name",get:function(){return this.type.name}},{key:"depth",get:function(){for(var e=0,t=this.parent;t;t=t.parent)e++;return e}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"firstChild",get:function(){return this.childAfter(this.start-1)}},{key:"lastChild",get:function(){return this.childBefore(this.end+1)}}]),e}(),h=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).type=e,a.children=r,a.positions=i,a.length=o,a}return _createClass(n,[{key:"toString",value:function(){var e=this.children.map((function(e){return e.toString()})).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(a.error)?JSON.stringify(this.name):this.name)+(e.length?"("+e+")":""):e}},{key:"partial",value:function(e,t,r,i,o){for(var a=0;a<this.children.length;a++){var s=this.positions[a];if(s>t)break;var l=this.children[a],u=s+l.length;u<e||(e<=s&&t>=u?(i.push(l),o.push(s+r)):l instanceof n&&l.partial(e-s,t-s,r+s,i,o))}}},{key:"applyChanges",value:function(e){if(0==e.length)return this;var t=[],r=[];function i(e,t,n){var r=-1;return e.iterate({from:t,to:n<0?0:e.length,enter:function(){return r<0&&void 0},leave:function(e,i,o){r<0&&(n<0?o<=t:i>=t)&&!e.prop(a.error)&&(r=n<0?Math.min(t,o-1):Math.max(t,i+1))}}),r>-1?r:n<0?0:e.length}for(var o=0,s=0,u=0;;s++){var c=s==e.length?null:e[s],h=c?i(this,c.fromA,-1):this.length;if(h>u&&this.partial(u,h,o,t,r),!c)break;u=i(this,c.toA,1),o+=c.toB-c.fromB-(c.toA-c.fromA)}return new n(l.none,t,r,this.length+o)}},{key:"cut",value:function(e){if(e>=this.length)return this;for(var t=[],r=[],i=0;i<this.children.length;i++){var o=this.positions[i];if(o>=e)break;var a=this.children[i];t.push(o+a.length<=e?a:a.cut(e-o)),r.push(o)}return new n(this.type,t,r,e)}},{key:"iterate",value:function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,o=void 0===r?this.end:r,a=e.enter,s=e.leave,l=new i(a,s);return this.iterInner(n,o,0,l),l.result}},{key:"iterInner",value:function(e,t,n,r){if(!this.type.name||r.doEnter(this.type,n,n+this.length)){if(e<=t)for(var i=0;i<this.children.length&&!r.done;i++){var o=this.children[i],a=this.positions[i]+n,s=a+o.length;if(a>t)break;s<e||o.iterInner(e,t,a,r)}else for(var l=this.children.length-1;l>=0&&!r.done;l--){var u=this.children[l],c=this.positions[l]+n;if(c+u.length<t)break;c>e||u.iterInner(e,t,c,r)}r.leave&&this.type.name&&r.leave(this.type,n,n+this.length)}}},{key:"resolveAt",value:function(e){if(f==this)for(var t=d;;){var n=t.parent;if(!n)break;if(t.start<e&&t.end>e)return t.resolve(e);t=n}return f=this,d=this.resolveInner(e,0,this)}},{key:"childBefore",value:function(e){return this.findChild(e,-1,0,this)}},{key:"childAfter",value:function(e){return this.findChild(e,1,0,this)}},{key:"findChild",value:function(e,t,r,i){for(var o=0;o<this.children.length;o++){var a=this.positions[o]+r,s=-1;if(a>=e)if(t<0&&o>0)s=o-1;else{if(!(t>0))break;s=o}if(s<0&&(a+this.children[o].length>e||t<0&&o==this.children.length-1)&&(s=o),s>=0){var l=this.children[s],u=this.positions[s]+r;if(0==l.length&&u==e)continue;if(l instanceof n)return l.type.name?new v(l,u,i):l.findChild(e,t,u,i);var c=l.findIndex(e,t,u,0,l.buffer.length);if(c>-1)return new g(l,u,c,i)}}return null}},{key:"resolveInner",value:function(e,t,n){var r=this.findChild(e,0,t,n);return r?r.resolveAt(e):n}},{key:"append",value:function(e){if(e.children.length&&e.positions[0]<this.length)throw new Error("Can't append overlapping trees");return new n(this.type,this.children.concat(e.children),this.positions.concat(e.positions),e.length)}},{key:"balance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return this.children.length<=y?this:k(this.type,l.none,this.children,this.positions,0,this.children.length,0,e,this.length)}},{key:"start",get:function(){return 0}},{key:"end",get:function(){return this.length}}],[{key:"build",value:function(e){return function(e){var t=e.buffer,i=e.group,o=e.topID,a=void 0===o?0:o,s=e.maxBufferLength,u=void 0===s?r:s,c=e.reused,h=void 0===c?[]:c,f=e.minRepeatType,d=void 0===f?i.types.length:f,v=Array.isArray(t)?new m(t,t.length):t,g=i.types;function b(e,t,r,o,a){var s,c=v.id,f=v.start,m=v.end,_=v.size,C=f-e;if(_<0)return r.push(h[c]),o.push(C),void v.next();var O,S=g[c];if(m-f<=u&&(s=function(e){var t=v.fork(),n=0,r=0,i=0,o=t.end-u;e:for(var a=t.pos-e;t.pos>a;){var s=t.size,l=t.pos-s;if(s<0||l<a||t.start<o)break;var c=t.id>=d?4:0,h=t.start;for(t.next();t.pos>l;){if(t.size<0)break e;t.id>=d&&(c+=4),t.next()}r=h,n+=s,i+=c}return n>4?{size:n,start:r,skip:i}:null}(v.pos-t))){for(var x=new Uint16Array(s.size-s.skip),A=v.pos-s.size,P=x.length;v.pos>A;)P=w(s.start,x,P);O=new p(x,m-s.start,i,a),C=s.start-e}else{var T=v.pos-_;v.next();var E=[],I=[],M=c>=i.types.length?c-(i.types.length-d):-1;if(M>-1)for(S=g[M];v.pos>T;)b(f,T,E,I,v.id==M?S:l.none);else for(;v.pos>T;)b(f,T,E,I,l.none);E.reverse(),I.reverse(),O=M>-1&&E.length>y?k(S,S,E,I,0,E.length,0,u,m-f):new n(S,E,I,m-f)}r.push(O),o.push(C)}function w(e,t,n){var r=v.id,i=v.start,o=v.end,a=v.size;v.next();var s=n;if(a>4)for(var l=v.pos-(a-4);v.pos>l;)n=w(e,t,n);return r<d&&(t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r),n}for(var _=[],C=[];v.pos>0;)b(0,0,_,C,l.none);var O=_.length?C[0]+_[0].length:0;return new n(i.types[a],_.reverse(),C.reverse(),O)}(e)}}]),n}(c);h.empty=new h(l.none,[],[],0),h.prototype.parent=null;var f=h.empty,d=h.empty,p=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.none;_classCallCheck(this,e),this.buffer=t,this.length=n,this.group=r,this.type=i}return _createClass(e,[{key:"toString",value:function(){for(var e=[],t=0;t<this.buffer.length;)t=this.childToString(t,e);return e.join(",")}},{key:"childToString",value:function(e,t){var n=this.buffer[e+3],r=this.group.types[this.buffer[e]],i=r.name;if(/\W/.test(i)&&!r.prop(a.error)&&(i=JSON.stringify(i)),n>(e+=4)){for(var o=[];e<n;)e=this.childToString(e,o);i+="("+o.join(",")+")"}return t.push(i),e}},{key:"cut",value:function(t){for(var n=0;n<this.buffer.length&&this.buffer[n+1]<t;)n+=4;for(var r=new Uint16Array(n),i=0;i<n;i+=4)r[i]=this.buffer[i],r[i+1]=this.buffer[i+1],r[i+2]=Math.min(t,this.buffer[i+2]),r[i+3]=Math.min(this.buffer[i+3],n);return new e(r,Math.min(t,this.length),this.group)}},{key:"iterate",value:function(e){var t=e.from,n=void 0===t?0:t,r=e.to,o=void 0===r?this.length:r,a=e.enter,s=e.leave,l=new i(a,s);return this.iterInner(n,o,0,l),l.result}},{key:"iterInner",value:function(e,t,n,r){if(e<=t)for(var i=0;i<this.buffer.length;)i=this.iterChild(e,t,n,i,r);else this.iterRev(e,t,n,0,this.buffer.length,r)}},{key:"iterChild",value:function(e,t,n,r,i){var o=this.group.types[this.buffer[r++]],a=this.buffer[r++]+n,s=this.buffer[r++]+n,l=this.buffer[r++];if(a>t)return this.buffer.length;if(s>=e&&i.doEnter(o,a,s)){for(;r<l&&!i.done;)r=this.iterChild(e,t,n,r,i);i.leave&&i.leave(o,a,s)}return l}},{key:"parentNodesByEnd",value:function(e,t){for(var n=this,r=[],i=function e(t){var i=n.buffer[t+3];if(i==t+4)return i;for(var o=t+4;o<i;)o=e(o);return r.push(t),i},o=e;o<t;)o=i(o);return r}},{key:"iterRev",value:function(e,t,n,r,i,o){var a=this,s=this.parentNodesByEnd(r,i),l=-1,u=-1,c=function(){s.length>0?(l=s.pop(),u=a.buffer[l+3]):u=-1};c();e:for(var h=i;h>r&&!o.done;){for(;u==h;){var f=l,d=this.buffer[f],p=this.buffer[f+1]+n,v=this.buffer[f+2]+n;if(c(),p<=e&&v>=t&&!o.doEnter(this.group.types[d],p,v)){for(h=f;u>f;)c();continue e}}var g=this.buffer[--h],m=this.buffer[--h]+n,y=this.buffer[--h]+n,k=this.buffer[--h];y>e||m<t||(g!=h+4||o.doEnter(this.group.types[k],y,m))&&o.leave&&o.leave(this.group.types[k],y,m)}}},{key:"findIndex",value:function(e,t,n,r,i){for(var o=-1,a=r,s=this.buffer;a<i;){var l=s[a+1]+n,u=s[a+2]+n,c=l==u&&l==e;if(l>=e){if(t>0&&!c)return a;break}if(u>e)return a;c||(o=a),a=s[a+3]}return t<0?o:-1}}]),e}(),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).node=e,o.start=r,o.parent=i,o}return _createClass(n,[{key:"resolveAt",value:function(e){return e<=this.start||e>=this.end?this.parent.resolveAt(e):this.node.resolveInner(e,this.start,this)}},{key:"childBefore",value:function(e){return this.node.findChild(e,-1,this.start,this)}},{key:"childAfter",value:function(e){return this.node.findChild(e,1,this.start,this)}},{key:"toString",value:function(){return this.node.toString()}},{key:"iterate",value:function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,o=void 0===r?this.end:r,a=e.enter,s=e.leave,l=new i(a,s);return this.node.iterInner(n,o,this.start,l),l.result}},{key:"type",get:function(){return this.node.type}},{key:"end",get:function(){return this.start+this.node.length}}]),n}(c),g=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).buffer=e,a.bufferStart=r,a.index=i,a.parent=o,a}return _createClass(n,[{key:"childBefore",value:function(e){var t=this.buffer.findIndex(e,-1,this.bufferStart,this.index+4,this.endIndex);return t<0?null:new n(this.buffer,this.bufferStart,t,this)}},{key:"childAfter",value:function(e){var t=this.buffer.findIndex(e,1,this.bufferStart,this.index+4,this.endIndex);return t<0?null:new n(this.buffer,this.bufferStart,t,this)}},{key:"iterate",value:function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,o=void 0===r?this.end:r,a=e.enter,s=e.leave,l=new i(a,s);return n<=o?this.buffer.iterChild(n,o,this.bufferStart,this.index,l):this.buffer.iterRev(n,o,this.bufferStart,this.index,this.endIndex,l),l.result}},{key:"resolveAt",value:function(e){if(e<=this.start||e>=this.end)return this.parent.resolveAt(e);var t=this.buffer.findIndex(e,0,this.bufferStart,this.index+4,this.endIndex);return t<0?this:new n(this.buffer,this.bufferStart,t,this).resolveAt(e)}},{key:"toString",value:function(){var e=[];return this.buffer.childToString(this.index,e),e.join("")}},{key:"type",get:function(){return this.buffer.group.types[this.buffer.buffer[this.index]]}},{key:"start",get:function(){return this.buffer.buffer[this.index+1]+this.bufferStart}},{key:"end",get:function(){return this.buffer.buffer[this.index+2]+this.bufferStart}},{key:"endIndex",get:function(){return this.buffer.buffer[this.index+3]}}]),n}(c),m=function(){function e(t,n){_classCallCheck(this,e),this.buffer=t,this.index=n}return _createClass(e,[{key:"next",value:function(){this.index-=4}},{key:"fork",value:function(){return new e(this.buffer,this.index)}},{key:"id",get:function(){return this.buffer[this.index-4]}},{key:"start",get:function(){return this.buffer[this.index-3]}},{key:"end",get:function(){return this.buffer[this.index-2]}},{key:"size",get:function(){return this.buffer[this.index-1]}},{key:"pos",get:function(){return this.index}}]),e}(),y=8;function k(e,t,n,r,i,o,a,s,u){var c=[],f=[];if(u<=s)for(var d=i;d<o;d++)c.push(n[d]),f.push(r[d]-a);else for(var p=Math.max(s,Math.ceil(1.5*u/y)),v=i;v<o;){var g=v,m=r[v];for(v++;v<o&&!(r[v]+n[v].length-m>p);v++);if(v==g+1){var w=n[g];if(w instanceof h&&w.type==t&&w.length>p<<1){for(var _=0;_<w.children.length;_++)c.push(w.children[_]),f.push(w.positions[_]+m-a);continue}c.push(w)}else if(v==g+1)c.push(n[g]);else{var C=k(t,t,n,r,g,v,m,s,r[v-1]+n[v-1].length-m);t==l.none||b(C.children,t)||(C=new h(l.none,C.children,C.positions,C.length)),c.push(C)}f.push(m-a)}return new h(e,c,f,u)}function b(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){if(n.value.type==t)return!0}}catch(i){r.e(i)}finally{r.f()}return!1}},dC2d:function(e,t,n){"use strict";n.r(t),n.d(t,"Annotation",(function(){return k})),n.d(t,"AnnotationType",(function(){return b})),n.d(t,"ChangeDesc",(function(){return s})),n.d(t,"ChangeSet",(function(){return l})),n.d(t,"CharCategory",(function(){return q})),n.d(t,"EditorSelection",(function(){return g})),n.d(t,"EditorState",(function(){return $})),n.d(t,"Facet",(function(){return A})),n.d(t,"IndentContext",(function(){return Q})),n.d(t,"MapMode",(function(){return i})),n.d(t,"SelectionRange",(function(){return v})),n.d(t,"StateEffect",(function(){return w})),n.d(t,"StateEffectType",(function(){return _})),n.d(t,"StateField",(function(){return I})),n.d(t,"Transaction",(function(){return C})),n.d(t,"combineConfig",(function(){return J})),n.d(t,"languageDataProp",(function(){return U})),n.d(t,"precedence",(function(){return D})),n.d(t,"tagExtension",(function(){return N}));var r=n("euHR");n.d(t,"Text",(function(){return r.a}));var i,o=n("WQMp"),a=/\r\n?|\n/;!function(e){e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter"}(i||(i={}));var s=function(){function e(t){_classCallCheck(this,e),this.sections=t}return _createClass(e,[{key:"iterGaps",value:function(e){for(var t=0,n=0,r=0;t<this.sections.length;){var i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}},{key:"iterChangedRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e,t)}},{key:"composeDesc",value:function(e){return this.empty?e:e.empty?this:d(this,e)}},{key:"mapDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:f(this,e,t)}},{key:"mapPos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Simple,r=0,o=0,a=0;a<this.sections.length;){var s=this.sections[a++],l=this.sections[a++],u=r+s;if(l<0){if(u>e)return o+(e-r);o+=s}else{if(n!=i.Simple&&u>=e&&(n==i.TrackDel&&r<e&&u>e||n==i.TrackBefore&&r<e||n==i.TrackAfter&&u>e))return-1;if(u>e||u==e&&t<0&&!s)return e==r||t<0?o:o+l;o+=l}r=u}if(e>r)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(r));return o}},{key:"mapPosStable",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0,r=0,i=0,o=0;o<this.sections.length;){var a=this.sections[o++],s=this.sections[o++],l=n+a;if(s<0){if(l>e)return r+Math.max(0,e-n);i=r+=a}else{if(t<=0&&l>=e)return i;r+=s}n=l}return r}},{key:"touchesRange",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=0,r=0;n<this.sections.length&&r<=t;){var i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}},{key:"toString",value:function(){for(var e="",t=0;t<this.sections.length;){var n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}},{key:"length",get:function(){for(var e=0,t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}},{key:"newLength",get:function(){for(var e=0,t=0;t<this.sections.length;t+=2){var n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}},{key:"invertedDesc",get:function(){for(var t=[],n=0;n<this.sections.length;){var r=this.sections[n++],i=this.sections[n++];i<0?t.push(r,i):t.push(i,r)}return new e(t)}}]),e}(),l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).inserted=r,i}return _createClass(n,[{key:"apply",value:function(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return h(this,(function(t,n,r,i,o){return e=e.replace(r,r+(n-t),o)}),!1),e}},{key:"mapDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f(this,e,t,!0)}},{key:"invert",value:function(e){for(var t=this.sections.slice(),i=[],o=0,a=0;o<t.length;o+=2){var s=t[o],l=t[o+1];if(l>=0){t[o]=l,t[o+1]=s;for(var u=o>>1;i.length<u;)i.push(r.a.empty);i.push(s?e.slice(a,a+s):r.a.empty)}a+=s}return new n(t,i)}},{key:"compose",value:function(e){return this.empty?e:e.empty?this:d(this,e,!0)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:f(this,e,t,!0)}},{key:"iterChanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e,t)}},{key:"filter",value:function(e){var t=[],r=[],i=[],o=new p(this);e:for(var a=0,l=0;;){for(var h=a==e.length?1e9:e[a++];l<h||l==h&&0==o.len;){if(o.done)break e;var f=Math.min(o.len,h-l);u(i,f,-1);var d=-1==o.ins?-1:0==o.off?o.ins:0;u(t,f,d),d>0&&c(r,t,o.text),o.forward(f),l+=f}for(var v=e[a++];l<v;){if(o.done)break e;var g=Math.min(o.len,v-l);u(t,g,-1),u(i,g,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(g),l+=g}}return{changes:new n(t,r),filtered:new s(i)}}},{key:"desc",get:function(){return new s(this.sections)}}],[{key:"of",value:function(e,t,i){var o=[],s=[],l=0,h=null;function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||o.length){l<t&&u(o,t-l,-1);var r=new n(o,s);h=h?h.compose(r.map(h)):r,o=[],s=[],l=0}}return function e(d){if(Array.isArray(d)){var p,v=_createForOfIteratorHelper(d);try{for(v.s();!(p=v.n()).done;){e(p.value)}}catch(_){v.e(_)}finally{v.f()}}else if(d instanceof n){if(d.length!=t)throw new RangeError("Mismatched change set length (got ".concat(d.length,", expected ").concat(t,")"));f(),h=h?h.compose(d.map(h)):d}else{var g=d.from,m=d.to,y=void 0===m?g:m,k=d.insert;if(g>y||g<0||y>t)throw new RangeError("Invalid change range ".concat(g," to ").concat(y," (in doc of length ").concat(t,")"));var b=k?"string"==typeof k?r.a.of(k.split(i||a)):k:r.a.empty,w=b.length;if(g==y&&0==w)return;g<l&&f(),g>l&&u(o,g-l,-1),u(o,y-g,w),c(s,o,b),l=y}}(e),f(!h),h}},{key:"empty",value:function(e){return new n(e?[e,-1]:[],[])}}]),n}(s);function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0==t&&n<=0)){var i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}}function c(e,t,n){if(0!=n.length){var i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(r.a.empty);e.push(n)}}}function h(e,t,n){for(var i=e.inserted,o=0,a=0,s=0;s<e.sections.length;){var l=e.sections[s++],u=e.sections[s++];if(u<0)o+=l,a+=l;else{for(var c=o,h=a,f=r.a.empty;c+=l,h+=u,u&&i&&(f=f.append(i[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)l=e.sections[s++],u=e.sections[s++];t(o,c,a,h,f),o=c,a=h}}}function f(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],o=r?[]:null,a=new p(e),h=new p(t),f=0,d=0;;)if(-1==a.ins)f+=a.len,a.next();else if(-1==h.ins&&d<f){var v=Math.min(h.len,f-d);h.forward(v),u(i,v,-1),d+=v}else if(h.ins>=0&&(a.done||d<f||d==f&&(h.len<a.len||h.len==a.len&&!n))){for(u(i,h.ins,-1);f>d&&!a.done&&f+a.len<d+h.len;)f+=a.len,a.next();d+=h.len,h.next()}else{if(!(a.ins>=0)){if(a.done&&h.done)return o?new l(i,o):new s(i);throw new Error("Mismatched change set lengths")}for(var g=0,m=f+a.len;;)if(h.ins>=0&&d>f&&d+h.len<m)g+=h.ins,d+=h.len,h.next();else{if(!(-1==h.ins&&d<m))break;var y=Math.min(h.len,m-d);g+=y,h.forward(y),d+=y}u(i,g,a.ins),o&&c(o,i,a.text),f=m,a.next()}}function d(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=n?[]:null,o=new p(e),a=new p(t),h=!1;;){if(o.done&&a.done)return i?new l(r,i):new s(r);if(0==o.ins)u(r,o.len,0,h),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");var f=Math.min(o.len2,a.len),d=r.length;if(-1==o.ins){var v=-1==a.ins?-1:a.off?0:a.ins;u(r,f,v,h),i&&v&&c(i,r,a.text)}else-1==a.ins?(u(r,o.off?0:o.len,f,h),i&&c(i,r,o.textBit(f))):(u(r,o.off?0:o.len,a.off?0:a.ins,h),i&&!a.off&&c(i,r,a.text));h=(o.ins>f||a.ins>=0&&a.len>f)&&(h||r.length>d),o.forward2(f),a.forward(f)}else u(r,0,a.ins,h),i&&c(i,r,a.text),a.next()}}var p=function(){function e(t){_classCallCheck(this,e),this.set=t,this.i=0,this.next()}return _createClass(e,[{key:"next",value:function(){var e=this.set.sections;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}},{key:"textBit",value:function(e){var t=this.set.inserted,n=this.i-2>>1;return n>=t.length&&!e?r.a.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}},{key:"forward",value:function(e){e==this.len?this.next():(this.len-=e,this.off+=e)}},{key:"forward2",value:function(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return this.ins<0?this.len:this.ins}},{key:"text",get:function(){var e=this.set.inserted,t=this.i-2>>1;return t>=e.length?r.a.empty:e[t]}}]),e}(),v=function(){function e(t,n,r){_classCallCheck(this,e),this.from=t,this.to=n,this.flags=r}return _createClass(e,[{key:"map",value:function(t){var n=t.mapPos(this.from),r=t.mapPos(this.to);return n==this.from&&r==this.to?this:new e(n,r,this.flags)}},{key:"extend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return g.range(e,t);var n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return g.range(this.anchor,n)}},{key:"eq",value:function(e){return this.anchor==e.anchor&&this.head==e.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}},{key:"anchor",get:function(){return 16&this.flags?this.to:this.from}},{key:"head",get:function(){return 16&this.flags?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return 4&this.flags?-1:8&this.flags?1:0}},{key:"bidiLevel",get:function(){var e=3&this.flags;return 3==e?null:e}},{key:"goalColumn",get:function(){var e=this.flags>>5;return 33554431==e?void 0:e}}],[{key:"fromJSON",value:function(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return g.range(e.anchor,e.head)}}]),e}(),g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.ranges=t,this.primaryIndex=n}return _createClass(e,[{key:"map",value:function(t){return t.empty?this:e.create(this.ranges.map((function(e){return e.map(t)})),this.primaryIndex)}},{key:"eq",value:function(e){if(this.ranges.length!=e.ranges.length||this.primaryIndex!=e.primaryIndex)return!1;for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new e([this.primary])}},{key:"addRange",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.create([t].concat(this.ranges),n?0:this.primaryIndex+1)}},{key:"replaceRange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.primaryIndex,r=this.ranges.slice();return r[n]=t,e.create(r,this.primaryIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map((function(e){return e.toJSON()})),primaryIndex:this.primaryIndex}}},{key:"primary",get:function(){return this.ranges[this.primaryIndex]}}],[{key:"fromJSON",value:function(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.primaryIndex||t.primaryIndex>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new e(t.ranges.map((function(e){return v.fromJSON(e)})),t.primaryIndex)}},{key:"single",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new e([e.range(t,n)],0)}},{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==t.length)throw new RangeError("A selection needs at least one range");for(var r=0,i=0;i<t.length;i++){var o=t[i];if(o.empty?o.from<=r:o.from<r)return m(t.slice(),n);r=o.to}return new e(t,n)}},{key:"cursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new v(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}},{key:"range",value:function(e,t,n){var r=(null!=n?n:33554431)<<5;return t<e?new v(t,e,16|r):new v(e,t,r)}}]),e}();function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];e.sort((function(e,t){return e.from-t.from})),t=e.indexOf(n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(i.empty?i.from<=o.to:i.from<o.to){var a=o.from,s=Math.max(i.to,o.to);r<=t&&t--,e.splice(--r,2,i.anchor>i.head?g.range(s,a):g.range(a,s))}}return new g(e,t)}function y(e,t){var n,r=_createForOfIteratorHelper(e.ranges);try{for(r.s();!(n=r.n()).done;){if(n.value.to>t)throw new RangeError("Selection points outside of document")}}catch(i){r.e(i)}finally{r.f()}}var k=function(){function e(t,n){_classCallCheck(this,e),this.type=t,this.value=n}return _createClass(e,null,[{key:"define",value:function(){return new b}}]),e}(),b=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"of",value:function(e){return new k(this,e)}}]),e}(),w=function(){function e(t,n){_classCallCheck(this,e),this.type=t,this.value=n}return _createClass(e,[{key:"map",value:function(t){var n=this.type.map(this.value,t);return void 0===n?void 0:n==this.value?this:new e(this.type,n)}},{key:"is",value:function(e){return this.type==e}}],[{key:"define",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _(e.map||function(e){return e})}},{key:"mapEffects",value:function(e,t){if(!e.length)return e;var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value.map(t);o&&r.push(o)}}catch(a){i.e(a)}finally{i.f()}return r}}]),e}(),_=function(){function e(t){_classCallCheck(this,e),this.map=t}return _createClass(e,[{key:"of",value:function(e){return new w(this,e)}}]),e}(),C=function(){function e(t,n,r,i,o,a,s){_classCallCheck(this,e),this.startState=t,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.reconfigured=a,this.flags=s,this.annotations.some((function(t){return t.type==e.time}))||(this.annotations=this.annotations.concat(e.time.of(Date.now())))}return _createClass(e,[{key:"annotation",value:function(e){var t,n=_createForOfIteratorHelper(this.annotations);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.type==e)return r.value}}catch(i){n.e(i)}finally{n.f()}}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"scrolledIntoView",get:function(){return(1&this.flags)>0}}]),e}();C.time=k.define(),C.userEvent=k.define(),C.addToHistory=k.define();var O=function(){function e(t,n,r,i,o,a,s){_classCallCheck(this,e),this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this.filter=a,this.reconfigure=s,this.finished=null}return _createClass(e,[{key:"combine",value:function(t){var n=this,r=n.changes.mapDesc(t.changes,!0),i=t.changes.map(n.changes);return new e(n.changes.compose(i),t.selection?t.selection.map(r):n.selection?n.selection.map(i):void 0,w.mapEffects(n.effects,i).concat(w.mapEffects(t.effects,r)),n.annotations.length?n.annotations.concat(t.annotations):t.annotations,n.scrollIntoView||t.scrollIntoView,n.filter&&t.filter,t.reconfigure?t.reconfigure.full||!n.reconfigure?t.reconfigure:Object.assign({},n.reconfigure,t.reconfigure):n.reconfigure)}}],[{key:"create",value:function(t,n){var r;if(Array.isArray(n)){if(n.length)return n.map((function(n){return e.create(t,n)})).reduce((function(e,t){return e.combine(t)}));r={}}else{if(n instanceof e)return n;r=n}var i=r.reconfigure;i&&i.append&&((i=Object.assign({},i))["undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf")]=i.append,i.append=void 0);var o=r.selection;return new e(r.changes?t.changes(r.changes):l.empty(t.doc.length),o&&(o instanceof g?o:g.single(o.anchor,o.head)),r.effects?Array.isArray(r.effects)?r.effects:[r.effects]:S,r.annotations?Array.isArray(r.annotations)?r.annotations:[r.annotations]:S,!!r.scrollIntoView,!1!==r.filter,i)}}]),e}(),S=[],x=0,A=function(){function e(t,n,r,i){_classCallCheck(this,e),this.combine=t,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=x++,this.default=t([])}return _createClass(e,[{key:"of",value:function(e){return new T([],this,0,e)}},{key:"compute",value:function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new T(e,this,1,t)}},{key:"computeN",value:function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new T(e,this,2,t)}},{key:"from",value:function(e,t){var n=this;return function(r){return R(t,n.compute([r],(function(t){return e(t.field(r))})))}}},{key:"nFrom",value:function(e,t){var n=this;return function(r){return R(t,n.computeN([r],(function(t){return e(t.field(r))})))}}}],[{key:"define",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t.combine||function(e){return e},t.compareInput||function(e,t){return e===t},t.compare||(t.combine?function(e,t){return e===t}:P),!!t.static)}}]),e}();function P(e,t){return e==t||e.length==t.length&&e.every((function(e,n){return e===t[n]}))}var T=function(){function e(t,n,r,i){_classCallCheck(this,e),this.dependencies=t,this.facet=n,this.type=r,this.value=i,this.id=x++}return _createClass(e,[{key:"dynamicSlot",value:function(e){var t,n=this.value,r=this.facet.compareInput,i=e[this.id]>>1,o=2==this.type,a=!1,s=!1,l=[],u=_createForOfIteratorHelper(this.dependencies);try{for(u.s();!(t=u.n()).done;){var c=t.value;"doc"==c?a=!0:"selection"==c?s=!0:0==(1&e[c.id])&&l.push(e[c.id])}}catch(h){u.e(h)}finally{u.f()}return function(e,t){if(!t||t.reconfigured)return e.values[i]=n(e),1;if(!(a&&t.docChanged||s&&(t.docChanged||t.selection)||l.some((function(t){return(1&j(e,t))>0}))))return 0;var u=n(e),c=t.startState.values[i];return(o?function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}(u,c,r):r(u,c))?0:(e.values[i]=u,1)}}}]),e}();function E(e,t,n){var r=n.map((function(t){return e[t.id]})),i=n.map((function(e){return e.type})),o=r.filter((function(e){return!(1&e)})),a=e[t.id]>>1;return function(e,n){var s,l=n?n.reconfigured?n.startState.config.address[t.id]:a<<1:null,u=null==l,c=_createForOfIteratorHelper(o);try{for(c.s();!(s=c.n()).done;){1&j(e,s.value)&&(u=!0)}}catch(y){c.e(y)}finally{c.f()}if(!u)return 0;for(var h=[],f=0;f<r.length;f++){var d=V(e,r[f]);if(2==i[f]){var p,v=_createForOfIteratorHelper(d);try{for(v.s();!(p=v.n()).done;){var g=p.value;h.push(g)}}catch(y){v.e(y)}finally{v.f()}}else h.push(d)}var m=t.combine(h);return null!=l&&t.compare(m,V(n.startState,l))?0:(e.values[a]=m,1)}}var I=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.id=t,this.createF=n,this.updateF=r,this.compareF=i,this.facets=o}return _createClass(e,[{key:"slot",value:function(e){var t=this,n=e[this.id]>>1;return function(e,r){if(!r)return e.values[n]=t.createF(e),1;var i,o=0;if(r.reconfigured){var a=function(e,t){var n=e.config.address[t];return null==n?null:n>>1}(r.startState,t.id);i=null==a?t.createF(r.startState):r.startState.values[a],o=1}else i=r.startState.values[n];var s=t.updateF(i,r);return o||t.compareF(i,s)||(o=1),o&&(e.values[n]=s),o}}}],[{key:"define",value:function(t){var n=[],r=new e(x++,t.create,t.update,t.compare||function(e,t){return e===t},n);if(t.provide){var i,o=_createForOfIteratorHelper(t.provide);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.push(a instanceof A?a.compute([r],(function(e){return e.field(r)})):a(r))}}catch(s){o.e(s)}finally{o.f()}}return r}}]),e}(),M={fallback:3,default:2,extend:1,override:0};function D(e,t){if(!M.hasOwnProperty(t))throw new RangeError("Invalid precedence: ".concat(t));return new F(e,M[t])}function R(e,t){return e?D(t,e):t}var F=function e(t,n){_classCallCheck(this,e),this.e=t,this.prec=n},H=function e(t,n){_classCallCheck(this,e),this.tag=t,this.extension=n};function N(e,t){return new H(e,t)}var L=function(){function e(t,n,r,i,o){for(_classCallCheck(this,e),this.source=t,this.replacements=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.statusTemplate=[];this.statusTemplate.length<o.length;)this.statusTemplate.push(0)}return _createClass(e,[{key:"staticFacet",value:function(e){var t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}}],[{key:"resolve",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null),i=arguments.length>2?arguments[2]:void 0,o=[],a=Object.create(null),s=_createForOfIteratorHelper(function(e,t){var n=[[],[],[],[]],r=new Map,i=Object.create(null);function o(e,a){var s=r.get(e);if(null!=s){if(s>=a)return;var l=n[s].indexOf(e);l>-1&&n[s].splice(l,1)}if(r.set(e,a),Array.isArray(e)){var u,c=_createForOfIteratorHelper(e);try{for(c.s();!(u=c.n()).done;){o(u.value,a)}}catch(h){c.e(h)}finally{c.f()}}else if(e instanceof H){if(e.tag in i)throw new RangeError("Duplicate use of tag '".concat(String(e.tag),"' in extensions"));i[e.tag]=!0,o(t[e.tag]||e.extension,a)}else e.extension?o(e.extension,a):e instanceof F?o(e.e,e.prec):(n[a].push(e),e instanceof I&&o(e.facets,a))}o(e,M.default);var a,s,l=_createForOfIteratorHelper((s=t,(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(s):[]).concat(Object.keys(s))));try{for(l.s();!(a=l.n()).done;){var u=a.value;!(u in i)&&"full"!=u&&t[u]&&(i[u]=!0,o(t[u],M.default))}}catch(c){l.e(c)}finally{l.f()}return n.reduce((function(e,t){return e.concat(t)}))}(t,r));try{for(s.s();!(n=s.n()).done;){var l=n.value;l instanceof I?o.push(l):(a[l.facet.id]||(a[l.facet.id]=[])).push(l)}}catch(m){s.e(m)}finally{s.f()}for(var u=Object.create(null),c=[],h=[],f=function(){var e=p[d];u[e.id]=h.length<<1,h.push((function(t){return e.slot(t)}))},d=0,p=o;d<p.length;d++)f();var v=function(e){var t=a[e],n=t[0].facet;if(t.every((function(e){return 0==e.type}))){u[n.id]=c.length<<1|1;var r=n.combine(t.map((function(e){return e.value}))),o=i?i.config.address[n.id]:null;if(null!=o){var s=V(i,o);n.compare(r,s)&&(r=s)}c.push(r)}else{var l,f=_createForOfIteratorHelper(t);try{var d=function(){var e=l.value;0==e.type?(u[e.id]=c.length<<1|1,c.push(e.value)):(u[e.id]=h.length<<1,h.push((function(t){return e.dynamicSlot(t)})))};for(f.s();!(l=f.n()).done;)d()}catch(m){f.e(m)}finally{f.f()}u[n.id]=h.length<<1,h.push((function(e){return E(e,n,t)}))}};for(var g in a)v(g);return new e(t,r,h.map((function(e){return e(u)})),u,c)}}]),e}();function j(e,t){if(1&t)return 2;var n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;var i=e.config.dynamicSlots[n](e,e.applying);return e.status[n]=2|i}function V(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}var q,B=A.define({combine:function(e){return e.some((function(e){return e}))},static:!0}),z=A.define(),X=A.define(),U=new o.c,W=A.define(),Q=function(){function e(t,n,r){_classCallCheck(this,e),this.state=t,this.overrideIndentation=n,this.simulateBreak=r}return _createClass(e,[{key:"textAfterPos",value:function(e){return this.state.sliceDoc(e,Math.min(e+100,null!=this.simulateBreak&&this.simulateBreak>e?this.simulateBreak:1e9,this.state.doc.lineAt(e).to))}},{key:"countColumn",value:function(e,t){return Object(r.d)(t<0?e:e.slice(0,t),0,this.state.tabSize)}},{key:"lineIndent",value:function(e){if(this.overrideIndentation){var t=this.overrideIndentation(e.from);if(t>-1)return t}var n=e.slice(0,Math.min(100,e.length));return this.countColumn(n,n.search(/\S/))}},{key:"column",value:function(e){var t=this.state.doc.lineAt(e),n=t.slice(0,e-t.from),r=this.countColumn(n,e-t.from),i=this.overrideIndentation?this.overrideIndentation(t.from):-1;return i>-1&&(r+=i-this.countColumn(n,n.search(/\S/))),r}},{key:"unit",get:function(){return this.state.indentUnit}}]),e}();!function(e){e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other"}(q||(q={}));var Z,G=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{Z=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(ee){}var $=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(_classCallCheck(this,e),this.config=t,this.doc=n,this.selection=r,this.applying=null,this.status=t.statusTemplate.slice(),i&&!i.reconfigured)this.values=i.startState.values.slice();else if(this.values=t.dynamicSlots.map((function(e){return null})),i)for(var o in t.address){var a=t.address[o],s=i.startState.config.address[o];null!=s&&0==(1&a)&&(this.values[a>>1]=V(i.startState,s))}this.applying=i,i&&(i.state=this);for(var l=0;l<this.config.dynamicSlots.length;l++)j(this,l<<1);this.applying=null}return _createClass(e,[{key:"field",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return j(this,n),V(this,n);if(t)throw new RangeError("Field is not present in this state")}},{key:"update",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Y(this,function(e,t){if(!t.filter)return t;for(var n=e.facet(X),r=n.length-1;r>=0;r--)t=O.create(e,n[r](t,e,(function(){return Y(e,t)})));return t}(this,function(e,t){if(!t.filter)return t;var n,r,i,o=!0,a=_createForOfIteratorHelper(e.facet(z));try{for(a.s();!(i=a.n()).done;){var s=(0,i.value)(t,e);if(!1===s){o=!1;break}Array.isArray(s)&&(o=!0===o?s:K(o,s))}}catch(c){a.e(c)}finally{a.f()}if(!0===o)return t;if(!1===o)r=t.changes.invertedDesc,n=l.empty(e.doc.length);else{var u=t.changes.filter(o);n=u.changes,r=u.filtered.invertedDesc}return new O(n,t.selection&&t.selection.map(r),w.mapEffects(t.effects,r),t.annotations,t.scrollIntoView,t.filter,t.reconfigure)}(this,O.create(this,t))))}},{key:"replaceSelection",value:function(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:e},range:g.cursor(t.from+e.length)}}))}},{key:"changeByRange",value:function(e){for(var t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=1;o<t.ranges.length;o++){for(var a=e(t.ranges[o]),s=this.changes(a.changes),l=s.map(r),u=0;u<o;u++)i[u]=i[u].map(l);i.push(a.range.map(r.mapDesc(s,!0))),r=r.compose(l)}return O.create(this,{changes:r,selection:g.create(i,t.primaryIndex)})}},{key:"changes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof l?t:l.of(t,this.doc.length,this.facet(e.lineSeparator))}},{key:"toText",value:function(t){return r.a.of(t.split(this.facet(e.lineSeparator)||a))}},{key:"sliceDoc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}},{key:"facet",value:function(e){var t=this.config.address[e.id];return null==t?e.default:(j(this,t),V(this,t))}},{key:"toJSON",value:function(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}},{key:"phrase",value:function(t){var n,r=_createForOfIteratorHelper(this.facet(e.phrases));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}}catch(o){r.e(o)}finally{r.f()}return t}},{key:"charCategorizer",value:function(e){return t=this.languageDataAt("wordChars",e).join(""),function(e){if(!/\S/.test(e))return q.Space;if(function(e){if(Z)return Z.test(e);for(var t=0;t<e.length;t++){var n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||G.test(n)))return!0}return!1}(e))return q.Word;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return q.Word;return q.Other};var t}},{key:"languageDataAt",value:function(t,n){for(var r=[],i=this.facet(e.syntax),o=i.length?0:1;o<2;o++){var a,s=_createForOfIteratorHelper(this.facet(o?W:i[0].languageDataFacetAt(this,n)));try{for(s.s();!(a=s.n()).done;){var l=a.value;Object.prototype.hasOwnProperty.call(l,t)&&r.push(l[t])}}catch(u){s.e(u)}finally{s.f()}}return r}},{key:"tabSize",get:function(){return this.facet(e.tabSize)}},{key:"lineBreak",get:function(){return this.facet(e.lineSeparator)||"\n"}},{key:"indentUnit",get:function(){var t=this.facet(e.indentUnit);return 9==t.charCodeAt(0)?this.tabSize*t.length:t.length}},{key:"indentWithTabs",get:function(){return 9==this.facet(e.indentUnit).charCodeAt(0)}},{key:"tree",get:function(){var t=this.facet(e.syntax);return t.length?t[0].getTree(this):o.e.empty}}],[{key:"fromJSON",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");return e.create({doc:t.doc,selection:g.fromJSON(t.selection),extensions:n.extensions})}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=L.resolve(t.extensions||[]),i=t.doc instanceof r.a?t.doc:r.a.of((t.doc||"").split(n.staticFacet(e.lineSeparator)||a)),o=t.selection?t.selection instanceof g?t.selection:g.single(t.selection.anchor,t.selection.head):g.single(0);return y(o,i.length),n.staticFacet(B)||(o=o.asSingle()),new e(n,i,o)}}]),e}();function Y(e,t){if(t.finished)return t.finished;t.selection&&y(t.selection,t.changes.newLength);var n=e.config;t.reconfigure&&(n=L.resolve(t.reconfigure.full||n.source,Object.assign(n.replacements,t.reconfigure,{full:void 0}),e));var r=new C(e,t.changes,t.selection,t.effects,t.annotations,t.reconfigure,t.scrollIntoView?1:0);return new $(n,t.changes.apply(e.doc),t.selection||(t.changes?e.selection.map(t.changes):e.selection),r),t.finished=r}function K(e,t){for(var n=[],r=0,i=0;;){var o=void 0,a=void 0;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],a=e[r++];else{if(!(i<t.length))return n;o=t[i++],a=t[i++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function J(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={},o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;)for(var a=n.value,s=0,l=Object.keys(a);s<l.length;s++){var u=l[s],c=a[u],h=i[u];if(void 0===h)i[u]=c;else if(h===c||void 0===c);else{if(!Object.hasOwnProperty.call(r,u))throw new Error("Config merge conflict for field "+u);i[u]=r[u](h,c)}}}catch(d){o.e(d)}finally{o.f()}for(var f in t)void 0===i[f]&&(i[f]=t[f]);return i}$.allowMultipleSelections=B,$.indentation=A.define(),$.tabSize=A.define({combine:function(e){return e.length?e[0]:4}}),$.lineSeparator=A.define({combine:function(e){return e.length?e[0]:void 0},static:!0}),$.indentUnit=A.define({combine:function(e){if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}}),$.phrases=A.define(),$.syntax=A.define(),$.globalLanguageData=W,$.foldable=A.define(),$.changeFilter=z,$.transactionFilter=X},endd:function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},eqyj:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},euHR:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return f}));for(var r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(e){return e?parseInt(e,36):1})),i=1;i<r.length;i++)r[i]+=r[i-1];function o(e){for(var t=1;t<r.length;t+=2)if(r[t]>e)return r[t-1]<=e;return!1}function a(e){return e>=127462&&e<=127487}function s(e,t){if(t==e.length)return t;t&&u(e.charCodeAt(t))&&c(e.charCodeAt(t-1))&&t--;var n=h(e,t);for(t+=d(n);t<e.length;){var r=h(e,t);if(8205==n||8205==r||o(r))t+=d(r),n=r;else{if(!a(r))break;for(var i=0,s=t-2;s>=0&&a(h(e,s));)i++,s-=2;if(i%2==0)break;t+=2}}return t}function l(e,t){for(;t>0;){var n=s(e,t-2);if(n<t)return n;t--}return 0}function u(e){return e>=56320&&e<57344}function c(e){return e>=55296&&e<56320}function h(e,t){var n=e.charCodeAt(t);if(!c(n)||t+1==e.length)return n;var r=e.charCodeAt(t+1);return u(r)?r-56320+(n-55296<<10)+65536:n}function f(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function d(e){return e<65536?1:2}function p(e,t,n){for(var r=0;r<e.length;)9==e.charCodeAt(r)?(t+=n-t%n,r++):(t++,r=s(e,r));return t}function v(e,t,n,r){for(var i=0;i<e.length;){if(t>=n)return{offset:i,leftOver:0};t+=9==e.charCodeAt(i)?r-t%r:1,i=s(e,i)}return{offset:e.length,leftOver:n-t}}var g=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"lineAt",value:function(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));for(var t=0;t<m.length;t+=2)if(m[t]==this){var n=m[t+1];if(n.start<=e&&n.end>=e)return n}return k(this,this.lineInner(e,!1,1,0).finish(this))}},{key:"line",value:function(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));for(var t=0;t<m.length;t+=2)if(m[t]==this){var n=m[t+1];if(n.number==e)return n}return k(this,this.lineInner(e,!0,1,0).finish(this))}},{key:"replace",value:function(e,t,n){var r=[];return this.decompose(0,e,r),r.push(n),this.decompose(t,this.length,r),w.from(r,this.length-(t-e)+n.length)}},{key:"append",value:function(e){return 0==this.length?e:0==e.length?this:w.from([this,e],this.length+e.length)}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=[];return this.decompose(e,t,n),w.from(n,t-e)}},{key:"eq",value:function(e){return this==e||function(e,t){if(e.length!=t.length||e.lines!=t.lines)return!1;for(var n=new S(e),r=new S(t),i=0,o=0;;){if(n.lineBreak!=r.lineBreak||n.done!=r.done)return!1;if(n.done)return!0;if(n.lineBreak)n.next(),r.next(),i=o=0;else{var a=n.value.slice(i),s=r.value.slice(o);if(a.length==s.length){if(a!=s)return!1;n.next(),r.next(),i=o=0}else if(a.length>s.length){if(a.slice(0,s.length)!=s)return!1;i+=s.length,r.next(),o=0}else{if(s.slice(0,a.length)!=a)return!1;o+=a.length,n.next(),i=0}}}}(this,e)}},{key:"iter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new S(this,e)}},{key:"iterRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new x(this,e,t)}},{key:"iterLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new A(this,e)}},{key:"toString",value:function(){return this.sliceString(0)}}],[{key:"of",value:function(t){if(0==t.length)throw new RangeError("A document must have at least one line");if(1==t.length&&!t[0]&&e.empty)return e.empty;var n=_(t);return n<1024?new b(t,n):w.from(b.split(t,[]),n)}}]),e}();"undefined"!=typeof Symbol&&(g.prototype[Symbol.iterator]=function(){return this.iter()});var m=[],y=-2;function k(e,t){return m[y=(y+2)%12]=e,m[y+1]=t,t}var b=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_(e);return _classCallCheck(this,n),(r=t.call(this)).text=e,r.length=i,r}return _createClass(n,[{key:"lineInner",value:function(e,t,n,r){for(var i=0;;i++){var o=this.text[i],a=r+o.length;if((t?n:a)>=e)return new P(r,a,n,o);r=a+1,n++}}},{key:"decompose",value:function(e,t,r){r.push(new n(O(this.text,e,t),Math.min(t,this.length)-Math.max(0,e)))}},{key:"lastLineLength",value:function(){return this.text[this.text.length-1].length}},{key:"firstLineLength",value:function(){return this.text[0].length}},{key:"replace",value:function(e,t,r){var i=this.length+r.length-(t-e);return i>=1024||!(r instanceof n)?_get(_getPrototypeOf(n.prototype),"replace",this).call(this,e,t,r):new n(C(this.text,C(r.text,O(this.text,0,e)),t),i)}},{key:"sliceString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,o=0;i<=t&&o<this.text.length;o++){var a=this.text[o],s=i+a.length;i>e&&o&&(r+=n),e<s&&t>i&&(r+=a.slice(Math.max(0,e-i),t-i)),i=s+1}return r}},{key:"flatten",value:function(e){e[e.length-1]+=this.text[0];for(var t=1;t<this.text.length;t++)e.push(this.text[t])}},{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}}],[{key:"split",value:function(e,t){var r,i=[],o=-1,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value;;){var l=o+s.length+1;if(l<512){o=l,i.push(s);break}var u=512-o-1,c=s.charCodeAt(u);c>=56320&&c<57344&&u++,i.push(s.slice(0,u)),t.push(new n(i,512)),s=s.slice(u),o=-1,i=[]}}catch(h){a.e(h)}finally{a.f()}return-1!=o&&t.push(new n(i,o)),t}}]),n}(g),w=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this)).children=e,i.length=r,i.lines=1;var o,a=_createForOfIteratorHelper(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;i.lines+=s.lines-1}}catch(l){a.e(l)}finally{a.f()}return i}return _createClass(n,[{key:"lineInner",value:function(e,t,n,r){for(var i=0;;i++){var o=this.children[i],a=r+o.length,s=n+o.lines-1;if((t?s:a)>=e){var l=void 0,u=o.lineInner(e,t,n,r);return u.from==r&&(l=this.lineLengthTo(i))&&(u.from-=l,u.content=null),u.to==a&&(l=this.lineLengthFrom(i+1))&&(u.to+=l,u.content=null),u}r=a,n=s}}},{key:"decompose",value:function(e,t,n){for(var r=0,i=0;i<t&&r<this.children.length;r++){var o=this.children[r],a=i+o.length;e<a&&t>i&&(i>=e&&a<=t?n.push(o):o.decompose(e-i,t-i,n)),i=a}}},{key:"lineLengthTo",value:function(e){for(var t=0,n=e-1;n>=0;n--){var r=this.children[n];if(r.lines>1)return t+r.lastLineLength();t+=r.length}return t}},{key:"lastLineLength",value:function(){return this.lineLengthTo(this.children.length)}},{key:"lineLengthFrom",value:function(e){for(var t=0,n=e;n<this.children.length;n++){var r=this.children[n];if(r.lines>1)return t+r.firstLineLength();t+=r.length}return t}},{key:"firstLineLength",value:function(){return this.lineLengthFrom(0)}},{key:"replace",value:function(e,t,r){if(r.length<512&&t-e<512)for(var i=r.length-(t-e),o=0,a=0;o<this.children.length;o++){var s=this.children[o],l=a+s.length;if(e>=a&&t<=l&&s.length+i<this.length+i>>2&&s.length+i>0){var u=this.children.slice();return u[o]=s.replace(e-a,t-a,r),new n(u,this.length+i)}a=l}return _get(_getPrototypeOf(n.prototype),"replace",this).call(this,e,t,r)}},{key:"sliceString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,o=0;o<t&&i<this.children.length;i++){var a=this.children[i],s=o+a.length;if(e<s&&t>o){var l=a.sliceString(e-o,t-o,n);if(e>=o&&t<=s)return l;r+=l}o=s}return r}},{key:"flatten",value:function(e){var t,n=_createForOfIteratorHelper(this.children);try{for(n.s();!(t=n.n()).done;){t.value.flatten(e)}}catch(r){n.e(r)}finally{n.f()}}}],[{key:"from",value:function(e,t){if(!e.every((function(e){return e instanceof g})))throw new Error("NOP");if(t<1024){var r,i=[""],o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){r.value.flatten(i)}}catch(m){o.e(m)}finally{o.f()}return new b(i,t)}var a=Math.max(512,t>>3),s=a<<1,l=a>>1,u=[],c=0,h=[];function f(e){var t,r=e.length;if(r)if(r>s&&e instanceof n){var i,o=_createForOfIteratorHelper(e.children);try{for(o.s();!(i=o.n()).done;){f(i.value)}}catch(m){o.e(m)}finally{o.f()}}else r>l&&(c>l||0==c)?(d(),u.push(e)):e instanceof b&&c>0&&(t=h[h.length-1])instanceof b&&e.length+t.length<=512?(c+=r,h[h.length-1]=new b(C(e.text,t.text.slice()),e.length+t.length)):(c+r>a&&d(),c+=r,h.push(e))}function d(){0!=c&&(u.push(1==h.length?h[0]:n.from(h,c)),c=0,h.length=0)}var p,v=_createForOfIteratorHelper(e);try{for(v.s();!(p=v.n()).done;){f(p.value)}}catch(m){v.e(m)}finally{v.f()}return d(),1==u.length?u[0]:new n(u,t)}}]),n}(g);function _(e){var t,n=-1,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){n+=t.value.length+1}}catch(i){r.e(i)}finally{r.f()}return n}function C(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9,i=0,o=0,a=!0;o<e.length&&i<=r;o++){var s=e[o],l=i+s.length;l>=n&&(l>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(t[t.length-1]+=s,a=!1):t.push(s)),i=l+1}return t}function O(e,t,n){return C(e,[""],t,n)}g.empty=g.of([""]);var S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[n>0?0:t instanceof b?t.text.length:t.children.length]}return _createClass(e,[{key:"next",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;;){var t=this.nodes.length-1;if(t<0)return this.done=!0,this.value="",this.lineBreak=!1,this;var n=this.nodes[t],r=this.offsets[t];if(n instanceof b){if(r!=(this.dir>0?0:n.text.length)&&!this.lineBreak){if(this.lineBreak=!0,0==e)return this.value="\n",this;e--;continue}var i=n.text[r-(this.dir<0?1:0)];if(this.offsets[t]=r+=this.dir,r==(this.dir>0?n.text.length:0)&&(this.nodes.pop(),this.offsets.pop()),this.lineBreak=!1,i.length>Math.max(0,e))return this.value=0==e?i:this.dir>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else if(r==(this.dir>0?n.children.length:0))this.nodes.pop(),this.offsets.pop();else{var o=n.children[this.dir>0?r:r-1],a=o.length;this.offsets[t]=r+this.dir,e>a?e-=a:(this.nodes.push(o),this.offsets.push(this.dir>0?0:o instanceof b?o.text.length:o.children.length))}}}}]),e}(),x=function(){function e(t,n,r){_classCallCheck(this,e),this.value="",this.cursor=new S(t,n>r?-1:1),n>r?(this.skip=t.length-n,this.limit=n-r):(this.skip=n,this.limit=r-n)}return _createClass(e,[{key:"next",value:function(){if(this.limit<=0)this.limit=-1;else{var e=this.cursor.next(this.skip),t=e.value,n=e.lineBreak,r=e.done;this.skip=0,this.value=t;var i=n?1:t.length;i>this.limit&&(this.value=this.cursor.dir>0?t.slice(0,this.limit):t.slice(i-this.limit)),r||0==this.value.length?this.limit=-1:this.limit-=this.value.length}return this}},{key:"lineBreak",get:function(){return this.cursor.lineBreak}},{key:"done",get:function(){return this.limit<0}}]),e}(),A=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.value="",this.done=!1,this.cursor=t.iter(),this.skip=n}return _createClass(e,[{key:"next",value:function(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){var e=this.cursor.next(this.skip),t=e.value,n=e.lineBreak,r=e.done;if(this.skip=0,r||n)return this;this.value+=t}}},{key:"lineBreak",get:function(){return!1}}]),e}(),P=function(){function e(t,n,r,i){_classCallCheck(this,e),this.from=t,this.to=n,this.number=r,this.content=i}return _createClass(e,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if("string"==typeof this.content)return t==e+1?this.content.charAt(e):this.content.slice(e,t);if(e==t)return"";var n=this.content.slice(e,t);return 0==e&&t==this.length&&(this.content=n),n}},{key:"finish",value:function(e){return null==this.content&&(this.content=new T(e,this.from)),this}},{key:"findClusterBreak",value:function(e,t){if(e<0||e>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");var n,r;return"string"==this.content?(n=this.from,r=this.content):(n=Math.max(0,e-256),r=this.slice(n,Math.min(this.length,n+512))),(t?s:l)(r,e-n)+n}},{key:"length",get:function(){return this.to-this.from}}]),e}(),T=function(){function e(t,n){_classCallCheck(this,e),this.doc=t,this.start=n,this.cursor=null,this.strings=null}return _createClass(e,[{key:"slice",value:function(e,t){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(var n="",r=0,i=0;;i++){i==this.strings.length&&this.strings.push(this.cursor.next().value);var o=this.strings[i],a=r;if(!((r+=o.length)<=e)&&(n+=o.slice(Math.max(0,e-a),Math.min(o.length,t-a)),r>=t))return n}}}]),e}()},f7Ao:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("St0M");t.PromQLExtension=r.PromQLExtension,t.promQLSyntax=r.promQLSyntax},g7np:function(e,t,n){"use strict";var r=n("2SVd"),i=n("5oMp");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},ggtp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseTheme=void 0;var r=n("3Yt4");t.baseTheme=r.EditorView.baseTheme({"tooltip.autocomplete":{fontFamily:"monospace",overflowY:"auto",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}},"snippetField@light":{backgroundColor:"#ddd"},"snippetField@dark":{backgroundColor:"#333"},snippetFieldPosition:{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},completionIcon:{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},"completionIcon.function, completionIcon.method":{"&:after":{content:"'\u0192'"}},"completionIcon.class":{"&:after":{content:"'\u25cb'"}},"completionIcon.interface":{"&:after":{content:"'\u25cc'"}},"completionIcon.variable":{"&:after":{content:"'\ud835\udc65'"}},"completionIcon.constant":{"&:after":{content:"'\ud835\udc36'"}},"completionIcon.type":{"&:after":{content:"'\ud835\udc61'"}},"completionIcon.enum":{"&:after":{content:"'\u222a'"}},"completionIcon.property":{"&:after":{content:"'\u25a1'"}},"completionIcon.keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},"completionIcon.namespace":{"&:after":{content:"'\u25a2'"}},"completionIcon.text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}})},"jfS+":function(e,t,n){"use strict";var r=n("endd");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},jvbj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=n("dC2d"),i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"eq",value:function(e){return this==e}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new o(e,t,this)}}]),e}();i.prototype.startSide=i.prototype.endSide=0,i.prototype.point=!1,i.prototype.mapMode=r.MapMode.TrackDel;var o=function e(t,n,r){_classCallCheck(this,e),this.from=t,this.to=n,this.value=r};function a(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}var s=1e9,l=function(){function e(t,n,r,i){_classCallCheck(this,e),this.from=t,this.to=n,this.value=r,this.maxPoint=i}return _createClass(e,[{key:"findIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t*s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e<=0)return r;for(var i=t<0?this.to:this.from,o=r,a=i.length;;){if(o==a)return o;var l=o+a>>1,u=i[l]-e||(t<0?this.value[l].startSide:this.value[l].endSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}},{key:"between",value:function(e,t,n,r){for(var i=this.findIndex(t,-1),o=this.findIndex(n,1,void 0,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}},{key:"map",value:function(t,n){for(var r=[],i=[],o=[],a=-1,s=-1,l=0;l<this.value.length;l++){var u=void 0,c=void 0,h=this.value[l],f=this.from[l]+t,d=this.to[l]+t;if(f==d){var p=n.mapPos(f,h.startSide,h.mapMode);if(p<0)continue;u=c=p}else if((u=n.mapPos(f,h.startSide))>(c=n.mapPos(d,h.endSide))||u==c&&h.startSide>0&&h.endSide<=0)continue;(c-u||h.endSide-h.startSide)<0||(a<0&&(a=u),h.point&&(s=Math.max(s,c-u)),r.push(h),i.push(u-a),o.push(c-a))}return{mapped:r.length?new e(i,o,r,s):null,pos:a}}},{key:"length",get:function(){return this.to[this.to.length-1]}}]),e}(),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.empty,i=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.chunkPos=t,this.chunk=n,this.nextLayer=r,this.maxPoint=i}return _createClass(e,[{key:"chunkEnd",value:function(e){return this.chunkPos[e]+this.chunk[e].length}},{key:"update",value:function(t){var n=t.add,r=void 0===n?[]:n,i=t.sort,s=void 0!==i&&i,l=t.filter,u=t.filterFrom,f=void 0===u?0:u,d=t.filterTo,p=void 0===d?this.length:d;if(0==r.length&&!l)return this;if(s&&r.slice().sort(a),this==e.empty)return r.length?e.of(r):this;for(var v=new h(this,null,-1).goto(0),g=0,m=[],y=new c;v.value||g<r.length;)if(g<r.length&&(v.from-r[g].from||v.startSide-r[g].value.startSide)>=0){var k=r[g++];y.addInner(k.from,k.to,k.value)||m.push(k)}else 1==v.rangeIndex&&v.chunkIndex<this.chunk.length&&(g==r.length||this.chunkEnd(v.chunkIndex)<r[g].from)&&(!l||f>this.chunkEnd(v.chunkIndex)||p<this.chunkPos[v.chunkIndex])&&y.addChunk(this.chunkPos[v.chunkIndex],this.chunk[v.chunkIndex])?v.nextChunk():((!l||f>v.to||p<v.from||l(v.from,v.to,v.value))&&(y.addInner(v.from,v.to,v.value)||m.push(new o(v.from,v.to,v.value))),v.next());return y.finishInner(this.nextLayer!=e.empty||m.length?this.nextLayer.update({add:m,filter:l,filterFrom:f,filterTo:p}):e.empty)}},{key:"map",value:function(t){if(0==t.length||this==e.empty)return this;for(var n=[],r=[],i=-1,o=0;o<this.chunk.length;o++){var a=this.chunkPos[o],s=this.chunk[o],l=t.touchesRange(a,a+s.length);if(!1===l)i=Math.max(i,s.maxPoint),n.push(s),r.push(t.mapPos(a));else if(!0===l){var u=s.map(a,t),c=u.mapped,h=u.pos;c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}var f=this.nextLayer.map(t);return 0==n.length?f:new e(r,n,f,i)}},{key:"between",value:function(t,n,r){if(this!=e.empty){for(var i=0;i<this.chunk.length;i++){var o=this.chunkPos[i],a=this.chunk[i];if(n>=o&&t<=o+a.length&&!1===a.between(o,t-o,n-o,r))return}this.nextLayer.between(t,n,r)}}},{key:"iter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return f.from([this]).goto(e)}},{key:"length",get:function(){var e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}},{key:"size",get:function(){if(this==e.empty)return 0;var t,n=this.nextLayer.size,r=_createForOfIteratorHelper(this.chunk);try{for(r.s();!(t=r.n()).done;){n+=t.value.value.length}}catch(i){r.e(i)}finally{r.f()}return n}}],[{key:"iter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f.from(e).goto(t)}},{key:"compare",value:function(t,n,r,i){var o,a=null!==(o=i.minPointSize)&&void 0!==o?o:-1,s=t.filter((function(t){return t.maxPoint>=500||t!=e.empty&&n.indexOf(t)<0&&t.maxPoint>=a})),l=n.filter((function(n){return n.maxPoint>=500||n!=e.empty&&t.indexOf(n)<0&&n.maxPoint>=a})),u=function(e,t){var n,r=new Map,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<500&&r.set(o.chunk[a],o.chunkPos[a])}catch(f){i.e(f)}finally{i.f()}var s,l=new Set,u=_createForOfIteratorHelper(t);try{for(u.s();!(s=u.n()).done;)for(var c=s.value,h=0;h<c.chunk.length;h++)r.get(c.chunk[h])==c.chunkPos[h]&&l.add(c.chunk[h])}catch(f){u.e(f)}finally{u.f()}return l}(s,l),c=new p(s,u,a),h=new p(l,u,a);r.iterGaps((function(e,t,n){return v(c,e,h,t,n,i)})),r.empty&&0==r.length&&v(c,0,h,0,0,i)}},{key:"spans",value:function(e,t,n,r){for(var i,o=new p(e,null,null!==(i=r.minPointSize)&&void 0!==i?i:-1).goto(t),a=t;;){var s=Math.min(o.to,n);if(o.point?r.point(a,s,o.point,o.pointFrom<t,o.to>n):s>a&&r.span(a,s,o.active),o.to>n)break;a=o.to,o.next()}}},{key:"of",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new c,i=_createForOfIteratorHelper(e instanceof o?[e]:n?e.slice().sort(a):e);try{for(i.s();!(t=i.n()).done;){var s=t.value;r.add(s.from,s.to,s.value)}}catch(l){i.e(l)}finally{i.f()}return r.finish()}}]),e}();u.empty=new u([],[],null,-1),u.empty.nextLayer=u.empty;var c=function(){function e(){_classCallCheck(this,e),this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-s,this.lastTo=-s,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return _createClass(e,[{key:"finishChunk",value:function(e){this.chunks.push(new l(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(t,n,r){this.addInner(t,n,r)||(this.nextLayer||(this.nextLayer=new e)).add(t,n,r)}},{key:"addInner",value:function(e,t,n){var r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}},{key:"addChunk",value:function(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);var n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}},{key:"finish",value:function(){return this.finishInner(u.empty)}},{key:"finishInner",value:function(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;var t=new u(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}]),e}(),h=function(){function e(t,n,r){_classCallCheck(this,e),this.layer=t,this.skip=n,this.minPoint=r}return _createClass(e,[{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-s;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}},{key:"gotoInner",value:function(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){var r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}var i=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],-1,t);(!n||this.rangeIndex<i)&&(this.rangeIndex=i),this.next()}},{key:"forward",value:function(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}},{key:"next",value:function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=s,this.value=null;break}var e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex];if(this.from=e+t.from[this.rangeIndex],this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],++this.rangeIndex==t.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"nextChunk",value:function(){this.chunkIndex++,this.rangeIndex=0,this.next()}},{key:"compare",value:function(e){return this.from-e.from||this.startSide-e.startSide||this.to-e.to||this.endSide-e.endSide}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}}]),e}(),f=function(){function e(t){_classCallCheck(this,e),this.heap=t}return _createClass(e,[{key:"goto",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-s,r=_createForOfIteratorHelper(this.heap);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.goto(e,n)}}catch(a){r.e(a)}finally{r.f()}for(var o=this.heap.length>>1;o>=0;o--)d(this.heap,o);return this.next(),this}},{key:"forward",value:function(e,t){var n,r=_createForOfIteratorHelper(this.heap);try{for(r.s();!(n=r.n()).done;){n.value.forward(e,t)}}catch(o){r.e(o)}finally{r.f()}for(var i=this.heap.length>>1;i>=0;i--)d(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=s,this.value=null;else{var e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,e.value&&e.next(),d(this.heap,0)}}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}}],[{key:"from",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;)for(var s=n.value,l=s;l!=u.empty;l=l.nextLayer)l.maxPoint>=i&&o.push(new h(l,r,i))}catch(c){a.e(c)}finally{a.f()}return 1==o.length?o[0]:new e(o)}}]),e}();function d(e,t){for(var n=e[t];;){var r=1+(t<<1);if(r>=e.length)break;var i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}var p=function(){function e(t,n,r){_classCallCheck(this,e),this.minPoint=r,this.active=[],this.activeTo=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.to=-s,this.endSide=0,this.cursor=f.from(t,n,r)}return _createClass(e,[{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-s;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.next(),this}},{key:"forward",value:function(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}},{key:"removeActive",value:function(e){m(this.active,e),m(this.activeTo,e),this.minActive=y(this.active,this.activeTo)}},{key:"next",value:function(){var e=this.to;for(this.point=null;;){var t=this.minActive;if(t>-1&&(this.activeTo[t]-this.cursor.from||this.active[t].endSide-this.cursor.startSide)<0){if(this.activeTo[t]>e){this.to=this.activeTo[t],this.endSide=this.active[t].endSide;break}this.removeActive(t)}else{if(!this.cursor.value){this.to=this.endSide=s;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var n=this.cursor.value;if(n.point){this.point=n,this.pointFrom=this.cursor.from,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.to>e&&this.forward(this.to,this.endSide);break}this.active.push(n),this.activeTo.push(this.cursor.to),this.minActive=y(this.active,this.activeTo),this.cursor.next()}}}}]),e}();function v(e,t,n,r,i,o){e.goto(t),n.goto(r);for(var a=r+i,s=r,l=r-t;;){var u=e.to+l-n.to||e.endSide-n.endSide,c=u<0?e.to+l:n.to,h=Math.min(c,a);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))||o.comparePoint(s,h,e.point,n.point):h>s&&!g(e.active,n.active)&&o.compareRange(s,h,e.active,n.active),c>a)break;s=c,u<=0&&e.next(),u>=0&&n.next()}}function g(e,t){if(e.length!=t.length)return!1;e:for(var n=0;n<e.length;n++){for(var r=0;r<t.length;r++)if(e[n]==t[n]||e[n].eq(t[r]))continue e;return!1}return!0}function m(e,t){var n=e.pop();t!=e.length&&(e[t]=n)}function y(e,t){for(var n=-1,r=s,i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}},"lf1/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeFromList=t.autocompleteKeymap=t.closeCompletion=t.startCompletion=t.autocomplete=t.AutocompleteContext=t.FilterType=void 0;var r,i=n("3Yt4"),o=n("dC2d"),a=n("BVGc"),s=n("ggtp"),l=n("P8+q");!function(e){e[e.Start=0]="Start",e[e.Include=1]="Include",e[e.Fuzzy=2]="Fuzzy"}(r=t.FilterType||(t.FilterType={}));var u=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.state=t,this.pos=n,this.explicit=r,this.filterType=i,this.caseSensitive=o}return _createClass(e,[{key:"filter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.caseSensitive;if(n||e!=e.toLowerCase()||(t=t.toLowerCase()),this.filterType==r.Start)return e.slice(0,t.length)==t?0:null;if(this.filterType==r.Include)return e.indexOf(t)>-1?0:null;var i=l.filter(t,[e]);return i&&i.length>0?i[0].score:null}},{key:"tokenBefore",value:function(){var e=this.pos,t=null,n="",r=this.state.tree.resolve(this.pos,-1);return!r.firstChild&&r.start<this.pos&&(e=r.start,t=r.type,n=this.state.sliceDoc(e,this.pos)),{from:e,to:this.pos,text:n,type:t}}}]),e}();function c(e,t,n){if(!e.filterDownOn)return!1;var r=n?n.mapPos(e.to):e.to,i=t.selection.primary.head;return!(i<r||i>r+20)&&(i==r||e.filterDownOn.test(t.sliceDoc(r,i)))}function h(e,t){var n=t.state.sliceDoc(e.from,t.pos);return{from:e.from,to:t.pos,options:e.options.filter((function(e){return t.filter(e.label,n)})),filterDownOn:e.filterDownOn}}t.AutocompleteContext=u;var f=function(){function e(t,n,r){_classCallCheck(this,e),this.sources=t,this.results=n,this.options=r}return _createClass(e,[{key:"map",value:function(t){return new e(this.sources,this.results.map((function(e){return e&&Object.assign(Object.assign({},e),{from:t.mapPos(e.from),to:t.mapPos(e.to)})})),this.options)}},{key:"refilterAll",value:function(t){var n=t.facet(d),r=new u(t,t.selection.primary.head,!1,n.filterType,n.caseSensitive);return e.create(this.sources,this.results.map((function(e){return e&&h(e,r)})))}},{key:"from",get:function(){return this.results.reduce((function(e,t){return t?Math.min(e,t.from):e}),1e9)}},{key:"to",get:function(){return this.results.reduce((function(e,t){return t?Math.max(e,t.to):e}),0)}}],[{key:"create",value:function(t,n){for(var r,i=[],o=0;o<n.length;o++)if(r=n[o]){var a,s=_createForOfIteratorHelper(r.options);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.push({completion:l,source:o})}}catch(u){s.e(u)}finally{s.f()}}return new e(t,n,i.sort((function(e,t){var n=e.completion,r=n.label,i=n.score,o=t.completion,a=o.label,s=o.score;return i<s?1:i>s||r<a?-1:r===a?0:1})))}}]),e}(),d=o.Facet.define({combine:function(e){return o.combineConfig(e,{activateOnTyping:!0,override:null,filterType:r.Start,caseSensitive:!1})}});function p(e,t){return function(n){var r=n.state.field(w);if(!(r instanceof O)||Date.now()-r.timeStamp<v)return!1;var i,o=1;"page"==t&&(i=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(o=Math.max(2,Math.floor(i.offsetHeight/i.firstChild.offsetHeight)));var a=r.selected+o*("up"==e?-1:1),s=r.result.options.length;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:b.of(a)}),!0}}t.autocomplete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[w,d.of(e),A,s.baseTheme,a.tooltips(),o.precedence(i.keymap([{key:"ArrowDown",run:p("down")},{key:"ArrowUp",run:p("up")},{key:"PageDown",run:p("down","page")},{key:"PageUp",run:p("up","page")},{key:"Enter",run:g}]),"override")]};var v=75;function g(e){var t=e.state.field(w);return t instanceof O&&!(Date.now()-t.timeStamp<v)&&(m(e,t.result,t.selected),!0)}function m(e,t,n){var r=t.options[n],i=r.completion.apply||r.completion.label,o=t.results[r.source];"string"==typeof i?e.dispatch({changes:{from:o.from,to:o.to,insert:i},selection:{anchor:o.from+i.length}}):i(e,o,r.completion)}t.startCompletion=function(e){var t=e.state.field(w,!1);return!(void 0===t||t instanceof O||t instanceof S&&t.explicit||(e.dispatch({effects:k.of(!0)}),0))},t.closeCompletion=function(e){return null!=e.state.field(w,!1)&&(e.dispatch({effects:k.of(!1)}),!0)},t.autocompleteKeymap=[{key:"Mod-Space",run:t.startCompletion},{key:"Escape",run:t.closeCompletion}];var y=o.StateEffect.define(),k=o.StateEffect.define(),b=o.StateEffect.define(),w=o.StateField.define({create:function(){return null},update:function(e,t){var n=t.annotation(o.Transaction.userEvent);"input"==n&&e instanceof O&&e.result.results.every((function(e){return!e||c(e,t.state,t.changes)}))?e=new O(e.result.map(t.changes).refilterAll(t.state),0,e.timeStamp):"input"==n&&(e||t.state.facet(d).activateOnTyping)||"delete"==n&&e?e=new S(e instanceof O?e:e instanceof S?e.prev:null,e instanceof S&&e.explicit):e&&(t.selection||t.docChanged&&function(e,t){return t instanceof O?e.changes.touchesRange(t.result.from,t.result.to):e.changes.touchesRange(e.state.selection.primary.head)}(t,e))?e=null:t.docChanged&&e instanceof O&&(e=new O(e.result.map(t.changes),e.selected,e.timeStamp));var r,i=_createForOfIteratorHelper(t.effects);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.is(y)?e=new O(a.value,0):a.is(k)?e=a.value?new S(null,!0):null:a.is(b)&&e instanceof O&&(e=new O(e.result,a.value,e.timeStamp,e.id,e.tooltip))}}catch(s){i.e(s)}finally{i.f()}return e},provide:[a.showTooltip.nFrom((function(e){return e instanceof O?e.tooltip:C})),i.EditorView.contentAttributes.from((function(e){return e instanceof O?e.attrs:_}))]}),_={"aria-autocomplete":"list"},C=[],O=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cm-ac-"+Math.floor(1679616*Math.random()).toString(36),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[{pos:t.from,style:"autocomplete",create:x(t,i)}];_classCallCheck(this,e),this.result=t,this.selected=n,this.timeStamp=r,this.id=i,this.tooltip=o,this.attrs={"aria-autocomplete":"list","aria-activedescendant":this.id+"-"+this.selected,"aria-owns":this.id}},S=function e(t,n){_classCallCheck(this,e),this.prev=t,this.explicit=n};function x(e,t){return function(n){var r=function(e,t){var n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true");for(var r=0;r<e.options.length;r++){var o=e.options[r].completion,a=n.appendChild(document.createElement("li"));a.id=t+"-"+r;var s=i.themeClass("completionIcon"+(o.type?"."+o.type:""));a.innerHTML='<div class="'+s+'"></div>'+o.label,a.setAttribute("role","option")}return n}(e,t);function o(e){var t=e.state.field(w);t instanceof O&&function(e,t){for(var n=null,r=e.firstChild,i=0;r;r=r.nextSibling,i++)i==t?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");n&&function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(e,n)}(r,t.selected)}return r.addEventListener("click",(function(t){for(var r=0,i=t.target;i=i.previousSibling;)r++;r<e.options.length&&m(n,e,r)})),{dom:r,mount:o,update:function(e){e.state.field(w)!=e.prevState.field(w)&&o(e.view)}}}}var A=i.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.view=t,this.stateVersion=0,this.debounce=-1}return _createClass(e,[{key:"update",value:function(e){var t=this;if(e.docChanged||e.selectionSet||e.prevState.field(w)!=e.state.field(w)){(e.docChanged||e.selectionSet)&&this.stateVersion++,this.debounce>-1&&clearTimeout(this.debounce);var n=e.state.field(w);this.debounce=n instanceof S?setTimeout((function(){return t.startUpdate(n)}),100):-1}}},{key:"startUpdate",value:function(e){var t=this;this.debounce=-1;var n=this.view,r=this.stateVersion;(function(e,t){var n=e.facet(d),r=e.selection.primary.head,i=n.override?[n.override]:e.languageDataAt("autocomplete",r),o=new u(e,r,t.explicit,n.filterType,n.caseSensitive);return Promise.all(i.map((function(n){var r=t.prev?t.prev.result.sources.indexOf(n):-1,i=r<0?null:t.prev.result.results[r];return i&&c(i,e)&&h(i,o)||n(o)}))).then((function(e){return f.create(i,e)}))})(n.state,e).then((function(e){t.stateVersion==r&&0!=e.options.length&&n.dispatch({effects:y.of(e)})})).catch((function(e){return i.logException(n.state,e)}))}}]),e}());t.completeFromList=function(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?/^\w+$/:void 0;return function(e){var r=e.tokenBefore();return{from:r.from,to:r.to,options:t.filter((function(t){return e.filter(t.label,r.text)})),filterDownOn:n}}};var P=n("K+00");Object.defineProperty(t,"snippet",{enumerable:!0,get:function(){return P.snippet}}),Object.defineProperty(t,"completeSnippets",{enumerable:!0,get:function(){return P.completeSnippets}})},mmpu:function(e,t,n){"use strict";n.r(t),n.d(t,"TagSystem",(function(){return l})),n.d(t,"defaultHighlighter",(function(){return y})),n.d(t,"defaultTags",(function(){return u})),n.d(t,"highlighter",(function(){return d})),n.d(t,"styleTags",(function(){return f}));var r=n("WQMp"),i=n("rknV"),o=n("3Yt4"),a=n("dC2d"),s=n("jvbj"),l=function(){function e(t){var n=this;_classCallCheck(this,e),this.typeNames=[""],this.typeIDs=Object.create(null),this.prop=new r.c,this.flags=t.flags,this.types=t.types,this.flagMask=Math.pow(2,this.flags.length)-1,this.typeShift=this.flags.length;var i=t.subtypes||0,o=[void 0];this.typeIDs[""]=0;var a,s=1,l=_createForOfIteratorHelper(t.types);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=/^([\w\-]+)(?:=([\w-]+))?$/.exec(u);if(!c)throw new RangeError("Invalid type name "+u);var h=s++;this.typeNames[h]=c[1],this.typeIDs[c[1]]=h,o[h]=c[2];for(var f=0;f<i;f++){var d=s++,p=c[1]+"#"+(f+1);this.typeNames[d]=p,this.typeIDs[p]=d,o[d]=c[1]}}}catch(v){l.e(v)}finally{l.f()}if(this.parents=o.map((function(e){if(null==e)return 0;var t=n.typeIDs[e];if(null==t)throw new RangeError("Unknown parent type '".concat(e,"' specified"));return t})),this.flags.length>30||this.typeNames.length>Math.pow(2,30-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer")}return _createClass(e,[{key:"get",value:function(e){var t,n=0,r=_createForOfIteratorHelper(e.split(" "));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i){var o=this.flags.indexOf(i);if(o>-1)n+=1<<o;else{var a=this.typeIDs[i];if(null==a)throw new RangeError("Unknown tag type '".concat(i,"'"));if(n>>this.typeShift)throw new RangeError("Multiple tag types specified in '".concat(e,"'"));n+=a<<this.typeShift}}}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"getWithMode",value:function(e){var t="+"==e[0]?1:"!"==e[0]?0:2;return{mode:t,tag:this.get(2==t?e:e.slice(1))}}},{key:"addTagProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getWithMode(e),r=n.mode,i=n.tag;return this.prop.set(t,new h(i,r,c))}},{key:"add",value:function(e){var t=Object.create(null);for(var n in e){var r,i=e[n],o=this.getWithMode(i),a=o.mode,s=o.tag,l=_createForOfIteratorHelper(n.split(" "));try{for(l.s();!(r=l.n()).done;){var u=r.value.split("/"),f=u[u.length-1],d=u.length>1?u.slice(0,u.length-1).map((function(e){return"*"==e?null:e})):c,p=new h(s,a,d);t[f]=p.sort(t[f])}}catch(v){l.e(v)}finally{l.f()}}return this.prop.add(t)}},{key:"highlighter",value:function(e){var t=this,n=new v(this,e);return[o.ViewPlugin.define((function(e){return new g(e,t.prop,n)})).decorations(),o.EditorView.styleModule.of(n.module)]}},{key:"specificity",value:function(e){for(var t=e&this.flagMask,n=0,r=1;r<=this.flags.length;r++)t&1<<r&&n++;for(var i=e>>this.typeShift;i;i=this.parents[i])n+=1e3;return n}}]),e}(),u=new l({flags:["invalid","meta","standard","definition","constant","local","control","link","strong","emphasis","monospace","changed","inserted","deleted"],subtypes:7,types:["comment","lineComment=comment","blockComment=comment","docComment=comment","name","variableName=name","typeName=name","propertyName=name","className=name","labelName=name","functionName=name","namespace=name","literal","string=literal","docString=string","character=string","number=literal","integer=number","float=number","regexp=literal","escape=literal","color=literal","content","heading=content","list=content","quote=content","keyword","self=keyword","null=keyword","atom=keyword","unit=keyword","modifier=keyword","operatorKeyword=keyword","operator","derefOperator=operator","arithmeticOperator=operator","logicOperator=operator","bitwiseOperator=operator","compareOperator=operator","updateOperator=operator","typeOperator=operator","punctuation","separator=punctuation","bracket=punctuation","angleBracket=bracket","squareBracket=bracket","paren=bracket","brace=bracket"]}),c=[],h=function(){function e(t,n,r,i){_classCallCheck(this,e),this.tag=t,this.mode=n,this.context=r,this.next=i}return _createClass(e,[{key:"sort",value:function(e){return!e||e.context.length<this.context.length?(this.next=e,this):(e.next=this.sort(e.next),e)}}]),e}(),f=function(e){return u.add(e)},d=function(e){return u.highlighter(e)},p=function e(t,n,r,i){_classCallCheck(this,e),this.type=t,this.flags=n,this.specificity=r,this.cls=i},v=function(){function e(t,n){_classCallCheck(this,e),this.tags=t,this.cache=Object.create(null);var r=Object.create(null),o=0,a=[];for(var s in n){var l="c"+o++;r[l]=n[s];var u,c=_createForOfIteratorHelper(s.split(/\s*,\s*/));try{for(c.s();!(u=c.n()).done;){var h=u.value,f=t.get(h);a.push(new p(f>>t.typeShift,f&t.flagMask,t.specificity(f),l))}}catch(d){c.e(d)}finally{c.f()}}this.rules=a.sort((function(e,t){return t.specificity-e.specificity})),this.module=new i.a(r)}return _createClass(e,[{key:"match",value:function(e){var t=this.cache[e];if(null!=t)return t;for(var n="",r=e>>this.tags.typeShift,i=e&this.tags.flagMask;;){var o,a=_createForOfIteratorHelper(this.rules);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.type==r&&(s.flags&i)==s.flags&&(n&&(n+=" "),n+=this.module[s.cls],i&=~s.flags,r))break}}catch(l){a.e(l)}finally{a.f()}if(!r)break;r=this.tags.parents[r]}return this.cache[e]=n}}]),e}(),g=function(){function e(t,n,r){_classCallCheck(this,e),this.prop=n,this.styling=r,this.nodeStack=[""],this.classStack=[""],this.inheritStack=[""],this.tree=t.state.tree,this.decorations=this.buildDeco(t.visibleRanges,this.tree)}return _createClass(e,[{key:"update",value:function(e){var t=e.state.facet(a.EditorState.syntax);t.length?t[0].parsePos(e.state)<e.view.viewport.to?this.decorations=this.decorations.map(e.changes):(this.tree!=t[0].getTree(e.state)||e.viewportChanged)&&(this.tree=t[0].getTree(e.state),this.decorations=this.buildDeco(e.view.visibleRanges,this.tree)):this.decorations=o.Decoration.none}},{key:"buildDeco",value:function(e,t){var n,r,i,a=this,l=new s.c;function u(e,t){e>n&&t&&l.add(n,e,o.Decoration.mark({class:t})),n=e}var c,h=this.nodeStack,f=this.classStack,d=this.inheritStack,p=_createForOfIteratorHelper(e);try{var v=function(){var e=c.value,o=e.from,s=e.to;r="",i=0,n=o,t.iterate({from:o,to:s,enter:function(e,t){i++;for(var n=d[i-1],o=n,s=e.prop(a.prop),l=!1;s;){if(!s.context.length||m(s.context,h,i)){var c=a.styling.match(s.tag);c&&(o&&(o+=" "),o+=c,1==s.mode?n=o:0==s.mode&&(l=!0));break}s=s.next}if(o!=r&&(u(t,r),r=o),l)return i--,!1;f[i]=o,d[i]=n,h[i]=e.name},leave:function(e,t,n){i--;var o=f[i];o!=r&&(u(Math.min(s,n),r),r=o)}})};for(p.s();!(c=p.n()).done;)v()}catch(g){p.e(g)}finally{p.f()}return l.finish()}}]),e}();function m(e,t,n){if(e.length>n-1)return!1;for(var r=n-1,i=e.length-1;i>=0;i--,r--){var o=e[i];if(o&&o!=t[r])return!1}return!0}var y=d({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},invalid:{color:"#f00"},keyword:{color:"#708"},atom:{color:"#219"},number:{color:"#164"},string:{color:"#a11"},"regexp, escape":{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},className:{color:"#167"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},meta:{color:"#555"}})},rknV:function(e,t,n){"use strict";function r(e,t){return"undefined"==typeof Symbol?"__"+e+(t?Math.floor(1e8*Math.random()):""):t?Symbol(e):Symbol.for(e)}n.d(t,"a",(function(){return l}));var i=r("\u037c"),o=r("styleSet",1),a=r("rules",1),s="undefined"==typeof global?window:global;function l(e,t){for(var n in this[a]=[],e){var r=e[n].specificity||0,i=l.newName(),o=n;if(!1!==(t&&t.generateClasses)){var s=i;o="."+i;for(var u=0;u<r;u++){var c="\u037c_"+(u?u.toString(36):"");o+="."+c,s+=" "+c}this[n]=s}h(o,e[n],this[a])}}l.newName=function(){var e=s[i]||1;return s[i]=e+1,"\u037c"+e.toString(36)},l.prototype=Object.create(null),l.mount=function(e,t){(e[o]||new c(e)).mount(Array.isArray(t)?t:[t])};var u=null,c=function(){function e(t){if(_classCallCheck(this,e),t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(u)return t.adoptedStyleSheets=[u.sheet].concat(t.adoptedStyleSheets),t[o]=u;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),u=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");var n=t.head||t;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[]}return _createClass(e,[{key:"mount",value:function(e){for(var t=this.sheet,n=0,r=0,i=0;i<e.length;i++){var o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(var l=0;l<o[a].length;l++)t.insertRule(o[a][l],n++)}else{for(;r<s;)n+=this.modules[r++][a].length;n+=o[a].length,r++}}if(!t){for(var u="",c=0;c<this.modules.length;c++)u+=this.modules[c][a].join("\n")+"\n";this.styleTag.textContent=u}}}]),e}();function h(e,t,n){if("object"!=typeof t)throw new RangeError("Expected style object, got "+JSON.stringify(t));var r=[],i=function(i){if(/^@/.test(i)){var o=[];h(e,t[i],o),n.push(i+" {"+o.join(" ")+"}")}else if(/&/.test(i))h(e.split(/\s*,\s*/).map((function(e){return i.replace(/&/g,e)})).join(", "),t[i],n);else if("specificity"!=i){if("object"==typeof t[i])throw new RangeError("The value of a property ("+i+") should be a primitive value.");r.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))+": "+t[i])}};for(var o in t)i(o);r.length&&n.push(e+" {"+r.join("; ")+"}")}},sLYq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("vDqi");t.LSPClient=function(){function e(t,n){_classCallCheck(this,e),this.autocompleteEndpoint="/completion",this.url=t,this.errorHandler=n}return _createClass(e,[{key:"complete",value:function(e){var t=this;return r.default.post(this.url+this.autocompleteEndpoint,e).then((function(e){return e.data?e.data:[]})).catch((function(e){return t.errorHandler&&t.errorHandler(e),[]}))}}]),e}()},tQ2B:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("Rn+g"),o=n("MLWZ"),a=n("g7np"),s=n("w0Vi"),l=n("OTTw"),u=n("LYNF");e.exports=function(e){return new Promise((function(t,c){var h=e.data,f=e.headers;r.isFormData(h)&&delete f["Content-Type"];var d=new XMLHttpRequest;e.auth&&(f.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||"")));var p=a(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),o(p,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null;i(t,c,{data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d}),d=null}},d.onabort=function(){d&&(c(u("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){c(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),c(u(t,e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var v=n("eqyj"),g=(e.withCredentials||l(p))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;g&&(f[e.xsrfHeaderName]=g)}if("setRequestHeader"in d&&r.forEach(f,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),c(e),d=null)})),void 0===h&&(h=null),d.send(h)}))}},vDqi:function(e,t,n){e.exports=n("zuR4")},vOYf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("sLYq"),i=n("WKRy"),o=n("71hz"),a=n("Sfmq");t.newCompleteStrategy=function(e){var t,n,s,l,u;return e.enableLSP?new i.LSPComplete(new r.LSPClient(e.url,e.httpErrorHandler)):e.offline?new o.HybridComplete(null,null===(t=e.hybrid)||void 0===t?void 0:t.fuzzyPre,null===(n=e.hybrid)||void 0===n?void 0:n.fuzzyPost):new o.HybridComplete(new a.PrometheusClient(e.url,e.httpErrorHandler,null===(s=e.hybrid)||void 0===s?void 0:s.lookbackInterval),null===(l=e.hybrid)||void 0===l?void 0:l.fuzzyPre,null===(u=e.hybrid)||void 0===u?void 0:u.fuzzyPost)}},w0Vi:function(e,t,n){"use strict";var r=n("xTJ+"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},xAGQ:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},"xTJ+":function(e,t,n){"use strict";var r=n("HSsa"),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){t[r]="object"==typeof t[r]&&"object"==typeof n?e(t[r],n):n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){t[r]="object"==typeof t[r]&&"object"==typeof n?e(t[r],n):"object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},yK9s:function(e,t,n){"use strict";var r=n("xTJ+");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout((function(){throw e}),0)}var s={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},l=Array.isArray||function(e){return e&&"number"==typeof e.length};function u(e){return null!==e&&"object"==typeof e}var c,h=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),f=((c=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a)n[a].remove(this);if(r(i))try{i.call(this)}catch(p){t=p instanceof h?d(p.errors):[p]}if(l(o))for(var s=-1,c=o.length;++s<c;){var f=o[s];if(u(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof h?t=t.concat(d(p.errors)):t.push(p)}}if(t)throw new h(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new c),c);function d(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;switch(_classCallCheck(this,n),(o=t.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s;break;case 1:if(!e){o.destination=s;break}if("object"==typeof e){e instanceof n?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(_assertThisInitialized(o))):(o.syncErrorThrowable=!0,o.destination=new g(_assertThisInitialized(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new g(_assertThisInitialized(o),e,r,i)}return o}return _createClass(n,[{key:p,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(f),g=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,a){var l,u;_classCallCheck(this,n),(l=t.call(this))._parentSubscriber=e;var c=_assertThisInitialized(l);return r(i)?u=i:i&&(u=i.next,o=i.error,a=i.complete,i!==s&&(r((c=Object.create(i)).unsubscribe)&&l.add(c.unsubscribe.bind(c)),c.unsubscribe=l.unsubscribe.bind(_assertThisInitialized(l)))),l._context=c,l._next=u,l._error=o,l._complete=a,l}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(v),m="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(){}var k,b=((k=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof v)return e;if(e[p])return e[p]()}return e||t||n?new v(e,t,n):new v(s)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof v?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=w(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:m,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:((r=t)?1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)}:y)(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=w(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new k(e)},k);function w(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var _,C=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(f),S=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(v),x=((_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:p,value:function(){return new S(this)}},{key:"lift",value:function(e){var t=new A(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new C;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new C;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new C;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new C;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new C;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new O(this,e))}},{key:"asObservable",value:function(){var e=new b;return e.source=this,e}}]),n}(b)).create=function(e,t){return new A(e,t)},_),A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).destination=e,i.source=r,i}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):f.EMPTY}}]),n}(x),P=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).parent=e,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(v),T=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var E="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",I=function(e){if(e&&"function"==typeof e[m])return o=e,function(e){var t=o[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return T(e);var t,n,r,i,o;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return i=e,function(e){return i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,a),e};if(e&&"function"==typeof e[E])return r=e,function(e){for(var t=r[E]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add((function(){t.return&&t.return()})),e};var s=u(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(s," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")},M=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(v),D=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new R(e,this.project,this.thisArg))}}]),e}(),R=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).project=r,o.count=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(v),F=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new H(e,this.project,this.concurrent))}}]),e}(),H=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new P(this,t,n),i=this.destination;i.add(r);var o=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new P(e,n,r);if(!i.closed)return t instanceof b?t.subscribe(i):I(t)(i)}(this,e,void 0,void 0,r);o!==r&&i.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(M);function N(e){return e}function L(){return function(e){return e.lift(new V(e))}}var j,V=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new q(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(v),B={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(j=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new z(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e}},{key:"refCount",value:function(){return L()(this)}}]),n}(b).prototype)._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}},z=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(S);function X(){return new x}function U(e){return{toString:e}.toString()}function W(e,t,n){return U((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=_construct(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}var Q=W("Inject",(function(e){return{token:e}})),Z=W("Optional"),G=W("Self"),$=W("SkipSelf"),Y=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function K(e){for(var t in e)if(e[t]===K)return t;throw Error("Could not find renamed property on target object.")}function J(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ee(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function te(e){return ne(e,e[ie])||ne(e,e[se])}function ne(e,t){return t&&t.token===e?t:null}function re(e){return e&&(e.hasOwnProperty(oe)||e.hasOwnProperty(le))?e[oe]:null}var ie=K({"\u0275prov":K}),oe=K({"\u0275inj":K}),ae=K({"\u0275provFallback":K}),se=K({ngInjectableDef:K}),le=K({ngInjectorDef:K});function ue(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ue).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ce(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var he=K({__forward_ref__:K});function fe(e){return e.__forward_ref__=fe,e.toString=function(){return ue(this())},e}function de(e){return"function"==typeof(t=e)&&t.hasOwnProperty(he)&&t.__forward_ref__===fe?e():e;var t}var pe,ve="undefined"!=typeof globalThis&&globalThis,ge="undefined"!=typeof window&&window,me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ye="undefined"!=typeof global&&global,ke=ve||ye||ge||me,be=K({"\u0275cmp":K}),we=K({"\u0275dir":K}),_e=K({"\u0275pipe":K}),Ce=K({"\u0275mod":K}),Oe=K({"\u0275loc":K}),Se=K({"\u0275fac":K}),xe=K({__NG_ELEMENT_ID__:K}),Ae=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Pe=new Ae("INJECTOR",-1),Te={},Ee=/\n/gm,Ie=K({provide:String,useValue:K}),Me=void 0;function De(e){var t=Me;return Me=e,t}function Re(e){var t=pe;return pe=e,t}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Default;if(void 0===Me)throw new Error("inject() must be called from an injection context");return null===Me?Ne(e,void 0,t):Me.get(e,t&Y.Optional?null:void 0,t)}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Default;return(pe||Fe)(de(e),t)}function Ne(e,t,n){var r=te(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(ue(e),"]"))}function Le(e){for(var t=[],n=0;n<e.length;n++){var r=de(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=Y.Default,a=0;a<r.length;a++){var s=r[a];s instanceof Z||"Optional"===s.ngMetadataName||s===Z?o|=Y.Optional:s instanceof $||"SkipSelf"===s.ngMetadataName||s===$?o|=Y.SkipSelf:s instanceof G||"Self"===s.ngMetadataName||s===G?o|=Y.Self:i=s instanceof Q||s===Q?s.token:s}t.push(He(i,o))}else t.push(He(r))}return t}var je=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te;if(t===Te){var n=new Error("NullInjectorError: No provider for ".concat(ue(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),Ve=function e(){_classCallCheck(this,e)};function qe(e,t){e.forEach((function(e){return Array.isArray(e)?qe(e,t):t(e)}))}var Be=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ze=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Xe={},Ue=[],We=0;function Qe(e){return Ke(e)||function(e){return e[we]||null}(e)}function Ze(e){return function(e){return e[_e]||null}(e)}var Ge={};function $e(e){var t={type:e.type,bootstrap:e.bootstrap||Ue,declarations:e.declarations||Ue,imports:e.imports||Ue,exports:e.exports||Ue,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&U((function(){Ge[e.id]=e.type})),t}function Ye(e,t){if(null==e)return Xe;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function Ke(e){return e[be]||null}function Je(e,t){return e.hasOwnProperty(Se)?e[Se]:null}function et(e,t){var n=e[Ce]||null;if(!n&&!0===t)throw new Error("Type ".concat(ue(e)," does not have '\u0275mod' property."));return n}function tt(e){return Array.isArray(e)&&"object"==typeof e[1]}function nt(e){return Array.isArray(e)&&!0===e[1]}function rt(e){return 0!=(8&e.flags)}function it(e){return null!==e.template}var ot=void 0;function at(e){return!!e.listen}var st={createRenderer:function(e,t){return void 0!==ot?ot:"undefined"!=typeof document?document:void 0}};function lt(e){for(;Array.isArray(e);)e=e[0];return e}function ut(e,t){return lt(t[e.index])}function ct(e,t){var n=t[e];return tt(n)?n:n[0]}function ht(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function ft(e){return 128==(128&e[2])}function dt(e,t){return null===e||null==t?null:e[t]}function pt(e){e[18]=0}var vt={lFrame:Tt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function gt(){return vt.bindingsEnabled}function mt(){return vt.lFrame.lView}function yt(){return vt.lFrame.tView}function kt(){return vt.lFrame.previousOrParentTNode}function bt(e,t){vt.lFrame.previousOrParentTNode=e,vt.lFrame.isParent=t}function wt(){return vt.lFrame.isParent}function _t(){return vt.checkNoChangesMode}function Ct(e){vt.checkNoChangesMode=e}function Ot(e,t){var n=vt.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function St(e){vt.lFrame.currentQueryIndex=e}function xt(e,t){var n=Pt();vt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function At(e,t){var n=Pt(),r=e[1];vt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function Pt(){var e=vt.lFrame,t=null===e?null:e.child;return null===t?Tt(e):t}function Tt(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Et(){var e=vt.lFrame;return vt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var It=Et;function Mt(){var e=Et();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Dt(e){vt.lFrame.selectedIndex=e}function Rt(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,i.onDestroy)}}function Ft(e,t,n){Lt(e,t,3,n)}function Ht(e,t,n,r){(3&e[2])===n&&Lt(e,t,n,r)}function Nt(e,t){var n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function Lt(e,t,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&e[18]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(jt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function jt(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,o.call(a)):o.call(a)}var Vt=function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function qt(e,t,n){for(var r=at(e),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],l=n[i++];r?e.setAttribute(t,s,l,a):t.setAttributeNS(a,s,l)}else{var u=o,c=n[++i];64===u.charCodeAt(0)?r&&e.setProperty(t,u,c):r?e.setAttribute(t,u,c):t.setAttribute(u,c),i++}}return i}function Bt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||zt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function zt(e,t,n,r,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var s=e[o++];if("number"==typeof s){if(s===t){a=-1;break}if(s>t){a=o-1;break}}}for(;o<e.length;){var l=e[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Xt(e){return 32767&e}function Ut(e,t){for(var n=e>>16,r=t;n>0;)r=r[15],n--;return r}function Wt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":""+e}(e)}var Qt=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ke);function Zt(e){return e instanceof Function?e():e}var Gt=!0;function $t(e){var t=Gt;return Gt=e,t}var Yt=0;function Kt(e,t){var n=en(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Jt(r.data,e),Jt(t,null),Jt(r.blueprint,null));var i=tn(e,t),o=e.injectorIndex;if(-1!==i)for(var a=Xt(i),s=Ut(i,t),l=s[1].data,u=0;u<8;u++)t[o+u]=s[a+u]|l[a+u];return t[o+8]=i,o}function Jt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function en(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function tn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function nn(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[xe]:n.charCodeAt(0)||0;null==r&&(r=n[xe]=Yt++);var i=255&r,o=1<<i,a=64&i,s=32&i,l=t.data;128&i?a?s?l[e+7]|=o:l[e+6]|=o:s?l[e+5]|=o:l[e+4]|=o:a?s?l[e+3]|=o:l[e+2]|=o:s?l[e+1]|=o:l[e]|=o}(e,t,n)}var rn={};function on(e,t,n,r,i,o){var a=t[1],s=a.data[e+8],l=function(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,s=65535&o,l=e.directiveStart,u=o>>16,c=i?s+u:e.directiveEnd,h=r?s:s+u;h<c;h++){var f=a[h];if(h<l&&n===f||h>=l&&f.type===n)return h}if(i){var d=a[l];if(d&&it(d)&&d.type===n)return l}return null}(s,a,n,null==r?function(e){return 2==(2&e.flags)}(s)&&Gt:r!=a&&3===s.type,i&Y.Host&&o===s);return null!==l?an(t,a,l,s):rn}function an(e,t,n,r){var i=e[n],o=t.data;if(i instanceof Vt){var a=i;if(a.resolving)throw new Error("Circular dep for ".concat(Wt(o[n])));var s,l=$t(a.canSeeViewProviders);a.resolving=!0,a.injectImpl&&(s=Re(a.injectImpl)),xt(e,r);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,i=t.onInit,o=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{a.injectImpl&&Re(s),$t(l),a.resolving=!1,It()}}return i}function sn(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function ln(e,t){return!(e&Y.Self||e&Y.Host&&t)}var un=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(t,n){return function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y.Default,o=arguments.length>4?arguments[4]:void 0;if(null!==t){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[xe];return"number"==typeof t&&t>0?255&t:t}(r);if("function"==typeof a){xt(n,t);try{var s=a();if(null!=s||i&Y.Optional)return s;throw new Error("No provider for ".concat(Wt(r),"!"))}finally{It()}}else if("number"==typeof a){if(-1===a)return new e(t,n);var l=null,u=en(t,n),c=-1,h=i&Y.Host?n[16][6]:null;for((-1===u||i&Y.SkipSelf)&&(c=-1===u?tn(t,n):n[u+8],ln(i,!1)?(l=n[1],u=Xt(c),n=Ut(c,n)):u=-1);-1!==u;){c=n[u+8];var f=n[1];if(sn(a,u,f.data)){var d=on(u,n,r,l,i,h);if(d!==rn)return d}ln(i,n[1].data[u+8]===h)&&sn(a,u,n)?(l=f,u=Xt(c),n=Ut(c,n)):u=-1}}}if(i&Y.Optional&&void 0===o&&(o=null),0==(i&(Y.Self|Y.Host))){var p=n[9],v=Re(void 0);try{return p?p.get(r,o,i&Y.Optional):Ne(r,o,i&Y.Optional)}finally{Re(v)}}if(i&Y.Optional)return o;throw new Error("NodeInjector: NOT_FOUND [".concat(Wt(r),"]"))}(this._tNode,this._lView,t,void 0,n)}}]),e}();function cn(e){return e.ngDebugContext}function hn(e){return e.ngOriginalError}function fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var dn=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||fn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?cn(e)?cn(e):this._findContext(hn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=hn(e);t&&hn(t);)t=hn(t);return t}}]),e}(),pn=!0,vn=!1;function gn(){return vn=!0,pn}function mn(e,t){e.__ngContext__=t}function yn(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function kn(){throw new Error("Cannot mix multi providers and regular providers")}function bn(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function wn(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==bn((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function _n(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Cn(e,t,n){for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(3===(n=e[t])||4===n||6===n)return t;var n;return e.length}(i),a=!1,s=0;s<t.length;s++){var l=t[s];if("number"!=typeof l){if(!a)if(4&r){if(r=2|1&r,""!==l&&!_n(e,l,n)||""===l&&1===t.length){if(On(r))return!1;a=!0}}else{var u=8&r?l:t[++s];if(8&r&&null!==e.attrs){if(!wn(e.attrs,u,n)){if(On(r))return!1;a=!0}continue}var c=Sn(8&r?"class":l,i,0==e.type&&"ng-template"!==e.tagName,n);if(-1===c){if(On(r))return!1;a=!0;continue}if(""!==u){var h;h=c>o?"":i[c+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==bn(f,u,0)||2&r&&u!==h){if(On(r))return!1;a=!0}}}}else{if(!a&&!On(r)&&!On(l))return!1;if(a&&On(l))continue;a=!1,r=l|1&r}}return On(r)||a}function On(e){return 0==(1&e)}function Sn(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function xn(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Cn(e,t[r],n))return!0;return!1}function An(e,t){return e?":not("+t.trim()+")":t}function Pn(e){for(var t=e[0],n=1,r=2,i="",o=!1;n<e.length;){var a=e[n];if("string"==typeof a)if(2&r){var s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||On(a)||(t+=An(o,i),i=""),r=a,o=o||!On(r);n++}return""!==i&&(t+=An(o,i)),t}var Tn={};function En(e){var t=e[3];return nt(t)?t[3]:t}function In(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=e.data[o];St(i),a.contentQueries(2,t[o],o)}}}function Mn(e,t,n){return at(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Dn(e,t,n,r,i,o,a,s,l,u){var c=t.blueprint.slice();return c[0]=i,c[2]=140|r,pt(c),c[3]=c[15]=e,c[8]=n,c[10]=a||e&&e[10],c[11]=s||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=u||e&&e[9]||null,c[6]=o,c[16]=2==t.type?e[16]:c,c}function Rn(e,t,n,r,i,o){var a=n+19,s=e.data[a]||function(e,t,n,r,i,o){var a=kt(),s=wt(),l=s?a:a&&a.parent,u=e.data[n]=qn(0,l&&l!==t?l:null,r,n,i,o);return null===e.firstChild&&(e.firstChild=u),a&&(!s||null!=a.child||null===u.parent&&2!==a.type?s||(a.next=u):a.child=u),u}(e,t,a,r,i,o);return bt(s,!0),s}function Fn(e,t,n){At(t,t[6]);try{var r=e.viewQuery;null!==r&&ar(1,r,n);var i=e.template;null!==i&&Ln(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&In(e,t),e.staticViewQueries&&ar(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)nr(e,t[n])}(t,o)}finally{t[2]&=-5,Mt()}}function Hn(e,t,n,r){var i=t[2];if(256!=(256&i)){At(t,t[6]);var o=_t();try{pt(t),vt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Ln(e,t,n,2,r);var a=3==(3&i);if(!o)if(a){var s=e.preOrderCheckHooks;null!==s&&Ft(t,s,null)}else{var l=e.preOrderHooks;null!==l&&Ht(t,l,0,null),Nt(t,0)}if(function(e){for(var t=e[13];null!==t;){var n=void 0;if(nt(t)&&(n=t[2])>>1==-1){for(var r=9;r<t.length;r++){var i=t[r],o=i[1];ft(i)&&Hn(o,i,o.template,i[8])}0!=(1&n)&&er(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&In(e,t),!o)if(a){var u=e.contentCheckHooks;null!==u&&Ft(t,u)}else{var c=e.contentHooks;null!==c&&Ht(t,c,1),Nt(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,i=-1,o=0;o<n.length;o++){var a=n[o];"number"==typeof a?a<=0?(Dt(0-a),i=r+=9+n[++o]):r+=a:(null!==a&&(Ot(r,i),a(2,t[i])),i++)}}finally{Dt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)tr(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&ar(2,f,r),!o)if(a){var d=e.viewCheckHooks;null!==d&&Ft(t,d)}else{var p=e.viewHooks;null!==p&&Ht(t,p,2),Nt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73)}finally{Mt()}}}function Nn(e,t,n,r){var i=t[10],o=!_t(),a=4==(4&t[2]);try{o&&!a&&i.begin&&i.begin(),a&&Fn(e,t,r),Hn(e,t,n,r)}finally{o&&!a&&i.end&&i.end()}}function Ln(e,t,n,r,i){var o=vt.lFrame.selectedIndex;try{Dt(-1),2&r&&t.length>19&&function(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Ft(t,i,0)}else{var o=e.preOrderHooks;null!==o&&Ht(t,o,0,0)}Dt(0)}(e,t,0,_t()),n(r,i)}finally{Dt(o)}}function jn(e){return e.tView||(e.tView=Vn(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function Vn(e,t,n,r,i,o,a,s,l,u){var c=19+r,h=c+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Tn);return n}(c,h);return f[1]={type:e,id:t,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:u}}function qn(e,t,n,r,i,o){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Bn(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function zn(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Xn(e,t,n){for(var r=0;r<n;r++)t.push(Tn),e.blueprint.push(Tn),e.data.push(null)}function Un(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Wn(e,t,n){var r=19-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function Qn(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Zn(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;it(t)&&(n[""]=e)}}function Gn(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function $n(e,t,n){e.data.push(n);var r=n.factory||(n.factory=Je(n.type)),i=new Vt(r,it(n),null);e.blueprint.push(i),t.push(i)}function Yn(e,t,n){var r=ut(t,e),i=jn(n),o=e[10],a=rr(e,Dn(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n)));e[t.index]=a}function Kn(e,t,n,r,i,o){var a=o[t];if(null!==a)for(var s=r.setInput,l=0;l<a.length;){var u=a[l++],c=a[l++],h=a[l++];null!==s?r.setInput(n,h,u,c):n[c]=h}}function Jn(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function er(e,t){for(var n=e[5],r=0;r<n.length;r++){var i=n[r],o=i[3][3][16];if(o!==t&&0==(16&o[2])){var a=i[1];Hn(a,i,a.template,i[8])}}}function tr(e,t){var n=ct(t,e);if(ft(n)&&80&n[2]){var r=n[1];Hn(r,n,r.template,n[8])}}function nr(e,t){var n=ct(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Fn(r,n,n[8])}function rr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ir(e,t,n){var r=t[10];r.begin&&r.begin();try{Hn(e,t,e.template,n)}catch(i){throw function(e,t){var n=e[9],r=n?n.get(dn,null):null;r&&r.handleError(t)}(t,i),i}finally{r.end&&r.end()}}function or(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=ht(n),i=r[1];Nn(i,r,i.template,n)}}(e[8])}function ar(e,t,n){St(0),t(e,n)}var sr=Promise.resolve(null);function lr(e,t){var n=t[3];return-1===e.index?nt(n)?n:null:n}function ur(e,t,n,r,i){if(null!=r){var o,a=!1;nt(r)?o=r:tt(r)&&(a=!0,r=r[0]);var s=lt(r);0===e&&null!==n?null==i?dr(t,n,s):fr(t,n,s,i||null):1===e&&null!==n?fr(t,n,s,i||null):2===e?function(e,t,n){var r=vr(e,t);r&&function(e,t,n,r){at(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,a):3===e&&t.destroyNode(s),null!=o&&function(e,t,n,r,i){var o=n[7];o!==lt(n)&&ur(t,e,r,o,i);for(var a=9;a<n.length;a++){var s=n[a];yr(s[1],s,e,t,r,o)}}(t,e,o,n,i)}}function cr(e,t){var n;return tt(e)&&(n=e[6])&&2===n.type?lr(n,e):e[3]===t?null:e[3]}function hr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];i instanceof Vt||n[r+1].call(i)}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],a="function"==typeof o?o(t):lt(t[o]),s=r[n[i+2]],l=n[i+3];"boolean"==typeof l?a.removeEventListener(n[i],s,l):l>=0?r[l]():r[-l].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&at(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&nt(t[3])){r!==t[3]&&function(e,t){var n=e[5],r=n.indexOf(t);n.splice(r,1)}(r,t);var i=t[5];null!==i&&i.detachView(e)}}}function fr(e,t,n,r){at(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function dr(e,t,n){at(e)?e.appendChild(t,n):t.appendChild(n)}function pr(e,t,n,r){null!==r?fr(e,t,n,r):dr(e,t,n)}function vr(e,t){return at(e)?e.parentNode(t):t.parentNode}function gr(e,t,n,r){var i=function(e,t,n){for(var r,i,o=t.parent;null!=o&&(4===o.type||5===o.type);)o=(t=o).parent;if(null==o){var a=n[6];return 2===a.type?(i=lr(a,r=n))?vr(r[11],i[7]):null:n[0]}if(t&&5===t.type&&4&t.flags)return ut(t,n).parentNode;if(2&o.flags){var s=e.data,l=s[s[o.index].directiveStart].encapsulation;if(l!==ze.ShadowDom&&l!==ze.Native)return null}return ut(o,n)}(e,r,t);if(null!=i){var o=t[11],a=function(e,t){if(2===e.type){var n=lr(e,t);return null===n?null:function e(t,n){var r=9+t+1;if(r<n.length){var i=n[r],o=i[1].firstChild;if(null!==o)return function t(n,r){if(null!==r){var i=r.type;if(3===i)return ut(r,n);if(0===i)return e(-1,n[r.index]);if(4===i||5===i){var o=r.child;if(null!==o)return t(n,o);var a=n[r.index];return nt(a)?e(-1,a):lt(a)}var s=n[16],l=s[6],u=En(s),c=l.projection[r.projection];return null!=c?t(u,c):t(n,r.next)}return null}(i,o)}return n[7]}(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?ut(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)pr(o,i,n[s],a);else pr(o,i,n,a)}}function mr(e,t,n,r,i,o,a){for(;null!=n;){var s=r[n.index],l=n.type;a&&0===t&&(s&&mn(lt(s),r),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(mr(e,t,n.child,r,i,o,!1),ur(t,e,i,s,o)):1===l?kr(e,t,r,n,i,o):ur(t,e,i,s,o)),n=a?n.projectionNext:n.next}}function yr(e,t,n,r,i,o){mr(n,r,e.node.child,t,i,o,!1)}function kr(e,t,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var l=0;l<s.length;l++)ur(t,e,i,s[l],o);else mr(e,t,s,a[3],i,o,!0)}function br(e,t,n){at(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function wr(e,t,n){at(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var _r,Cr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._view=e,r}return _createClass(n,[{key:"detectChanges",value:function(){or(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Ct(!0);try{or(e)}finally{Ct(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}!function(e,t){if(!(256&t[2])){var n=t[11];at(n)&&n.destroyNode&&yr(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return hr(e[1],e);for(;t;){var n=null;if(tt(t))n=t[13];else{var r=t[9];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)tt(t)&&hr(t[1],t),t=cr(t,e);null===t&&(t=e),tt(t)&&hr(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r,i;t=this._lView[1],r=e,(i=n=this._lView,i[7]||(i[7]=[])).push(r),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){!function(e){for(;e;){e[2]|=64;var t=En(e);if(0!=(512&e[2])&&!t)return e;e=t}}(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ir(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Ct(!0);try{ir(e,t,n)}finally{Ct(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,yr(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var a=n[r.index];if(null!==a&&i.push(lt(a)),nt(a))for(var s=9;s<a.length;s++){var l=a[s],u=l[1].firstChild;null!==u&&e(l[1],l,u,i)}var c=r.type;if(4===c||5===c)e(t,n,r.child,i);else if(1===c){var h=n[16],f=h[6],d=En(h),p=f.projection[r.projection];null!==p&&null!==d&&e(d[1],d,p,i,!0)}r=o?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}());function Or(e,t,n){return _r||(_r=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(e)),new _r(ut(t,n))}var Sr=new Ae("Set Injector scope."),xr={},Ar={},Pr=[],Tr=void 0;function Er(){return void 0===Tr&&(Tr=new je),Tr}function Ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Mr(e,n,t||Er(),r)}var Mr=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&qe(n,(function(e){return i.processProvider(e,t,n)})),qe([t],(function(e){return i.processInjectorType(e,[],a)})),this.records.set(Pe,Rr(void 0,this));var s=this.records.get(Sr);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof t?null:ue(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Default;this.assertNotDestroyed();var r,i=De(this);try{if(!(n&Y.SkipSelf)){var o=this.records.get(e);if(void 0===o){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Ae)&&te(e);o=a&&this.injectableDefInScope(a)?Rr(Dr(e),xr):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&Y.Self?Er():this.parent).get(e,t=n&Y.Optional&&t===Te?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(ue(e)),i)throw s;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=ue(t);if(Array.isArray(t))i=t.map(ue).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):ue(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Ee,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{De(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(ue(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=de(e)))return!1;var i=re(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=re(o)),null==i)return!1;if(null!=i.imports&&!s){var l;n.push(a);try{qe(i.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===l&&(l=[]),l.push(e))}))}finally{}if(void 0!==l)for(var u=function(e){var t=l[e],n=t.ngModule,i=t.providers;qe(i,(function(e){return r.processProvider(e,n,i||Pr)}))},c=0;c<l.length;c++)u(c)}this.injectorDefTypes.add(a),this.records.set(a,Rr(i.factory,xr));var h=i.providers;if(null!=h&&!s){var f=e;qe(h,(function(e){return r.processProvider(e,f,h)}))}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=Hr(e=de(e))?e:de(e&&e.provide),i=function(e,t,n){return Fr(e)?Rr(void 0,e.useValue):Rr(function(e,t,n){var r,i=void 0;if(Hr(e)){var o=de(e);return Je(o)||Dr(o)}if(Fr(e))i=function(){return de(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,_toConsumableArray(Le(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return He(de(e.useExisting))};else{var a=de(e&&(e.useClass||e.provide));if(a||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(ue(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return Je(a)||Dr(a);i=function(){return _construct(a,_toConsumableArray(Le(e.deps)))}}return i}(e,t,n),xr)}(e,t,n);if(Hr(e)||!0!==e.multi){var o=this.records.get(r);o&&void 0!==o.multi&&kn()}else{var a=this.records.get(r);a?void 0===a.multi&&kn():((a=Rr(void 0,xr,!0)).factory=function(){return Le(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Ar?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(ue(e)):t.value===xr&&(t.value=Ar,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Dr(e){var t=te(e),n=null!==t?t.factory:Je(e);if(null!==n)return n;var r=re(e);if(null!==r)return r.factory;if(e instanceof Ae)throw new Error("Token ".concat(ue(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(ue(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[ie]||e[se]||e[ae]&&e[ae]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in v10. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Fr(e){return null!==e&&"object"==typeof e&&Ie in e}function Hr(e){return"function"==typeof e}var Nr=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ir(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Lr=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Nr(e,t,""):Nr(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Te,e.NULL=new je,e.\u0275prov=J({token:e,providedIn:"any",factory:function(){return He(Pe)}}),e.__NG_ELEMENT_ID__=-1,e}(),jr=new Map,Vr=new Set;function qr(e){return"string"==typeof e?e:e.text()}function Br(e,t){for(var n=e.styles,r=e.classes,i=0,o=0;o<t.length;o++){var a=t[o];"number"==typeof a?i=a:1==i?r=ce(r,a):2==i&&(n=ce(n,a+": "+t[++o]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}var zr=null;function Xr(){if(!zr){var e=ke.Symbol;if(e&&e.iterator)zr=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(zr=r)}}return zr}function Ur(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Wr(e){return!!Qr(e)&&(Array.isArray(e)||!(e instanceof Map)&&Xr()in e)}function Qr(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Zr(e,t,n,r,i){var o=i?"class":"style";!function(e,t,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],l=t[a],u=e.data[a];null!==u.setInput?u.setInput(l,i,r,s):l[s]=i}}(e,n,t.inputs[o],o,r)}function Gr(e,t,n,r){var i=mt(),o=yt(),a=19+e,s=i[11],l=i[a]=Mn(t,s,vt.lFrame.currentNamespace),u=o.firstCreatePass?function(e,t,n,r,i,o,a){var s=t.consts,l=dt(s,o),u=Rn(t,n[6],e,3,i,l);return function(e,t,n,r){if(gt()){var i=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];xn(n,a.selectors,!1)&&(i||(i=[]),nn(Kt(n,t),e,a.type),it(a)?(2&n.flags&&yn(n),Qn(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==i){var a=0;!0,Gn(n,e.data.length,i.length);for(var s=0;s<i.length;s++){var l=i[s];l.providersResolver&&l.providersResolver(l)}Wn(e,n,i.length);for(var u=!1,c=!1,h=0;h<i.length;h++){var f=i[h];n.mergedAttrs=Bt(n.mergedAttrs,f.hostAttrs),$n(e,t,f),Zn(e.data.length-1,f,o),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128),!u&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),u=!0),c||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),c=!0),zn(e,f),a+=f.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,o=[],a=null,s=null,l=t.directiveStart;l<n;l++){var u=r[l],c=u.inputs;o.push(null!==i?Jn(c,i):null),a=Bn(c,l,a),s=Bn(u.outputs,l,s)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=s}(e,n),Xn(e,t,a)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new Error("Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],o)}}(n,r,o)}n.mergedAttrs=Bt(n.mergedAttrs,n.attrs)}(t,n,u,dt(s,a)),null!==u.mergedAttrs&&Br(u,u.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,u),u}(e,o,i,0,t,n,r):o.data[a];bt(u,!0);var c=u.mergedAttrs;null!==c&&qt(s,l,c);var h=u.classes;null!==h&&wr(s,l,h);var f=u.styles;null!==f&&br(s,l,f),gr(o,i,l,u),0===vt.lFrame.elementDepthCount&&mn(l,i),vt.lFrame.elementDepthCount++,function(e){return 1==(1&e.flags)}(u)&&(function(e,t,n){gt()&&(function(e,t,n,r){var i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Kt(n,t),mn(r,t);for(var a=n.initialInputs,s=i;s<o;s++){var l=e.data[s],u=it(l);u&&Yn(t,n,l);var c=an(t,e,s,n);mn(c,t),null!==a&&Kn(0,s-i,c,l,0,a),u&&(ct(n.index,t)[8]=c)}}(e,t,n,ut(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=e.expandoInstructions,a=e.firstCreatePass,s=n.index-19;try{Dt(s);for(var l=r;l<i;l++){var u=e.data[l],c=t[l];null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs?Un(u,c):a&&o.push(null)}}finally{Dt(-1)}}(e,t,n))}(o,i,u),function(e,t,n){if(rt(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,u,i)),null!==r&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut,r=t.localNames;if(null!==r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(t,e):e[a];e[i++]=s}}(i,u)}function $r(){var e=kt();wt()?vt.lFrame.isParent=!1:bt(e=e.parent,!1);var t=e;vt.lFrame.elementDepthCount--;var n=yt();n.firstCreatePass&&(Rt(n,e),rt(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&Zr(n,t,mt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&Zr(n,t,mt(),t.styles,!1)}function Yr(e){return!!e&&"function"==typeof e.then}function Kr(e,t){var n=ht(e)[1],r=n.data.length-1;Rt(n,{directiveStart:r,directiveEnd:r+1})}var Jr=function e(){_classCallCheck(this,e)},ei=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(ue(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),ti=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new ei,e}(),ni=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return ri(e)},e}(),ri=function(e){return Or(e,kt(),mt())},ii=function e(){_classCallCheck(this,e)},oi=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),ai=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=J({token:e,providedIn:"root",factory:function(){return null}}),e}(),si=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("9.1.0"),li=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return Wr(e)}},{key:"create",value:function(e){return new ci(e)}}]),e}(),ui=function(e,t){return t},ci=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ui}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<pi(n,r,i)?t:n,a=pi(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var l=a-r,u=s-r;if(l!=u){for(var c=0;c<l;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;u<=f&&f<l&&(i[c]=h+1)}i[o.previousIndex]=u-l}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Wr(e))throw new Error("Error trying to diff '".concat(ue(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==o&&Ur(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Ur(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Xr()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==o&&Ur(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),Ur(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ur(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ur(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new hi(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new di),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new di),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),hi=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},fi=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Ur(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),di=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new fi,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function pi(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var vi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Qr(e)}},{key:"create",value:function(){return new gi}}]),e}(),gi=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Qr(e)))throw new Error("Error trying to diff '".concat(ue(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new mi(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Ur(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),mi=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},yi=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new $,new Z]]}}}]),e}();return e.\u0275prov=J({token:e,providedIn:"root",factory:function(){return new e([new li])}}),e}(),ki=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new $,new Z]]}}}]),e}();return e.\u0275prov=J({token:e,providedIn:"root",factory:function(){return new e([new vi])}}),e}(),bi=[new vi],wi=new yi([new li]),_i=new ki(bi),Ci={},Oi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ngModule=e,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(e){var t=Ke(e);return new Ai(t,this.ngModule)}}]),n}(ti);function Si(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var xi=new Ae("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Qt}}),Ai=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Pn).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _createClass(n,[{key:"create",value:function(e,t,n,r){var i,o,a=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var o=e.get(n,Ci,i);return o!==Ci||r===Ci?o:t.get(n,r,i)}}}(e,r.injector):e,s=a.get(ii,st),l=a.get(ai,null),u=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(at(e))return e.selectRootElement(t,n===ze.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(u,n,this.componentDef.encapsulation):Mn(c,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),p={components:[],scheduler:Qt,clean:sr,playerHandler:null,flags:0},v=Vn(0,-1,null,1,0,null,null,null,null,null),g=Dn(null,v,p,f,null,null,s,u,l,a);At(g,null);try{var m=function(e,t,n,r,i,o){var a=n[1];n[19]=e;var s=Rn(a,null,0,3,null,null),l=s.mergedAttrs=t.hostAttrs;null!==l&&(Br(s,l),null!==e&&(qt(i,e,l),null!==s.classes&&wr(i,e,s.classes),null!==s.styles&&br(i,e,s.styles)));var u=r.createRenderer(e,t),c=Dn(n,jn(t),null,t.onPush?64:16,n[19],s,r,u,void 0);return a.firstCreatePass&&(nn(Kt(s,n),a,t.type),Qn(a,s),Gn(s,n.length,1)),rr(n,c),n[19]=c}(h,this.componentDef,g,s,u);if(h)if(n)qt(u,h,["ng-version",si.full]);else{var y=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!On(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),k=y.attrs,b=y.classes;k&&qt(u,h,k),b&&b.length>0&&wr(u,h,b.join(" "))}o=g[1].data[19],t&&(o.projection=t.map((function(e){return Array.from(e)}))),i=function(e,t,n,r,i){var o=n[1],a=function(e,t,n){var r=kt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Wn(e,r,1),$n(e,t,n));var i=an(t,e,t.length-1,r);mn(i,t);var o=ut(r,t);return o&&mn(o,t),i}(o,n,t);r.components.push(a),e[8]=a,i&&i.forEach((function(e){return e(a,t)})),t.contentQueries&&t.contentQueries(1,a,n.length-1);var s=kt();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Dt(s.index-19);var l=n[1];zn(l,t),Xn(l,n,t.hostVars),Un(t,a)}return a}(m,this.componentDef,g,p,[Kr]),Fn(v,g,null)}finally{Mt()}var w=new Pi(this.componentType,i,Or(ni,o,g),g,o);return n&&!d||(w.hostView._tViewNode.child=o),w}},{key:"inputs",get:function(){return Si(this.componentDef.inputs)}},{key:"outputs",get:function(){return Si(this.componentDef.outputs)}}]),n}(Jr),Pi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s,l,u,c;return _classCallCheck(this,n),(s=t.call(this)).location=i,s._rootLView=o,s._tNode=a,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new Cr(o),s.hostView._tViewNode=(l=o[1],u=o,null==(c=l.node)&&(l.node=c=qn(0,null,2,-1,null,null)),u[6]=c),s.componentType=e,s}return _createClass(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new un(this._tNode,this._rootLView)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),Ti=void 0,Ei=["en",[["a","p"],["AM","PM"],Ti],[["AM","PM"],Ti,Ti],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ti,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ti,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ti,"{1} 'at' {0}",Ti],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Ii={};function Mi(e){return e in Ii||(Ii[e]=ke.ng&&ke.ng.common&&ke.ng.common.locales&&ke.ng.common.locales[e]),Ii[e]}var Di=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function Ri(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined")+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var Fi=new Map,Hi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_assertThisInitialized(i),i.destroyCbs=[],i.componentFactoryResolver=new Oi(_assertThisInitialized(i));var o=et(e),a=e[Oe]||null;return a&&Ri(a),i._bootstrapComponents=Zt(o.bootstrap),i._r3Injector=Ir(e,r,[{provide:Ve,useValue:_assertThisInitialized(i)},{provide:ti,useValue:i.componentFactoryResolver}],ue(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return _createClass(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Default;return e===Lr||e===Ve||e===Pe?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Ve),Ni=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).moduleType=e,null!==et(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(ue(t)," vs ").concat(ue(t.name)))})(n,Fi.get(n),t),Fi.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return _createClass(n,[{key:"create",value:function(e){return new Hi(this.moduleType,e)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),Li=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,o,a);return e instanceof f&&e.add(s),s}}]),n}(x),ji=new Ae("Application Initializer"),Vi=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Yr(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(He(ji,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}(),qi=new Ae("AppId"),Bi={provide:qi,useFactory:function(){return"".concat(zi()).concat(zi()).concat(zi())},deps:[]};function zi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Xi=new Ae("Platform Initializer"),Ui=new Ae("Platform ID"),Wi=new Ae("appBootstrapListener"),Qi=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}(),Zi=new Ae("LocaleId"),Gi=new Ae("DefaultCurrencyCode"),$i=function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n},Yi=function(e){return new Ni(e)},Ki=Yi,Ji=function(e){return Promise.resolve(Yi(e))},eo=function(e){var t=Yi(e),n=Zt(et(e).declarations).reduce((function(e,t){var n=Ke(t);return n&&e.push(new Ai(n)),e}),[]);return new $i(t,n)},to=eo,no=function(e){return Promise.resolve(eo(e))},ro=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Ki,this.compileModuleAsync=Ji,this.compileModuleAndAllComponentsSync=to,this.compileModuleAndAllComponentsAsync=no}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}(),io=new Ae("compilerOptions"),oo=Promise.resolve(0);function ao(e){"undefined"==typeof Zone?oo.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var so=function(){function e(t){var n,r,i=t.enableLongStackTrace,o=void 0!==i&&i,a=t.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Li(!1),this.onMicrotaskEmpty=new Li(!1),this.onStable=new Li(!1),this.onError=new Li(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=ke.requestAnimationFrame,t=ke.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ke,(function(){e.lastRequestAnimationFrameId=-1,ho(e),co(e)})),ho(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,i,o,a,s){try{return fo(n),e.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),po(n)}},onInvoke:function(e,t,r,i,o,a,s){try{return fo(n),e.invoke(r,i,o,a,s)}finally{po(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,ho(n),co(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,uo,lo,lo);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function lo(){}var uo={};function co(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function ho(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function fo(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function po(e){e._nesting--,co(e)}var vo,go=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Li,this.onMicrotaskEmpty=new Li,this.onStable=new Li,this.onError=new Li}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),mo=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){so.assertNotInAngularZone(),ao((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())ao((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(He(so))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}(),yo=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,ko.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ko.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}(),ko=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),bo=function(e,t,n){var r=e.get(io,[]).concat(t),i=new Ni(n);if(0===jr.size)return Promise.resolve(i);var o,a,s=(o=r.map((function(e){return e.providers})),a=[],o.forEach((function(e){return e&&a.push.apply(a,_toConsumableArray(e))})),a);if(0===s.length)return Promise.resolve(i);var l=function(){var e=ke.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),u=Lr.create({providers:s}).get(l.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(u.get(e))}(e);n.set(e,t=r.then(qr))}return t}return jr.forEach((function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then((function(t){e.template=t})));var o=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;o&&o.forEach((function(t,n){a.push(""),i.push(r(t).then((function(r){a[s+n]=r,o.splice(o.indexOf(t),1),0==o.length&&(e.styleUrls=void 0)})))}));var l=Promise.all(i).then((function(){return function(e){Vr.delete(e)}(n)}));t.push(l)})),jr=new Map,Promise.all(t).then((function(){}))}().then((function(){return i}))},wo=new Ae("AllowMultipleToken");function _o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new Ae(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Co();if(!o||o.injector.get(wo,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0},{provide:Sr,useValue:"platform"});!function(e){if(vo&&!vo.destroyed&&!vo.injector.get(wo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vo=e.get(Oo);var t=e.get(Xi,null);t&&t.forEach((function(e){return e()}))}(Lr.create({providers:a,name:r}))}return function(e){var t=Co();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Co(){return vo&&!vo.destroyed?vo:null}var Oo=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,o=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new go:("zone.js"===n?void 0:n)||new so({enableLongStackTrace:gn(),shouldCoalesceEventChangeDetection:r})),a=[{provide:so,useValue:o}];return o.run((function(){var t=Lr.create({providers:a,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(dn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Po(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var o=((a=n.injector.get(Vi)).runInitializers(),a.donePromise.then((function(){return Ri(n.injector.get(Zi,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return Yr(o)?o.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):o}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var a}(r,o)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=So({},n);return bo(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Ao);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(ue(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(He(Lr))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e}();function So(e,t){return Array.isArray(t)?t.reduce(So,e):Object.assign(Object.assign({},e),t)}var xo,Ao=((xo=function(){function e(t,n,r,i,o,a){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=gn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var l=new b((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),u=new b((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){so.assertNotInAngularZone(),ao((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){so.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=Number.POSITIVE_INFINITY,o=null,a=t[t.length-1];return(r=a)&&"function"==typeof r.schedule?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof a&&(i=t.pop()),null===o&&1===t.length&&t[0]instanceof b?t[0]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof n?function(i){return i.pipe(e((function(e,r){return(i=t(e,r),i instanceof b?i:new b(I(i))).pipe(function(e,t){return function(t){return t.lift(new D(e,void 0))}}((function(t,i){return n(e,t,r,i)})));var i}),r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new F(t,r))})}(N,e)}(i)(function(e,t){return t?function(e,t){return new b((function(n){var r=new f,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}(e,t):new b(T(e))}(t,o))}(l,u.pipe((function(e){return L()((t=X,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,B);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Jr?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(Ve),o=n.create(Lr.NULL,[],t||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(mo,null);return a&&o.injector.get(yo).registerApplication(o.location.nativeElement,a),this._loadComponent(o),gn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(o){n.e(o)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(o){i.e(o)}finally{i.f()}}}catch(a){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(a)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Po(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Wi,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Po(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||xo)(He(so),He(Qi),He(Lr),He(dn),He(ti),He(Vi))},xo.\u0275prov=J({token:xo,factory:xo.\u0275fac}),xo);function Po(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var To=_o(null,"core",[{provide:Ui,useValue:"unknown"},{provide:Oo,deps:[Lr]},{provide:yo,deps:[]},{provide:Qi,deps:[]}]),Eo=[{provide:Ao,useClass:Ao,deps:[so,Qi,Lr,dn,ti,Vi]},{provide:xi,deps:[so],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Vi,useClass:Vi,deps:[[new Z,ji]]},{provide:ro,useClass:ro,deps:[]},Bi,{provide:yi,useFactory:function(){return wi},deps:[]},{provide:ki,useFactory:function(){return _i},deps:[]},{provide:Zi,useFactory:function(e){return Ri(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new Q(Zi),new Z,new $]]},{provide:Gi,useValue:"USD"}],Io=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=$e({type:e}),e.\u0275inj=ee({factory:function(t){return new(t||e)(He(Ao))},providers:Eo}),e}(),Mo=null;function Do(){return Mo}var Ro,Fo,Ho,No,Lo,jo,Vo=new Ae("DocumentToken"),qo=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Bo=function e(){_classCallCheck(this,e)},zo=((Fo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).locale=e,r}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Mi(t);if(n)return n;var r=t.split("-")[0];if(n=Mi(r))return n;if("en"===r)return Ei;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[Di.PluralCase]}(t||this.locale)(e)){case qo.Zero:return"zero";case qo.One:return"one";case qo.Two:return"two";case qo.Few:return"few";case qo.Many:return"many";default:return"other"}}}]),n}(Bo)).\u0275fac=function(e){return new(e||Fo)(He(Zi))},Fo.\u0275prov=J({token:Fo,factory:Fo.\u0275fac}),Fo),Xo=((Ro=function e(){_classCallCheck(this,e)}).\u0275mod=$e({type:Ro}),Ro.\u0275inj=ee({factory:function(e){return new(e||Ro)},providers:[{provide:Bo,useClass:zo}]}),Ro),Uo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=Wo||(Wo=document.querySelector("base"))?Wo.getAttribute("href"):null;return null==n?null:(t=n,Ho||(Ho=document.createElement("a")),Ho.setAttribute("href",t),"/"===Ho.pathname.charAt(0)?Ho.pathname:"/"+Ho.pathname)}},{key:"resetBaseElement",value:function(){Wo=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),a=_slicedToArray(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),s=a[0],l=a[1];if(s.trim()===t)return decodeURIComponent(l)}}catch(u){r.e(u)}finally{r.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,Mo||(Mo=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())),Wo=null,Qo=new Ae("TRANSITION_ID"),Zo=[{provide:ji,useFactory:function(e,t,n){return function(){n.get(Vi).donePromise.then((function(){var n=Do();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Qo,Vo,Lr],multi:!0}],Go=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){ke.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},ke.getAllAngularTestabilities=function(){return e.getAllTestabilities()},ke.getAllAngularRootElements=function(){return e.getAllRootElements()},ke.frameworkStabilizers||(ke.frameworkStabilizers=[]),ke.frameworkStabilizers.push((function(e){var t=ke.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Do().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,ko=t}}]),e}(),$o=new Ae("EventManagerPlugins"),Yo=((No=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||No)(He($o),He(so))},No.\u0275prov=J({token:No,factory:No.\u0275fac}),No),Ko=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Do().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Jo=((jo=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||jo)},jo.\u0275prov=J({token:jo,factory:jo.\u0275fac}),jo),ea=((Lo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Do().remove(e)}))}}]),n}(Jo)).\u0275fac=function(e){return new(e||Lo)(He(Vo))},Lo.\u0275prov=J({token:Lo,factory:Lo.\u0275fac}),Lo),ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},na=/%COMP%/g;function ra(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?ra(e,i,n):(i=i.replace(na,e),n.push(i))}return n}function ia(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var oa,aa,sa,la,ua=((oa=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ca(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ze.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ha(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case ze.Native:case ze.ShadowDom:return new fa(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=ra(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||oa)(He(Yo),He(ea),He(qi))},oa.\u0275prov=J({token:oa,factory:oa.\u0275fac}),oa),ca=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ta[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=ta[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=ta[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&oi.DashCase?e.style.setProperty(t,n,r&oi.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&oi.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ia(n)):this.eventManager.addEventListener(e,t,ia(n))}}]),e}(),ha=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;_classCallCheck(this,n),(a=t.call(this,e)).component=i;var s,l=ra(o+"-"+i.id,i.styles,[]);return r.addStyles(l),a.contentAttr="_ngcontent-%COMP%".replace(na,o+"-"+i.id),a.hostAttr=(s=o+"-"+i.id,"_nghost-%COMP%".replace(na,s)),a}return _createClass(n,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(ca),fa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;_classCallCheck(this,n),(a=t.call(this,e)).sharedStylesHost=r,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===ze.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=ra(o.id,o.styles,[]),l=0;l<s.length;l++){var u=document.createElement("style");u.textContent=s[l],a.shadowRoot.appendChild(u)}return a}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ca),da=((aa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Ko)).\u0275fac=function(e){return new(e||aa)(He(Vo))},aa.\u0275prov=J({token:aa,factory:aa.\u0275fac}),aa),pa=["alt","control","meta","shift"],va={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ga={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ma={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},ya=((sa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Do().onAndCancel(e,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),o="";if(pa.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")})),o+=i,0!=t.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ga.hasOwnProperty(t)&&(t=ga[t]))}return va[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),pa.forEach((function(r){r!=n&&(0,ma[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Ko)).\u0275fac=function(e){return new(e||sa)(He(Vo))},sa.\u0275prov=J({token:sa,factory:sa.\u0275fac}),sa),ka=_o(To,"browser",[{provide:Ui,useValue:"browser"},{provide:Xi,useValue:function(){Uo.makeCurrent(),Go.init()},multi:!0},{provide:Vo,useFactory:function(){return function(e){ot=e}(document),document},deps:[]}]),ba=[[],{provide:Sr,useValue:"root"},{provide:dn,useFactory:function(){return new dn},deps:[]},{provide:$o,useClass:da,multi:!0,deps:[Vo,so,Ui]},{provide:$o,useClass:ya,multi:!0,deps:[Vo]},[],{provide:ua,useClass:ua,deps:[Yo,ea,qi]},{provide:ii,useExisting:ua},{provide:Jo,useExisting:ea},{provide:ea,useClass:ea,deps:[Vo]},{provide:mo,useClass:mo,deps:[so]},{provide:Yo,useClass:Yo,deps:[$o,so]},[]],wa=((la=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:qi,useValue:t.appId},{provide:Qo,useExisting:qi},Zo]}}}]),e}()).\u0275mod=$e({type:la}),la.\u0275inj=ee({factory:function(e){return new(e||la)(He(la,12))},providers:ba,imports:[Xo,Io]}),la);"undefined"!=typeof window&&window;var _a=n("3Yt4"),Ca=n("dC2d"),Oa=Ca.Annotation.define(),Sa=Ca.Annotation.define(),xa=Ca.Facet.define(),Aa=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}}),Pa=Ca.StateField.define({create:function(){return za.empty},update:function(e,t){var n=t.state.facet(Aa),r=t.annotation(Oa);if(r){var i=Fa.fromTransaction(t),o=r.side,a=0==o?e.undone:e.done;return a=i?Ha(a,a.length,n.minDepth,i):ja(a,t.startState.selection),new za(0==o?r.rest:a,0==o?a:r.rest)}var s=t.annotation(Sa);if("full"!=s&&"before"!=s||(e=e.isolate()),!1===t.annotation(Ca.Transaction.addToHistory))return t.changes.length?e.addMapping(t.changes.desc):e;var l=Fa.fromTransaction(t),u=t.annotation(Ca.Transaction.time),c=t.annotation(Ca.Transaction.userEvent);return l?e=e.addChanges(l,u,c,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,u,c,n.newGroupDelay)),"full"!=s&&"after"!=s||(e=e.isolate()),e}});function Ta(e,t){return function(n){var r=n.state,i=n.dispatch,o=r.field(Pa,!1);if(!o)return!1;var a=o.pop(e,r,t);return!!a&&(i(a),!0)}}var Ea=Ta(0,!1),Ia=Ta(1,!1),Ma=Ta(0,!0),Da=Ta(1,!0);function Ra(e){return function(t){var n=t.field(Pa,!1);if(!n)return 0;var r=0==e?n.done:n.undone;return r.length-(r.length&&!r[0].changes?1:0)}}Ra(0),Ra(1);var Fa=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.changes=t,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}return _createClass(e,[{key:"setSelAfter",value:function(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)}}],[{key:"fromTransaction",value:function(t){var n,r=La,i=_createForOfIteratorHelper(t.startState.facet(xa));try{for(i.s();!(n=i.n()).done;){var o=(0,n.value)(t);o.length&&(r=r.concat(o))}}catch(a){i.e(a)}finally{i.f()}return!r.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),r,void 0,t.startState.selection,La)}},{key:"selection",value:function(t){return new e(void 0,La,void 0,void 0,t)}}]),e}();function Ha(e,t,n,r){var i=e.slice(t+1>n+20?t-n-1:0,t);return i.push(r),i}function Na(e,t){return e.length?t.length?e.concat(t):e:t}var La=[];function ja(e,t){if(e.length){var n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Ha(e,e.length-1,1e9,n.setSelAfter(r)))}return[Fa.selection([t])]}function Va(e){var t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function qa(e,t){if(!e.length)return e;for(var n=e.length,r=La;n;){var i=Ba(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){var o=e.slice(0,n);return o[n-1]=i,o}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[Fa.selection(r)]:La}function Ba(e,t,n){var r=Na(e.selectionsAfter.length?e.selectionsAfter.map((function(e){return e.map(t)})):La,n);if(!e.changes)return Fa.selection(r);var i=e.changes.map(t),o=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new Fa(i,Ca.StateEffect.mapEffects(e.effects,t),a,e.startSelection.map(t),r)}var za=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=i}return _createClass(e,[{key:"isolate",value:function(){return this.prevTime?new e(this.done,this.undone):this}},{key:"addChanges",value:function(t,n,r,i,o){var a,s,l,u,c=this.done,h=c[c.length-1];return new e(c=h&&h.changes&&n-this.prevTime<i&&!h.selectionsAfter.length&&h.changes.length&&t.changes&&(a=h.changes,s=t.changes,l=[],u=!1,a.iterChangedRanges((function(e,t){return l.push(e,t)})),s.iterChangedRanges((function(e,t,n,r){for(var i=0;i<l.length;){var o=l[i++],a=l[i++];r>=o&&n<=a&&(u=!0)}})),u)?Ha(c,c.length-1,o,new Fa(t.changes.compose(h.changes),Na(t.effects,h.effects),h.mapped,h.startSelection,La)):Ha(c,c.length,o,t),La,n,r)}},{key:"addSelection",value:function(t,n,r,i){var o,a,s=this.done.length?this.done[this.done.length-1].selectionsAfter:La;return s.length>0&&n-this.prevTime<i&&"keyboardselection"==r&&this.prevUserEvent==r&&(o=s[s.length-1]).ranges.length==(a=t).ranges.length&&0===o.ranges.filter((function(e,t){return e.empty!=a.ranges[t].empty})).length?this:new e(ja(this.done,t),this.undone,n,r)}},{key:"addMapping",value:function(t){return new e(qa(this.done,t),qa(this.undone,t),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(e,t,n){var r=0==e?this.done:this.undone;if(0==r.length)return null;var i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Oa.of({side:e,rest:Va(r)})});if(i.changes){var o=1==r.length?La:r.slice(0,r.length-1);return i.mapped&&(o=qa(o,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Oa.of({side:e,rest:o}),filter:!1})}return null}}]),e}();za.empty=new za(La,La);var Xa=[{key:"Mod-z",run:Ea,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ia,preventDefault:!0},{key:"Mod-u",run:Ma,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Da,preventDefault:!0}],Ua=n("jvbj"),Wa=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e)}},{key:"toDOM",value:function(e){return null}},{key:"at",value:function(e){return new Ua.a(e,e,this)}}]),n}(Ua.d);Wa.prototype.elementClass="",Wa.prototype.mapMode=Ca.MapMode.TrackBefore;var Qa={style:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Ua.b.empty},lineMarker:function(){return null},initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Za=Ca.Facet.define();function Ga(e){return[Ka(),Za.of(Object.assign(Object.assign({},Qa),e))]}var $a=_a.EditorView.baseTheme({gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"gutters@light":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid silver"},"gutters@dark":{backgroundColor:"#333338",color:"#ccc"},gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},gutterElement:{boxSizing:"border-box"},"gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),Ya=Ca.Facet.define({combine:function(e){return e.some((function(e){return e}))}});function Ka(e){var t=[Ja,$a];return e&&!1===e.fixed&&t.push(Ya.of(!0)),t}var Ja=_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.view=t,this.dom=document.createElement("div"),this.dom.className=Object(_a.themeClass)("gutters"),this.dom.setAttribute("aria-hidden","true"),this.gutters=t.state.facet(Za).map((function(e){return new ts(t,e)}));var n,r=_createForOfIteratorHelper(this.gutters);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.dom.appendChild(i.dom)}}catch(o){r.e(o)}finally{r.f()}this.fixed=!t.state.facet(Ya),this.fixed&&(this.dom.style.position="sticky"),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}return _createClass(e,[{key:"update",value:function(e){var t=this;if(this.updateGutters(e)){var n=this.gutters.map((function(e){return new es(e,t.view.viewport)}));this.view.viewportLines((function(e){var r;if(Array.isArray(e.type)){var i,o=_createForOfIteratorHelper(e.type);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.type==_a.BlockType.Text){r=a;break}}}catch(u){o.e(u)}finally{o.f()}}else r=e.type==_a.BlockType.Text?e:void 0;if(r){var s,l=_createForOfIteratorHelper(n);try{for(l.s();!(s=l.n()).done;){s.value.line(t.view,r)}}catch(u){l.e(u)}finally{l.f()}}}),0);var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){r.value.finish()}}catch(o){i.e(o)}finally{i.f()}this.dom.style.minHeight=this.view.contentHeight+"px",e.state.facet(Ya)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}}},{key:"updateGutters",value:function(e){var t=e.prevState.facet(Za),n=e.state.facet(Za),r=e.docChanged||e.heightChanged||e.viewportChanged;if(t==n){var i,o=_createForOfIteratorHelper(this.gutters);try{for(o.s();!(i=o.n()).done;){i.value.update(e)&&(r=!0)}}catch(g){o.e(g)}finally{o.f()}}else{r=!0;var a,s=[],l=_createForOfIteratorHelper(n);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=t.indexOf(u);c<0?s.push(new ts(this.view,u)):(this.gutters[c].update(e),s.push(this.gutters[c]))}}catch(g){l.e(g)}finally{l.f()}var h,f=_createForOfIteratorHelper(this.gutters);try{for(f.s();!(h=f.n()).done;){h.value.dom.remove()}}catch(g){f.e(g)}finally{f.f()}for(var d=0,p=s;d<p.length;d++){var v=p[d];this.dom.appendChild(v.dom)}this.gutters=s}return r}},{key:"destroy",value:function(){this.dom.remove()}}]),e}()).provide(_a.PluginField.scrollMargins,(function(e){return 0!=e.gutters.length&&e.fixed?e.view.textDirection==_a.Direction.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}:null})),es=function(){function e(t,n){_classCallCheck(this,e),this.gutter=t,this.localMarkers=[],this.i=0,this.height=0,this.cursor=Ua.b.iter(Array.isArray(t.markers)?t.markers:[t.markers],n.from)}return _createClass(e,[{key:"line",value:function(e,t){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=t.from;)this.cursor.from==t.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();var n=this.gutter.config.lineMarker(e,t,this.localMarkers);n&&this.localMarkers.unshift(n);var r=this.gutter;if(0!=this.localMarkers.length||r.config.renderEmptyElements){var i=t.top-this.height;if(this.i==r.elements.length){var o=new ns(e,t.height,i,this.localMarkers,r.elementClass);r.elements.push(o),r.dom.appendChild(o.dom)}else{var a=this.localMarkers,s=r.elements[this.i];(function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0})(a,s.markers)&&(a=s.markers,this.localMarkers.length=0),s.update(e,t.height,i,a,r.elementClass)}this.height=t.bottom,this.i++}}},{key:"finish",value:function(){for(var e=this.gutter;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}}]),e}(),ts=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className=Object(_a.themeClass)("gutter"+(this.config.style?"."+this.config.style:"")),this.elementClass=Object(_a.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));var i=function(e){r.dom.addEventListener(e,(function(r){var i=t.visualLineAtHeight(r.clientY,t.contentDOM.getBoundingClientRect().top);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var o in n.domEventHandlers)i(o);this.markers=n.markers(t.state),n.initialSpacer&&(this.spacer=new ns(t,0,0,[n.initialSpacer(t)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return _createClass(e,[{key:"update",value:function(e){var t=this.markers;if(this.markers=this.config.markers(e.state),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n],this.elementClass)}return this.markers!=t}}]),e}(),ns=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(t,n,r,i,o)}return _createClass(e,[{key:"update",value:function(e,t,n,r,i){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),this.markers!=r){this.markers=r;for(var o;o=this.dom.lastChild;)o.remove();var a,s=i,l=_createForOfIteratorHelper(r);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=u.toDOM(e);c&&this.dom.appendChild(c);var h=u.elementClass;h&&(s+=" "+h)}}catch(f){l.e(f)}finally{l.f()}this.dom.className=s}}}]),e}(),rs=Ca.Facet.define(),is=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e),r=function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i};for(var i in t)r(i);return n}})}}),os=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).number=e,r}return _createClass(n,[{key:"eq",value:function(e){return this.number==e.number}},{key:"toDOM",value:function(e){var t=e.state.facet(is);return document.createTextNode(t.formatNumber(this.number))}}]),n}(Wa),as=Ga({style:"lineNumber",markers:function(e){return e.facet(rs)},lineMarker:function(e,t,n){return n.length?null:new os(e.state.doc.lineAt(t.from).number)},initialSpacer:function(e){return new os(ls(e.state.doc.lines))},updateSpacer:function(e,t){var n=ls(t.view.state.doc.lines);return n==e.number?e:new os(n)}});function ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[is.of(e),as]}function ls(e){for(var t=9;t<e;)t=10*t+9;return t}function us(e,t){var n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}var cs=Ca.StateEffect.define({map:us}),hs=Ca.StateEffect.define({map:us});function fs(e){var t,n=[],r=_createForOfIteratorHelper(e.state.selection.ranges);try{var i=function(){var r=t.value.head;n.some((function(e){return e.from<=r&&e.to>=r}))||n.push(e.visualLineAt(r))};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return n}var ds=Ca.StateField.define({create:function(){return _a.Decoration.none},update:function(e,t){e=e.map(t.changes);var n,r=_createForOfIteratorHelper(t.effects);try{var i=function(){var t=n.value;t.is(cs)&&!function(e,t,n){var r=!1;return e.between(t,t,(function(e,i){e==t&&i==n&&(r=!0)})),r}(e,t.value.from,t.value.to)?e=e.update({add:[ws.decoration.range(t.value.from,t.value.to)]}):t.is(hs)&&(e=e.update({filter:function(e,n){return t.value.from!=e||t.value.to!=n},filterFrom:t.value.from,filterTo:t.value.to}))};for(r.s();!(n=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}if(t.selection){var o=!1,a=t.selection.primary.head;e.between(a,a,(function(e,t){e<a&&t>a&&(o=!0)})),o&&(e=e.update({filterFrom:a,filterTo:a,filter:function(e,t){return t<=a||e>=a}}))}return e},provide:[_a.EditorView.decorations]});function ps(e,t,n){var r,i=null;return null===(r=e.field(ds,!1))||void 0===r||r.between(t,n,(function(e,t){(!i||i.from>e)&&(i={from:e,to:t})})),i}function vs(e,t,n){return e.facet(Ca.EditorState.foldable).reduce((function(r,i){return r||i(e,t,n)}),null)}function gs(e){return e.field(ds,!1)?void 0:{append:bs()}}var ms=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:function(e){var t,n=_createForOfIteratorHelper(fs(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=vs(e.state,r.from,r.to);if(i)return e.dispatch({effects:cs.of(i),reconfigure:gs(e.state)}),!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:function(e){if(!e.state.field(ds,!1))return!1;var t,n=[],r=_createForOfIteratorHelper(fs(e));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=ps(e.state,i.from,i.to);o&&n.push(hs.of(o))}}catch(a){r.e(a)}finally{r.f()}return n.length&&e.dispatch({effects:n}),n.length>0}},{key:"Ctrl-Alt-[",run:function(e){for(var t=e.state,n=[],r=0;r<t.doc.length;){var i=e.visualLineAt(r),o=vs(t,i.from,i.to);o&&n.push(cs.of(o)),r=(o?e.visualLineAt(o.to):i).to+1}return n.length&&e.dispatch({effects:n,reconfigure:gs(e.state)}),!!n.length}},{key:"Ctrl-Alt-]",run:function(e){var t=e.state.field(ds,!1);if(!t||!t.size)return!1;var n=[];return t.between(0,e.state.doc.length,(function(e,t){n.push(hs.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],ys={placeholderDOM:null,placeholderText:"\u2026"},ks=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,ys)}});function bs(e){var t=[ds,Ss];return e&&t.push(ks.of(e)),t}var ws=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"ignoreEvents",value:function(){return!1}},{key:"toDOM",value:function(e){var t=e.state,n=t.facet(ks);if(n.placeholderDOM)return n.placeholderDOM();var r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className=Object(_a.themeClass)("foldPlaceholder"),r.onclick=function(t){var n=e.visualLineAt(e.posAtDOM(t.target)),r=ps(e.state,n.from,n.to);r&&e.dispatch({effects:hs.of(r)}),t.preventDefault()},r}}]),n}(_a.WidgetType);ws.decoration=_a.Decoration.replace({widget:new ws(null)});var _s={openText:"\u2304",closedText:"\u203a"},Cs=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).config=e,i.open=r,i}return _createClass(n,[{key:"eq",value:function(e){return this.config==e.config&&this.open==e.open}},{key:"toDOM",value:function(e){var t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}]),n}(Wa);function Os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},_s),e),n=new Cs(t,!0),r=new Cs(t,!1);return[Ga({style:"foldGutter",lineMarker:function(e,t){return ps(e.state,t.from,t.to)?r:vs(e.state,t.from,t.to)?n:null},initialSpacer:function(){return new Cs(t,!1)},domEventHandlers:{click:function(e,t){var n=ps(e.state,t.from,t.to);if(n)return e.dispatch({effects:hs.of(n)}),!0;var r=vs(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:cs.of(r)}),!0)}}}),bs()]}var Ss=_a.EditorView.baseTheme({foldPlaceholder:{backgroundColor:"#eee",border:"1px solid silver",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}}),xs=n("euHR"),As=n("WQMp"),Ps=_a.EditorView.baseTheme({matchingBracket:{color:"#0b0"},nonmatchingBracket:{color:"#a22"}}),Ts=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4})}}),Es=_a.Decoration.mark({class:Object(_a.themeClass)("matchingBracket")}),Is=_a.Decoration.mark({class:Object(_a.themeClass)("nonmatchingBracket")}),Ms=[Ca.StateField.define({create:function(){return _a.Decoration.none},update:function(e,t){if(!t.docChanged&&!t.selection)return e;var n,r=[],i=t.state.facet(Ts),o=_createForOfIteratorHelper(t.state.selection.ranges);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.empty){var s=Fs(t.state,a.head,-1,i)||a.head>0&&Fs(t.state,a.head-1,1,i)||i.afterCursor&&(Fs(t.state,a.head,1,i)||a.head<t.state.doc.length&&Fs(t.state,a.head+1,-1,i));if(s){var l=s.matched?Es:Is;r.push(l.range(s.start.from,s.start.to)),s.end&&r.push(l.range(s.end.from,s.end.to))}}}}catch(u){o.e(u)}finally{o.f()}return _a.Decoration.set(r,!0)},provide:[_a.EditorView.decorations]}),Ps];function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Ts.of(e),Ms]}function Rs(e,t,n){var r=e.prop(t<0?As.c.openedBy:As.c.closedBy);if(r)return r;if(1==e.name.length){var i=n.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[n[i+t]]}return null}function Fs(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.maxScanDistance||1e4,a=i.brackets||"()[]{}",s=e.tree,l=s.resolve(t,n);return(r=Rs(l.type,n,a))?function(e,t,n,r,i,o){var a=r.parent,s={from:r.start,to:r.end},l=0;return a&&a.iterate({from:n<0?r.start:r.end,to:n<0?a.start:a.end,enter:function(e,t,a){if(!(n<0?a>r.start:t<r.end)){if(0==l&&i.indexOf(e.name)>-1)return{start:s,end:{from:t,to:a},matched:!0};if(Rs(e,n,o))l++;else if(Rs(e,-n,o)&&0==--l)return{start:s,end:{from:t,to:a},matched:!1};return!1}}})||{start:s,matched:!1}}(0,0,n,l,r,a):function(e,t,n,r,i,o,a){var s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;for(var u={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),h=0,f=0;!c.next().done&&f<=o;){var d=c.value;n<0&&(f+=d.length);for(var p=t+f*n,v=n>0?0:d.length-1,g=n>0?d.length:-1;v!=g;v+=n){var m=a.indexOf(d[v]);if(!(m<0||r.resolve(p+v,1).type!=i))if(m%2==0==n>0)h++;else{if(1==h)return{start:u,end:{from:p+v,to:p+v+1},matched:m>>1==l>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}(e,t,n,s,l.type,o,a)}function Hs(e,t){return Ca.EditorSelection.create(e.ranges.map(t),e.primaryIndex)}function Ns(e,t){return e.update({selection:t,scrollIntoView:!0,annotations:Ca.Transaction.userEvent.of("keyboardselection")})}function Ls(e,t){var n=e.state,r=e.dispatch,i=Hs(n.selection,t);return!i.eq(n.selection)&&(r(Ns(n,i)),!0)}function js(e,t){return Ls(e,(function(n){return n.empty?e.moveByChar(n,t):Ca.EditorSelection.cursor(t?n.to:n.from)}))}var Vs=function(e){return js(e,e.textDirection!=_a.Direction.LTR)},qs=function(e){return js(e,e.textDirection==_a.Direction.LTR)};function Bs(e,t){return Ls(e,(function(n){return n.empty?e.moveByGroup(n,t):Ca.EditorSelection.cursor(t?n.to:n.from)}))}function zs(e,t,n){if(t.type.prop(n))return!0;var r=t.end-t.start;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.start,t.end)))||t.firstChild}function Xs(e,t,n){for(var r,i,o=e.tree.resolve(t.head),a=n?As.c.closedBy:As.c.openedBy,s=t.head;;){var l=n?o.childAfter(s):o.childBefore(s);if(!l)break;zs(e,l,a)?o=l:s=n?l.end:l.start}return i=o.type.prop(a)&&(r=n?Fs(e,o.start,1):Fs(e,o.end,-1))&&r.matched?n?r.end.to:r.end.from:n?o.end:o.start,Ca.EditorSelection.cursor(i,n?-1:1)}function Us(e,t){return Ls(e,(function(n){return e.moveVertically(n,t)}))}var Ws=function(e){return Us(e,!1)},Qs=function(e){return Us(e,!0)};function Zs(e,t){return Ls(e,(function(n){return e.moveVertically(n,t,e.dom.clientHeight)}))}var Gs=function(e){return Zs(e,!1)},$s=function(e){return Zs(e,!0)};function Ys(e,t,n){var r=e.visualLineAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){var o=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&t.head>r.from+o&&(i=Ca.EditorSelection.cursor(r.from+o))}return i}var Ks=function(e){return Ls(e,(function(t){return Ca.EditorSelection.cursor(e.visualLineAt(t.head).from,1)}))},Js=function(e){return Ls(e,(function(t){return Ca.EditorSelection.cursor(e.visualLineAt(t.head).to,-1)}))};function el(e,t){var n=Hs(e.state.selection,(function(e){var n=t(e);return Ca.EditorSelection.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(Ns(e.state,n)),!0)}function tl(e,t){return el(e,(function(n){return e.moveByChar(n,t)}))}var nl=function(e){return tl(e,e.textDirection!=_a.Direction.LTR)},rl=function(e){return tl(e,e.textDirection==_a.Direction.LTR)};function il(e,t){return el(e,(function(n){return e.moveByGroup(n,t)}))}function ol(e,t){return el(e,(function(n){return e.moveVertically(n,t)}))}var al=function(e){return ol(e,!1)},sl=function(e){return ol(e,!0)};function ll(e,t){return el(e,(function(n){return e.moveVertically(n,t,e.dom.clientHeight)}))}var ul=function(e){return ll(e,!1)},cl=function(e){return ll(e,!0)},hl=function(e){return el(e,(function(t){return Ca.EditorSelection.cursor(e.visualLineAt(t.head).from)}))},fl=function(e){return el(e,(function(t){return Ca.EditorSelection.cursor(e.visualLineAt(t.head).to)}))},dl=function(e){var t=e.state;return(0,e.dispatch)(Ns(t,{anchor:0})),!0},pl=function(e){var t=e.state;return(0,e.dispatch)(Ns(t,{anchor:t.doc.length})),!0},vl=function(e){var t=e.state;return(0,e.dispatch)(Ns(t,{anchor:t.selection.primary.anchor,head:0})),!0},gl=function(e){var t=e.state;return(0,e.dispatch)(Ns(t,{anchor:t.selection.primary.anchor,head:t.doc.length})),!0};function ml(e,t){var n=e.state.changeByRange((function(e){var n=e.from,r=e.to;if(n==r){var i=t(n);n=Math.min(n,i),r=Math.max(r,i)}return n==r?{range:e}:{changes:{from:n,to:r},range:Ca.EditorSelection.cursor(n)}}));return!n.changes.empty&&(e.dispatch(n,{scrollIntoView:!0,annotations:Ca.Transaction.userEvent.of("delete")}),!0)}var yl=function(e,t){return ml(e,(function(n){var r,i=e.state,o=i.doc.lineAt(n);if(!t&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(r=o.slice(0,n-o.from))){if("\t"==r[r.length-1])return n-1;for(var a=Object(xs.d)(r,0,i.tabSize)%i.indentUnit||i.indentUnit,s=0;s<a&&" "==r[r.length-1-s];s++)n--;return n}var l=o.findClusterBreak(n-o.from,t)+o.from;return l==n&&o.number!=(t?i.doc.lines:1)&&(l+=t?1:-1),l}))},kl=function(e){return yl(e,!1)},bl=function(e){return yl(e,!0)},wl=function(e,t){return ml(e,(function(n){for(var r=e.state,i=r.doc.lineAt(n),o=r.charCategorizer(n),a=null;;){var s=void 0,l=void 0;if(n==(t?i.to:i.from)){if(i.number==(t?r.doc.lines:1))break;i=r.doc.line(i.number+(t?1:-1)),s=t?i.from:i.to,l="\n"}else s=i.findClusterBreak(n-i.from,t)+i.from,l=i.slice(Math.min(n,s)-i.from,Math.max(n,s)-i.from);var u=o(l);if(null!=a&&u!=a)break;u!=Ca.CharCategory.Space&&(a=u),n=s}return n}))},_l=function(e){return wl(e,!1)},Cl=function(e){return wl(e,!0)};function Ol(e){var t,n=[],r=-1,i=_createForOfIteratorHelper(e.selection.ranges);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=e.doc.lineAt(o.from),s=e.doc.lineAt(o.to);r==a.number?n[n.length-1].to=s.to:n.push({from:a.from,to:s.to}),r=s.number}}catch(l){i.e(l)}finally{i.f()}return n}function Sl(e,t,n){var r,i=[],o=_createForOfIteratorHelper(Ol(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(n?a.to!=e.doc.length:0!=a.from){var s=e.doc.lineAt(n?a.to+1:a.from-1);n?i.push({from:a.to,to:s.to},{from:a.from,insert:s.slice()+e.lineBreak}):i.push({from:s.from,to:a.from},{from:a.to,insert:e.lineBreak+s.slice()})}}}catch(l){o.e(l)}finally{o.f()}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0})),!0)}function xl(e,t,n){var r,i=[],o=_createForOfIteratorHelper(Ol(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(n?{from:a.from,insert:e.doc.slice(a.from,a.to)+e.lineBreak}:{from:a.to,insert:e.lineBreak+e.doc.slice(a.from,a.to)})}}catch(s){o.e(s)}finally{o.f()}return t(e.update({changes:i,scrollIntoView:!0})),!0}function Al(e,t){var n="";if(e.indentWithTabs)for(;t>=e.tabSize;)n+="\t",t-=e.tabSize;for(var r=0;r<t;r++)n+=" ";return n}function Pl(e,t){var n,r=_createForOfIteratorHelper(e.state.facet(Ca.EditorState.indentation));try{for(r.s();!(n=r.n()).done;){var i=(0,n.value)(e,t);if(i>-1)return i}}catch(o){r.e(o)}finally{r.f()}return-1}function Tl(e,t){var n=-1;return e.changeByRange((function(r){for(var i=[],o=e.doc.lineAt(r.from);o.number>n&&(t(o,i,r),n=o.number),!(r.to<=o.to);)o=e.doc.lineAt(o.to+1);var a=e.changes(i);return{changes:i,range:Ca.EditorSelection.range(a.mapPos(r.anchor,1),a.mapPos(r.head,1))}}))}var El=[{key:"ArrowLeft",run:Vs,shift:nl},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:function(e){return Bs(e,e.textDirection!=_a.Direction.LTR)},shift:function(e){return il(e,e.textDirection!=_a.Direction.LTR)}},{mac:"Cmd-ArrowLeft",run:Ks,shift:hl},{key:"ArrowRight",run:qs,shift:rl},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:function(e){return Bs(e,e.textDirection==_a.Direction.LTR)},shift:function(e){return il(e,e.textDirection==_a.Direction.LTR)}},{mac:"Cmd-ArrowRight",run:Js,shift:fl},{key:"ArrowUp",run:Ws,shift:al},{mac:"Cmd-ArrowUp",run:dl,shift:vl},{mac:"Ctrl-ArrowUp",run:Gs,shift:ul},{key:"ArrowDown",run:Qs,shift:sl},{mac:"Cmd-ArrowDown",run:pl,shift:gl},{mac:"Ctrl-ArrowDown",run:$s,shift:cl},{key:"PageUp",run:Gs,shift:ul},{key:"PageDown",run:$s,shift:cl},{key:"Home",run:function(e){return Ls(e,(function(t){return Ys(e,t,!1)}))},shift:function(e){return el(e,(function(t){return Ys(e,t,!1)}))}},{key:"Mod-Home",run:dl,shift:vl},{key:"End",run:function(e){return Ls(e,(function(t){return Ys(e,t,!0)}))},shift:function(e){return el(e,(function(t){return Ys(e,t,!0)}))}},{key:"Mod-End",run:pl,shift:gl},{key:"Enter",run:function(e){var t=e.state,n=e.dispatch,r=0,i=t.selection.ranges.map((function(e){var n=Pl(new Ca.IndentContext(t,void 0,e.from),e.from);return n>-1?n:/^\s*/.exec(t.doc.lineAt(e.from).slice(0,50))[0].length})),o=t.changeByRange((function(e){for(var n=e.from,o=e.to,a=i[r++],s=t.doc.lineAt(o);o<s.to&&/\s/.test(s.slice(o-s.from,o+1-s.from));)o++;return n>s.from&&n<s.from+100&&!/\S/.test(s.slice(0,n))&&(n=s.from),{changes:{from:n,to:o,insert:xs.a.of(["",Al(t,a)])},range:Ca.EditorSelection.cursor(n+1+a)}}));return n(t.update(o,{scrollIntoView:!0})),!0}},{key:"Mod-a",run:function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0,head:t.doc.length},annotations:Ca.Transaction.userEvent.of("keyboarselection")})),!0}},{key:"Backspace",run:kl},{key:"Delete",run:bl},{key:"Mod-Backspace",mac:"Alt-Backspace",run:_l},{key:"Mod-Delete",mac:"Alt-Delete",run:Cl}].concat([{key:"Ctrl-b",run:Vs,shift:nl},{key:"Ctrl-f",run:qs,shift:rl},{key:"Ctrl-p",run:Ws,shift:al},{key:"Ctrl-n",run:Qs,shift:sl},{key:"Ctrl-a",run:Ks,shift:hl},{key:"Ctrl-e",run:Js,shift:fl},{key:"Ctrl-d",run:bl},{key:"Ctrl-h",run:kl},{key:"Ctrl-k",run:function(e){return ml(e,(function(t){var n=e.visualLineAt(t).to;return t<n?n:Math.max(e.state.doc.length,t+1)}))}},{key:"Alt-d",run:Cl},{key:"Ctrl-Alt-h",run:_l},{key:"Ctrl-o",run:function(e){var t=e.state,n=e.dispatch,r=t.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:xs.a.of(["",""])},range:Ca.EditorSelection.cursor(e.from)}}));return n(t.update(r,{scrollIntoView:!0,annotations:Ca.Transaction.userEvent.of("input")})),!0}},{key:"Ctrl-t",run:function(e){var t=e.state,n=e.dispatch,r=t.changeByRange((function(e){if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};var n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:r.findClusterBreak(n-r.from,!1)+r.from,o=n==r.to?n+1:r.findClusterBreak(n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(i,n))},range:Ca.EditorSelection.cursor(o)}}));return!r.changes.empty&&(n(t.update(r,{scrollIntoView:!0})),!0)}},{key:"Alt-f",run:function(e){return Bs(e,!0)},shift:function(e){return il(e,!0)}},{key:"Alt-b",run:function(e){return Bs(e,!1)},shift:function(e){return il(e,!1)}},{key:"Alt-<",run:dl},{key:"Alt->",run:pl},{key:"Ctrl-v",run:$s},{key:"Alt-v",run:Gs}].map((function(e){return{mac:e.key,run:e.run,shift:e.shift}}))),Il=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:function(e){return Ls(e,(function(t){return Xs(e.state,t,e.textDirection!=_a.Direction.LTR)}))},shift:function(e){return el(e,(function(t){return Xs(e.state,t,e.textDirection!=_a.Direction.LTR)}))}},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:function(e){return Ls(e,(function(t){return Xs(e.state,t,e.textDirection==_a.Direction.LTR)}))},shift:function(e){return el(e,(function(t){return Xs(e.state,t,e.textDirection==_a.Direction.LTR)}))}},{key:"Alt-ArrowUp",run:function(e){return Sl(e.state,e.dispatch,!1)}},{key:"Shift-Alt-ArrowUp",run:function(e){return xl(e.state,e.dispatch,!1)}},{key:"Alt-ArrowDown",run:function(e){return Sl(e.state,e.dispatch,!0)}},{key:"Shift-Alt-ArrowDown",run:function(e){return xl(e.state,e.dispatch,!0)}},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch,r=t.selection,i=null;return r.ranges.length>1?i=new Ca.EditorSelection([r.primary]):r.primary.empty||(i=new Ca.EditorSelection([Ca.EditorSelection.cursor(r.primary.head)])),!!i&&(n(Ns(t,i)),!0)}},{key:"Mod-l",run:function(e){var t=e.state,n=e.dispatch,r=Ol(t).map((function(e){var n=e.from,r=e.to;return Ca.EditorSelection.range(n,Math.min(r+1,t.doc.length))}));return n(t.update({selection:new Ca.EditorSelection(r),annotations:Ca.Transaction.userEvent.of("keyboardselection")})),!0}},{key:"Mod-i",run:function(e){var t=e.state,n=e.dispatch,r=Hs(t.selection,(function(e){for(var n,r=t.tree.resolve(e.head,1);!(r.start<e.from&&r.end>=e.to||r.end>e.to&&r.start<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return Ca.EditorSelection.range(r.end,r.start)}));return n(Ns(t,r)),!0}},{key:"Mod-[",run:function(e){var t=e.state;return(0,e.dispatch)(t.update(Tl(t,(function(e,n){var r=e.slice(0,Math.min(e.length,200)),i=/^\s*/.exec(r)[0];if(i){for(var o=Object(xs.d)(i,0,t.tabSize),a=Al(t,Math.max(0,o-t.indentUnit)),s=0;s<i.length&&s<a.length&&i.charCodeAt(s)==a.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+i.length,insert:a.slice(s)})}})))),!0}},{key:"Mod-]",run:function(e){var t=e.state;return(0,e.dispatch)(t.update(Tl(t,(function(e,n){n.push({from:e.from,insert:t.facet(Ca.EditorState.indentUnit)})})))),!0}},{key:"Mod-Alt-\\",run:function(e){var t=e.state,n=e.dispatch,r=Object.create(null),i=new Ca.IndentContext(t,(function(e){var t=r[e];return null==t?-1:t})),o=Tl(t,(function(e,n,o){var a=Pl(i,e.from);if(!(a<0)){var s=/^\s*/.exec(e.slice(0,Math.min(e.length,200)))[0],l=Al(t,a);(s!=l||o.from<e.from+s.length)&&(r[e.from]=a,n.push({from:e.from,to:e.from+s.length,insert:l}))}}));return o.changes.empty||n(t.update(o)),!0}},{key:"Shift-Mod-k",run:function(e){var t=e.state,n=t.changes(Ol(t).map((function(e){var n=e.from,r=e.to;return n>0?n--:r<t.doc.length&&r++,{from:n,to:r}}))),r=Hs(t.selection,(function(t){return e.moveVertically(t,!0)})).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0}),!0}},{key:"Shift-Mod-\\",run:function(e){return function(e,t,n){var r=!1,i=Hs(e.selection,(function(t){var n=Fs(e,t.head,-1)||Fs(e,t.head,1)||t.head>0&&Fs(e,t.head-1,1)||t.head<e.doc.length&&Fs(e,t.head+1,-1);if(!n||!n.end)return t;r=!0;var i=n.start.from==t.head?n.end.to:n.end.from;return Ca.EditorSelection.cursor(i)}));return!!r&&(t(Ns(e,i)),!0)}(e.state,e.dispatch)}}].concat(El),Ml={brackets:["(","[","{","'",'"'],before:")]}'\":;>"};function Dl(){return _a.EditorView.inputHandler.of(Hl)}function Rl(e){for(var t=0;t<"()[]{}<>".length;t+=2)if("()[]{}<>".charCodeAt(t)==e)return"()[]{}<>".charAt(t+1);return Object(xs.f)(e<128?e:e+1)}function Fl(e,t){return e.languageDataAt("closeBrackets",t)[0]||Ml}function Hl(e,t,n,r){var i=e.state.selection.primary;if(r.length>2||2==r.length&&1==Object(xs.c)(Object(xs.b)(r,0))||t!=i.from||n!=i.to)return!1;var o=function(e,t){var n,r=Fl(e,e.selection.primary.head),i=r.brackets||Ml.brackets,o=_createForOfIteratorHelper(i);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=Rl(Object(xs.b)(a,0));if(t==a)return s==a?ql(e,a,i.indexOf(a+a+a)>-1):jl(e,a,s,r.before||Ml.before);if(t==s)return Vl(e,0,s)}}catch(l){o.e(l)}finally{o.f()}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)}var Nl=[{key:"Backspace",run:function(e){var t=e.state,n=e.dispatch,r=Fl(t,t.selection.primary.head).brackets||Ml.brackets,i=null,o=t.changeByRange((function(e){if(e.empty){var n,o=(l=t.doc,u=e.head,c=l.sliceString(u-2,u),Object(xs.c)(Object(xs.b)(c,0))==c.length?c:c.slice(1)),a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s==o&&Ll(t.doc,e.head)==Rl(Object(xs.b)(s,0)))return{changes:{from:e.head-s.length,to:e.head+s.length},range:Ca.EditorSelection.cursor(e.head-s.length)}}}catch(h){a.e(h)}finally{a.f()}}var l,u,c;return{range:i=e}}));return i||n(t.update(o,{scrollIntoView:!0})),!i}}];function Ll(e,t){var n=e.sliceString(t,t+2);return n.slice(0,Object(xs.c)(Object(xs.b)(n,0)))}function jl(e,t,n,r){var i=null,o=e.changeByRange((function(o){if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],range:Ca.EditorSelection.range(o.anchor+t.length,o.head+t.length)};var a=Ll(e.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},range:Ca.EditorSelection.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0})}function Vl(e,t,n){var r=null,i=e.selection.ranges.map((function(t){return t.empty&&Ll(e.doc,t.head)==n?Ca.EditorSelection.cursor(t.head+n.length):r=t}));return r?null:e.update({selection:Ca.EditorSelection.create(i,e.selection.primaryIndex),scrollIntoView:!0})}function ql(e,t,n){var r=null,i=e.changeByRange((function(i){if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],range:Ca.EditorSelection.range(i.anchor+t.length,i.head+t.length)};var o=i.head,a=Ll(e.doc,o);if(a==t){if(Bl(e,o))return{changes:{insert:t+t,from:o},range:Ca.EditorSelection.cursor(o+t.length)};var s=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:Ca.EditorSelection.cursor(o+t.length*(s?3:1))}}if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&Bl(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},range:Ca.EditorSelection.cursor(o+t.length)};if(e.charCategorizer(o)(a)!=Ca.CharCategory.Word){var l=e.sliceDoc(o-1,o);if(l!=t&&e.charCategorizer(o)(l)!=Ca.CharCategory.Word)return{changes:{insert:t+t,from:o},range:Ca.EditorSelection.cursor(o+t.length)}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0})}function Bl(e,t){var n=e.tree.resolve(t+1);return n.parent&&n.start==t}var zl=Ca.Facet.define({combine:function(e){var t,n,r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=t||o.topContainer,n=n||o.bottomContainer}}catch(a){i.e(a)}finally{i.f()}return{topContainer:t,bottomContainer:n}}});function Xl(e){var t=[Ql,Yl];return e&&t.push(zl.of(e)),t}var Ul=Ca.Facet.define();function Wl(e,t){var n=e.plugin(Ql),r=e.state.facet(Ul).indexOf(t);return n&&r>-1?n.panels[r]:null}var Ql=_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.specs=t.state.facet(Ul),this.panels=this.specs.map((function(e){return e(t)}));var n=t.state.facet(zl);this.top=new Gl(t,!0,n.topContainer),this.bottom=new Gl(t,!1,n.bottomContainer),this.top.sync(this.panels.filter((function(e){return e.top}))),this.bottom.sync(this.panels.filter((function(e){return!e.top})));var r,i=_createForOfIteratorHelper(this.panels);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.dom.className+=" "+Zl(o),o.mount&&o.mount()}}catch(a){i.e(a)}finally{i.f()}}return _createClass(e,[{key:"update",value:function(e){var t=e.state.facet(zl);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Gl(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gl(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=e.state.facet(Ul);if(n!=this.specs){var r,i=[],o=[],a=[],s=[],l=_createForOfIteratorHelper(n);try{for(l.s();!(r=l.n()).done;){var u=r.value,c=void 0,h=this.specs.indexOf(u);h<0?(c=u(e.view),s.push(c)):(c=this.panels[h]).update&&c.update(e),i.push(c),(c.top?o:a).push(c)}}catch(y){l.e(y)}finally{l.f()}this.specs=n,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(var f=0,d=s;f<d.length;f++){var p=d[f];p.dom.className+=" "+Zl(p),p.mount&&p.mount()}}else{var v,g=_createForOfIteratorHelper(this.panels);try{for(g.s();!(v=g.n()).done;){var m=v.value;m.update&&m.update(e)}}catch(y){g.e(y)}finally{g.f()}}}},{key:"destroy",value:function(){this.top.sync([]),this.bottom.sync([])}}]),e}()).provide(_a.PluginField.scrollMargins,(function(e){return{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}}));function Zl(e){return Object(_a.themeClass)(e.style?"panel.".concat(e.style):"panel")}var Gl=function(){function e(t,n,r){_classCallCheck(this,e),this.view=t,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return _createClass(e,[{key:"sync",value:function(e){this.panels=e,this.syncDOM()}},{key:"syncDOM",value:function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=Object(_a.themeClass)(this.top?"panels.top":"panels.bottom"),this.dom.style[this.top?"top":"bottom"]="0";var e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}var t,n=this.dom.firstChild,r=_createForOfIteratorHelper(this.panels);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.dom.parentNode==this.dom){for(;n!=i.dom;)n=$l(n);n=n.nextSibling}else this.dom.insertBefore(i.dom,n)}}catch(o){r.e(o)}finally{r.f()}for(;n;)n=$l(n)}else this.dom&&(this.dom.remove(),this.dom=void 0)}},{key:"scrollMargin",value:function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-this.view.scrollDOM.getBoundingClientRect().top:this.view.scrollDOM.getBoundingClientRect().bottom-this.dom.getBoundingClientRect().top)}},{key:"syncClasses",value:function(){if(this.container&&this.classes!=this.view.themeClasses){var e,t=_createForOfIteratorHelper(this.classes.split(" "));try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&this.container.classList.remove(n)}}catch(a){t.e(a)}finally{t.f()}var r,i=_createForOfIteratorHelper((this.classes=this.view.themeClasses).split(" "));try{for(i.s();!(r=i.n()).done;){var o=r.value;o&&this.container.classList.add(o)}}catch(a){i.e(a)}finally{i.f()}}}}]),e}();function $l(e){var t=e.nextSibling;return e.remove(),t}var Yl=_a.EditorView.baseTheme({panels:{boxSizing:"border-box",position:"sticky",left:0,right:0},"panels@light":{backgroundColor:"#f5f5f5",color:"black"},"panels.top@light":{borderBottom:"1px solid silver"},"panels.bottom@light":{borderTop:"1px solid silver"},"panels@dark":{backgroundColor:"#333338",color:"white"}}),Kl="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},Jl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=arguments.length>4?arguments[4]:void 0;_classCallCheck(this,e),this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,i),this.bufferStart=r,this.normalize=o?function(e){return o(Kl(e))}:Kl,this.query=this.normalize(n)}return _createClass(e,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return this.buffer.charCodeAt(this.bufferPos)}},{key:"next",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=String.fromCharCode(e),n=this.bufferStart+this.bufferPos;for(this.bufferPos++;;){var r=this.peek();if(r<56320||r>=57344)break;this.bufferPos++,t+=String.fromCharCode(r)}for(var i=this.normalize(t),o=0,a=n;;o++){var s=i.charCodeAt(o),l=this.match(s,a);if(l)return this.value=l,this;if(o==i.length-1)break;a==n&&o<t.length&&t.charCodeAt(o)==s&&a++}}}},{key:"match",value:function(e,t){for(var n=null,r=0;r<this.matches.length;r+=2){var i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}]),e}(),eu=function(){function e(t,n,r){_classCallCheck(this,e),this.search=t,this.replace=n,this.caseInsensitive=r}return _createClass(e,[{key:"eq",value:function(e){return this.search==e.search&&this.replace==e.replace&&this.caseInsensitive==e.caseInsensitive}},{key:"cursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return new Jl(e,this.search,t,n,this.caseInsensitive?function(e){return e.toLowerCase()}:void 0)}},{key:"valid",get:function(){return!!this.search}}]),e}(),tu=Ca.StateEffect.define(),nu=Ca.StateEffect.define(),ru=Ca.StateField.define({create:function(){return new iu(new eu("","",!1),[])},update:function(e,t){var n,r=_createForOfIteratorHelper(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.is(tu)?e=new iu(i.value,e.panel):i.is(nu)&&(e=new iu(e.query,i.value?[gu]:[]))}}catch(o){r.e(o)}finally{r.f()}return e},provide:[Ul.nFrom((function(e){return e.panel}))]}),iu=function e(t,n){_classCallCheck(this,e),this.query=t,this.panel=n},ou=_a.Decoration.mark({class:Object(_a.themeClass)("searchMatch")}),au=_a.Decoration.mark({class:Object(_a.themeClass)("searchMatch.selected")}),su=_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.view=t,this.decorations=this.highlight(t.state.field(ru))}return _createClass(e,[{key:"update",value:function(e){var t=e.state.field(ru);(t!=e.prevState.field(ru)||e.docChanged||e.selectionSet)&&(this.decorations=this.highlight(t))}},{key:"highlight",value:function(e){var t=e.query;if(!e.panel.length||!t.valid)return _a.Decoration.none;for(var n=this.view.state,r=this.view.viewport,i=t.cursor(n.doc,Math.max(0,r.from-t.search.length),Math.min(r.to+t.search.length,n.doc.length)),o=new Ua.c,a=function(){var e=i.value,t=e.from,r=e.to,a=n.selection.ranges.some((function(e){return e.from==t&&e.to==r}));o.add(t,r,a?au:ou)};!i.next().done;)a();return o.finish()}}]),e}()).decorations();function lu(e){return function(t){var n=t.state.field(ru,!1);return n&&n.query.valid?e(t,n):mu(t)}}function uu(e,t,n){var r=n.cursor(e,t).next();return r.done&&(r=n.cursor(e,0,t+n.search.length-1).next()).done?null:r.value}var cu=lu((function(e,t){var n=e.state.selection.primary,r=n.from,i=n.to,o=uu(e.state.doc,e.state.selection.primary.from+1,t.query);return!(!o||o.from==r&&o.to==i||(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),Cu(e),0))}));function hu(e,t,n,r){for(var i=r;;){for(var o=Math.max(n,i-1e4-e.search.length),a=e.cursor(t,o,i),s=null;!a.next().done;)s=a.value;if(s)return s;if(o==n)return null;i-=1e4}}var fu=lu((function(e,t){var n=t.query,r=e.state,i=hu(n,r.doc,0,r.selection.primary.to-1)||hu(n,r.doc,r.selection.primary.from+1,r.doc.length);return!!i&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),Cu(e),!0)})),du=lu((function(e,t){for(var n=t.query.cursor(e.state.doc),r=[];!n.next().done;)r.push(Ca.EditorSelection.range(n.value.from,n.value.to));return!!r.length&&(e.dispatch({selection:Ca.EditorSelection.create(r)}),!0)})),pu=lu((function(e,t){var n=t.query,r=e.state,i=uu(r.doc,r.selection.primary.from,n);if(!i)return!1;var o,a=r.selection.primary,s=a.from,l=a.to,u=[];if(i.from==s&&i.to==l&&(u.push({from:i.from,to:i.to,insert:n.replace}),i=uu(r.doc,i.to,n)),i){var c=0==u.length||u[0].from>=i.to?0:i.to-i.from-n.replace.length;o={anchor:i.from-c,head:i.to-c}}return e.dispatch({changes:u,selection:o,scrollIntoView:!!o}),i&&Cu(e),!0})),vu=lu((function(e,t){for(var n=t.query,r=n.cursor(e.state.doc),i=[];!r.next().done;){var o=r.value,a=o.from,s=o.to;i.push({from:a,to:s,insert:n.replace})}return!!i.length&&(e.dispatch({changes:i}),!0)}));function gu(e){var t=e.state.field(ru).query;return{dom:wu({view:e,query:t,updateQuery:function(n){t.eq(n)||(t=n,e.dispatch({effects:tu.of(t)}))}}),mount:function(){this.dom.querySelector("[name=search]").select()},pos:80,style:"search"}}var mu=function(e){var t=e.state.field(ru,!1);if(t&&t.panel.length){var n=Wl(e,gu);if(!n)return!1;n.dom.querySelector("[name=search]").focus()}else e.dispatch({effects:nu.of(!0),reconfigure:t?void 0:{append:Su}});return!0},yu=function(e){var t=e.state.field(ru,!1);if(!t||!t.panel.length)return!1;var n=Wl(e,gu);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:nu.of(!1)}),!0},ku=[{key:"Mod-f",run:mu,scope:"editor search-panel"},{key:"F3",run:cu,shift:fu,scope:"editor search-panel"},{key:"Mod-g",run:cu,shift:fu,scope:"editor search-panel"},{key:"Escape",run:yu,scope:"editor search-panel"},{key:"Mod-Shift-l",run:function(e){var t=e.state,n=e.dispatch,r=t.selection;if(r.ranges.length>1||r.primary.empty)return!1;for(var i=r.primary,o=i.from,a=i.to,s=[],l=0,u=new Jl(t.doc,t.sliceDoc(o,a));!u.next().done;){if(s.length>1e3)return!1;u.value.from==o&&(l=s.length),s.push(Ca.EditorSelection.range(u.value.from,u.value.to))}return n(t.update({selection:new Ca.EditorSelection(s,l)})),!0}}];function bu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);if(t)for(var i in t){var o=t[i];"string"==typeof o?r.setAttribute(i,o):r[i]=o}var a,s=_createForOfIteratorHelper(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;r.appendChild("string"==typeof l?document.createTextNode(l):l)}}catch(u){s.e(u)}finally{s.f()}return r}function wu(e){function t(t){return e.view.state.phrase(t)}var n=bu("input",{value:e.query.search,placeholder:t("Find"),"aria-label":t("Find"),class:Object(_a.themeClass)("textfield"),name:"search",onchange:o,onkeyup:o}),r=bu("input",{value:e.query.replace,placeholder:t("Replace"),"aria-label":t("Replace"),class:Object(_a.themeClass)("textfield"),name:"replace",onchange:o,onkeyup:o}),i=bu("input",{type:"checkbox",name:"case",checked:!e.query.caseInsensitive,onchange:o});function o(){e.updateQuery(new eu(n.value,r.value,!i.checked))}function a(e,t,n){return bu("button",{class:Object(_a.themeClass)("button"),name:e,onclick:t},n)}return bu("div",{onkeydown:function(t){Object(_a.runScopeHandlers)(e.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==n?(t.preventDefault(),(t.shiftKey?fu:cu)(e.view)):13==t.keyCode&&t.target==r&&(t.preventDefault(),pu(e.view))}},[n,a("next",(function(){return cu(e.view)}),[t("next")]),a("prev",(function(){return fu(e.view)}),[t("previous")]),a("select",(function(){return du(e.view)}),[t("all")]),bu("label",null,[i,"match case"]),bu("br"),r,a("replace",(function(){return pu(e.view)}),[t("replace")]),a("replaceAll",(function(){return vu(e.view)}),[t("replace all")]),bu("button",{name:"close",onclick:function(){return yu(e.view)},"aria-label":t("close")},["\xd7"]),bu("div",{style:"position: absolute; top: -10000px","aria-live":"polite"})])}var _u=/[\s\.,:;?!]/;function Cu(e){var t=e.state.selection.primary,n=t.from,r=t.to,i=e.state.doc.lineAt(n).from,o=e.state.doc.lineAt(r).to,a=Math.max(i,n-30),s=Math.min(o,r+30),l=e.state.sliceDoc(a,s);if(a!=i)for(var u=0;u<30;u++)if(!_u.test(l[u+1])&&_u.test(l[u])){l=l.slice(u);break}if(s!=o)for(var c=l.length-1;c>l.length-30;c--)if(!_u.test(l[c-1])&&_u.test(l[c])){l=l.slice(0,c);break}var h=Wl(e,gu);h&&h.dom.contains(e.root.activeElement)&&(h.dom.querySelector("div[aria-live]").textContent=e.state.phrase("current match")+". "+l)}var Ou=_a.EditorView.baseTheme({"panel.search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button":{margin:".2em .5em .2em 0"},"& label":{fontSize:"80%"}},"searchMatch@light":{backgroundColor:"#ffa"},"searchMatch@dark":{backgroundColor:"#088"},"searchMatch.selected@light":{backgroundColor:"#fca"},"searchMatch.selected@dark":{backgroundColor:"#808"}}),Su=[ru,su,Xl(),Ou],xu=n("BVGc");_a.EditorView.baseTheme({"tooltip.autocomplete":{fontFamily:"monospace",overflowY:"auto",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}},"snippetField@light":{backgroundColor:"#ddd"},"snippetField@dark":{backgroundColor:"#333"},snippetFieldPosition:{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},completionIcon:{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},"completionIcon.function, completionIcon.method":{"&:after":{content:"'\u0192'"}},"completionIcon.class":{"&:after":{content:"'\u25cb'"}},"completionIcon.interface":{"&:after":{content:"'\u25cc'"}},"completionIcon.variable":{"&:after":{content:"'\ud835\udc65'"}},"completionIcon.constant":{"&:after":{content:"'\ud835\udc36'"}},"completionIcon.type":{"&:after":{content:"'\ud835\udc61'"}},"completionIcon.enum":{"&:after":{content:"'\u222a'"}},"completionIcon.property":{"&:after":{content:"'\u25a1'"}},"completionIcon.keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},"completionIcon.namespace":{"&:after":{content:"'\u25a2'"}},"completionIcon.text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Au,Pu=_a.Decoration.widget({widget:new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className=Object(_a.themeClass)("snippetFieldPosition"),e}}]),n}(_a.WidgetType))(null)}),Tu=_a.Decoration.mark({class:Object(_a.themeClass)("snippetField")}),Eu=function(){function e(t,n){_classCallCheck(this,e),this.ranges=t,this.active=n,this.deco=_a.Decoration.set(t.map((function(e){return(e.from==e.to?Pu:Tu).range(e.from,e.to)})))}return _createClass(e,[{key:"map",value:function(t){return new e(this.ranges.map((function(e){return e.map(t)})),this.active)}},{key:"selectionInsideField",value:function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field==t.active&&n.from<=e.from&&n.to>=e.to}))}))}}]),e}(),Iu=Ca.StateEffect.define({map:function(e,t){return e&&e.map(t)}}),Mu=Ca.StateEffect.define(),Du=Ca.StateField.define({create:function(){return null},update:function(e,t){var n,r=_createForOfIteratorHelper(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is(Iu))return i.value;if(i.is(Mu)&&e)return new Eu(e.ranges,i.value)}}catch(o){r.e(o)}finally{r.f()}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:[_a.EditorView.decorations.from((function(e){return e?e.deco:_a.Decoration.none}))]});function Ru(e){return function(t){var n=t.state,r=t.dispatch,i=n.field(Du,!1);if(!i||e<0&&0==i.active)return!1;var o,a,s=i.active+e,l=e>0&&!i.ranges.some((function(t){return t.field==s+e}));return r(n.update({selection:(o=i.ranges,a=s,Ca.EditorSelection.create(o.filter((function(e){return e.field==a})).map((function(e){return Ca.EditorSelection.range(e.from,e.to)})))),effects:Iu.of(l?null:new Eu(i.ranges,s))})),!0}}Object(Ca.precedence)(Object(_a.keymap)([{key:"Tab",run:Ru(1),shift:Ru(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Du,!1)&&(n(t.update({effects:Iu.of(null)})),!0)}}]),"override"),function(e){e[e.Start=0]="Start",e[e.Include=1]="Include",e[e.Fuzzy=2]="Fuzzy"}(Au||(Au={}));var Fu=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.state=t,this.pos=n,this.explicit=r,this.filterType=i,this.caseSensitive=o}return _createClass(e,[{key:"filter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.caseSensitive;if(n||e!=e.toLowerCase()||(t=t.toLowerCase()),this.filterType==Au.Start)return e.slice(0,t.length)==t;if(this.filterType==Au.Include)return e.indexOf(t)>-1;for(var r=0,i=0;r<t.length;r++){var o=e.indexOf(t[r],i);if(o<0)return!1;i=o+1}return!0}},{key:"tokenBefore",value:function(){var e=this.pos,t=null,n="",r=this.state.tree.resolve(this.pos,-1);return!r.firstChild&&r.start<this.pos&&(e=r.start,t=r.type,n=this.state.sliceDoc(e,this.pos)),{from:e,to:this.pos,text:n,type:t}}}]),e}();function Hu(e,t,n){if(!e.filterDownOn)return!1;var r=n?n.mapPos(e.to):e.to,i=t.selection.primary.head;return!(i<r||i>r+20)&&(i==r||e.filterDownOn.test(t.sliceDoc(r,i)))}function Nu(e,t){var n=t.state.sliceDoc(e.from,t.pos);return{from:e.from,to:t.pos,options:e.options.filter((function(e){return t.filter(e.label,n)})),filterDownOn:e.filterDownOn}}var Lu=function(){function e(t,n,r){_classCallCheck(this,e),this.sources=t,this.results=n,this.options=r}return _createClass(e,[{key:"map",value:function(t){return new e(this.sources,this.results.map((function(e){return e&&Object.assign(Object.assign({},e),{from:t.mapPos(e.from),to:t.mapPos(e.to)})})),this.options)}},{key:"refilterAll",value:function(t){var n=t.facet(ju),r=new Fu(t,t.selection.primary.head,!1,n.filterType,n.caseSensitive);return e.create(this.sources,this.results.map((function(e){return e&&Nu(e,r)})))}},{key:"from",get:function(){return this.results.reduce((function(e,t){return t?Math.min(e,t.from):e}),1e9)}},{key:"to",get:function(){return this.results.reduce((function(e,t){return t?Math.max(e,t.to):e}),0)}}],[{key:"create",value:function(t,n){for(var r,i=[],o=0;o<n.length;o++)if(r=n[o]){var a,s=_createForOfIteratorHelper(r.options);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.push({completion:l,source:o})}}catch(u){s.e(u)}finally{s.f()}}return new e(t,n,i.sort((function(e,t){var n=e.completion.label,r=t.completion.label;return n<r?-1:n==r?0:1})))}}]),e}(),ju=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,{activateOnTyping:!0,override:null,filterType:Au.Start,caseSensitive:!1})}});function Vu(e,t){return function(n){var r=n.state.field(Zu);if(!(r instanceof Yu)||Date.now()-r.timeStamp<qu)return!1;var i,o=1;"page"==t&&(i=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(o=Math.max(2,Math.floor(i.offsetHeight/i.firstChild.offsetHeight)));var a=r.selected+o*("up"==e?-1:1),s=r.result.options.length;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:Qu.of(a)}),!0}}var qu=75;function Bu(e){var t=e.state.field(Zu);return t instanceof Yu&&!(Date.now()-t.timeStamp<qu)&&(zu(e,t.result,t.selected),!0)}function zu(e,t,n){var r=t.options[n],i=r.completion.apply||r.completion.label,o=t.results[r.source];"string"==typeof i?e.dispatch({changes:{from:o.from,to:o.to,insert:i},selection:{anchor:o.from+i.length}}):i(e,o,r.completion)}var Xu=[{key:"Mod-Space",run:function(e){var t=e.state.field(Zu,!1);return!(void 0===t||t instanceof Yu||t instanceof Ku&&t.explicit||(e.dispatch({effects:Wu.of(!0)}),0))}},{key:"Escape",run:function(e){return null!=e.state.field(Zu,!1)&&(e.dispatch({effects:Wu.of(!1)}),!0)}}],Uu=Ca.StateEffect.define(),Wu=Ca.StateEffect.define(),Qu=Ca.StateEffect.define(),Zu=Ca.StateField.define({create:function(){return null},update:function(e,t){var n=t.annotation(Ca.Transaction.userEvent);"input"==n&&e instanceof Yu&&e.result.results.every((function(e){return!e||Hu(e,t.state,t.changes)}))?e=new Yu(e.result.map(t.changes).refilterAll(t.state),0,e.timeStamp):"input"==n&&(e||t.state.facet(ju).activateOnTyping)||"delete"==n&&e?e=new Ku(e instanceof Yu?e:e instanceof Ku?e.prev:null,e instanceof Ku&&e.explicit):e&&(t.selection||t.docChanged&&function(e,t){return t instanceof Yu?e.changes.touchesRange(t.result.from,t.result.to):e.changes.touchesRange(e.state.selection.primary.head)}(t,e))?e=null:t.docChanged&&e instanceof Yu&&(e=new Yu(e.result.map(t.changes),e.selected,e.timeStamp));var r,i=_createForOfIteratorHelper(t.effects);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.is(Uu)?e=new Yu(o.value,0):o.is(Wu)?e=o.value?new Ku(null,!0):null:o.is(Qu)&&e instanceof Yu&&(e=new Yu(e.result,o.value,e.timeStamp,e.id,e.tooltip))}}catch(a){i.e(a)}finally{i.f()}return e},provide:[xu.showTooltip.nFrom((function(e){return e instanceof Yu?e.tooltip:$u})),_a.EditorView.contentAttributes.from((function(e){return e instanceof Yu?e.attrs:Gu}))]}),Gu={"aria-autocomplete":"list"},$u=[],Yu=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cm-ac-"+Math.floor(1679616*Math.random()).toString(36),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[{pos:t.from,style:"autocomplete",create:Ju(t,i)}];_classCallCheck(this,e),this.result=t,this.selected=n,this.timeStamp=r,this.id=i,this.tooltip=o,this.attrs={"aria-autocomplete":"list","aria-activedescendant":this.id+"-"+this.selected,"aria-owns":this.id}},Ku=function e(t,n){_classCallCheck(this,e),this.prev=t,this.explicit=n};function Ju(e,t){return function(n){var r=function(e,t){var n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true");for(var r=0;r<e.options.length;r++){var i=e.options[r].completion,o=n.appendChild(document.createElement("li"));o.id=t+"-"+r,o.appendChild(document.createElement("div")).className=Object(_a.themeClass)("completionIcon"+(i.type?"."+i.type:"")),o.appendChild(document.createTextNode(i.label)),o.setAttribute("role","option")}return n}(e,t);function i(e){var t=e.state.field(Zu);t instanceof Yu&&function(e,t){for(var n=null,r=e.firstChild,i=0;r;r=r.nextSibling,i++)i==t?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");n&&function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(e,n)}(r,t.selected)}return r.addEventListener("click",(function(t){for(var r=0,i=t.target;i=i.previousSibling;)r++;r<e.options.length&&zu(n,e,r)})),{dom:r,mount:i,update:function(e){e.state.field(Zu)!=e.prevState.field(Zu)&&i(e.view)}}}}_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.view=t,this.stateVersion=0,this.debounce=-1}return _createClass(e,[{key:"update",value:function(e){var t=this;if(e.docChanged||e.selectionSet||e.prevState.field(Zu)!=e.state.field(Zu)){(e.docChanged||e.selectionSet)&&this.stateVersion++,this.debounce>-1&&clearTimeout(this.debounce);var n=e.state.field(Zu);this.debounce=n instanceof Ku?setTimeout((function(){return t.startUpdate(n)}),100):-1}}},{key:"startUpdate",value:function(e){var t=this;this.debounce=-1;var n=this.view,r=this.stateVersion;(function(e,t){var n=e.facet(ju),r=e.selection.primary.head,i=n.override?[n.override]:e.languageDataAt("autocomplete",r),o=new Fu(e,r,t.explicit,n.filterType,n.caseSensitive);return Promise.all(i.map((function(n){var r=t.prev?t.prev.result.sources.indexOf(n):-1,i=r<0?null:t.prev.result.results[r];return i&&Hu(i,e)&&Nu(i,o)||n(o)}))).then((function(e){return Lu.create(i,e)}))})(n.state,e).then((function(e){t.stateVersion==r&&0!=e.options.length&&n.dispatch({effects:Uu.of(e)})})).catch((function(e){return Object(_a.logException)(n.state,e)}))}}]),e}());var ec,tc=[{key:"Mod-/",run:function(e){return nc(oc(ec.Toggle),e)}},{key:"Alt-A",run:function(e){return nc(ic(ec.Toggle),e)}}];function nc(e,t){var n=e(t.state);return!!n&&(t.dispatch(n),!0)}function rc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.primary.head;return e.languageDataAt("commentTokens",t)[0]||{}}!function(e){e[e.Toggle=0]="Toggle",e[e.OnlyComment=1]="OnlyComment",e[e.OnlyUncomment=2]="OnlyUncomment"}(ec||(ec={}));var ic=function(e){return function(t){var n=rc(t);return n.block?new ac(n.block.open,n.block.close).toggle(e,t):null}},oc=function(e){return function(t){var n=rc(t);return n.line?new lc(n.line).toggle(e,t):null}},ac=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";_classCallCheck(this,e),this.open=t,this.close=n,this.margin=r}return _createClass(e,[{key:"toggle",value:function(e,t){var n=this,r=this.isSelectionCommented(t);if(null!==r){if(e!==ec.OnlyComment)return t.update({changes:r.map((function(e){var t=e.open,r=e.close;return[{from:t.pos-n.open.length,to:t.pos+t.margin},{from:r.pos-r.margin,to:r.pos+n.close.length}]}))})}else if(e!==ec.OnlyUncomment)return t.update(t.changeByRange((function(e){var t=(n.open+n.margin).length;return{changes:[{from:e.from,insert:n.open+n.margin},{from:e.to,insert:n.margin+n.close}],range:Ca.EditorSelection.range(e.anchor+t,e.head+t)}})));return null}},{key:"isSelectionCommented",value:function(e){var t,n=[],r=_createForOfIteratorHelper(e.selection.ranges);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=this.isRangeCommented(e,i);if(null===o)return null;n.push(o)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"isRangeCommented",value:function(e,t){var n,r,i=e.sliceDoc(t.from-sc,t.from),o=e.sliceDoc(t.to,t.to+sc),a=/\s*$/.exec(i)[0].length,s=/^\s*/.exec(o)[0].length,l=i.length-a;if(i.slice(l-this.open.length,l)==this.open&&o.slice(s,s+this.close.length)==this.close)return{open:{pos:t.from-a,margin:a&&1},close:{pos:t.to+s,margin:s&&1}};t.to-t.from<=2*sc?n=r=e.sliceDoc(t.from,t.to):(n=e.sliceDoc(t.from,t.from+sc),r=e.sliceDoc(t.to-sc,t.to));var u=/^\s*/.exec(n)[0].length,c=/\s*$/.exec(r)[0].length,h=r.length-c-this.close.length;return n.slice(u,u+this.open.length)==this.open&&r.slice(h,h+this.close.length)==this.close?{open:{pos:t.from+u+this.open.length,margin:/\s/.test(n.charAt(u+this.open.length))?1:0},close:{pos:t.to-c-this.close.length,margin:/\s/.test(r.charAt(h-1))?1:0}}:null}}]),e}(),sc=50,lc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";_classCallCheck(this,e),this.lineCommentToken=t,this.margin=n}return _createClass(e,[{key:"toggle",value:function(e,t){for(var n=[],r={},i=0;i<t.selection.ranges.length;i++){var o=uc(t.doc,t.selection.ranges[i]);n.push.apply(n,_toConsumableArray(o)),r[i]=o}var a=this.isRangeCommented(t,n);if(a.isRangeLineSkipped){if(e!=ec.OnlyComment){for(var s=[],l=0;l<t.selection.ranges.length;l++){var u,c=r[l],h=_createForOfIteratorHelper(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(!(c.length>1&&a.isLineSkipped[f.number])){var d=f.from+a.minCol,p=a.minCol+this.lineCommentToken.length,v=" "==f.slice(p,p+1)?1:0;s.push({from:d,to:d+this.lineCommentToken.length+v})}}}catch(_){h.e(_)}finally{h.f()}}return t.update({changes:s})}}else if(e!=ec.OnlyUncomment){for(var g=[],m=0;m<t.selection.ranges.length;m++){var y,k=r[m],b=_createForOfIteratorHelper(k);try{for(b.s();!(y=b.n()).done;){var w=y.value;(k.length<=1||!a.isLineSkipped[w.number])&&g.push({from:w.from+a.minCol,insert:this.lineCommentToken+this.margin})}}catch(_){b.e(_)}finally{b.f()}}return t.update({changes:g})}return null}},{key:"isRangeCommented",value:function(e,t){var n,r=1/0,i=!0,o=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,l=s.slice(0,Math.min(s.length,sc)),u=/^\s*/.exec(l)[0].length;(1==t.length||u<l.length)&&u<r&&(r=u),i&&(1==t.length||u<l.length)&&l.slice(u,u+this.lineCommentToken.length)!=this.lineCommentToken&&(i=!1),o[s.number]=u==l.length}}catch(c){a.e(c)}finally{a.f()}return{minCol:r,isRangeLineSkipped:i,isLineSkipped:o}}}]),e}();function uc(e,t){for(var n=e.lineAt(t.from),r=[];(n.from+n.length<t.to||n.from<=t.to&&t.to<=n.to)&&(r.push(n),n.number+1<=e.lines);)n=e.line(n.number+1);return r}function cc(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY}),r=e.state.doc.lineAt(n),i=n-r.from,o=i>2e3?-1:i==r.length?function(e,t){var n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Object(xs.d)(r.slice(0,n-r.from),0,e.state.tabSize);return{line:r.number,col:o,off:i}}function hc(e){var t=e||function(e){return e.altKey&&0==e.button};return _a.EditorView.mouseSelectionStyle.of((function(e,n){return t(n)?function(e,t){var n=cc(e,t),r=e.state.selection;return{update:function(e){if(e.docChanged){var t=e.changes.mapPos(e.prevState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get:function(t,i,o){var a=cc(e,t),s=function(e,t,n){var r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>2e3||n.off>2e3||t.col<0||n.col<0)for(var a=Math.min(t.off,n.off),s=Math.max(t.off,n.off),l=r;l<=i;l++){var u=e.doc.line(l);u.length<=s&&o.push(Ca.EditorSelection.range(u.from+a,u.to+s))}else for(var c=Math.min(t.col,n.col),h=Math.max(t.col,n.col),f=r;f<=i;f++){var d=e.doc.line(f),p=d.length>2e3?d.slice(0,2*h):d.slice(),v=Object(xs.e)(p,0,c,e.tabSize),g=Object(xs.e)(p,0,h,e.tabSize);v.leftOver||o.push(Ca.EditorSelection.range(d.from+v.offset,d.from+g.offset))}return o}(e.state,n,a);return s.length?Ca.EditorSelection.create(o?s.concat(r.ranges):s):r}}}(e,n):null}))}var fc="undefined"==typeof Symbol?"__goto-line":Symbol("goto-line");function dc(e){var t=document.createElement("form");t.innerHTML="<label>".concat(e.state.phrase("Go to line:")," <input class=").concat(Object(_a.themeClass)("textfield")," name=line></label>\n<button class=").concat(Object(_a.themeClass)("button")," type=submit>").concat(e.state.phrase("go"),"</button>");var n=t.querySelector("input");function r(){var t=parseInt(n.value,10);e.dispatch({reconfigure:_defineProperty({},fc,[pc]),selection:!isNaN(t)&&t>0&&t<=e.state.doc.lines?Ca.EditorSelection.cursor(e.state.doc.line(t).from):void 0,scrollIntoView:!0}),e.focus()}return t.addEventListener("keydown",(function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({reconfigure:{append:[pc]}}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())})),t.addEventListener("submit",r),{dom:t,style:"gotoLine",pos:-10}}var pc=_a.EditorView.baseTheme({"panel.gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),vc=[{key:"Alt-g",run:function(e){var t=Wl(e,dc);return t||(e.dispatch({reconfigure:{append:[Xl(),Ul.of(dc),pc]}}),t=Wl(e,dc)),t&&t.dom.querySelector("input").focus(),!0}}];function gc(){return[Sc,yc]}var mc=_a.Decoration.line({attributes:{class:Object(_a.themeClass)("activeLine")}}),yc=_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.decorations=this.getDeco(t)}return _createClass(e,[{key:"update",value:function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t,n=-1,r=[],i=_createForOfIteratorHelper(e.state.selection.ranges);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.empty){var a=e.visualLineAt(o.head);a.from>n&&(r.push(mc.range(a.from)),n=a.from)}}}catch(s){i.e(s)}finally{i.f()}return _a.Decoration.set(r)}}]),e}()).decorations(),kc={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},bc=Ca.Facet.define({combine:function(e){return Object(Ca.combineConfig)(e,kc,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function wc(e){var t=[Sc,Oc];return e&&t.push(bc.of(e)),t}var _c=_a.Decoration.mark({class:Object(_a.themeClass)("selectionMatch")}),Cc=_a.Decoration.mark({class:Object(_a.themeClass)("selectionMatch.main")}),Oc=_a.ViewPlugin.fromClass(function(){function e(t){_classCallCheck(this,e),this.decorations=this.getDeco(t)}return _createClass(e,[{key:"update",value:function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t=e.state.facet(bc),n=e.state,r=n.selection;if(r.ranges.length>1)return _a.Decoration.none;var i,o=r.primary,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return _a.Decoration.none;if(a=n.charCategorizer(o.head),!(i=function(e,t,n){for(var r=e.lineAt(t),i=t-r.from,o=t-r.from;i>0;){var a=r.findClusterBreak(i,!1);if(n(r.slice(a,i))!=Ca.CharCategory.Word)break;i=a}for(;o<r.length;){var s=r.findClusterBreak(o,!0);if(n(r.slice(o,s))!=Ca.CharCategory.Word)break;o=s}return i==o?null:r.slice(i,o)}(n.doc,o.head,a)))return _a.Decoration.none}else{var s=o.to-o.from;if(s<t.minSelectionLength||s>200)return _a.Decoration.none;if(!(i=n.sliceDoc(o.from,o.to).trim()))return _a.Decoration.none}var l,u=[],c=_createForOfIteratorHelper(e.visibleRanges);try{for(c.s();!(l=c.n()).done;)for(var h=l.value,f=new Jl(n.doc,i,h.from,h.to);!f.next().done;){var d=f.value,p=d.from,v=d.to;if((!a||(0==p||a(n.sliceDoc(p-1,p))!=Ca.CharCategory.Word)&&(v==n.doc.length||a(n.sliceDoc(v,v+1))!=Ca.CharCategory.Word))&&(a&&p<=o.from&&v>=o.to?u.push(Cc.range(p,v)):(p>=o.to||v<=o.from)&&u.push(_c.range(p,v)),u.length>t.maxMatches))return _a.Decoration.none}}catch(g){c.e(g)}finally{c.f()}return _a.Decoration.set(u)}}]),e}()).decorations(),Sc=_a.EditorView.baseTheme({"activeLine@light":{backgroundColor:"#e8f2ff"},"activeLine@dark":{backgroundColor:"#223039"},selectionMatch:{backgroundColor:"#cfb"}}),xc=n("mmpu"),Ac=function e(t,n,r){_classCallCheck(this,e),this.from=t,this.to=n,this.diagnostic=r},Pc=function e(t,n,r){_classCallCheck(this,e),this.diagnostics=t,this.panel=n,this.selected=r};function Tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=null;return e.between(n,e.length,(function(e,n,i){var o=i.spec;if(!t||o.diagnostic==t)return r=new Ac(e,n,o.diagnostic),!1})),r}var Ec=Ca.StateEffect.define(),Ic=Ca.StateEffect.define(),Mc=Ca.StateEffect.define(),Dc=Ca.StateField.define({create:function(){return new Pc(_a.Decoration.none,null,null)},update:function(e,t){if(t.docChanged){var n=e.diagnostics.map(t.changes),r=null;if(e.selected){var i=t.changes.mapPos(e.selected.from,1);r=Tc(n,e.selected.diagnostic,i)||Tc(n,null,i)}e=new Pc(n,e.panel,r)}var o,a=_createForOfIteratorHelper(t.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(Ec)){var l=_a.Decoration.set(s.value.map((function(e){return e.from<e.to?_a.Decoration.mark({attributes:{class:Object(_a.themeClass)("lintRange."+e.severity)},diagnostic:e}).range(e.from,e.to):_a.Decoration.widget({widget:new jc(e),diagnostic:e}).range(e.from)})));e=new Pc(l,e.panel,Tc(l))}else s.is(Ic)?e=new Pc(e.diagnostics,s.value?qc.open:null,e.selected):s.is(Mc)&&(e=new Pc(e.diagnostics,e.panel,s.value))}}catch(u){a.e(u)}finally{a.f()}return e},provide:[Ul.nFrom((function(e){return e.panel?[e.panel]:[]})),_a.EditorView.decorations.from((function(e){return e.diagnostics}))]}),Rc=_a.Decoration.mark({class:Object(_a.themeClass)("lintRange.active")});function Fc(e,t){var n=e.state.field(Dc).diagnostics,r=[],i=2e8,o=0;return n.between(0,e.state.doc.length,(function(e,n,a){var s=a.spec;t(e,n)&&(r.push(s.diagnostic),i=Math.min(e,i),o=Math.max(n,o))})),r.length?{pos:i,end:o,style:"lint",create:function(){var t,n=document.createElement("ul"),i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.appendChild(Lc(e,o))}}catch(a){i.e(a)}finally{i.f()}return{dom:n}}}:null}var Hc=function(e){var t=e.state.field(Dc,!1);return!(!t||!t.panel||(e.dispatch({effects:Ic.of(!1)}),0))},Nc=[{key:"Mod-Shift-m",run:function(e){var t,n=e.state.field(Dc,!1);n&&n.panel||e.dispatch({effects:Ic.of(!0),reconfigure:(t=e.state,t.field(Dc,!1)?void 0:{append:[Dc,_a.EditorView.decorations.compute([Dc],(function(e){var t=e.field(Dc),n=t.selected,r=t.panel;return n&&r&&n.from!=n.to?_a.Decoration.set([Rc.range(n.from,n.to)]):_a.Decoration.none})),Xl(),Object(xu.hoverTooltip)(Fc),zc]})});var r=Wl(e,qc.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:function(e){var t=e.state.field(Dc,!1);if(!t)return!1;var n=e.state.selection.primary,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)||(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}];function Lc(e,t){var n=document.createElement("li");if(n.textContent=t.message,n.className=Object(_a.themeClass)("diagnostic."+t.severity),t.actions){var r,i=_createForOfIteratorHelper(t.actions);try{var o=function(){var i=r.value,o=n.appendChild(document.createElement("button"));o.className=Object(_a.themeClass)("diagnosticAction"),o.textContent=i.name,o.onclick=o.onmousedown=function(n){n.preventDefault();var r=Tc(e.state.field(Dc).diagnostics,t);r&&i.apply(e,r.from,r.to)}};for(i.s();!(r=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}return n}var jc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className=Object(_a.themeClass)("lintPoint."+this.value.severity),e}}]),n}(_a.WidgetType),Vc=function e(t,n){_classCallCheck(this,e),this.diagnostic=n,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Lc(t,n),this.dom.setAttribute("role","option")},qc=function(){function e(t){var n=this;_classCallCheck(this,e),this.view=t,this.items=[],this.dom=document.createElement("div"),this.list=this.dom.appendChild(document.createElement("ul")),this.list.tabIndex=0,this.list.setAttribute("role","listbox"),this.list.setAttribute("aria-label",this.view.state.phrase("Diagnostics")),this.list.addEventListener("keydown",(function(e){27==e.keyCode?(e.preventDefault(),Hc(n.view),n.view.focus()):38==e.keyCode?(e.preventDefault(),n.moveSelection((n.selectedIndex-1+n.items.length)%n.items.length)):40==e.keyCode?(e.preventDefault(),n.moveSelection((n.selectedIndex+1)%n.items.length)):36==e.keyCode?(e.preventDefault(),n.moveSelection(0)):35==e.keyCode?(e.preventDefault(),n.moveSelection(n.items.length-1)):13==e.keyCode&&(e.preventDefault(),n.view.focus())})),this.list.addEventListener("click",(function(e){for(var t=0;t<n.items.length;t++)n.items[t].dom.contains(e.target)&&n.moveSelection(t)}));var r=this.dom.appendChild(document.createElement("button"));r.setAttribute("name","close"),r.setAttribute("aria-label",this.view.state.phrase("close")),r.textContent="\xd7",r.addEventListener("click",(function(){return Hc(n.view)})),this.update()}return _createClass(e,[{key:"update",value:function(){var e=this,t=this.view.state.field(Dc),n=t.diagnostics,r=t.selected,i=0,o=!1,a=null;for(n.between(0,this.view.state.doc.length,(function(t,n,s){for(var l,u=s.spec,c=-1,h=i;h<e.items.length;h++)if(e.items[h].diagnostic==u.diagnostic){c=h;break}c<0?(l=new Vc(e.view,u.diagnostic),e.items.splice(i,0,l),o=!0):(l=e.items[c],c>i&&(e.items.splice(i,c-i),o=!0)),r&&l.diagnostic==r.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),a=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new Vc(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:function(){return{sel:a.dom.getBoundingClientRect(),panel:e.list.getBoundingClientRect()}},write:function(t){var n=t.sel,r=t.panel;n.top<r.top?e.list.scrollTop-=r.top-n.top:n.bottom>r.bottom&&(e.list.scrollTop+=n.bottom-r.bottom)}})):this.items.length||this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}},{key:"sync",value:function(){var e=this.list.firstChild;function t(){var t=e;e=t.nextSibling,t.remove()}var n,r=_createForOfIteratorHelper(this.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e)}}catch(o){r.e(o)}finally{r.f()}for(;e;)t();this.list.firstChild||this.list.appendChild(Lc(this.view,{severity:"info",message:this.view.state.phrase("No diagnostics")}))}},{key:"moveSelection",value:function(e){if(0!=this.items.length){var t=Tc(this.view.state.field(Dc).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Mc.of(t)})}}},{key:"selectedIndex",get:function(){var e=this.view.state.field(Dc).selected;if(!e)return-1;for(var t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}},{key:"style",get:function(){return"lint"}}],[{key:"open",value:function(t){return new e(t)}}]),e}();function Bc(e){return"url('data:image/svg+xml;base64,".concat(btoa('<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">\n    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>\n  </svg>')),"')")}var zc=_a.EditorView.baseTheme({diagnostic:{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block"},"diagnostic.error":{borderLeft:"5px solid #d11"},"diagnostic.warning":{borderLeft:"5px solid orange"},"diagnostic.info":{borderLeft:"5px solid #999"},diagnosticAction:{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},lintRange:{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},"lintRange.error":{backgroundImage:Bc("#d11")},"lintRange.warning":{backgroundImage:Bc("orange")},"lintRange.info":{backgroundImage:Bc("#999")},"lintRange.active":{backgroundColor:"#fec"},lintPoint:{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},"lintPoint.warning":{"&:after":{borderBottomColor:"orange"}},"lintPoint.info":{"&:after":{borderBottomColor:"#999"}},"panel.lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd"},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}},"tooltip.lint":{padding:0,margin:0}});ss(),Object(_a.highlightSpecialChars)(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Aa.of(e)}(),Os(),Object(_a.multipleSelections)(),Ds(),Dl(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ju.of(e),Object(xu.tooltips)(),Object(Ca.precedence)(Object(_a.keymap)([{key:"ArrowDown",run:Vu("down")},{key:"ArrowUp",run:Vu("up")},{key:"PageDown",run:Vu("down","page")},{key:"PageUp",run:Vu("up","page")},{key:"Enter",run:Bu}]),"override")}(),hc(),gc(),wc(),Object(_a.keymap)([].concat(Nl,_toConsumableArray(Il),ku,Xa,ms,tc,vc,Xu,Nc));var Xc,Uc,Wc,Qc=n("f7Ao"),Zc=n("lf1/"),Gc=((Wc=function(){function e(){_classCallCheck(this,e),this.basicSetup=[ss(),Object(_a.highlightSpecialChars)(),Os(),Object(_a.multipleSelections)(),Ds(),Dl(),Object(Zc.autocomplete)({filterType:Zc.FilterType.Fuzzy}),hc(),gc(),wc(),Object(_a.keymap)([].concat(Nl,_toConsumableArray(Il),ku,ms,tc,vc,_toConsumableArray(Zc.autocompleteKeymap),Nc))],this.promQLHighlightMaterialTheme=Object(xc.highlighter)({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},invalid:{color:"#f00"},keyword:{color:"#C792EA"},operator:{color:"#89DDFF"},atom:{color:"#F78C6C"},number:{color:"#FF5370"},string:{color:"#99b867"},"regexp, escape":{color:"#e40"},"variableName definition":{color:"#f07178"},labelName:{color:"#f07178"},typeName:{color:"#085"},functionName:{color:"#C792EA"},"propertyName definition":{color:"#00c"},comment:{color:"#546E7A"},meta:{color:"#FFCB6B"}})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=new Qc.PromQLExtension;e.setComplete({url:"",enableLSP:!1,offline:!0,hybrid:{fuzzyPre:'<b style="color: brown">',fuzzyPost:"</b>"}}),new _a.EditorView({state:Ca.EditorState.create({extensions:[this.basicSetup,e.asExtension(),this.promQLHighlightMaterialTheme]}),parent:document.getElementById("editor")})}}]),e}()).\u0275fac=function(e){return new(e||Wc)},Wc.\u0275cmp=(Uc={type:Wc,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","editor"]],template:function(e,t){1&e&&(Gr(0,"h3"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=mt(),r=yt(),i=e+19,o=r.firstCreatePass?Rn(r,n[6],e,3,null,null):r.data[i],a=n[i]=function(e,t){return at(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);gr(r,n,a,o),bt(o,!1)}(1,"CodeMirror Mode PromQL"),$r(),Gr(2,"div",0,void 0),$r())},styles:[""]},U((function(){var e=Uc.type,t=e.prototype,n={},r={type:e,providersResolver:null,decls:Uc.decls,vars:Uc.vars,factory:null,template:Uc.template||null,consts:Uc.consts||null,ngContentSelectors:Uc.ngContentSelectors,hostBindings:Uc.hostBindings||null,hostVars:Uc.hostVars||0,hostAttrs:Uc.hostAttrs||null,contentQueries:Uc.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:Uc.exportAs||null,onChanges:null,onInit:t.ngOnInit||null,doCheck:t.ngDoCheck||null,afterContentInit:t.ngAfterContentInit||null,afterContentChecked:t.ngAfterContentChecked||null,afterViewInit:t.ngAfterViewInit||null,afterViewChecked:t.ngAfterViewChecked||null,onDestroy:t.ngOnDestroy||null,onPush:Uc.changeDetection===Be.OnPush,directiveDefs:null,pipeDefs:null,selectors:Uc.selectors||Ue,viewQuery:Uc.viewQuery||null,features:Uc.features||null,data:Uc.data||{},encapsulation:Uc.encapsulation||ze.Emulated,id:"c",styles:Uc.styles||Ue,_:null,setInput:null,schemas:Uc.schemas||null,tView:null},i=Uc.directives,o=Uc.features,a=Uc.pipes;return r.id+=We++,r.inputs=Ye(Uc.inputs,n),r.outputs=Ye(Uc.outputs),o&&o.forEach((function(e){return e(r)})),r.directiveDefs=i?function(){return("function"==typeof i?i():i).map(Qe)}:null,r.pipeDefs=a?function(){return("function"==typeof a?a():a).map(Ze)}:null,r}))),Wc),$c=((Xc=function e(){_classCallCheck(this,e)}).\u0275mod=$e({type:Xc,bootstrap:[Gc]}),Xc.\u0275inj=ee({factory:function(e){return new(e||Xc)},providers:[],imports:[[wa]]}),Xc);(function(){if(vn)throw new Error("Cannot enable prod mode after platform setup.");pn=!1})(),ka().bootstrapModule($c).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zuR4:function(e,t,n){"use strict";var r=n("xTJ+"),i=n("HSsa"),o=n("CgaS"),a=n("SntB");function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=s(n("JEQr"));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n("endd"),l.CancelToken=n("jfS+"),l.isCancel=n("Lmem"),l.all=function(e){return Promise.all(e)},l.spread=n("DfZB"),e.exports=l,e.exports.default=l}},[[0,0]]]);